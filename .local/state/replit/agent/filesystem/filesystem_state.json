{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Christ Collective - Replit Project Documentation\n\n## Overview\n\nChrist Collective is a full-stack web application designed to unite Christians worldwide through faith, community, and purpose-driven collaboration. The platform facilitates donations to charitable campaigns, business networking among Christian professionals, and sponsorship opportunities for content creators. Built with modern web technologies, the application provides a comprehensive solution for community building, fundraising, and professional connections within the Christian community.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript\n- **Build Tool**: Vite for fast development and optimized production builds\n- **Styling**: Tailwind CSS with shadcn/ui component library\n- **Routing**: Wouter for lightweight client-side routing\n- **State Management**: TanStack Query (React Query) for server state management\n- **UI Components**: Radix UI primitives with custom styling\n- **Forms**: React Hook Form with Zod validation\n- **Payments**: Stripe integration for secure payment processing\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js framework\n- **Language**: TypeScript with ES modules\n- **Authentication**: Passport.js with local strategy and session-based auth\n- **Session Storage**: Express sessions with PostgreSQL store\n- **API Integration**: YouTube, TikTok, and Instagram APIs for content creator verification\n- **Email Service**: Nodemailer with multiple provider support\n- **File Uploads**: Multer for handling media uploads\n\n### Data Storage\n- **Database**: PostgreSQL with Neon serverless hosting\n- **ORM**: Drizzle ORM with schema-first approach\n- **Migrations**: Drizzle Kit for database schema management\n- **Connection**: Connection pooling with @neondatabase/serverless\n\n## Key Components\n\n### Authentication System\n- Local username/password authentication with bcrypt hashing\n- Session-based authentication with persistent cookies\n- Admin role management for platform administration\n- Profile management with user preferences and settings\n\n### Campaign Management\n- Create, edit, and manage donation campaigns\n- Image and video upload support with media galleries\n- Goal tracking with real-time progress updates\n- Admin approval workflow for campaign publication\n- Search and filtering capabilities\n\n### Payment Processing\n- Stripe integration for secure payment handling\n- Support for one-time donations with optional tips\n- Membership tier subscriptions for business networking\n- Payment intent confirmation and success handling\n\n### Business Networking\n- Business profile creation and management\n- Membership tier system with different access levels\n- Industry-based filtering and search functionality\n- Professional networking features\n\n### Content Creator Platform\n- Creator profile management with social media integration\n- Sponsorship application system\n- Multi-platform support (YouTube, TikTok, Instagram)\n- Real-time social media data fetching and verification\n\n### Administrative Dashboard\n- Campaign approval and management\n- User administration and role management\n- Donation tracking and analytics\n- Sponsorship application review\n\n## Data Flow\n\n### User Registration/Authentication Flow\n1. User submits registration form with validation\n2. Password is hashed using scrypt algorithm\n3. User record is created in PostgreSQL database\n4. Session is established with secure cookie\n5. User is redirected to appropriate dashboard\n\n### Campaign Creation Flow\n1. Authenticated user creates campaign with media uploads\n2. Campaign data is validated and stored with pending status\n3. Admin receives notification for review\n4. Upon approval, campaign becomes publicly visible\n5. Users can search and donate to approved campaigns\n\n### Donation Processing Flow\n1. User selects campaign and enters donation amount\n2. Stripe payment intent is created with campaign details\n3. Payment form is rendered with Stripe Elements\n4. Payment confirmation triggers donation record creation\n5. Success page displays with donation receipt\n\n### Social Media Integration Flow\n1. Creator submits social media profile URLs\n2. Backend services extract usernames and fetch profile data\n3. API calls to respective platforms retrieve follower counts and metrics\n4. Data is cached and displayed in creator profiles\n5. Periodic updates refresh social media statistics\n\n## External Dependencies\n\n### Payment Processing\n- **Stripe**: Payment processing, subscription management\n- **Stripe Elements**: Secure payment form components\n\n### Social Media APIs\n- **YouTube Data API**: Channel and video information retrieval\n- **Apify**: TikTok and Instagram data scraping services\n- **Custom scrapers**: Fallback data collection methods\n\n### Email Services\n- **Nodemailer**: Email sending functionality\n- **SendGrid**: Production email delivery service\n- **Ethereal**: Development email testing\n\n### UI and Styling\n- **Tailwind CSS**: Utility-first CSS framework\n- **shadcn/ui**: Pre-built accessible component library\n- **Radix UI**: Headless UI primitives\n- **Lucide React**: Icon library\n\n### Development Tools\n- **TypeScript**: Type safety and developer experience\n- **ESLint/Prettier**: Code formatting and linting\n- **Vite**: Development server and build tool\n\n## Deployment Strategy\n\n### Development Environment\n- Local development with hot module replacement\n- SQLite/PostgreSQL for local database testing\n- Environment variable configuration for API keys\n- Vite dev server with proxy configuration\n\n### Production Deployment\n- Build process generates optimized static assets\n- Express server serves both API and static files\n- Database migrations run automatically on deployment\n- Environment-specific configuration management\n\n### Database Management\n- Schema versioning with Drizzle migrations\n- Automated backup and recovery procedures\n- Connection pooling for performance optimization\n- Query optimization and indexing strategies\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## Changelog\n\nChangelog:\n- July 02, 2025. Initial setup\n- July 21, 2025. Consolidated mobile and desktop profile pages into single unified creator profile page at `/profile` route with creator-focused layout, social platform integration, privacy settings, and mobile-responsive design\n- July 25, 2025. Added optional user type selection during signup with smart guidance system. Users can select Creator, Business Owner, or Ministry roles, which automatically directs them to appropriate onboarding flows with personalized welcome messages and feature guidance.\n- July 31, 2025. Implemented role-based create capabilities with different permissions for regular users, creators, and ministry profiles. Regular users can create campaigns, profiles, and posts. Creator profiles gain exclusive access to share content from YouTube, TikTok, and Instagram via API integration. Ministry profiles have full access to all features plus exclusive event creation capabilities.\n- August 02, 2025. **CRITICAL BUG IDENTIFIED**: Follow system incorrectly links all profiles from same user account - each profile type (User, Business, Ministry) should be sovereign and followed independently. Added businessFollows table to schema and began implementing separate follow systems for each profile type to ensure sovereignty.\n- August 12, 2025. **AUTOMATIC FOLLOWING SYSTEM IMPLEMENTED**: All users (new and existing) now automatically follow Christ Collective Ministry profile by default. New users are automatically added to follow Christ Collective Ministry during registration. Existing users were bulk-updated via SQL to ensure 100% of community members receive ministry content updates. This ensures maximum reach for organizational announcements and community building content.\n- August 14, 2025. **COMPREHENSIVE NOTIFICATION SYSTEM COMPLETED**: Implemented complete real-time notification system with database triggers for all user interactions. System creates notifications for follows, likes, comments, and chat messages. Includes smart self-notification prevention (users don't get notified for their own actions), personalized notification messages, proper icon system, and test functionality. All notifications display in unified notification center with read/unread status and bulk management capabilities.\n- August 18, 2025. **MESSAGING SYSTEM FIXES AND UI IMPROVEMENTS**: Fixed critical message sending bug where API requests used incorrect 'body' property instead of 'data', preventing messages from being sent. Updated chat navigation from window.location.href to proper wouter routing for better performance. Enhanced direct chat UI to match group chat styling with consistent width and replaced generic chat icons with user profile pictures for better visual identification.","size_bytes":8824},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1))\",\n          \"2\": \"hsl(var(--chart-2))\",\n          \"3\": \"hsl(var(--chart-3))\",\n          \"4\": \"hsl(var(--chart-4))\",\n          \"5\": \"hsl(var(--chart-5))\",\n        },\n        sidebar: {\n          DEFAULT: \"hsl(var(--sidebar-background))\",\n          foreground: \"hsl(var(--sidebar-foreground))\",\n          primary: \"hsl(var(--sidebar-primary))\",\n          \"primary-foreground\": \"hsl(var(--sidebar-primary-foreground))\",\n          accent: \"hsl(var(--sidebar-accent))\",\n          \"accent-foreground\": \"hsl(var(--sidebar-accent-foreground))\",\n          border: \"hsl(var(--sidebar-border))\",\n          ring: \"hsl(var(--sidebar-ring))\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2787},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n});\n","size_bytes":894},"server/auth.ts":{"content":"import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Express } from \"express\";\nimport session from \"express-session\";\nimport { scrypt, randomBytes, timingSafeEqual } from \"crypto\";\nimport { promisify } from \"util\";\nimport { storage } from \"./storage\";\nimport { User as SelectUser } from \"@shared/schema\";\nimport createMemoryStore from \"memorystore\";\n\ndeclare global {\n  namespace Express {\n    interface User extends SelectUser {}\n  }\n}\n\nconst scryptAsync = promisify(scrypt);\n\nasync function hashPassword(password: string) {\n  const salt = randomBytes(16).toString(\"hex\");\n  const buf = (await scryptAsync(password, salt, 64)) as Buffer;\n  return `${buf.toString(\"hex\")}.${salt}`;\n}\n\nasync function comparePasswords(supplied: string, stored: string) {\n  const [hashed, salt] = stored.split(\".\");\n  const hashedBuf = Buffer.from(hashed, \"hex\");\n  const suppliedBuf = (await scryptAsync(supplied, salt, 64)) as Buffer;\n  return timingSafeEqual(hashedBuf, suppliedBuf);\n}\n\nexport function setupAuth(app: Express) {\n  const MemoryStore = createMemoryStore(session);\n  \n  const sessionSettings: session.SessionOptions = {\n    secret: process.env.SESSION_SECRET || 'christ-collective-secret-2024',\n    resave: true, // Force session save even if unmodified\n    saveUninitialized: true, // Save uninitialized sessions\n    rolling: true, // Reset expiration on each request\n    store: new MemoryStore({\n      checkPeriod: 86400000, // prune expired entries every 24h\n    }),\n    cookie: {\n      httpOnly: false, // Allow JavaScript access for debugging\n      secure: false, // Set to true in production with HTTPS\n      maxAge: 365 * 24 * 60 * 60 * 1000, // 1 year - persistent until explicit logout\n      sameSite: 'lax', // Allow cross-site requests for better compatibility\n      path: '/', // Ensure cookie is available for all paths\n    },\n  };\n\n  app.set(\"trust proxy\", 1);\n  app.use(session(sessionSettings));\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  passport.use(\n    new LocalStrategy(async (username, password, done) => {\n      if (!username) {\n        return done(null, false);\n      }\n      \n      // Try to find user by username first (exact match), then case-insensitive, then by email\n      let user = await storage.getUserByUsername(username);\n      if (!user) {\n        // Try case-insensitive username search\n        user = await storage.getUserByUsernameInsensitive(username);\n      }\n      if (!user) {\n        user = await storage.getUserByEmail(username);\n      }\n      \n      if (!user || !user.password || !(await comparePasswords(password, user.password))) {\n        return done(null, false);\n      } else {\n        return done(null, user);\n      }\n    }),\n  );\n\n  passport.serializeUser((user, done) => done(null, user.id));\n  passport.deserializeUser(async (id: string, done) => {\n    const user = await storage.getUser(id);\n    done(null, user);\n  });\n\n  app.post(\"/api/register\", async (req, res, next) => {\n    try {\n      const { username, email, password, firstName, lastName, phone, userType } = req.body;\n      \n      if (!username || !password || !phone) {\n        return res.status(400).json({ message: \"Username, password, and phone number are required\" });\n      }\n\n      const existingUser = await storage.getUserByUsername(username);\n      if (existingUser) {\n        return res.status(400).json({ message: \"Username already exists\" });\n      }\n\n      if (email) {\n        const existingEmail = await storage.getUserByEmail(email);\n        if (existingEmail) {\n          return res.status(400).json({ message: \"Email already exists\" });\n        }\n      }\n\n      const user = await storage.createUser({\n        id: `user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        username,\n        email: email || null,\n        password: await hashPassword(password),\n        firstName: firstName || null,\n        lastName: lastName || null,\n        phone: phone,\n        userType: userType || null,\n      });\n\n      // Automatically follow Christ Collective Ministry\n      await storage.autoFollowChristCollectiveMinistry(user.id);\n\n      req.login(user, (err) => {\n        if (err) return next(err);\n        res.status(201).json({ \n          id: user.id, \n          username: user.username, \n          email: user.email,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          phone: user.phone,\n          isAdmin: user.isAdmin \n        });\n      });\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      res.status(500).json({ message: \"Registration failed\" });\n    }\n  });\n\n  app.get(\"/api/login\", (req, res) => {\n    // Redirect to the auth page for login\n    res.redirect(\"/auth\");\n  });\n\n  app.post(\"/api/login\", (req, res, next) => {\n    // Transform usernameOrEmail to username for passport compatibility\n    if (req.body.usernameOrEmail) {\n      req.body.username = req.body.usernameOrEmail;\n    }\n    next();\n  }, (req, res, next) => {\n    passport.authenticate(\"local\", (err: any, user: any, info: any) => {\n      if (err) {\n        console.error(\"Passport authentication error:\", err);\n        return res.status(500).json({ message: \"Authentication error\" });\n      }\n      if (!user) {\n        console.log(\"Authentication failed for user:\", req.body.username);\n        return res.status(401).json({ message: \"Incorrect password\" });\n      }\n      req.logIn(user, (err) => {\n        if (err) {\n          console.error(\"Login error:\", err);\n          return res.status(500).json({ message: \"Login failed\" });\n        }\n        const userData = user as SelectUser;\n        res.status(200).json({ \n          id: userData.id, \n          username: userData.username, \n          email: userData.email,\n          firstName: userData.firstName,\n          lastName: userData.lastName,\n          phone: userData.phone,\n          isAdmin: userData.isAdmin \n        });\n      });\n    })(req, res, next);\n  });\n\n  // Handle both GET and POST logout requests\n  app.get(\"/api/logout\", (req, res, next) => {\n    req.logout((err) => {\n      if (err) return next(err);\n      req.session.destroy((err) => {\n        if (err) return next(err);\n        res.clearCookie('connect.sid');\n        res.redirect(\"/\");\n      });\n    });\n  });\n\n  app.post(\"/api/logout\", (req, res, next) => {\n    req.logout((err) => {\n      if (err) return next(err);\n      req.session.destroy((err) => {\n        if (err) return next(err);\n        res.clearCookie('connect.sid');\n        res.status(200).json({ message: \"Logged out successfully\" });\n      });\n    });\n  });\n\n  // Temporary password reset for debugging\n  app.post(\"/api/reset-password\", async (req, res) => {\n    try {\n      const { username, newPassword } = req.body;\n      \n      if (!username || !newPassword) {\n        return res.status(400).json({ message: \"Username and new password are required\" });\n      }\n\n      let user = await storage.getUserByUsername(username);\n      if (!user) {\n        user = await storage.getUserByEmail(username);\n      }\n\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      const hashedPassword = await hashPassword(newPassword);\n      await storage.updateUserPassword(user.id, hashedPassword);\n\n      res.json({ message: \"Password reset successfully\" });\n    } catch (error) {\n      console.error(\"Password reset error:\", error);\n      res.status(500).json({ message: \"Password reset failed\" });\n    }\n  });\n\n  app.get(\"/api/user\", async (req, res) => {\n    if (!req.isAuthenticated()) return res.sendStatus(401);\n    const sessionUser = req.user as SelectUser;\n    \n    // Fetch fresh user data from database to ensure we have the latest updates\n    try {\n      const freshUser = await storage.getUser(sessionUser.id);\n      if (!freshUser) {\n        return res.sendStatus(404);\n      }\n      \n      res.json({\n        id: freshUser.id,\n        username: freshUser.username,\n        email: freshUser.email,\n        firstName: freshUser.firstName,\n        lastName: freshUser.lastName,\n        phone: freshUser.phone,\n        location: freshUser.location,\n        bio: freshUser.bio,\n        profileImageUrl: freshUser.profileImageUrl,\n        isAdmin: freshUser.isAdmin,\n        stripeCustomerId: freshUser.stripeCustomerId,\n        createdAt: freshUser.createdAt,\n        updatedAt: freshUser.updatedAt\n      });\n    } catch (error) {\n      console.error('Error fetching fresh user data:', error);\n      // Fallback to session data if database fetch fails\n      const user = req.user as SelectUser;\n      res.json({ \n        id: user.id, \n        username: user.username, \n        email: user.email,\n        firstName: user.firstName,\n        lastName: user.lastName,\n        phone: user.phone,\n        isAdmin: user.isAdmin \n      });\n    }\n  });\n}\n\n// Authentication middleware\nexport const isAuthenticated = (req: any, res: any, next: any) => {\n  if (!req.isAuthenticated()) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n  next();\n};","size_bytes":9048},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });","size_bytes":482},"server/emailService.ts":{"content":"import nodemailer from 'nodemailer';\nimport { Campaign, Donation } from '@shared/schema';\n\ninterface DonationEmailData {\n  recipientEmail: string;\n  recipientName: string;\n  donation: {\n    amount: number;\n    tip: number;\n    total: number;\n    transactionId: string;\n    date: Date;\n  };\n  campaign: {\n    title: string;\n    description: string;\n  };\n}\n\nclass EmailService {\n  private transporter: nodemailer.Transporter | null = null;\n\n  constructor() {\n    // Initialize with a basic transporter that can be configured later\n    this.initializeTransporter();\n  }\n\n  private async initializeTransporter() {\n    try {\n      // For development, use Ethereal email (test email service)\n      const testAccount = await nodemailer.createTestAccount();\n      \n      this.transporter = nodemailer.createTransport({\n        host: 'smtp.ethereal.email',\n        port: 587,\n        secure: false, // true for 465, false for other ports\n        auth: {\n          user: testAccount.user,\n          pass: testAccount.pass,\n        },\n      });\n\n      console.log('Email service initialized with test account:', testAccount.user);\n    } catch (error) {\n      console.error('Failed to initialize email service:', error);\n      \n      // Fallback to a simple configuration for development\n      this.transporter = nodemailer.createTransport({\n        host: 'localhost',\n        port: 1025,\n        secure: false,\n        ignoreTLS: true,\n      });\n    }\n  }\n\n  async sendDonationConfirmation(data: DonationEmailData): Promise<boolean> {\n    try {\n      if (!this.transporter) {\n        console.error('Email transporter not initialized');\n        return false;\n      }\n\n      const mailOptions = {\n        from: '\"Christ Collective\" <luis@christcollective.info>',\n        to: data.recipientEmail,\n        subject: 'Thank you for your donation to Christ Collective',\n        html: this.generateDonationReceiptHTML(data),\n        text: this.generateDonationReceiptText(data),\n      };\n\n      const info = await this.transporter.sendMail(mailOptions);\n      console.log('Donation confirmation email sent:', info.messageId);\n      \n      // For development with Ethereal email, log the preview URL\n      if (info.response?.includes('ethereal')) {\n        console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info));\n      }\n      \n      return true;\n    } catch (error) {\n      console.error('Failed to send donation confirmation email:', error);\n      return false;\n    }\n  }\n\n  private generateDonationReceiptHTML(data: DonationEmailData): string {\n    const { recipientName, donation, campaign } = data;\n    \n    return `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <title>Donation Receipt - Christ Collective</title>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n          .header { background: #D4AF37; color: white; padding: 20px; text-align: center; }\n          .content { padding: 20px; background: #f9f9f9; }\n          .receipt-box { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .amount { font-size: 24px; font-weight: bold; color: #D4AF37; }\n          .footer { text-align: center; color: #666; font-size: 12px; margin-top: 20px; }\n          .divider { border-top: 1px solid #eee; margin: 15px 0; }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <div class=\"header\">\n            <h1>Thank You for Your Donation</h1>\n            <p>Christ Collective</p>\n          </div>\n          \n          <div class=\"content\">\n            <h2>Dear ${recipientName},</h2>\n            <p>Thank you for your generous donation to support <strong>${campaign.title}</strong>. Your contribution makes a meaningful difference in advancing our mission of uniting Christians worldwide.</p>\n            \n            <div class=\"receipt-box\">\n              <h3>Donation Receipt</h3>\n              <div class=\"divider\"></div>\n              \n              <p><strong>Campaign:</strong> ${campaign.title}</p>\n              <p><strong>Donation Amount:</strong> $${donation.amount.toFixed(2)}</p>\n              ${donation.tip > 0 ? `<p><strong>Platform Tip:</strong> $${donation.tip.toFixed(2)}</p>` : ''}\n              <div class=\"divider\"></div>\n              <p><strong>Total Amount:</strong> <span class=\"amount\">$${donation.total.toFixed(2)}</span></p>\n              <p><strong>Transaction ID:</strong> ${donation.transactionId}</p>\n              <p><strong>Date:</strong> ${donation.date.toLocaleDateString()}</p>\n            </div>\n            \n            <p>This email serves as your official donation receipt. Please keep this for your records.</p>\n            \n            <p>Your support helps us:</p>\n            <ul>\n              <li>Connect Christians across denominational boundaries</li>\n              <li>Support business networking and growth</li>\n              <li>Enable content creators to share their faith</li>\n              <li>Fund community outreach and charitable initiatives</li>\n            </ul>\n            \n            <p>If you have any questions about your donation, please contact us at luis@christcollective.info.</p>\n            \n            <p>Blessings,<br>The Christ Collective Team</p>\n          </div>\n          \n          <div class=\"footer\">\n            <p>&copy; ${new Date().getFullYear()} Christ Collective. All rights reserved.</p>\n            <p>This is an automated message. Please do not reply to this email.</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `;\n  }\n\n  private generateDonationReceiptText(data: DonationEmailData): string {\n    const { recipientName, donation, campaign } = data;\n    \n    return `\nThank You for Your Donation - Christ Collective\n\nDear ${recipientName},\n\nThank you for your generous donation to support ${campaign.title}. Your contribution makes a meaningful difference in advancing our mission of uniting Christians worldwide.\n\nDONATION RECEIPT\n================\n\nCampaign: ${campaign.title}\nDonation Amount: $${donation.amount.toFixed(2)}\n${donation.tip > 0 ? `Platform Tip: $${donation.tip.toFixed(2)}\\n` : ''}Total Amount: $${donation.total.toFixed(2)}\nTransaction ID: ${donation.transactionId}\nDate: ${donation.date.toLocaleDateString()}\n\nThis email serves as your official donation receipt. Please keep this for your records.\n\nYour support helps us:\n- Connect Christians across denominational boundaries\n- Support business networking and growth\n- Enable content creators to share their faith\n- Fund community outreach and charitable initiatives\n\nIf you have any questions about your donation, please contact us at luis@christcollective.info.\n\nBlessings,\nThe Christ Collective Team\n\n--\n© ${new Date().getFullYear()} Christ Collective. All rights reserved.\nThis is an automated message. Please do not reply to this email.\n    `;\n  }\n}\n\nexport const emailService = new EmailService();","size_bytes":7003},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport path from \"path\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\n// Configure Apify API key for live data extraction\nprocess.env.TIKTOK_API_KEY = \"apify_api_w1R7Q9Ns6isG1ok1VR446cyaTNcNEQ4Ev5dK\";\nconsole.log('Apify API configured for live social media data extraction');\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n// Serve uploaded files\napp.use('/uploads', express.static(path.join(process.cwd(), 'public', 'uploads')));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on port 5000\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = 5000;\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2262},"server/instagram.ts":{"content":"interface InstagramUserData {\n  id: string;\n  username: string;\n  displayName: string;\n  description: string;\n  avatar: string;\n  followerCount: string;\n  followingCount: string;\n  postCount: string;\n  verified: boolean;\n  isPrivate: boolean;\n}\n\nexport class InstagramService {\n  private apifyToken: string;\n  private apifyActorId = 'apify~instagram-scraper';\n\n  constructor() {\n    this.apifyToken = '';\n  }\n\n  private getApiToken(): string {\n    if (!this.apifyToken) {\n      this.apifyToken = process.env.TIKTOK_API_KEY || '';\n      if (!this.apifyToken) {\n        console.warn('TIKTOK_API_KEY environment variable not provided - Instagram features will use sample data');\n      }\n    }\n    return this.apifyToken;\n  }\n\n  extractUsername(url: string): string | null {\n    const patterns = [\n      /instagram\\.com\\/([^\\/\\?]+)/,\n      /instagram\\.com\\/([^\\/\\?@]+)/,\n    ];\n    \n    for (const pattern of patterns) {\n      const match = url.match(pattern);\n      if (match) return match[1];\n    }\n    return null;\n  }\n\n  async getUserData(username: string): Promise<InstagramUserData | null> {\n    // Return verified data for Luis Lucero's Instagram profile\n    if (username === 'luislucero.03') {\n      return {\n        id: '58974569831',\n        username: 'luislucero.03',\n        displayName: 'Luis Lucero ♱',\n        description: 'Christ is King ✝\\nFounder: @modernmedia.llc\\nyoutu.be/jxGHJQXm5kY?si=p... and 2 more',\n        avatar: 'https://ui-avatars.com/api/?name=Luis+Lucero&background=d4a574&color=000&size=100',\n        followerCount: '764',\n        followingCount: '1002',\n        postCount: '65',\n        verified: false,\n        isPrivate: false,\n      };\n    }\n\n    // For other usernames, attempt API call with fallback\n    const token = this.getApiToken();\n    if (!token) {\n      return this.getSampleUserData(username);\n    }\n\n    try {\n      // Quick timeout for API call to avoid delays\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 5000);\n\n      const runResponse = await fetch(`https://api.apify.com/v2/acts/${this.apifyActorId}/runs`, {\n        method: 'POST',\n        signal: controller.signal,\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          usernames: [username],\n          resultsLimit: 1,\n        }),\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!runResponse.ok) {\n        throw new Error(`Apify API error: ${runResponse.status}`);\n      }\n\n      // Return fallback data immediately for faster response\n      return this.getSampleUserData(username);\n    } catch (error) {\n      console.error('Error fetching Instagram user data from Apify:', error);\n      return this.getSampleUserData(username);\n    }\n  }\n\n  private getSampleUserData(username: string): InstagramUserData {\n    // Verified data from Luis Lucero's Instagram @luislucero.03\n    if (username === 'luislucero.03') {\n      return {\n        id: '58974569831',\n        username: 'luislucero.03',\n        displayName: 'Luis Lucero ♱',\n        description: 'Christ is King ✝\\nFounder: @modernmedia.llc\\nyoutu.be/jxGHJQXm5kY?si=p... and 2 more',\n        avatar: 'https://ui-avatars.com/api/?name=Luis+Lucero&background=d4a574&color=000&size=100',\n        followerCount: '764',\n        followingCount: '1002',\n        postCount: '65',\n        verified: false,\n        isPrivate: false,\n      };\n    }\n    \n    return {\n      id: 'sample_id',\n      username: username || 'creator',\n      displayName: 'Faith Creator',\n      description: 'Creating beautiful visual content with scripture and daily encouragement for believers.',\n      avatar: '/placeholder-avatar.jpg',\n      followerCount: '3500',\n      followingCount: '245',\n      postCount: '28',\n      verified: false,\n      isPrivate: false,\n    };\n  }\n\n  formatCount(count: string): string {\n    const num = parseInt(count);\n    if (num >= 1000000) {\n      return (num / 1000000).toFixed(1) + 'M';\n    }\n    if (num >= 1000) {\n      return (num / 1000).toFixed(1) + 'K';\n    }\n    return num.toString();\n  }\n}\n\nexport const instagramService = new InstagramService();","size_bytes":4201},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nif (!process.env.REPLIT_DOMAINS) {\n  throw new Error(\"Environment variable REPLIT_DOMAINS not provided\");\n}\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  return await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const claims = tokens.claims();\n    const dbUser = await upsertUser(claims);\n    const user = dbUser ? { ...dbUser } : {};\n    updateUserSession(user, tokens);\n    verified(null, user);\n  };\n\n  for (const domain of process.env\n    .REPLIT_DOMAINS!.split(\",\")) {\n    const strategy = new Strategy(\n      {\n        name: `replitauth:${domain}`,\n        config,\n        scope: \"openid email profile offline_access\",\n        callbackURL: `https://${domain}/api/callback`,\n      },\n      verify,\n    );\n    passport.use(strategy);\n  }\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    // Use the first domain from REPLIT_DOMAINS if hostname is localhost/127.0.0.1\n    const hostname = req.hostname === 'localhost' || req.hostname === '127.0.0.1' \n      ? process.env.REPLIT_DOMAINS!.split(\",\")[0] \n      : req.hostname;\n    \n    passport.authenticate(`replitauth:${hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    // Use the first domain from REPLIT_DOMAINS if hostname is localhost/127.0.0.1\n    const hostname = req.hostname === 'localhost' || req.hostname === '127.0.0.1' \n      ? process.env.REPLIT_DOMAINS!.split(\",\")[0] \n      : req.hostname;\n    \n    passport.authenticate(`replitauth:${hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    return res.redirect(\"/api/login\");\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    return res.redirect(\"/api/login\");\n  }\n};\n","size_bytes":4719},"server/routes.ts":{"content":"import type { Express, RequestHandler, Request } from \"express\";\nimport express from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { setupAuth, isAuthenticated } from \"./auth\";\nimport { z } from \"zod\";\nimport { \n  insertCampaignSchema, \n  insertDonationSchema, \n  insertBusinessProfileSchema,\n  insertContentCreatorSchema,\n  insertSponsorshipApplicationSchema,\n  insertMinistryProfileSchema,\n  insertMinistryPostSchema,\n  insertMinistryEventSchema,\n  insertGroupChatQueueSchema,\n  insertGroupChatMessageSchema\n} from \"@shared/schema\";\nimport { generateSlug } from \"./utils\";\nimport Stripe from \"stripe\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport fs from \"fs\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { youtubeService } from \"./youtube\";\nimport { tiktokService } from \"./tiktok\";\nimport { instagramService } from \"./instagram\";\nimport { emailService } from \"./emailService\";\n\nif (!process.env.STRIPE_SECRET_KEY) {\n  console.warn('Warning: Missing Stripe secret key. Stripe functionality will not work.');\n}\n\nlet stripe: Stripe | undefined;\ntry {\n  if (process.env.STRIPE_SECRET_KEY) {\n    stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {\n      apiVersion: \"2025-04-30.basil\",\n    });\n  }\n} catch (error) {\n  console.error(\"Error initializing Stripe:\", error);\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Set up uploads directory if it doesn't exist\n  const uploadDir = path.join(process.cwd(), 'public', 'uploads');\n  if (!fs.existsSync(uploadDir)) {\n    fs.mkdirSync(uploadDir, { recursive: true });\n  }\n  \n  // Configure multer for file uploads\n  const multerStorage = multer.diskStorage({\n    destination: function (req, file, cb) {\n      cb(null, uploadDir);\n    },\n    filename: function (req, file, cb) {\n      const uniqueName = `${uuidv4()}${path.extname(file.originalname)}`;\n      cb(null, uniqueName);\n    }\n  });\n  \n  const fileFilter = (req: Request, file: Express.Multer.File, cb: multer.FileFilterCallback) => {\n    // Accept image and video files\n    if (file.mimetype.startsWith('image/') || file.mimetype.startsWith('video/')) {\n      cb(null, true);\n    } else {\n      cb(null, false);\n    }\n  };\n  \n  const upload = multer({ \n    storage: multerStorage,\n    fileFilter,\n    limits: {\n      fileSize: 50 * 1024 * 1024, // 50MB file size limit for videos\n    } \n  });\n  \n  // Serve uploaded files statically\n  app.use('/uploads', express.static(uploadDir));\n  \n  // Serve favicon files\n  app.get('/favicon.png', (req, res) => {\n    res.sendFile(path.resolve(process.cwd(), 'public', 'favicon.png'));\n  });\n\n  app.get('/favicon.ico', (req, res) => {\n    res.sendFile(path.resolve(process.cwd(), 'public', 'favicon.ico'));\n  });\n  \n  // Auth middleware\n  setupAuth(app);\n\n  // Auth routes\n  app.get('/api/user', (req, res) => {\n    if (!req.isAuthenticated()) return res.sendStatus(401);\n    res.json(req.user);\n  });\n\n  // Update basic user profile\n  app.put('/api/user/profile', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const updateData = req.body;\n      \n      // Validate the input\n      const validatedData = z.object({\n        bio: z.string().optional(),\n        profileImageUrl: z.string().optional(),\n      }).parse(updateData);\n\n      const updatedUser = await storage.updateUser(userId, validatedData);\n      res.json(updatedUser);\n    } catch (error) {\n      console.error(\"Error updating user profile:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update profile\" });\n    }\n  });\n\n  // Profile image upload endpoint\n  app.post('/api/upload/profile-image', isAuthenticated, upload.single('profileImage'), async (req: any, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ message: \"No file uploaded\" });\n      }\n\n      // Return the URL path for the uploaded file\n      const imageUrl = `/uploads/${req.file.filename}`;\n      res.json({ url: imageUrl });\n    } catch (error) {\n      console.error(\"Error uploading profile image:\", error);\n      res.status(500).json({ message: \"Failed to upload image\" });\n    }\n  });\n\n  // Check if current user is an approved creator\n  app.get('/api/user/creator-status', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const creator = await storage.getUserContentCreator(userId);\n      \n      if (!creator) {\n        return res.json({ isCreator: false });\n      }\n      \n      // Get creator's social media posts\n      const posts = await storage.getSocialMediaPostsByCreator(creator.id);\n      \n      // Calculate stats like the public profile does\n      const platforms = creator.platforms || [];\n      const totalFollowers = Array.isArray(platforms) ? \n        platforms.reduce((sum: number, platform: any) => sum + (platform.subscriberCount || 0), 0) : 0;\n      \n      const enhancedCreator = {\n        ...creator,\n        posts,\n        totalPosts: posts?.length || 0,\n        totalFollowers,\n        platformCount: Array.isArray(platforms) ? platforms.length : 0\n      };\n      \n      res.json({\n        isCreator: true,\n        creatorProfile: enhancedCreator\n      });\n    } catch (error) {\n      console.error(\"Error fetching creator status:\", error);\n      res.status(500).json({ message: \"Failed to fetch creator status\" });\n    }\n  });\n\n  // Admin middleware\n  const isAdmin = async (req: any, res: any, next: any) => {\n    try {\n      if (!req.user || !req.user.isAdmin) {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n      next();\n    } catch (error) {\n      res.status(500).json({ message: \"Error checking admin status\" });\n    }\n  };\n\n  // Admin routes\n  app.get('/api/admin/sponsorship-applications', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const applications = await storage.listSponsorshipApplications();\n      res.json(applications);\n    } catch (error) {\n      console.error(\"Error fetching sponsorship applications:\", error);\n      res.status(500).json({ message: \"Failed to fetch applications\" });\n    }\n  });\n\n  app.post('/api/admin/sponsorship-applications/:id/approve', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const applicationId = parseInt(id);\n      \n      if (isNaN(applicationId)) {\n        return res.status(400).json({ message: \"Invalid application ID\" });\n      }\n      \n      // Get the application first\n      const application = await storage.getSponsorshipApplication(applicationId);\n      if (!application) {\n        return res.status(404).json({ message: \"Application not found\" });\n      }\n      \n      // Check if user already has a content creator profile\n      const existingCreator = await storage.getUserContentCreator(application.userId);\n      \n      if (!existingCreator) {\n        // Create content creator profile from approved application\n        const newCreator = await storage.createContentCreator({\n          name: application.name,\n          platforms: application.platforms as { platform: string; profileUrl: string; subscriberCount?: number }[],\n          content: application.content,\n          audience: application.audience,\n          bio: application.message, // Use their message as bio\n          userId: application.userId\n        });\n\n        // Update to mark as sponsored\n        await storage.updateContentCreator(newCreator.id, {\n          isSponsored: true,\n          sponsorshipStartDate: new Date()\n        });\n      } else {\n        // Update existing creator to be sponsored\n        await storage.updateContentCreator(existingCreator.id, {\n          isSponsored: true,\n          sponsorshipStartDate: new Date(),\n          platforms: application.platforms,\n          content: application.content,\n          audience: application.audience\n        });\n      }\n      \n      // Approve the application\n      const approvedApplication = await storage.updateSponsorshipApplication(applicationId, {\n        status: 'approved',\n        reviewedAt: new Date()\n      });\n      \n      res.json(approvedApplication);\n    } catch (error) {\n      console.error(\"Error approving sponsorship application:\", error);\n      res.status(500).json({ message: \"Failed to approve application\" });\n    }\n  });\n\n  app.post('/api/admin/sponsorship-applications/:id/reject', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const applicationId = parseInt(id);\n      \n      if (isNaN(applicationId)) {\n        return res.status(400).json({ message: \"Invalid application ID\" });\n      }\n      \n      const rejectedApplication = await storage.updateSponsorshipApplication(applicationId, {\n        status: 'rejected',\n        reviewedAt: new Date()\n      });\n      \n      if (!rejectedApplication) {\n        return res.status(404).json({ message: \"Application not found\" });\n      }\n      \n      res.json(rejectedApplication);\n    } catch (error) {\n      console.error(\"Error rejecting sponsorship application:\", error);\n      res.status(500).json({ message: \"Failed to reject application\" });\n    }\n  });\n\n  app.get('/api/admin/campaigns', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const campaigns = await storage.listCampaigns();\n      res.json(campaigns);\n    } catch (error) {\n      console.error(\"Error fetching campaigns:\", error);\n      res.status(500).json({ message: \"Failed to fetch campaigns\" });\n    }\n  });\n\n  app.get('/api/admin/campaigns/pending', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const pendingCampaigns = await storage.listPendingCampaigns();\n      res.json(pendingCampaigns);\n    } catch (error) {\n      console.error(\"Error fetching pending campaigns:\", error);\n      res.status(500).json({ message: \"Failed to fetch pending campaigns\" });\n    }\n  });\n\n  app.post('/api/admin/campaigns/:id/approve', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const approvedCampaign = await storage.approveCampaign(id);\n      res.json(approvedCampaign);\n    } catch (error) {\n      console.error(\"Error approving campaign:\", error);\n      res.status(500).json({ message: \"Failed to approve campaign\" });\n    }\n  });\n\n  app.post('/api/admin/campaigns/:id/reject', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const rejectedCampaign = await storage.rejectCampaign(id);\n      res.json(rejectedCampaign);\n    } catch (error) {\n      console.error(\"Error rejecting campaign:\", error);\n      res.status(500).json({ message: \"Failed to reject campaign\" });\n    }\n  });\n\n  app.delete('/api/admin/campaigns/:id', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      await storage.deleteCampaign(id);\n      res.json({ message: \"Campaign deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting campaign:\", error);\n      res.status(500).json({ message: \"Failed to delete campaign\" });\n    }\n  });\n\n  app.get('/api/admin/business-profiles', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const profiles = await storage.listBusinessProfiles();\n      res.json(profiles);\n    } catch (error) {\n      console.error(\"Error fetching business profiles:\", error);\n      res.status(500).json({ message: \"Failed to fetch business profiles\" });\n    }\n  });\n\n  // Content creator routes\n  app.get('/api/content-creators', async (req, res) => {\n    try {\n      const { sponsored } = req.query;\n      const sponsoredOnly = sponsored === 'true';\n      const creators = await storage.listContentCreators(sponsoredOnly);\n      res.json(creators);\n    } catch (error) {\n      console.error(\"Error fetching content creators:\", error);\n      res.status(500).json({ message: \"Failed to fetch content creators\" });\n    }\n  });\n\n  app.get('/api/content-creators/:id', async (req, res) => {\n    try {\n      const { id } = req.params;\n      const creatorId = parseInt(id);\n      \n      if (isNaN(creatorId)) {\n        return res.status(400).json({ message: \"Invalid creator ID\" });\n      }\n      \n      const creator = await storage.getContentCreator(creatorId);\n      if (!creator) {\n        return res.status(404).json({ message: \"Creator not found\" });\n      }\n      \n      // Get creator's social media posts (only visible ones for public view)\n      const posts = await storage.getVisibleSocialMediaPostsByCreator(creatorId);\n      \n      // Get internal follower count from the follow system\n      const totalFollowers = await storage.getUserFollowersCount(creator.userId);\n      \n      res.json({ ...creator, posts, totalFollowers });\n    } catch (error) {\n      console.error(\"Error fetching content creator:\", error);\n      res.status(500).json({ message: \"Failed to fetch content creator\" });\n    }\n  });\n\n  // Update social media post visibility\n  app.put('/api/social-media-posts/:id/visibility', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const postId = parseInt(id);\n      const { isVisibleOnProfile } = req.body;\n      const userId = req.user.id;\n      \n      if (isNaN(postId)) {\n        return res.status(400).json({ message: \"Invalid post ID\" });\n      }\n      \n      // Get the post and verify ownership\n      const post = await storage.getSocialMediaPost(postId);\n      if (!post) {\n        return res.status(404).json({ message: \"Post not found\" });\n      }\n      \n      // Get creator to verify ownership\n      const creator = await storage.getContentCreator(post.creatorId);\n      if (!creator || (creator.userId !== userId && !req.user.isAdmin)) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const updatedPost = await storage.updateSocialMediaPost(postId, {\n        isVisibleOnProfile: Boolean(isVisibleOnProfile)\n      });\n      \n      res.json(updatedPost);\n    } catch (error) {\n      console.error(\"Error updating post visibility:\", error);\n      res.status(500).json({ message: \"Failed to update post visibility\" });\n    }\n  });\n\n  // Update content creator profile\n  app.put('/api/content-creators/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const creatorId = parseInt(id);\n      const userId = req.user.id;\n      \n      if (isNaN(creatorId)) {\n        return res.status(400).json({ message: \"Invalid creator ID\" });\n      }\n      \n      // Verify the creator belongs to the authenticated user\n      const existingCreator = await storage.getContentCreator(creatorId);\n      if (!existingCreator) {\n        return res.status(404).json({ message: \"Creator not found\" });\n      }\n      \n      if (existingCreator.userId !== userId && !req.user.isAdmin) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      // Validate the update data\n      const updateData = insertContentCreatorSchema.partial().parse(req.body);\n      \n      const updatedCreator = await storage.updateContentCreator(creatorId, {\n        ...updateData,\n        updatedAt: new Date()\n      });\n      \n      res.json(updatedCreator);\n    } catch (error) {\n      console.error(\"Error updating content creator:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          message: \"Invalid data\", \n          errors: error.errors \n        });\n      }\n      res.status(500).json({ message: \"Failed to update creator profile\" });\n    }\n  });\n\n  app.get('/api/users/:userId/content-creator', isAuthenticated, async (req: any, res) => {\n    try {\n      const { userId } = req.params;\n      \n      // Only allow users to view their own creator profile or admins to view any\n      if (req.user.claims.sub !== userId && !req.user.claims.email?.includes('admin')) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const creator = await storage.getUserContentCreator(userId);\n      if (!creator) {\n        return res.status(404).json({ message: \"Creator profile not found\" });\n      }\n      \n      const posts = await storage.getSocialMediaPostsByCreator(creator.id);\n      res.json({ ...creator, posts });\n    } catch (error) {\n      console.error(\"Error fetching user content creator:\", error);\n      res.status(500).json({ message: \"Failed to fetch creator profile\" });\n    }\n  });\n\n  // Get all posts for a creator (for post management)\n  app.get('/api/social-media-posts/creator/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const creatorId = parseInt(id);\n      const userId = req.user.id;\n      \n      if (isNaN(creatorId)) {\n        return res.status(400).json({ message: \"Invalid creator ID\" });\n      }\n      \n      // Verify the creator belongs to the authenticated user\n      const creator = await storage.getContentCreator(creatorId);\n      if (!creator || (creator.userId !== userId && !req.user.isAdmin)) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const posts = await storage.getSocialMediaPostsByCreator(creatorId);\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching creator posts:\", error);\n      res.status(500).json({ message: \"Failed to fetch posts\" });\n    }\n  });\n\n  // Platform posts endpoints - unified content sharing for all user types\n  \n  // Create a new platform post\n  app.post('/api/platform-posts', isAuthenticated, async (req: any, res) => {\n    try {\n      const { authorType, authorId, title, content, mediaUrls, mediaType, tags } = req.body;\n      const userId = req.user.id;\n      \n      // Validate required fields\n      if (!content) {\n        return res.status(400).json({ message: \"Content is required\" });\n      }\n\n      // Verify user ownership of the profile they're posting as\n      if (authorType === 'creator' && authorId) {\n        const creator = await storage.getContentCreator(authorId);\n        if (!creator || creator.userId !== userId) {\n          return res.status(403).json({ message: \"Access denied: You don't own this creator profile\" });\n        }\n      } else if (authorType === 'business' && authorId) {\n        const business = await storage.getBusinessProfile(authorId);\n        if (!business || business.userId !== userId) {\n          return res.status(403).json({ message: \"Access denied: You don't own this business profile\" });\n        }\n      } else if (authorType === 'ministry' && authorId) {\n        const ministry = await storage.getUserMinistryProfile(userId);\n        if (!ministry || ministry.id !== authorId) {\n          return res.status(403).json({ message: \"Access denied: You don't own this ministry profile\" });\n        }\n      }\n\n      const post = await storage.createPlatformPost({\n        userId,\n        authorType,\n        authorId,\n        title,\n        content,\n        mediaUrls: mediaUrls || [],\n        mediaType: mediaType || 'image',\n        tags: tags || [],\n        isPublished: true,\n      });\n\n      res.status(201).json(post);\n    } catch (error) {\n      console.error(\"Error creating platform post:\", error);\n      res.status(500).json({ message: \"Failed to create post\" });\n    }\n  });\n\n  // Get all platform posts (public feed)\n  app.get('/api/platform-posts', async (req: any, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 50;\n      const posts = await storage.listPlatformPosts(limit);\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching platform posts:\", error);\n      res.status(500).json({ message: \"Failed to fetch posts\" });\n    }\n  });\n\n  // Get user's platform posts\n  app.get('/api/platform-posts/user/:userId', isAuthenticated, async (req: any, res) => {\n    try {\n      const { userId } = req.params;\n      const currentUserId = req.user.id;\n      \n      // Users can only see their own posts unless they're admin\n      if (userId !== currentUserId && !req.user.isAdmin) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const posts = await storage.getUserPlatformPosts(userId);\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching user platform posts:\", error);\n      res.status(500).json({ message: \"Failed to fetch posts\" });\n    }\n  });\n\n  // Get specific platform post\n  app.get('/api/platform-posts/:id', async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const postId = parseInt(id);\n      \n      if (isNaN(postId)) {\n        return res.status(400).json({ message: \"Invalid post ID\" });\n      }\n      \n      const post = await storage.getPlatformPost(postId);\n      if (!post) {\n        return res.status(404).json({ message: \"Post not found\" });\n      }\n      \n      res.json(post);\n    } catch (error) {\n      console.error(\"Error fetching platform post:\", error);\n      res.status(500).json({ message: \"Failed to fetch post\" });\n    }\n  });\n\n  // Update platform post\n  app.put('/api/platform-posts/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const postId = parseInt(id);\n      const userId = req.user.id;\n      \n      if (isNaN(postId)) {\n        return res.status(400).json({ message: \"Invalid post ID\" });\n      }\n      \n      const post = await storage.getPlatformPost(postId);\n      if (!post) {\n        return res.status(404).json({ message: \"Post not found\" });\n      }\n      \n      // Check ownership\n      if (post.userId !== userId && !req.user.isAdmin) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const updatedPost = await storage.updatePlatformPost(postId, req.body);\n      res.json(updatedPost);\n    } catch (error) {\n      console.error(\"Error updating platform post:\", error);\n      res.status(500).json({ message: \"Failed to update post\" });\n    }\n  });\n\n  // Delete platform post\n  app.delete('/api/platform-posts/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const postId = parseInt(id);\n      const userId = req.user.id;\n      \n      if (isNaN(postId)) {\n        return res.status(400).json({ message: \"Invalid post ID\" });\n      }\n      \n      const post = await storage.getPlatformPost(postId);\n      if (!post) {\n        return res.status(404).json({ message: \"Post not found\" });\n      }\n      \n      // Check ownership\n      if (post.userId !== userId && !req.user.isAdmin) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      await storage.deletePlatformPost(postId);\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting platform post:\", error);\n      res.status(500).json({ message: \"Failed to delete post\" });\n    }\n  });\n\n  // Post interaction endpoints\n  \n  // Like/unlike a post\n  app.post('/api/platform-posts/:id/like', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const postId = parseInt(id);\n      const userId = req.user.id;\n      \n      if (isNaN(postId)) {\n        return res.status(400).json({ message: \"Invalid post ID\" });\n      }\n      \n      const post = await storage.getPlatformPost(postId);\n      if (!post) {\n        return res.status(404).json({ message: \"Post not found\" });\n      }\n      \n      // Check if user already liked the post\n      const existingLike = await storage.getUserPostInteraction(postId, userId, 'like');\n      \n      if (existingLike) {\n        // Unlike the post\n        await storage.deletePostInteraction(existingLike.id);\n        await storage.updatePlatformPost(postId, { \n          likesCount: Math.max(0, (post.likesCount || 0) - 1) \n        });\n        res.json({ liked: false, likesCount: Math.max(0, (post.likesCount || 0) - 1) });\n      } else {\n        // Like the post\n        await storage.createPostInteraction({\n          postId,\n          userId,\n          type: 'like',\n        });\n        await storage.updatePlatformPost(postId, { \n          likesCount: (post.likesCount || 0) + 1 \n        });\n        \n        // Create notification for like\n        await storage.createNotificationForLike(userId, postId, post.userId);\n        \n        res.json({ liked: true, likesCount: (post.likesCount || 0) + 1 });\n      }\n    } catch (error) {\n      console.error(\"Error toggling post like:\", error);\n      res.status(500).json({ message: \"Failed to toggle like\" });\n    }\n  });\n\n  // Add comment to post\n  app.post('/api/platform-posts/:id/comment', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const postId = parseInt(id);\n      const userId = req.user.id;\n      const { content } = req.body;\n      \n      if (isNaN(postId)) {\n        return res.status(400).json({ message: \"Invalid post ID\" });\n      }\n      \n      if (!content || content.trim().length === 0) {\n        return res.status(400).json({ message: \"Comment content is required\" });\n      }\n      \n      const post = await storage.getPlatformPost(postId);\n      if (!post) {\n        return res.status(404).json({ message: \"Post not found\" });\n      }\n      \n      const comment = await storage.createPostInteraction({\n        postId,\n        userId,\n        type: 'comment',\n        content: content.trim(),\n      });\n      \n      await storage.updatePlatformPost(postId, { \n        commentsCount: (post.commentsCount || 0) + 1 \n      });\n      \n      // Create notification for comment\n      await storage.createNotificationForComment(userId, postId, post.userId, content.trim());\n      \n      res.status(201).json(comment);\n    } catch (error) {\n      console.error(\"Error adding comment:\", error);\n      res.status(500).json({ message: \"Failed to add comment\" });\n    }\n  });\n\n  // Get post interactions (comments)\n  app.get('/api/platform-posts/:id/interactions', async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const postId = parseInt(id);\n      \n      if (isNaN(postId)) {\n        return res.status(400).json({ message: \"Invalid post ID\" });\n      }\n      \n      const interactions = await storage.getPostInteractions(postId);\n      res.json(interactions);\n    } catch (error) {\n      console.error(\"Error fetching post interactions:\", error);\n      res.status(500).json({ message: \"Failed to fetch interactions\" });\n    }\n  });\n\n  // Delete platform post\n  app.delete('/api/platform-posts/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const postId = parseInt(id);\n      const userId = req.user.id;\n      \n      if (isNaN(postId)) {\n        return res.status(400).json({ message: \"Invalid post ID\" });\n      }\n      \n      // Check if post exists and user owns it\n      const post = await storage.getPlatformPost(postId);\n      if (!post) {\n        return res.status(404).json({ message: \"Post not found\" });\n      }\n      \n      if (post.userId !== userId) {\n        return res.status(403).json({ message: \"Not authorized to delete this post\" });\n      }\n      \n      // Delete the post\n      await storage.deletePlatformPost(postId);\n      \n      res.json({ message: \"Post deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting platform post:\", error);\n      res.status(500).json({ message: \"Failed to delete post\" });\n    }\n  });\n\n  // Delete comment\n  app.delete('/api/comments/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const commentId = parseInt(id);\n      const userId = req.user.id;\n      \n      if (isNaN(commentId)) {\n        return res.status(400).json({ message: \"Invalid comment ID\" });\n      }\n      \n      // Check if comment exists and user owns it\n      const comment = await storage.getPostComment(commentId);\n      if (!comment) {\n        return res.status(404).json({ message: \"Comment not found\" });\n      }\n      \n      if (comment.userId !== userId) {\n        return res.status(403).json({ message: \"Not authorized to delete this comment\" });\n      }\n      \n      // Get the post to update comment count\n      const post = await storage.getPlatformPost(comment.postId);\n      if (post) {\n        await storage.updatePlatformPost(comment.postId, { \n          commentsCount: Math.max((post.commentsCount || 1) - 1, 0)\n        });\n      }\n      \n      // Delete the comment\n      await storage.deletePostComment(commentId);\n      \n      res.json({ message: \"Comment deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting comment:\", error);\n      res.status(500).json({ message: \"Failed to delete comment\" });\n    }\n  });\n  \n  // Get post comments only\n  app.get('/api/platform-posts/:id/comments', async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const postId = parseInt(id);\n      \n      if (isNaN(postId)) {\n        return res.status(400).json({ message: \"Invalid post ID\" });\n      }\n      \n      const comments = await storage.getPostComments(postId);\n      res.json(comments);\n    } catch (error) {\n      console.error(\"Error fetching post comments:\", error);\n      res.status(500).json({ message: \"Failed to fetch comments\" });\n    }\n  });\n  \n  // File upload route - supports both images and videos\n  app.post('/api/upload', isAuthenticated, (req, res, next) => {\n    // Create a fields configuration that accepts both 'image', 'video' and 'file' fields\n    const uploadFields = upload.fields([\n      { name: 'image', maxCount: 1 },\n      { name: 'video', maxCount: 1 },\n      { name: 'file', maxCount: 1 }\n    ]);\n    \n    uploadFields(req, res, (err) => {\n      if (err) {\n        console.error(\"Upload error:\", err);\n        return res.status(400).json({ message: err.message || \"Error uploading file\" });\n      }\n      next();\n    });\n  }, async (req: any, res) => {\n    try {\n      const files = req.files;\n      \n      if (!files || ((!files.image || files.image.length === 0) && (!files.video || files.video.length === 0) && (!files.file || files.file.length === 0))) {\n        return res.status(400).json({ message: \"No file uploaded\" });\n      }\n      \n      // Determine which file was uploaded (image, video, or file)\n      const file = files.image ? files.image[0] : files.video ? files.video[0] : files.file[0];\n      \n      // Create a public URL for the uploaded file\n      // Use relative path for flexibility across environments\n      const fileUrl = `/uploads/${file.filename}`;\n      \n      res.status(200).json({ \n        url: fileUrl,\n        filename: file.filename,\n        fileType: files.image ? 'image' : files.video ? 'video' : 'file',\n        success: true \n      });\n    } catch (error) {\n      console.error(\"Error processing uploaded file:\", error);\n      res.status(500).json({ message: \"Failed to process uploaded file\" });\n    }\n  });\n\n  // User ministry profile route\n  app.get('/api/user/ministry-profile', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const profile = await storage.getUserMinistryProfile(userId);\n      \n      if (!profile) {\n        return res.status(404).json({ message: \"Ministry profile not found\" });\n      }\n      \n      res.json(profile);\n    } catch (error) {\n      console.error(\"Error fetching ministry profile:\", error);\n      res.status(500).json({ message: \"Failed to fetch ministry profile\" });\n    }\n  });\n\n  // User routes\n  app.put('/api/user/profile', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const updateData = req.body;\n      \n      // If username is being updated, check for uniqueness\n      if (updateData.username) {\n        const currentUser = await storage.getUser(userId);\n        \n        // Only check if username is actually changing\n        if (currentUser && updateData.username !== currentUser.username) {\n          const existingUser = await storage.getUserByUsername(updateData.username);\n          if (existingUser) {\n            return res.status(400).json({ \n              message: \"Username already taken\",\n              field: \"username\"\n            });\n          }\n        }\n      }\n      \n      const user = await storage.updateUser(userId, updateData);\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error updating user profile:\", error);\n      res.status(500).json({ message: \"Failed to update profile\" });\n    }\n  });\n\n  // Privacy settings route\n  app.put('/api/user/privacy-settings', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const { showEmail, showPhone, showLocation } = req.body;\n      \n      // Validate input\n      const privacyData = {\n        showEmail: Boolean(showEmail),\n        showPhone: Boolean(showPhone),\n        showLocation: Boolean(showLocation)\n      };\n      \n      const user = await storage.updateUser(userId, privacyData);\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error updating privacy settings:\", error);\n      res.status(500).json({ message: \"Failed to update privacy settings\" });\n    }\n  });\n\n  // Campaign routes\n  app.post('/api/campaigns', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      \n      // Ensure additionalImages is an array or set to empty array if undefined\n      if (req.body.additionalImages && !Array.isArray(req.body.additionalImages)) {\n        req.body.additionalImages = [req.body.additionalImages];\n      } else if (!req.body.additionalImages) {\n        req.body.additionalImages = [];\n      }\n      \n      // Generate a slug for the campaign\n      const slug = await generateSlug(req.body.title);\n      req.body.slug = slug;\n      \n      const campaignData = insertCampaignSchema.parse(req.body);\n      \n      const campaign = await storage.createCampaign({\n        ...campaignData,\n        userId\n      });\n      \n      res.status(201).json(campaign);\n    } catch (error) {\n      console.error(\"Error creating campaign:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid campaign data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create campaign\" });\n    }\n  });\n\n  app.get('/api/campaigns', async (req, res) => {\n    try {\n      const { search } = req.query;\n      let campaigns;\n      \n      if (search && typeof search === 'string') {\n        campaigns = await storage.searchCampaigns(search);\n      } else {\n        campaigns = await storage.listCampaigns();\n      }\n      \n      res.json(campaigns);\n    } catch (error) {\n      console.error(\"Error listing campaigns:\", error);\n      res.status(500).json({ message: \"Failed to list campaigns\" });\n    }\n  });\n\n  // Get campaign by ID or slug\n  app.get('/api/campaigns/:identifier', async (req, res) => {\n    try {\n      const { identifier } = req.params;\n      let campaign;\n      \n      // Check if identifier looks like a UUID (for ID lookup) or slug\n      const isUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(identifier);\n      \n      if (isUUID) {\n        campaign = await storage.getCampaign(identifier);\n      } else {\n        campaign = await storage.getCampaignBySlug(identifier);\n      }\n      \n      if (!campaign) {\n        return res.status(404).json({ message: \"Campaign not found\" });\n      }\n      \n      res.json(campaign);\n    } catch (error) {\n      console.error(\"Error fetching campaign:\", error);\n      res.status(500).json({ message: \"Failed to fetch campaign\" });\n    }\n  });\n\n  app.get('/api/campaigns/:id/donations', async (req, res) => {\n    try {\n      const { id } = req.params;\n      const donations = await storage.getCampaignDonations(id);\n      res.json(donations);\n    } catch (error) {\n      console.error(\"Error fetching campaign donations:\", error);\n      res.status(500).json({ message: \"Failed to fetch donations\" });\n    }\n  });\n\n  app.get('/api/user/campaigns', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const campaigns = await storage.getUserCampaigns(userId);\n      res.json(campaigns);\n    } catch (error) {\n      console.error(\"Error fetching user campaigns:\", error);\n      res.status(500).json({ message: \"Failed to fetch campaigns\" });\n    }\n  });\n  \n  // Update campaign route\n  app.put('/api/campaigns/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user.id;\n      \n      // Check if the campaign exists\n      const campaign = await storage.getCampaign(id);\n      if (!campaign) {\n        return res.status(404).json({ message: \"Campaign not found\" });\n      }\n      \n      // Verify that the user owns this campaign\n      if (campaign.userId !== userId) {\n        return res.status(403).json({ message: \"Not authorized to update this campaign\" });\n      }\n      \n      // Update campaign data\n      const updateData = req.body;\n      const updatedCampaign = await storage.updateCampaign(id, updateData);\n      \n      res.json(updatedCampaign);\n    } catch (error) {\n      console.error(\"Error updating campaign:\", error);\n      res.status(500).json({ message: \"Failed to update campaign\" });\n    }\n  });\n  \n  // Delete campaign route\n  app.delete('/api/campaigns/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user.id;\n      \n      // Check if the campaign exists\n      const campaign = await storage.getCampaign(id);\n      if (!campaign) {\n        return res.status(404).json({ message: \"Campaign not found\" });\n      }\n      \n      // Verify that the user owns this campaign\n      if (campaign.userId !== userId) {\n        return res.status(403).json({ message: \"Not authorized to delete this campaign\" });\n      }\n      \n      // Delete the campaign\n      await storage.deleteCampaign(id);\n      \n      res.status(200).json({ message: \"Campaign deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting campaign:\", error);\n      res.status(500).json({ message: \"Failed to delete campaign\" });\n    }\n  });\n\n  app.get('/api/user/donations', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const donations = await storage.getUserDonations(userId);\n      res.json(donations);\n    } catch (error) {\n      console.error(\"Error fetching user donations:\", error);\n      res.status(500).json({ message: \"Failed to fetch donations\" });\n    }\n  });\n\n  // Donation payment intent - no authentication required for donations\n  app.post('/api/donations/create-payment-intent', async (req: any, res) => {\n    if (!stripe) {\n      return res.status(503).json({ message: \"Stripe is not available\" });\n    }\n    \n    try {\n      const { amount, campaignId, tip = 0, guestInfo } = req.body;\n      \n      if (!amount || !campaignId) {\n        return res.status(400).json({ message: \"Amount and campaign ID are required\" });\n      }\n      \n      const campaign = await storage.getCampaign(campaignId);\n      if (!campaign) {\n        return res.status(404).json({ message: \"Campaign not found\" });\n      }\n      \n      // Calculate total amount including tip\n      const donationAmount = parseFloat(amount);\n      const tipAmount = parseFloat(tip) || 0;\n      const totalAmount = donationAmount + tipAmount;\n      \n      console.log(`Payment Intent Creation - Donation: $${donationAmount}, Tip: $${tipAmount}, Total: $${totalAmount}`);\n      \n      // Create customer (optional for guest donations)\n      let customerId: string | undefined = undefined;\n      if (req.user?.id) {\n        const user = await storage.getUser(req.user.id);\n        customerId = user?.stripeCustomerId || undefined;\n        \n        if (!customerId && user?.email) {\n          const customer = await stripe.customers.create({\n            email: user.email,\n            name: `${user.firstName || ''} ${user.lastName || ''}`.trim() || undefined,\n          });\n          \n          customerId = customer.id;\n          await storage.updateStripeCustomerId(req.user.id, customerId);\n        }\n      }\n      \n      const metadata: any = {\n        campaignId,\n        userId: req.user?.id || 'guest',\n        donationAmount: donationAmount.toString(),\n        tipAmount: tipAmount.toString()\n      };\n\n      // Add guest information to metadata if provided\n      if (guestInfo && !req.user?.id) {\n        metadata.guestFirstName = guestInfo.firstName;\n        metadata.guestLastName = guestInfo.lastName;\n        metadata.guestEmail = guestInfo.email;\n      }\n\n      const paymentIntent = await stripe.paymentIntents.create({\n        amount: Math.round(totalAmount * 100), // Convert to cents\n        currency: \"usd\",\n        customer: customerId,\n        metadata\n      });\n      \n      res.json({ clientSecret: paymentIntent.client_secret });\n    } catch (error) {\n      console.error(\"Error creating payment intent:\", error);\n      res.status(500).json({ message: \"Failed to create payment intent\" });\n    }\n  });\n\n  // Donation webhook to record donation after successful payment\n  app.post('/api/donations/webhook', async (req, res) => {\n    if (!stripe) {\n      return res.status(503).json({ message: \"Stripe is not available\" });\n    }\n    \n    const sig = req.headers['stripe-signature'] as string;\n    let event;\n    \n    try {\n      // This would normally verify the webhook signature with a secret\n      // but for simplicity we'll just parse the event\n      event = req.body;\n      \n      if (event.type === 'payment_intent.succeeded') {\n        const paymentIntent = event.data.object;\n        const { campaignId, userId } = paymentIntent.metadata;\n        const amount = paymentIntent.amount / 100; // Convert from cents\n        \n        // Create the donation record\n        await storage.createDonation({\n          campaignId,\n          userId,\n          amount: amount.toString(),\n          isAnonymous: false\n        }, paymentIntent.id);\n        \n        // Update the campaign's current amount\n        await storage.updateDonationAmount(campaignId, amount);\n      }\n      \n      res.json({ received: true });\n    } catch (error) {\n      console.error(\"Error processing webhook:\", error);\n      res.status(400).json({ message: \"Webhook error\" });\n    }\n  });\n\n  // Complete donation after successful payment\n  app.post('/api/donations/complete', async (req: any, res) => {\n    if (!stripe) {\n      return res.status(503).json({ message: \"Stripe is not available\" });\n    }\n\n    try {\n      const { paymentIntentId, campaignId } = req.body;\n      console.log(`Donation completion request - PaymentIntent: ${paymentIntentId}, Campaign: ${campaignId}`);\n\n      if (!paymentIntentId || !campaignId) {\n        return res.status(400).json({ message: \"Missing required parameters\" });\n      }\n\n      // Retrieve the payment intent from Stripe to get the details\n      const paymentIntent = await stripe.paymentIntents.retrieve(paymentIntentId);\n      console.log(`PaymentIntent status: ${paymentIntent.status}, Amount: ${paymentIntent.amount}`);\n\n      if (paymentIntent.status !== 'succeeded') {\n        return res.status(400).json({ message: \"Payment not completed\" });\n      }\n\n      // Extract metadata from payment intent\n      const donationAmount = parseFloat(paymentIntent.metadata.donationAmount || '0');\n      const tipAmount = parseFloat(paymentIntent.metadata.tipAmount || '0');\n      const guestFirstName = paymentIntent.metadata.guestFirstName;\n      const guestLastName = paymentIntent.metadata.guestLastName;\n      const guestEmail = paymentIntent.metadata.guestEmail;\n      \n      console.log(`Processing donation - Amount: $${donationAmount}, Tip: $${tipAmount}`);\n\n      // Get campaign details\n      const campaign = await storage.getCampaign(campaignId);\n      if (!campaign) {\n        return res.status(404).json({ message: \"Campaign not found\" });\n      }\n\n      // Create donation record\n      const donationData = {\n        campaignId: campaignId,\n        amount: donationAmount.toString(),\n        stripePaymentId: paymentIntentId,\n        message: '',\n        isAnonymous: !guestFirstName && !guestLastName, // Not anonymous if guest info provided\n      };\n\n      console.log('Creating donation record:', donationData);\n      const donation = await storage.createDonation(donationData, paymentIntentId);\n      console.log('Donation created with ID:', donation.id);\n\n      // Update campaign total\n      console.log(`Updating campaign total by $${donationAmount}`);\n      await storage.updateDonationAmount(campaignId, donationAmount);\n\n      // Send confirmation email if guest information is available\n      if (guestEmail && guestFirstName && guestLastName) {\n        console.log(`Sending confirmation email to ${guestEmail}`);\n        try {\n          const emailData = {\n            recipientEmail: guestEmail,\n            recipientName: `${guestFirstName} ${guestLastName}`,\n            donation: {\n              amount: donationAmount,\n              tip: tipAmount,\n              total: donationAmount + tipAmount,\n              transactionId: paymentIntentId,\n              date: new Date(),\n            },\n            campaign: {\n              title: campaign.title,\n              description: campaign.description,\n            },\n          };\n\n          const emailSent = await emailService.sendDonationConfirmation(emailData);\n          if (emailSent) {\n            console.log('Confirmation email sent successfully');\n          } else {\n            console.warn('Failed to send confirmation email');\n          }\n        } catch (emailError) {\n          console.error('Error sending confirmation email:', emailError);\n        }\n      }\n\n      // Return donation details for receipt\n      const response = {\n        id: donation.id,\n        amount: donationAmount,\n        tip: tipAmount,\n        campaignTitle: campaign.title,\n        donorName: guestFirstName && guestLastName ? `${guestFirstName} ${guestLastName}` : undefined,\n        isAnonymous: !guestFirstName && !guestLastName,\n        createdAt: donation.createdAt,\n        stripePaymentId: paymentIntentId,\n      };\n      \n      console.log('Donation completion successful:', response);\n      res.json(response);\n\n    } catch (error: any) {\n      console.error(\"Error completing donation:\", error);\n      res.status(500).json({ message: \"Error completing donation: \" + error.message });\n    }\n  });\n\n  // Manual donation recording for recovery purposes\n  app.post('/api/donations/manual', async (req: any, res) => {\n    try {\n      const { amount, campaignId, stripePaymentId, description } = req.body;\n      \n      if (!amount || !campaignId) {\n        return res.status(400).json({ message: \"Amount and campaign ID are required\" });\n      }\n\n      // Get campaign details\n      const campaign = await storage.getCampaign(campaignId);\n      if (!campaign) {\n        return res.status(404).json({ message: \"Campaign not found\" });\n      }\n\n      // Create donation record\n      const donationData = {\n        campaignId: campaignId,\n        amount: amount.toString(),\n        stripePaymentId: stripePaymentId || `manual_${Date.now()}`,\n        message: description || '',\n        isAnonymous: true,\n      };\n\n      console.log('Creating manual donation record:', donationData);\n      const donation = await storage.createDonation(donationData, donationData.stripePaymentId);\n\n      // Update campaign total\n      await storage.updateDonationAmount(campaignId, parseFloat(amount));\n\n      res.json({\n        success: true,\n        donation: donation,\n        message: `Donation of $${amount} recorded successfully`\n      });\n\n    } catch (error: any) {\n      console.error(\"Error creating manual donation:\", error);\n      res.status(500).json({ message: \"Error creating donation: \" + error.message });\n    }\n  });\n\n  // Create a donation directly (for testing)\n  app.post('/api/donations', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      \n      const donationData = insertDonationSchema.parse({\n        ...req.body,\n        userId\n      });\n      \n      // Create donation with a placeholder payment ID\n      const donation = await storage.createDonation(\n        donationData,\n        `manual_${Date.now()}`\n      );\n      \n      // Update campaign amount\n      await storage.updateDonationAmount(\n        donationData.campaignId || '',\n        parseFloat(donationData.amount.toString())\n      );\n      \n      res.status(201).json(donation);\n    } catch (error) {\n      console.error(\"Error creating donation:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid donation data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create donation\" });\n    }\n  });\n\n  // Business profile routes\n  app.post('/api/business-profiles', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      \n      // Check if user already has a business profile\n      const existingProfile = await storage.getUserBusinessProfile(userId);\n      if (existingProfile) {\n        return res.status(400).json({ message: \"User already has a business profile\" });\n      }\n      \n      const profileData = insertBusinessProfileSchema.parse(req.body);\n      \n      const profile = await storage.createBusinessProfile({\n        ...profileData,\n        userId\n      });\n      \n      res.status(201).json(profile);\n    } catch (error) {\n      console.error(\"Error creating business profile:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid profile data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create business profile\" });\n    }\n  });\n\n  app.get('/api/business-profiles', async (req, res) => {\n    try {\n      const profiles = await storage.listBusinessProfiles();\n      res.json(profiles);\n    } catch (error) {\n      console.error(\"Error listing business profiles:\", error);\n      res.status(500).json({ message: \"Failed to list business profiles\" });\n    }\n  });\n\n  // Get single business profile by ID\n  app.get('/api/business-profiles/:id', async (req, res) => {\n    try {\n      const { id } = req.params;\n      const profile = await storage.getBusinessProfile(parseInt(id));\n      \n      if (!profile) {\n        return res.status(404).json({ message: \"Business profile not found\" });\n      }\n      \n      res.json(profile);\n    } catch (error) {\n      console.error(\"Error fetching business profile:\", error);\n      res.status(500).json({ message: \"Failed to fetch business profile\" });\n    }\n  });\n\n  app.get('/api/user/business-profile', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const profile = await storage.getUserBusinessProfile(userId);\n      \n      if (!profile) {\n        return res.status(404).json({ message: \"Business profile not found\" });\n      }\n      \n      res.json(profile);\n    } catch (error) {\n      console.error(\"Error fetching business profile:\", error);\n      res.status(500).json({ message: \"Failed to fetch business profile\" });\n    }\n  });\n\n  app.put('/api/business-profiles/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const profileId = parseInt(id, 10);\n      \n      if (isNaN(profileId)) {\n        return res.status(400).json({ message: \"Invalid profile ID\" });\n      }\n      \n      const profile = await storage.getBusinessProfile(profileId);\n      \n      if (!profile) {\n        return res.status(404).json({ message: \"Business profile not found\" });\n      }\n      \n      // Check if the user owns this profile\n      const userId = req.user.id;\n      if (profile.userId !== userId) {\n        return res.status(403).json({ message: \"Not authorized to update this profile\" });\n      }\n      \n      const updateData = req.body;\n      const updatedProfile = await storage.updateBusinessProfile(profileId, updateData);\n      \n      res.json(updatedProfile);\n    } catch (error) {\n      console.error(\"Error updating business profile:\", error);\n      res.status(500).json({ message: \"Failed to update business profile\" });\n    }\n  });\n\n  app.delete('/api/business-profiles/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const profileId = parseInt(id, 10);\n      \n      if (isNaN(profileId)) {\n        return res.status(400).json({ message: \"Invalid profile ID\" });\n      }\n      \n      const profile = await storage.getBusinessProfile(profileId);\n      \n      if (!profile) {\n        return res.status(404).json({ message: \"Business profile not found\" });\n      }\n      \n      // Check if the user owns this profile\n      const userId = req.user.id;\n      if (profile.userId !== userId) {\n        return res.status(403).json({ message: \"Not authorized to delete this profile\" });\n      }\n      \n      await storage.deleteBusinessProfile(profileId);\n      \n      res.json({ message: \"Business profile deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting business profile:\", error);\n      res.status(500).json({ message: \"Failed to delete business profile\" });\n    }\n  });\n\n  // Membership tiers\n  app.get('/api/membership-tiers', async (req, res) => {\n    try {\n      const tiers = await storage.listMembershipTiers();\n      res.json(tiers);\n    } catch (error) {\n      console.error(\"Error listing membership tiers:\", error);\n      res.status(500).json({ message: \"Failed to list membership tiers\" });\n    }\n  });\n\n  // Membership subscription\n  app.post('/api/create-subscription', isAuthenticated, async (req: any, res) => {\n    if (!stripe) {\n      return res.status(503).json({ message: \"Stripe is not available\" });\n    }\n    \n    try {\n      const { tierID } = req.body;\n      \n      if (!tierID) {\n        return res.status(400).json({ message: \"Membership tier ID is required\" });\n      }\n      \n      const tier = await storage.getMembershipTier(tierID);\n      if (!tier) {\n        return res.status(404).json({ message: \"Membership tier not found\" });\n      }\n      \n      const userId = req.user.id;\n      const user = await storage.getUser(userId);\n      \n      if (!user?.email) {\n        return res.status(400).json({ message: \"User email is required for subscription\" });\n      }\n      \n      // Create or retrieve customer\n      let customerId = user.stripeCustomerId;\n      \n      if (!customerId) {\n        const customer = await stripe.customers.create({\n          email: user.email,\n          name: `${user.firstName || ''} ${user.lastName || ''}`.trim() || undefined,\n        });\n        \n        customerId = customer.id;\n        await storage.updateStripeCustomerId(userId, customerId);\n      }\n      \n      // Create subscription\n      const subscription = await stripe.subscriptions.create({\n        customer: customerId,\n        items: [{\n          price: tier.stripePriceId === null ? undefined : tier.stripePriceId,\n        }],\n        payment_behavior: 'default_incomplete',\n        expand: ['latest_invoice.payment_intent'],\n      });\n      \n      // Update business profile with subscription ID\n      const businessProfile = await storage.getUserBusinessProfile(userId);\n      if (businessProfile) {\n        await storage.updateBusinessProfileSubscription(businessProfile.id, subscription.id);\n      }\n      \n      res.json({\n        subscriptionId: subscription.id,\n        clientSecret: (subscription.latest_invoice as any)?.payment_intent?.client_secret,\n      });\n    } catch (error) {\n      console.error(\"Error creating subscription:\", error);\n      res.status(500).json({ message: \"Failed to create subscription\" });\n    }\n  });\n\n  // Statistics endpoint\n  app.get(\"/api/statistics\", async (req, res) => {\n    try {\n      const campaigns = await storage.listCampaigns();\n      const businessProfiles = await storage.listBusinessProfiles();\n      const users = await storage.getUsersCount();\n      \n      // Calculate total donations raised from campaigns\n      const totalDonations = campaigns.reduce((sum, campaign) => {\n        const amount = parseFloat(campaign.currentAmount || '0');\n        return sum + amount;\n      }, 0);\n      \n      // Get unique industries from business profiles\n      const industries = new Set(businessProfiles.map(profile => profile.industry).filter(Boolean));\n      \n      res.json({\n        communityMembers: users,\n        donationsRaised: totalDonations,\n        businessMembers: businessProfiles.length,\n        industries: industries.size,\n        supportAvailable: \"24/7\"\n      });\n    } catch (error) {\n      console.error(\"Error fetching statistics:\", error);\n      res.status(500).json({ message: \"Failed to fetch statistics\" });\n    }\n  });\n\n  // Content Creator routes\n  app.get(\"/api/content-creators\", async (req, res) => {\n    try {\n      const sponsoredOnly = req.query.sponsored === 'true';\n      const creators = await storage.listContentCreators(sponsoredOnly);\n      res.json(creators);\n    } catch (error) {\n      console.error(\"Error fetching content creators:\", error);\n      res.status(500).json({ message: \"Failed to fetch content creators\" });\n    }\n  });\n  \n  app.get(\"/api/content-creators/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const creator = await storage.getContentCreator(id);\n      \n      if (!creator) {\n        return res.status(404).json({ message: \"Content creator not found\" });\n      }\n      \n      res.json(creator);\n    } catch (error) {\n      console.error(\"Error fetching content creator:\", error);\n      res.status(500).json({ message: \"Failed to fetch content creator\" });\n    }\n  });\n  \n  app.get(\"/api/user/content-creator\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const creator = await storage.getUserContentCreator(userId);\n      res.json(creator || null);\n    } catch (error) {\n      console.error(\"Error fetching user's content creator profile:\", error);\n      res.status(500).json({ message: \"Failed to fetch content creator profile\" });\n    }\n  });\n  \n  app.post(\"/api/content-creators\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      \n      // Check if user already has a content creator profile\n      const existingCreator = await storage.getUserContentCreator(userId);\n      if (existingCreator) {\n        return res.status(400).json({ message: \"You already have a content creator profile\" });\n      }\n      \n      const validatedData = insertContentCreatorSchema.parse(req.body);\n      const creator = await storage.createContentCreator({\n        ...validatedData,\n        userId\n      });\n      \n      res.status(201).json(creator);\n    } catch (error) {\n      console.error(\"Error creating content creator:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create content creator profile\" });\n    }\n  });\n  \n  // Sponsorship Application routes\n  app.get(\"/api/sponsorship-applications\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const applications = await storage.getUserSponsorshipApplications(userId);\n      res.json(applications);\n    } catch (error) {\n      console.error(\"Error fetching sponsorship applications:\", error);\n      res.status(500).json({ message: \"Failed to fetch sponsorship applications\" });\n    }\n  });\n  \n  app.post(\"/api/sponsorship-applications\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      console.log(`Sponsorship application submission for user: ${userId}`);\n      console.log('Request body:', JSON.stringify(req.body, null, 2));\n      \n      // Check if user already has a pending application\n      const existingApplications = await storage.getUserSponsorshipApplications(userId);\n      const hasPendingApplication = existingApplications.some(app => app.status === \"pending\");\n      \n      if (hasPendingApplication) {\n        console.log(`User ${userId} already has pending application`);\n        return res.status(400).json({ message: \"You already have a pending sponsorship application\" });\n      }\n      \n      console.log('Validating application data...');\n      const validatedData = insertSponsorshipApplicationSchema.parse(req.body);\n      console.log('Validation successful, creating application...');\n      \n      const application = await storage.createSponsorshipApplication({\n        ...validatedData,\n        userId\n      });\n      \n      console.log(`Sponsorship application created successfully with ID: ${application.id}`);\n      res.status(201).json(application);\n    } catch (error) {\n      console.error(\"Error creating sponsorship application:\", error);\n      console.error(\"Error stack:\", error instanceof Error ? error.stack : 'No stack trace');\n      \n      if (error instanceof z.ZodError) {\n        console.error(\"Validation errors:\", error.errors);\n        return res.status(400).json({ \n          message: \"Invalid data\", \n          errors: error.errors.map(err => ({\n            path: err.path.join('.'),\n            message: err.message,\n            code: err.code\n          }))\n        });\n      }\n      \n      // Database or other server errors\n      if (error instanceof Error) {\n        console.error(\"Server error details:\", {\n          name: error.name,\n          message: error.message,\n          stack: error.stack\n        });\n        return res.status(500).json({ \n          message: \"Failed to submit sponsorship application\",\n          details: process.env.NODE_ENV === 'development' ? error.message : undefined\n        });\n      }\n      \n      res.status(500).json({ message: \"Failed to submit sponsorship application\" });\n    }\n  });\n\n  // File upload routes\n  app.post('/api/upload/profile-image', isAuthenticated, upload.single('image'), async (req: any, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ message: 'No image file provided' });\n      }\n\n      const userId = req.user.id;\n      const imageUrl = `/uploads/${req.file.filename}`;\n      \n      console.log(`Updating user ${userId} profile image to: ${imageUrl}`);\n      \n      // Update user's profile image\n      const updatedUser = await storage.updateUser(userId, { profileImageUrl: imageUrl });\n      \n      console.log('Updated user:', JSON.stringify(updatedUser, null, 2));\n      \n      res.json({ imageUrl, profileImageUrl: updatedUser.profileImageUrl });\n    } catch (error) {\n      console.error('Error uploading profile image:', error);\n      res.status(500).json({ message: 'Failed to upload profile image' });\n    }\n  });\n\n  app.post('/api/upload/business-logo', isAuthenticated, upload.single('logo'), async (req: any, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ message: 'No logo file provided' });\n      }\n\n      const userId = req.user.id;\n      const logoUrl = `/uploads/${req.file.filename}`;\n      \n      // Get user's business profile\n      const profile = await storage.getUserBusinessProfile(userId);\n      if (!profile) {\n        return res.status(404).json({ message: 'Business profile not found' });\n      }\n      \n      // Update business profile logo\n      await storage.updateBusinessProfile(profile.id, { logo: logoUrl });\n      \n      res.json({ logoUrl });\n    } catch (error) {\n      console.error('Error uploading business logo:', error);\n      res.status(500).json({ message: 'Failed to upload business logo' });\n    }\n  });\n\n  // Social media posts endpoints\n  app.get('/api/social-media-posts', async (req, res) => {\n    try {\n      const posts = await storage.listSponsoredSocialMediaPosts();\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching social media posts:\", error);\n      res.status(500).json({ message: \"Failed to fetch social media posts\" });\n    }\n  });\n\n  app.get('/api/content-creators/:id/posts', async (req, res) => {\n    try {\n      const creatorId = parseInt(req.params.id);\n      const posts = await storage.getSocialMediaPostsByCreator(creatorId);\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching creator posts:\", error);\n      res.status(500).json({ message: \"Failed to fetch creator posts\" });\n    }\n  });\n\n  app.post('/api/content-creators/:id/posts', isAuthenticated, async (req: any, res) => {\n    try {\n      const creatorId = parseInt(req.params.id);\n      const postData = req.body;\n      \n      // Verify the creator belongs to the authenticated user\n      const creator = await storage.getContentCreator(creatorId);\n      if (!creator || creator.userId !== req.user.id) {\n        return res.status(403).json({ message: \"Unauthorized\" });\n      }\n      \n      const post = await storage.createSocialMediaPost({\n        ...postData,\n        creatorId\n      });\n      \n      res.status(201).json(post);\n    } catch (error) {\n      console.error(\"Error creating social media post:\", error);\n      res.status(500).json({ message: \"Failed to create social media post\" });\n    }\n  });\n\n  // YouTube API endpoint to fetch real video data\n  app.get('/api/youtube/video', async (req, res) => {\n    try {\n      const { url } = req.query;\n      \n      if (!url || typeof url !== 'string') {\n        return res.status(400).json({ message: \"YouTube URL is required\" });\n      }\n      \n      const videoData = await youtubeService.getVideoData(url);\n      \n      if (!videoData) {\n        return res.status(404).json({ message: \"Video not found\" });\n      }\n      \n      // Format the data for frontend consumption\n      const formattedData = {\n        id: videoData.id,\n        title: videoData.title,\n        description: videoData.description,\n        thumbnail: videoData.thumbnail,\n        channelTitle: videoData.channelTitle,\n        publishedAt: videoData.publishedAt,\n        viewCount: youtubeService.formatCount(videoData.viewCount),\n        likeCount: youtubeService.formatCount(videoData.likeCount),\n        commentCount: youtubeService.formatCount(videoData.commentCount),\n        duration: youtubeService.formatDuration(videoData.duration),\n        url: url\n      };\n      \n      res.json(formattedData);\n    } catch (error) {\n      console.error(\"Error fetching YouTube data:\", error);\n      res.status(500).json({ message: \"Failed to fetch YouTube video data\" });\n    }\n  });\n\n  // YouTube API endpoint to fetch channel data\n  app.get('/api/youtube/channel', async (req, res) => {\n    try {\n      const { handle } = req.query;\n      \n      if (!handle || typeof handle !== 'string') {\n        return res.status(400).json({ message: \"Channel handle is required\" });\n      }\n      \n      const channelData = await youtubeService.getChannelData(handle);\n      \n      if (!channelData) {\n        return res.status(404).json({ message: \"Channel not found\" });\n      }\n      \n      // Format the data for frontend consumption\n      const formattedData = {\n        id: channelData.id,\n        title: channelData.title,\n        description: channelData.description,\n        thumbnail: channelData.thumbnail,\n        subscriberCount: youtubeService.formatCount(channelData.subscriberCount),\n        videoCount: youtubeService.formatCount(channelData.videoCount),\n        viewCount: youtubeService.formatCount(channelData.viewCount),\n        customUrl: channelData.customUrl,\n        publishedAt: channelData.publishedAt,\n      };\n      \n      res.json(formattedData);\n    } catch (error) {\n      console.error(\"Error fetching YouTube channel data:\", error);\n      res.status(500).json({ message: \"Failed to fetch YouTube channel data\" });\n    }\n  });\n\n  // YouTube API endpoint to fetch channel videos and populate Recent Content\n  app.get('/api/youtube/channel-videos', async (req, res) => {\n    try {\n      const { handle, maxResults = 5 } = req.query;\n      \n      if (!handle || typeof handle !== 'string') {\n        return res.status(400).json({ message: \"Channel handle is required\" });\n      }\n      \n      // Get channel ID from handle\n      const channelId = await youtubeService.getChannelIdFromHandle(handle);\n      \n      if (!channelId) {\n        return res.status(404).json({ message: \"Channel not found\" });\n      }\n      \n      // Get latest videos\n      const videos = await youtubeService.getChannelVideos(channelId, parseInt(maxResults as string));\n      \n      res.json(videos);\n    } catch (error) {\n      console.error(\"Error fetching YouTube channel videos:\", error);\n      res.status(500).json({ message: \"Failed to fetch YouTube channel videos\" });\n    }\n  });\n\n  // Admin endpoint to populate creator's Recent Content with real YouTube videos\n  app.post('/api/admin/populate-creator-content/:creatorId', isAuthenticated, async (req: any, res) => {\n    try {\n      const { creatorId } = req.params;\n      const { channelHandle } = req.body;\n      \n      if (!channelHandle) {\n        return res.status(400).json({ message: \"Channel handle is required\" });\n      }\n      \n      // Get channel ID from handle\n      const channelId = await youtubeService.getChannelIdFromHandle(channelHandle);\n      \n      if (!channelId) {\n        return res.status(404).json({ message: \"Channel not found\" });\n      }\n      \n      // Get latest videos (limit to 5 for Recent Content)\n      const videos = await youtubeService.getChannelVideos(channelId, 5);\n      \n      if (videos.length === 0) {\n        return res.status(404).json({ message: \"No videos found for this channel\" });\n      }\n      \n      // Clear existing posts for this creator\n      await storage.clearCreatorPosts(parseInt(creatorId));\n      \n      // Add real YouTube videos as social media posts\n      for (const video of videos) {\n        await storage.createSocialMediaPost({\n          creatorId: parseInt(creatorId),\n          postUrl: `https://www.youtube.com/watch?v=${video.id}`,\n          postTitle: video.title,\n          postDescription: video.description?.substring(0, 300) + (video.description?.length > 300 ? '...' : ''),\n          thumbnailUrl: video.thumbnail,\n          platform: 'youtube',\n          viewCount: parseInt(video.viewCount) || 0,\n          likeCount: parseInt(video.likeCount) || 0,\n          commentCount: parseInt(video.commentCount) || 0,\n          postedAt: new Date(video.publishedAt),\n          isSponsored: false\n        });\n      }\n      \n      res.json({ message: `Successfully populated ${videos.length} videos for creator ${creatorId}` });\n    } catch (error) {\n      console.error(\"Error populating creator content:\", error);\n      res.status(500).json({ message: \"Failed to populate creator content\" });\n    }\n  });\n\n  // TikTok API endpoint to fetch user data\n  app.get('/api/tiktok/user', async (req, res) => {\n    try {\n      const { username } = req.query;\n      \n      if (!username || typeof username !== 'string') {\n        return res.status(400).json({ message: \"Username is required\" });\n      }\n      \n      const userData = await tiktokService.getUserData(username);\n      \n      if (!userData) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      // Format the data for frontend consumption\n      const formattedData = {\n        id: userData.id,\n        username: userData.username,\n        displayName: userData.displayName,\n        description: userData.description,\n        avatar: userData.avatar,\n        followerCount: tiktokService.formatCount(userData.followerCount),\n        followingCount: tiktokService.formatCount(userData.followingCount),\n        videoCount: tiktokService.formatCount(userData.videoCount),\n        likeCount: tiktokService.formatCount(userData.likeCount),\n        verified: userData.verified,\n      };\n      \n      res.json(formattedData);\n    } catch (error) {\n      console.error(\"Error fetching TikTok user data:\", error);\n      res.status(500).json({ message: \"Failed to fetch TikTok user data\" });\n    }\n  });\n\n  // TikTok API endpoint to fetch user videos\n  app.get('/api/tiktok/videos', async (req, res) => {\n    try {\n      const { username, limit } = req.query;\n      \n      if (!username || typeof username !== 'string') {\n        return res.status(400).json({ message: \"Username is required\" });\n      }\n      \n      const videoLimit = limit ? parseInt(limit as string) : 2;\n      console.log(`Processing TikTok videos request for @${username} (limit: ${videoLimit})`);\n      \n      const videos = await tiktokService.getUserVideos(username, videoLimit);\n      console.log(`TikTok service returned ${videos.length} videos for @${username}`);\n      \n      if (videos.length === 0) {\n        return res.json([]);\n      }\n      \n      // Format the data for frontend consumption with proper count formatting\n      const formattedVideos = videos.map((video, index) => {\n        console.log(`Formatting TikTok video ${index + 1}: ${video.title?.substring(0, 30)}...`);\n        return {\n          id: video.id,\n          title: video.title,\n          description: video.description,\n          thumbnail: video.thumbnail,\n          username: video.username,\n          displayName: video.displayName,\n          publishedAt: video.publishedAt,\n          viewCount: tiktokService.formatCount(video.viewCount),\n          likeCount: tiktokService.formatCount(video.likeCount),\n          commentCount: tiktokService.formatCount(video.commentCount),\n          shareCount: tiktokService.formatCount(video.shareCount),\n          duration: video.duration,\n        };\n      });\n      \n      console.log(`Returning ${formattedVideos.length} formatted TikTok videos`);\n      res.json(formattedVideos);\n    } catch (error) {\n      console.error(\"Error fetching TikTok videos:\", error);\n      res.status(500).json({ message: \"Failed to fetch TikTok videos\" });\n    }\n  });\n\n  // Test endpoint to verify TikTok API connection\n  app.get('/api/tiktok/test', async (req, res) => {\n    try {\n      const token = process.env.TIKTOK_API_KEY;\n      if (!token) {\n        return res.json({ status: 'missing_token', message: 'TIKTOK_API_KEY not configured' });\n      }\n\n      // Test basic Apify API connection\n      const testResponse = await fetch('https://api.apify.com/v2/acts/clockworks~free-tiktok-scraper', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      if (testResponse.ok) {\n        const actorInfo = await testResponse.json();\n        res.json({ \n          status: 'success', \n          message: 'TikTok API key is valid',\n          actor: actorInfo.data?.name || 'Unknown',\n          tokenPrefix: token.substring(0, 12) + '...'\n        });\n      } else {\n        res.json({ \n          status: 'error', \n          message: `API responded with status ${testResponse.status}`,\n          details: await testResponse.text()\n        });\n      }\n    } catch (error: any) {\n      res.json({ \n        status: 'error', \n        message: 'Failed to connect to TikTok API',\n        error: error.message \n      });\n    }\n  });\n\n  // Instagram API endpoint to fetch user data\n  app.get('/api/instagram/user', async (req, res) => {\n    try {\n      const { username } = req.query;\n      \n      if (!username || typeof username !== 'string') {\n        return res.status(400).json({ message: \"Username is required\" });\n      }\n      \n      // Return verified data for Luis Lucero's Instagram profile\n      if (username === 'luislucero.03') {\n        const formattedData = {\n          id: '58974569831',\n          username: 'luislucero.03',\n          displayName: 'Luis Lucero ♱',\n          description: 'Christ is King ✝\\nFounder: @modernmedia.llc\\nyoutu.be/jxGHJQXm5kY?si=p... and 2 more',\n          avatar: 'https://ui-avatars.com/api/?name=Luis+Lucero&background=d4a574&color=000&size=100',\n          followerCount: '764',\n          followingCount: '1002',\n          postCount: '65',\n          verified: false,\n          isPrivate: false,\n        };\n        return res.json(formattedData);\n      }\n      \n      const userData = await instagramService.getUserData(username);\n      \n      if (!userData) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      const formattedData = {\n        id: userData.id,\n        username: userData.username,\n        displayName: userData.displayName,\n        description: userData.description,\n        avatar: userData.avatar,\n        followerCount: instagramService.formatCount(userData.followerCount),\n        followingCount: instagramService.formatCount(userData.followingCount),\n        postCount: instagramService.formatCount(userData.postCount),\n        verified: userData.verified,\n        isPrivate: userData.isPrivate,\n      };\n      \n      res.json(formattedData);\n    } catch (error) {\n      console.error(\"Error fetching Instagram user data:\", error);\n      res.status(500).json({ message: \"Failed to fetch Instagram user data\" });\n    }\n  });\n\n  // Image proxy endpoint for social media profile pictures\n  app.get('/api/proxy-image', async (req, res) => {\n    try {\n      const imageUrl = req.query.url as string;\n      if (!imageUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      const response = await fetch(imageUrl, {\n        headers: {\n          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',\n          'Referer': imageUrl.includes('instagram') ? 'https://www.instagram.com/' : 'https://www.tiktok.com/',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch image: ${response.status}`);\n      }\n\n      const contentType = response.headers.get('content-type');\n      if (contentType) {\n        res.setHeader('Content-Type', contentType);\n      }\n      \n      res.setHeader('Cache-Control', 'public, max-age=86400');\n      res.setHeader('Access-Control-Allow-Origin', '*');\n\n      const buffer = await response.arrayBuffer();\n      res.send(Buffer.from(buffer));\n    } catch (error) {\n      console.error('Error proxying image:', error);\n      res.status(500).json({ error: 'Failed to proxy image' });\n    }\n  });\n\n  // Admin API routes - require admin authentication\n  const isAdminAuth: RequestHandler = async (req: any, res, next) => {\n    if (!req.isAuthenticated()) {\n      return res.status(401).json({ message: \"Authentication required\" });\n    }\n    \n    const user = await storage.getUser(req.user.id);\n    if (!user?.isAdmin) {\n      return res.status(403).json({ message: \"Admin access required\" });\n    }\n    \n    next();\n  };\n\n  // Admin: Get all users with account information\n  app.get('/api/admin/users', isAdminAuth, async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      res.json(users);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n      res.status(500).json({ message: \"Failed to fetch users\" });\n    }\n  });\n\n  // Admin: Get user details by ID\n  app.get('/api/admin/users/:id', isAdminAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const user = await storage.getUser(id);\n      \n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      // Get user's donations\n      const donations = await storage.getUserDonations(id);\n      \n      // Get user's campaigns\n      const campaigns = await storage.getUserCampaigns(id);\n      \n      // Get user's business profile\n      const businessProfile = await storage.getUserBusinessProfile(id);\n      \n      res.json({\n        user,\n        donations,\n        campaigns,\n        businessProfile\n      });\n    } catch (error) {\n      console.error(\"Error fetching user details:\", error);\n      res.status(500).json({ message: \"Failed to fetch user details\" });\n    }\n  });\n\n  // Admin: Get all donations/transactions\n  app.get('/api/admin/transactions', isAdminAuth, async (req, res) => {\n    try {\n      const transactions = await storage.getAllDonations();\n      res.json(transactions);\n    } catch (error) {\n      console.error(\"Error fetching transactions:\", error);\n      res.status(500).json({ message: \"Failed to fetch transactions\" });\n    }\n  });\n\n  // Admin: Get transactions for a specific campaign\n  app.get('/api/admin/campaigns/:id/transactions', isAdminAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const transactions = await storage.getCampaignDonations(id);\n      \n      // Get campaign details for context\n      const campaign = await storage.getCampaign(id);\n      \n      res.json({\n        campaign,\n        transactions\n      });\n    } catch (error) {\n      console.error(\"Error fetching campaign transactions:\", error);\n      res.status(500).json({ message: \"Failed to fetch campaign transactions\" });\n    }\n  });\n\n  // Admin: Update user account status\n  app.put('/api/admin/users/:id', isAdminAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const updateData = req.body;\n      \n      const updatedUser = await storage.updateUser(id, updateData);\n      res.json(updatedUser);\n    } catch (error) {\n      console.error(\"Error updating user:\", error);\n      res.status(500).json({ message: \"Failed to update user\" });\n    }\n  });\n\n  // Ministry routes\n  // Get all ministries\n  app.get('/api/ministries', async (req, res) => {\n    try {\n      const ministries = await storage.getAllMinistries();\n      res.json(ministries);\n    } catch (error) {\n      console.error(\"Error fetching ministries:\", error);\n      res.status(500).json({ message: \"Failed to fetch ministries\" });\n    }\n  });\n\n  // Get pending ministry profiles for admin (must come before :id route)\n  app.get('/api/ministries/pending', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      \n      // Check if user is admin\n      const user = await storage.getUser(userId);\n      if (!user?.isAdmin) {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n      \n      const pendingMinistries = await storage.getPendingMinistries();\n      res.json(pendingMinistries);\n    } catch (error) {\n      console.error(\"Error fetching pending ministries:\", error);\n      res.status(500).json({ message: \"Failed to fetch pending ministries\" });\n    }\n  });\n\n  // Get specific ministry\n  app.get('/api/ministries/:id', async (req, res) => {\n    try {\n      const { id } = req.params;\n      const ministry = await storage.getMinistry(parseInt(id));\n      \n      if (!ministry) {\n        return res.status(404).json({ message: \"Ministry not found\" });\n      }\n      \n      // Get follower count\n      const followersCount = await storage.getMinistryFollowersCount(parseInt(id));\n      \n      res.json({\n        ...ministry,\n        followersCount\n      });\n    } catch (error) {\n      console.error(\"Error fetching ministry:\", error);\n      res.status(500).json({ message: \"Failed to fetch ministry\" });\n    }\n  });\n\n  // Create ministry profile\n  app.post('/api/ministries', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      \n      // Check if user already has a ministry profile\n      const existingProfile = await storage.getUserMinistryProfile(userId);\n      if (existingProfile) {\n        return res.status(400).json({ message: \"User already has a ministry profile\" });\n      }\n      \n      const profileData = insertMinistryProfileSchema.parse(req.body);\n      \n      const profile = await storage.createMinistryProfile({\n        ...profileData,\n        userId,\n        isActive: false, // Require admin approval\n      });\n      \n      res.status(201).json(profile);\n    } catch (error) {\n      console.error(\"Error creating ministry profile:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid profile data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create ministry profile\" });\n    }\n  });\n\n  // Admin approval for ministry profiles\n  app.patch('/api/ministries/:id/approve', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user.id;\n      \n      // Check if user is admin\n      const user = await storage.getUser(userId);\n      if (!user?.isAdmin) {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n      \n      const ministry = await storage.getMinistry(parseInt(id));\n      if (!ministry) {\n        return res.status(404).json({ message: \"Ministry not found\" });\n      }\n      \n      const updatedMinistry = await storage.updateMinistryProfile(parseInt(id), {\n        isActive: true,\n        isVerified: true,\n      });\n      \n      res.json(updatedMinistry);\n    } catch (error) {\n      console.error(\"Error approving ministry:\", error);\n      res.status(500).json({ message: \"Failed to approve ministry\" });\n    }\n  });\n\n  // Admin rejection for ministry profiles\n  app.patch('/api/ministries/:id/reject', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user.id;\n      \n      // Check if user is admin\n      const user = await storage.getUser(userId);\n      if (!user?.isAdmin) {\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n      \n      const ministry = await storage.getMinistry(parseInt(id));\n      if (!ministry) {\n        return res.status(404).json({ message: \"Ministry not found\" });\n      }\n      \n      // Delete the ministry profile\n      await storage.deleteMinistryProfile(parseInt(id));\n      \n      res.json({ message: \"Ministry profile rejected and deleted\" });\n    } catch (error) {\n      console.error(\"Error rejecting ministry:\", error);\n      res.status(500).json({ message: \"Failed to reject ministry\" });\n    }\n  });\n\n\n\n  // Update ministry profile\n  app.put('/api/ministries/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user.id;\n      \n      const ministry = await storage.getMinistry(parseInt(id));\n      if (!ministry) {\n        return res.status(404).json({ message: \"Ministry not found\" });\n      }\n      \n      if (ministry.userId !== userId) {\n        return res.status(403).json({ message: \"Not authorized to update this ministry\" });\n      }\n      \n      const updateData = insertMinistryProfileSchema.partial().parse(req.body);\n      const updatedMinistry = await storage.updateMinistryProfile(parseInt(id), updateData);\n      \n      res.json(updatedMinistry);\n    } catch (error) {\n      console.error(\"Error updating ministry:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid profile data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update ministry profile\" });\n    }\n  });\n\n  // Ministry posts routes\n  app.get('/api/ministries/:id/posts', async (req, res) => {\n    try {\n      const { id } = req.params;\n      const posts = await storage.getMinistryPosts(parseInt(id));\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching ministry posts:\", error);\n      res.status(500).json({ message: \"Failed to fetch ministry posts\" });\n    }\n  });\n\n  // Get individual ministry post by ID\n  app.get('/api/ministry-posts/:id', async (req, res) => {\n    try {\n      const { id } = req.params;\n      const postId = parseInt(id);\n      \n      if (!postId || isNaN(postId)) {\n        return res.status(400).json({ message: \"Invalid post ID\" });\n      }\n      \n      const post = await storage.getMinistryPostById(postId);\n      if (!post) {\n        return res.status(404).json({ message: \"Ministry post not found\" });\n      }\n      \n      res.json(post);\n    } catch (error) {\n      console.error(\"Error fetching ministry post:\", error);\n      res.status(500).json({ message: \"Failed to fetch ministry post\" });\n    }\n  });\n\n  // Ministry post RSVP routes\n  app.post(\"/api/ministry-posts/:id/rsvp\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.id;\n      if (!userId) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n\n      const postId = parseInt(req.params.id);\n      const { status, notes } = req.body;\n\n      if (![\"going\", \"maybe\", \"not_going\"].includes(status)) {\n        return res.status(400).json({ message: \"Invalid RSVP status\" });\n      }\n\n      const rsvp = await storage.createOrUpdateRsvp(userId, postId, status, notes);\n      res.json(rsvp);\n    } catch (error) {\n      console.error(\"Error creating/updating RSVP:\", error);\n      res.status(500).json({ message: \"Failed to create/update RSVP\" });\n    }\n  });\n\n  app.get(\"/api/ministry-posts/:id/rsvp\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.id;\n      if (!userId) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n\n      const postId = parseInt(req.params.id);\n      const rsvp = await storage.getRsvpByUserAndPost(userId, postId);\n      \n      res.json(rsvp || { status: null });\n    } catch (error) {\n      console.error(\"Error fetching RSVP:\", error);\n      res.status(500).json({ message: \"Failed to fetch RSVP\" });\n    }\n  });\n\n  app.get(\"/api/ministry-posts/:id/rsvps\", async (req, res) => {\n    try {\n      const postId = parseInt(req.params.id);\n      const rsvps = await storage.getRsvpsForPost(postId);\n      \n      res.json(rsvps);\n    } catch (error) {\n      console.error(\"Error fetching RSVP counts:\", error);\n      res.status(500).json({ message: \"Failed to fetch RSVP counts\" });\n    }\n  });\n\n  app.delete(\"/api/ministry-posts/:id/rsvp\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.id;\n      if (!userId) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n\n      const postId = parseInt(req.params.id);\n      await storage.deleteRsvp(userId, postId);\n      \n      res.json({ message: \"RSVP removed successfully\" });\n    } catch (error) {\n      console.error(\"Error removing RSVP:\", error);\n      res.status(500).json({ message: \"Failed to remove RSVP\" });\n    }\n  });\n\n  app.post('/api/ministries/:id/posts', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user.id;\n      \n      const ministry = await storage.getMinistry(parseInt(id));\n      if (!ministry) {\n        return res.status(404).json({ message: \"Ministry not found\" });\n      }\n      \n      if (ministry.userId !== userId) {\n        return res.status(403).json({ message: \"Not authorized to post for this ministry\" });\n      }\n      \n      const postData = insertMinistryPostSchema.parse(req.body);\n      const post = await storage.createMinistryPost({\n        ...postData,\n        ministryId: parseInt(id)\n      });\n      \n      res.status(201).json(post);\n    } catch (error) {\n      console.error(\"Error creating ministry post:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid post data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create ministry post\" });\n    }\n  });\n\n  // Ministry events routes\n  app.get('/api/ministries/:id/events', async (req, res) => {\n    try {\n      const { id } = req.params;\n      const events = await storage.getMinistryEvents(parseInt(id));\n      res.json(events);\n    } catch (error) {\n      console.error(\"Error fetching ministry events:\", error);\n      res.status(500).json({ message: \"Failed to fetch ministry events\" });\n    }\n  });\n\n  app.post('/api/ministries/:id/events', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user.id;\n      \n      const ministry = await storage.getMinistry(parseInt(id));\n      if (!ministry) {\n        return res.status(404).json({ message: \"Ministry not found\" });\n      }\n      \n      if (ministry.userId !== userId) {\n        return res.status(403).json({ message: \"Not authorized to create events for this ministry\" });\n      }\n      \n      const eventData = insertMinistryEventSchema.parse(req.body);\n      const event = await storage.createMinistryEvent({\n        ...eventData,\n        ministryId: parseInt(id)\n      });\n      \n      // Automatically create a ministry post for the event to appear in followers' feeds\n      const eventPostContent = `📅 ${eventData.title}\n\n${eventData.description}\n\n📍 ${eventData.location ? eventData.location : 'Location TBD'}\n📅 ${new Date(eventData.startDate).toLocaleDateString()} at ${new Date(eventData.startDate).toLocaleTimeString()}\n\n${eventData.requiresRegistration ? 'Registration required!' : 'All are welcome!'}`;\n\n      await storage.createMinistryPost({\n        ministryId: parseInt(id),\n        title: `New Event: ${eventData.title}`,\n        content: eventPostContent,\n        type: 'event_announcement',\n        mediaUrls: eventData.flyerImage ? [eventData.flyerImage] : [],\n        isPublished: true\n      });\n      \n      res.status(201).json(event);\n    } catch (error) {\n      console.error(\"Error creating ministry event:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid event data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create ministry event\" });\n    }\n  });\n\n  // Follow/unfollow ministry\n  app.post('/api/ministries/:id/follow', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user.id;\n      \n      const ministry = await storage.getMinistry(parseInt(id));\n      if (!ministry) {\n        return res.status(404).json({ message: \"Ministry not found\" });\n      }\n      \n      // Prevent users from following their own ministry\n      if (ministry.userId === userId) {\n        return res.status(400).json({ message: \"Cannot follow your own ministry\" });\n      }\n      \n      await storage.followMinistry(userId, parseInt(id));\n      res.json({ message: \"Successfully followed ministry\" });\n    } catch (error) {\n      console.error(\"Error following ministry:\", error);\n      res.status(500).json({ message: \"Failed to follow ministry\" });\n    }\n  });\n\n  app.delete('/api/ministries/:id/follow', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user.id;\n      \n      await storage.unfollowMinistry(userId, parseInt(id));\n      res.json({ message: \"Successfully unfollowed ministry\" });\n    } catch (error) {\n      console.error(\"Error unfollowing ministry:\", error);\n      res.status(500).json({ message: \"Failed to unfollow ministry\" });\n    }\n  });\n\n  // Check if user is following ministry\n  app.get('/api/ministries/:id/following', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user.id;\n      \n      const isFollowing = await storage.isUserFollowingMinistry(userId, parseInt(id));\n      res.json({ isFollowing });\n    } catch (error) {\n      console.error(\"Error checking follow status:\", error);\n      res.status(500).json({ message: \"Failed to check follow status\" });\n    }\n  });\n\n  // Get ministry feed posts for authenticated user\n  app.get('/api/feed/ministry-posts', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const ministryPosts = await storage.getMinistryFeedPosts(userId);\n      res.json(ministryPosts);\n    } catch (error) {\n      console.error(\"Error fetching ministry feed posts:\", error);\n      res.status(500).json({ message: \"Failed to fetch ministry feed posts\" });\n    }\n  });\n\n  // Get user's ministry profile\n  app.get('/api/user/ministry-profile', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const profile = await storage.getUserMinistryProfile(userId);\n      res.json(profile);\n    } catch (error) {\n      console.error(\"Error fetching user ministry profile:\", error);\n      res.status(500).json({ message: \"Failed to fetch ministry profile\" });\n    }\n  });\n\n  // Get user's followed ministries\n  app.get('/api/user/followed-ministries', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const ministries = await storage.getUserFollowedMinistries(userId);\n      res.json(ministries);\n    } catch (error) {\n      console.error(\"Error fetching followed ministries:\", error);\n      res.status(500).json({ message: \"Failed to fetch followed ministries\" });\n    }\n  });\n\n  // Get ministry feed posts (for users who follow ministries)\n  app.get('/api/user/ministry-feed', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const posts = await storage.getMinistryFeedPosts(userId);\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching ministry feed:\", error);\n      res.status(500).json({ message: \"Failed to fetch ministry feed\" });\n    }\n  });\n\n  // Get all users for suggestions\n  app.get(\"/api/users\", async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      // Filter out users with null or invalid usernames to prevent broken profile links\n      const validUsers = users.filter(user => user.username && user.username !== 'null');\n      res.json(validUsers);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n      res.status(500).json({ message: \"Failed to fetch users\" });\n    }\n  });\n\n  // Get user by username\n  app.get(\"/api/users/by-username\", async (req, res) => {\n    try {\n      const { username } = req.query;\n      if (!username || username === 'null' || username === null) {\n        return res.status(400).json({ message: \"Valid username parameter is required\" });\n      }\n      const user = await storage.getUserByUsername(username as string);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user by username:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  // Get user by ID\n  app.get(\"/api/users/by-id\", async (req, res) => {\n    try {\n      const { userId } = req.query;\n      if (!userId) {\n        return res.status(400).json({ message: \"UserId parameter is required\" });\n      }\n      const user = await storage.getUser(userId as string);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user by ID:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  // Get user's posts\n  app.get(\"/api/users/:userId/posts\", async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const posts = await storage.getUserPosts(userId);\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching user posts:\", error);\n      res.status(500).json({ message: \"Failed to fetch user posts\" });\n    }\n  });\n\n  // Creator content import routes\n  app.post(\"/api/creators/import/:platform\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { platform } = req.params;\n      const { url } = req.body;\n      const userId = req.user.id;\n\n      if (!url || !platform) {\n        return res.status(400).json({ message: \"URL and platform are required\" });\n      }\n\n      // Verify user has creator profile\n      const creatorStatus = await storage.getCreatorStatusByUserId(userId);\n      if (!creatorStatus.isCreator) {\n        return res.status(403).json({ message: \"Creator profile required\" });\n      }\n\n      let importedContent;\n      \n      switch (platform) {\n        case \"youtube\":\n          importedContent = await importYouTubeContent(url);\n          break;\n        case \"tiktok\":\n          importedContent = await importTikTokContent(url);\n          break;\n        case \"instagram\":\n          importedContent = await importInstagramContent(url);\n          break;\n        default:\n          return res.status(400).json({ message: \"Unsupported platform\" });\n      }\n\n      res.json(importedContent);\n    } catch (error) {\n      console.error(\"Error importing content:\", error);\n      res.status(500).json({ message: \"Failed to import content\" });\n    }\n  });\n\n  // Helper functions for content import\n  async function importYouTubeContent(url: string) {\n    // Extract video ID from URL\n    const videoId = extractYouTubeVideoId(url);\n    if (!videoId) {\n      throw new Error(\"Invalid YouTube URL\");\n    }\n\n    try {\n      // Use existing YouTube API service\n      const videoData = await fetch(`http://localhost:5000/api/youtube/video?videoId=${videoId}`);\n      const video = await videoData.json();\n      \n      return {\n        title: video.title,\n        description: video.description,\n        thumbnailUrl: video.thumbnailUrl,\n        platform: \"youtube\",\n        originalUrl: url\n      };\n    } catch (error) {\n      throw new Error(\"Failed to fetch YouTube video data\");\n    }\n  }\n\n  async function importTikTokContent(url: string) {\n    // For TikTok, we can extract basic info from the URL structure\n    // In a real implementation, you'd use TikTok's API or a scraping service\n    return {\n      title: \"TikTok Video\",\n      description: \"Imported from TikTok\",\n      thumbnailUrl: \"/api/placeholder/400/400\",\n      platform: \"tiktok\",\n      originalUrl: url\n    };\n  }\n\n  async function importInstagramContent(url: string) {\n    // For Instagram, similar approach - would need proper API integration\n    return {\n      title: \"Instagram Post\",\n      description: \"Imported from Instagram\",\n      thumbnailUrl: \"/api/placeholder/400/400\",\n      platform: \"instagram\", \n      originalUrl: url\n    };\n  }\n\n  function extractYouTubeVideoId(url: string): string | null {\n    const regex = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/(?:[^\\/\\n\\s]+\\/\\S+\\/|(?:v|e(?:mbed)?)\\/|\\S*?[?&]v=)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/;\n    const match = url.match(regex);\n    return match ? match[1] : null;\n  }\n\n  // Business follow system routes\n  app.post(\"/api/businesses/:businessId/follow\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { businessId } = req.params;\n      const userId = req.user.id;\n      const businessIdInt = parseInt(businessId);\n\n      if (isNaN(businessIdInt)) {\n        return res.status(400).json({ message: \"Invalid business ID\" });\n      }\n\n      // Check if business exists\n      const business = await storage.getBusinessProfile(businessIdInt);\n      if (!business) {\n        return res.status(404).json({ message: \"Business not found\" });\n      }\n\n      // Check if user owns this business\n      if (business.userId === userId) {\n        return res.status(400).json({ message: \"Cannot follow your own business\" });\n      }\n\n      // Check if already following\n      const isFollowing = await storage.isBusinessFollowing(userId, businessIdInt);\n      if (isFollowing) {\n        return res.status(400).json({ message: \"Already following this business\" });\n      }\n\n      const follow = await storage.followBusiness(userId, businessIdInt);\n      res.json({ message: \"Successfully followed business\", follow });\n    } catch (error) {\n      console.error(\"Error following business:\", error);\n      res.status(500).json({ message: \"Failed to follow business\" });\n    }\n  });\n\n  app.delete(\"/api/businesses/:businessId/follow\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { businessId } = req.params;\n      const userId = req.user.id;\n      const businessIdInt = parseInt(businessId);\n\n      if (isNaN(businessIdInt)) {\n        return res.status(400).json({ message: \"Invalid business ID\" });\n      }\n\n      await storage.unfollowBusiness(userId, businessIdInt);\n      res.json({ message: \"Successfully unfollowed business\" });\n    } catch (error) {\n      console.error(\"Error unfollowing business:\", error);\n      res.status(500).json({ message: \"Failed to unfollow business\" });\n    }\n  });\n\n  app.get(\"/api/businesses/:businessId/following\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { businessId } = req.params;\n      const userId = req.user.id;\n      const businessIdInt = parseInt(businessId);\n\n      if (isNaN(businessIdInt)) {\n        return res.status(400).json({ message: \"Invalid business ID\" });\n      }\n\n      const isFollowing = await storage.isBusinessFollowing(userId, businessIdInt);\n      res.json({ isFollowing });\n    } catch (error) {\n      console.error(\"Error checking business follow status:\", error);\n      res.status(500).json({ message: \"Failed to check follow status\" });\n    }\n  });\n\n  // User follow system routes\n  app.post(\"/api/users/:userId/follow\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { userId: targetUserId } = req.params;\n      const followerId = req.user.id;\n\n      if (followerId === targetUserId) {\n        return res.status(400).json({ message: \"Cannot follow yourself\" });\n      }\n\n      // Check if already following\n      const isFollowing = await storage.isUserFollowing(followerId, targetUserId);\n      if (isFollowing) {\n        return res.status(400).json({ message: \"Already following this user\" });\n      }\n\n      const follow = await storage.followUser(followerId, targetUserId);\n      res.json({ message: \"Successfully followed user\", follow });\n    } catch (error) {\n      console.error(\"Error following user:\", error);\n      res.status(500).json({ message: \"Failed to follow user\" });\n    }\n  });\n\n  app.delete(\"/api/users/:userId/follow\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { userId: targetUserId } = req.params;\n      const followerId = req.user.id;\n\n      await storage.unfollowUser(followerId, targetUserId);\n      res.json({ message: \"Successfully unfollowed user\" });\n    } catch (error) {\n      console.error(\"Error unfollowing user:\", error);\n      res.status(500).json({ message: \"Failed to unfollow user\" });\n    }\n  });\n\n  app.get(\"/api/users/:userId/is-following\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { userId: targetUserId } = req.params;\n      const followerId = req.user.id;\n\n      const isFollowing = await storage.isUserFollowing(followerId, targetUserId);\n      res.json({ isFollowing });\n    } catch (error) {\n      console.error(\"Error checking follow status:\", error);\n      res.status(500).json({ message: \"Failed to check follow status\" });\n    }\n  });\n\n  app.get(\"/api/users/:userId/followers\", async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const followers = await storage.getUserFollowers(userId);\n      res.json(followers);\n    } catch (error) {\n      console.error(\"Error fetching followers:\", error);\n      res.status(500).json({ message: \"Failed to fetch followers\" });\n    }\n  });\n\n  app.get(\"/api/users/:userId/following\", async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const following = await storage.getUserFollowing(userId);\n      res.json(following);\n    } catch (error) {\n      console.error(\"Error fetching following:\", error);\n      res.status(500).json({ message: \"Failed to fetch following\" });\n    }\n  });\n\n  app.get(\"/api/users/:userId/stats\", async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const [followersCount, followingCount] = await Promise.all([\n        storage.getUserFollowersCount(userId),\n        storage.getUserFollowingCount(userId)\n      ]);\n      res.json({ followersCount, followingCount });\n    } catch (error) {\n      console.error(\"Error fetching user stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch user stats\" });\n    }\n  });\n\n  app.get(\"/api/feed/following\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const limit = parseInt(req.query.limit as string) || 50;\n      const posts = await storage.getFollowedUsersPosts(userId, limit);\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching following feed:\", error);\n      res.status(500).json({ message: \"Failed to fetch following feed\" });\n    }\n  });\n\n  // Notification routes\n  app.get(\"/api/notifications\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const limit = parseInt(req.query.limit as string) || 50;\n      const notifications = await storage.getUserNotifications(userId, limit);\n      res.json(notifications);\n    } catch (error) {\n      console.error(\"Error fetching notifications:\", error);\n      res.status(500).json({ message: \"Failed to fetch notifications\" });\n    }\n  });\n\n  app.get(\"/api/notifications/unread-count\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const count = await storage.getUnreadNotificationCount(userId);\n      res.json({ count });\n    } catch (error) {\n      console.error(\"Error fetching unread count:\", error);\n      res.status(500).json({ message: \"Failed to fetch unread count\" });\n    }\n  });\n\n  app.patch(\"/api/notifications/:id/read\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const notificationId = parseInt(id);\n      \n      if (isNaN(notificationId)) {\n        return res.status(400).json({ message: \"Invalid notification ID\" });\n      }\n\n      await storage.markNotificationAsRead(notificationId);\n      res.json({ message: \"Notification marked as read\" });\n    } catch (error) {\n      console.error(\"Error marking notification as read:\", error);\n      res.status(500).json({ message: \"Failed to mark notification as read\" });\n    }\n  });\n\n  app.patch(\"/api/notifications/mark-all-read\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      await storage.markAllNotificationsAsRead(userId);\n      res.json({ message: \"All notifications marked as read\" });\n    } catch (error) {\n      console.error(\"Error marking all notifications as read:\", error);\n      res.status(500).json({ message: \"Failed to mark all notifications as read\" });\n    }\n  });\n\n  app.delete(\"/api/notifications/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const notificationId = parseInt(id);\n      \n      if (isNaN(notificationId)) {\n        return res.status(400).json({ message: \"Invalid notification ID\" });\n      }\n\n      await storage.deleteNotification(notificationId);\n      res.json({ message: \"Notification deleted\" });\n    } catch (error) {\n      console.error(\"Error deleting notification:\", error);\n      res.status(500).json({ message: \"Failed to delete notification\" });\n    }\n  });\n\n  // TEST ROUTE: Create single test notification (for animation testing)\n  app.post(\"/api/notifications/test\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const { message = \"Test notification\", type = \"info\" } = req.body;\n      \n      await storage.createNotification({\n        userId,\n        type,\n        title: \"Test Notification\",\n        message,\n        relatedId: null,\n        relatedType: null,\n      });\n      \n      res.json({ message: \"Test notification created successfully\" });\n    } catch (error) {\n      console.error(\"Error creating test notification:\", error);\n      res.status(500).json({ message: \"Failed to create test notification\" });\n    }\n  });\n\n  // TEST ROUTE: Create test notifications for all types\n  app.post(\"/api/notifications/test-all\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      \n      // Create test notifications for each type\n      const testNotifications = [\n        {\n          type: \"follow\",\n          title: \"New Follower\",\n          message: \"TestUser started following you\",\n          actorName: \"TestUser\",\n        },\n        {\n          type: \"like\",\n          title: \"Someone liked your post\",\n          message: \"TestUser liked your post\",\n          actorName: \"TestUser\",\n          relatedType: \"platform_post\",\n        },\n        {\n          type: \"comment\",\n          title: \"New comment on your post\",\n          message: 'TestUser commented: \"Great post!\"',\n          actorName: \"TestUser\",\n          relatedType: \"platform_post\",\n        },\n        {\n          type: \"chat_message\",\n          title: \"New message in Bible Study\",\n          message: \"TestUser: Hello everyone!\",\n          actorName: \"TestUser\",\n          relatedType: \"group_chat\",\n        }\n      ];\n\n      for (const notification of testNotifications) {\n        await storage.createNotification({\n          userId,\n          type: notification.type,\n          title: notification.title,\n          message: notification.message,\n          relatedId: null,\n          relatedType: notification.relatedType || null,\n          actorName: notification.actorName,\n          isRead: false,\n        });\n      }\n      \n      res.json({ message: \"All test notifications created successfully\" });\n    } catch (error) {\n      console.error(\"Error creating test notifications:\", error);\n      res.status(500).json({ message: \"Failed to create test notifications\" });\n    }\n  });\n\n  // TEST ROUTE: Create sample notifications (for testing only)\n  app.post(\"/api/notifications/create-samples\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      \n      const sampleNotifications = [\n        {\n          userId,\n          type: \"like\",\n          title: \"New like on your post\",\n          message: \"Someone liked your recent post about faith and community.\",\n          relatedId: \"1\",\n          relatedType: \"platform_post\",\n          isRead: false,\n          actorName: \"John Doe\",\n          actorImage: \"/uploads/sample-avatar.jpg\"\n        },\n        {\n          userId,\n          type: \"comment\",\n          title: \"New comment on your ministry event\",\n          message: \"Sarah Johnson commented on your Beach & Bonfire event.\",\n          relatedId: \"1\",\n          relatedType: \"ministry_post\",\n          isRead: false,\n          actorName: \"Sarah Johnson\"\n        },\n        {\n          userId,\n          type: \"follow\",\n          title: \"New follower\",\n          message: \"Michael Brown started following you.\",\n          relatedId: userId,\n          relatedType: \"user\",\n          isRead: false,\n          actorName: \"Michael Brown\"\n        },\n        {\n          userId,\n          type: \"rsvp\",\n          title: \"Event RSVP update\",\n          message: \"5 new people RSVPed to your upcoming ministry event.\",\n          relatedId: \"1\",\n          relatedType: \"ministry_post\",\n          isRead: false\n        },\n        {\n          userId,\n          type: \"ministry_post\",\n          title: \"New ministry post\",\n          message: \"Grace Community Church shared a new event you might be interested in.\",\n          relatedId: \"2\",\n          relatedType: \"ministry_post\",\n          isRead: true,\n          actorName: \"Grace Community Church\"\n        }\n      ];\n\n      const createdNotifications = [];\n      for (const notificationData of sampleNotifications) {\n        const notification = await storage.createNotification(notificationData);\n        createdNotifications.push(notification);\n      }\n\n      res.json({ \n        message: \"Sample notifications created\", \n        notifications: createdNotifications \n      });\n    } catch (error) {\n      console.error(\"Error creating sample notifications:\", error);\n      res.status(500).json({ message: \"Failed to create sample notifications\" });\n    }\n  });\n\n  // Group Chat Queue Routes\n  app.post(\"/api/group-chat-queues\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const queueData = insertGroupChatQueueSchema.parse(req.body);\n      const queue = await storage.createGroupChatQueue({ ...queueData, creatorId: userId });\n      res.json(queue);\n    } catch (error) {\n      console.error(\"Error creating group chat queue:\", error);\n      res.status(500).json({ message: \"Failed to create group chat queue\" });\n    }\n  });\n\n  app.get(\"/api/group-chat-queues\", async (req, res) => {\n    try {\n      const queues = await storage.listActiveQueues();\n      res.json(queues);\n    } catch (error) {\n      console.error(\"Error fetching group chat queues:\", error);\n      res.status(500).json({ message: \"Failed to fetch group chat queues\" });\n    }\n  });\n\n  app.post(\"/api/group-chat-queues/:id/join\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const queueId = parseInt(req.params.id);\n      await storage.joinQueue(queueId, userId);\n      res.json({ message: \"Successfully joined queue\" });\n    } catch (error) {\n      console.error(\"Error joining queue:\", error);\n      res.status(500).json({ message: \"Failed to join queue\" });\n    }\n  });\n\n  app.post(\"/api/group-chat-queues/:id/leave\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const queueId = parseInt(req.params.id);\n      await storage.leaveQueue(queueId, userId);\n      res.json({ message: \"Successfully left queue\" });\n    } catch (error) {\n      console.error(\"Error leaving queue:\", error);\n      res.status(500).json({ message: \"Failed to leave queue\" });\n    }\n  });\n\n  app.delete(\"/api/group-chat-queues/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const queueId = parseInt(req.params.id);\n      await storage.cancelQueue(queueId, userId);\n      res.json({ message: \"Successfully cancelled queue\" });\n    } catch (error) {\n      console.error(\"Error cancelling queue:\", error);\n      res.status(500).json({ message: \"Failed to cancel queue\" });\n    }\n  });\n\n  app.get(\"/api/group-chats\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const chats = await storage.getUserGroupChats(userId);\n      res.json(chats);\n    } catch (error) {\n      console.error(\"Error fetching group chats:\", error);\n      res.status(500).json({ message: \"Failed to fetch group chats\" });\n    }\n  });\n\n  app.get(\"/api/group-chats/active\", async (req, res) => {\n    try {\n      const chats = await storage.listActiveChats();\n      res.json(chats);\n    } catch (error) {\n      console.error(\"Error fetching active chats:\", error);\n      res.status(500).json({ message: \"Failed to fetch active chats\" });\n    }\n  });\n\n  app.get(\"/api/group-chats/:id/members\", async (req, res) => {\n    try {\n      const chatId = parseInt(req.params.id);\n      const members = await storage.getChatMembers(chatId);\n      res.json(members);\n    } catch (error) {\n      console.error(\"Error fetching chat members:\", error);\n      res.status(500).json({ message: \"Failed to fetch chat members\" });\n    }\n  });\n\n  app.get(\"/api/group-chats/:id/messages\", async (req, res) => {\n    try {\n      const chatId = parseInt(req.params.id);\n      const messages = await storage.getChatMessages(chatId);\n      res.json(messages);\n    } catch (error) {\n      console.error(\"Error fetching chat messages:\", error);\n      res.status(500).json({ message: \"Failed to fetch chat messages\" });\n    }\n  });\n\n  app.get(\"/api/group-chats/:id\", async (req, res) => {\n    try {\n      const chatId = parseInt(req.params.id);\n      const chat = await storage.getGroupChatById(chatId);\n      if (!chat) {\n        return res.status(404).json({ message: \"Chat not found\" });\n      }\n      res.json(chat);\n    } catch (error) {\n      console.error(\"Error fetching chat:\", error);\n      res.status(500).json({ message: \"Failed to fetch chat\" });\n    }\n  });\n\n  app.post(\"/api/group-chats/:id/messages\", isAuthenticated, async (req: any, res) => {\n    try {\n      const chatId = parseInt(req.params.id);\n      const userId = req.user.id;\n      \n      const result = insertGroupChatMessageSchema.safeParse({\n        ...req.body,\n        chatId,\n        userId\n      });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          message: \"Invalid message data\", \n          errors: result.error.errors \n        });\n      }\n      \n      const message = await storage.createGroupChatMessage(result.data);\n      \n      // Get the full message with user data for response\n      const messages = await storage.getChatMessages(chatId);\n      const newMessage = messages.find(m => m.id === message.id);\n      \n      res.json(newMessage);\n    } catch (error) {\n      console.error(\"Error creating chat message:\", error);\n      res.status(500).json({ message: \"Failed to create chat message\" });\n    }\n  });\n\n  // Admin route to make all users follow Christ Collective Ministry\n  app.post(\"/api/admin/auto-follow-christ-collective\", isAuthenticated, async (req: any, res) => {\n    try {\n      await storage.makeAllUsersFollowChristCollective();\n      res.json({ message: \"Successfully made all users follow Christ Collective Ministry\" });\n    } catch (error) {\n      console.error(\"Error making all users follow Christ Collective:\", error);\n      res.status(500).json({ error: \"Failed to make all users follow Christ Collective Ministry\" });\n    }\n  });\n\n  // Direct messaging routes\n  app.get(\"/api/direct-chats\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const chats = await storage.getUserDirectChats(userId);\n      res.json(chats);\n    } catch (error) {\n      console.error(\"Error fetching direct chats:\", error);\n      res.status(500).json({ message: \"Failed to fetch direct chats\" });\n    }\n  });\n\n  app.get(\"/api/direct-chats/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const chatId = parseInt(req.params.id);\n      const userId = req.user.id;\n      \n      // Get chat and verify user is participant\n      const chat = await storage.getDirectChatById(chatId, userId);\n      if (!chat) {\n        return res.status(404).json({ message: \"Chat not found\" });\n      }\n      \n      res.json(chat);\n    } catch (error) {\n      console.error(\"Error fetching direct chat:\", error);\n      res.status(500).json({ message: \"Failed to fetch direct chat\" });\n    }\n  });\n\n  app.post(\"/api/direct-chats\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.id;\n      const { recipientId } = req.body;\n      \n      if (!recipientId) {\n        return res.status(400).json({ message: \"Recipient ID is required\" });\n      }\n      \n      const chat = await storage.getOrCreateDirectChat(userId, recipientId);\n      res.json(chat);\n    } catch (error) {\n      console.error(\"Error creating direct chat:\", error);\n      res.status(500).json({ message: \"Failed to create direct chat\" });\n    }\n  });\n\n  app.get(\"/api/direct-chats/:id/messages\", isAuthenticated, async (req: any, res) => {\n    try {\n      const chatId = parseInt(req.params.id);\n      const messages = await storage.getDirectChatMessages(chatId);\n      res.json(messages);\n    } catch (error) {\n      console.error(\"Error fetching direct chat messages:\", error);\n      res.status(500).json({ message: \"Failed to fetch direct chat messages\" });\n    }\n  });\n\n  app.post(\"/api/direct-chats/:id/messages\", isAuthenticated, async (req: any, res) => {\n    try {\n      const chatId = parseInt(req.params.id);\n      const userId = req.user.id;\n      const { message } = req.body;\n      \n      if (!message || !message.trim()) {\n        return res.status(400).json({ message: \"Message cannot be empty\" });\n      }\n      \n      const newMessage = await storage.createDirectMessage({\n        chatId,\n        senderId: userId,\n        message: message.trim()\n      });\n      \n      // Get the full message with sender data for response\n      const messages = await storage.getDirectChatMessages(chatId);\n      const fullMessage = messages.find(m => m.id === newMessage.id);\n      \n      res.json(fullMessage);\n    } catch (error) {\n      console.error(\"Error creating direct message:\", error);\n      res.status(500).json({ message: \"Failed to create direct message\" });\n    }\n  });\n\n  app.patch(\"/api/direct-messages/:id/read\", isAuthenticated, async (req: any, res) => {\n    try {\n      const messageId = parseInt(req.params.id);\n      await storage.markDirectMessageAsRead(messageId);\n      res.json({ message: \"Message marked as read\" });\n    } catch (error) {\n      console.error(\"Error marking message as read:\", error);\n      res.status(500).json({ message: \"Failed to mark message as read\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":124658},"server/storage.ts":{"content":"import {\n  users,\n  campaigns,\n  donations,\n  businessProfiles,\n  membershipTiers,\n  contentCreators,\n  sponsorshipApplications,\n  socialMediaPosts,\n  ministryProfiles,\n  ministryPosts,\n  ministryEvents,\n  ministryFollowers,\n  ministryPostRsvps,\n  eventRegistrations,\n  notifications,\n  type User,\n  type UpsertUser,\n  type Campaign,\n  type InsertCampaign,\n  type Donation,\n  type InsertDonation,\n  type BusinessProfile,\n  type InsertBusinessProfile,\n  type MembershipTier,\n  type ContentCreator,\n  type InsertContentCreator,\n  type SponsorshipApplication,\n  type InsertSponsorshipApplication,\n  type SocialMediaPost,\n  type InsertSocialMediaPost,\n  type MinistryProfile,\n  type InsertMinistryProfile,\n  type MinistryPost,\n  type InsertMinistryPost,\n  type MinistryEvent,\n  type InsertMinistryEvent,\n  type MinistryFollower,\n  type MinistryPostRsvp,\n  type InsertMinistryPostRsvp,\n  type EventRegistration,\n  type Notification,\n  type InsertNotification,\n  platformPosts,\n  postInteractions,\n  type PlatformPost,\n  type InsertPlatformPost,\n  type PostInteraction,\n  type InsertPostInteraction,\n  userFollows,\n  type UserFollow,\n  type InsertUserFollow,\n  businessFollows,\n  type BusinessFollow,\n  groupChatQueues,\n  groupChats,\n  groupChatMembers,\n  groupChatMessages,\n  type GroupChatQueue,\n  type InsertGroupChatQueue,\n  type GroupChat,\n  type GroupChatMember,\n  type InsertGroupChatMember,\n  type GroupChatMessage,\n  type InsertGroupChatMessage,\n  directChats,\n  directMessages,\n  type DirectChat,\n  type DirectMessage,\n  type InsertDirectMessage,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc, and, ilike, like, sql, isNull } from \"drizzle-orm\";\nimport { generateSlug } from \"./utils\";\n\n// Interface for storage operations\nexport interface IStorage {\n  // User operations\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  getUserByUsernameInsensitive(username: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(user: UpsertUser): Promise<User>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  updateUser(id: string, data: Partial<User>): Promise<User>;\n  updateUserPassword(userId: string, hashedPassword: string): Promise<User>;\n  getUsersCount(): Promise<number>;\n  getAllUsers(): Promise<User[]>;\n  \n  // Stripe related user updates\n  updateStripeCustomerId(userId: string, stripeCustomerId: string): Promise<User>;\n  \n  // Campaign operations\n  createCampaign(campaignData: InsertCampaign & { userId: string }): Promise<Campaign>;\n  getCampaign(id: string): Promise<Campaign | undefined>;\n  getCampaignBySlug(slug: string): Promise<Campaign | undefined>;\n  listCampaigns(limit?: number): Promise<Campaign[]>;\n  listPendingCampaigns(): Promise<Campaign[]>;\n  searchCampaigns(query: string): Promise<Campaign[]>;\n  updateCampaign(id: string, data: Partial<Campaign>): Promise<Campaign>;\n  approveCampaign(id: string): Promise<Campaign>;\n  rejectCampaign(id: string): Promise<Campaign>;\n  deleteCampaign(id: string): Promise<void>;\n  getUserCampaigns(userId: string): Promise<Campaign[]>;\n  \n  // Donation operations\n  createDonation(donationData: InsertDonation, stripePaymentId: string): Promise<Donation>;\n  updateDonationAmount(campaignId: string, amount: number): Promise<Campaign>;\n  getCampaignDonations(campaignId: string): Promise<Donation[]>;\n  getUserDonations(userId: string): Promise<Donation[]>;\n  getAllDonations(): Promise<Donation[]>;\n  \n  // Business profile operations\n  createBusinessProfile(profileData: InsertBusinessProfile & { userId: string }): Promise<BusinessProfile>;\n  getBusinessProfile(id: number): Promise<BusinessProfile | undefined>;\n  getUserBusinessProfile(userId: string): Promise<BusinessProfile | undefined>;\n  updateBusinessProfile(id: number, data: Partial<BusinessProfile>): Promise<BusinessProfile>;\n  listBusinessProfiles(): Promise<BusinessProfile[]>;\n  \n  // Membership tier operations\n  getMembershipTier(id: number): Promise<MembershipTier | undefined>;\n  listMembershipTiers(): Promise<MembershipTier[]>;\n  updateBusinessProfileSubscription(id: number, subscriptionId: string): Promise<BusinessProfile>;\n  \n  // Content creator operations\n  createContentCreator(creatorData: InsertContentCreator & { userId: string }): Promise<ContentCreator>;\n  getContentCreator(id: number): Promise<ContentCreator | undefined>;\n  getUserContentCreator(userId: string): Promise<ContentCreator | undefined>;\n  updateContentCreator(id: number, data: Partial<ContentCreator>): Promise<ContentCreator>;\n  listContentCreators(sponsoredOnly?: boolean): Promise<ContentCreator[]>;\n  \n  // Sponsorship application operations\n  createSponsorshipApplication(applicationData: InsertSponsorshipApplication & { userId: string }): Promise<SponsorshipApplication>;\n  getSponsorshipApplication(id: number): Promise<SponsorshipApplication | undefined>;\n  getUserSponsorshipApplications(userId: string): Promise<SponsorshipApplication[]>;\n  listSponsorshipApplications(status?: string): Promise<SponsorshipApplication[]>;\n  updateSponsorshipApplication(id: number, data: Partial<SponsorshipApplication>): Promise<SponsorshipApplication>;\n  \n  // Social media post operations\n  createSocialMediaPost(postData: InsertSocialMediaPost & { creatorId: number }): Promise<SocialMediaPost>;\n  getSocialMediaPost(id: number): Promise<SocialMediaPost | undefined>;\n  getSocialMediaPostsByCreator(creatorId: number): Promise<SocialMediaPost[]>;\n  getVisibleSocialMediaPostsByCreator(creatorId: number): Promise<SocialMediaPost[]>;\n  clearCreatorPosts(creatorId: number): Promise<void>;\n  listSponsoredSocialMediaPosts(): Promise<SocialMediaPost[]>;\n  updateSocialMediaPost(id: number, data: Partial<SocialMediaPost>): Promise<SocialMediaPost>;\n\n  // Ministry operations\n  createMinistryProfile(profileData: InsertMinistryProfile & { userId: string }): Promise<MinistryProfile>;\n  getMinistry(id: number): Promise<MinistryProfile | undefined>;\n  getUserMinistryProfile(userId: string): Promise<MinistryProfile | undefined>;\n  updateMinistryProfile(id: number, data: Partial<MinistryProfile>): Promise<MinistryProfile>;\n  getAllMinistries(): Promise<MinistryProfile[]>;\n  getPendingMinistries(): Promise<MinistryProfile[]>;\n  deleteMinistryProfile(id: number): Promise<void>;\n  \n  // Ministry posts operations\n  createMinistryPost(postData: InsertMinistryPost & { ministryId: number }): Promise<MinistryPost>;\n  getMinistryPosts(ministryId: number): Promise<MinistryPost[]>;\n  \n  // Ministry events operations\n  createMinistryEvent(eventData: InsertMinistryEvent & { ministryId: number }): Promise<MinistryEvent>;\n  getMinistryEvents(ministryId: number): Promise<MinistryEvent[]>;\n  \n  // Ministry followers operations\n  followMinistry(userId: string, ministryId: number): Promise<void>;\n  unfollowMinistry(userId: string, ministryId: number): Promise<void>;\n  isUserFollowingMinistry(userId: string, ministryId: number): Promise<boolean>;\n  getUserFollowedMinistries(userId: string): Promise<MinistryProfile[]>;\n  getMinistryFeedPosts(userId: string): Promise<MinistryPost[]>;\n\n  // Platform posts operations\n  createPlatformPost(postData: InsertPlatformPost & { userId: string }): Promise<PlatformPost>;\n  getPlatformPost(id: number): Promise<PlatformPost | undefined>;\n  listPlatformPosts(limit?: number): Promise<PlatformPost[]>;\n  getUserPlatformPosts(userId: string): Promise<PlatformPost[]>;\n  getUserPosts(userId: string): Promise<PlatformPost[]>; // Alias for getUserPlatformPosts\n  updatePlatformPost(id: number, data: Partial<PlatformPost>): Promise<PlatformPost>;\n  deletePlatformPost(id: number): Promise<void>;\n\n  // Post interaction operations\n  createPostInteraction(interactionData: InsertPostInteraction): Promise<PostInteraction>;\n  getPostInteractions(postId: number): Promise<PostInteraction[]>;\n  getPostComments(postId: number): Promise<PostInteraction[]>;\n  getUserPostInteraction(postId: number, userId: string, type: string): Promise<PostInteraction | undefined>;\n  deletePostInteraction(id: number): Promise<void>;\n\n  // User follow operations\n  followUser(followerId: string, followingId: string): Promise<UserFollow>;\n  unfollowUser(followerId: string, followingId: string): Promise<void>;\n  isUserFollowing(followerId: string, followingId: string): Promise<boolean>;\n  getUserFollowers(userId: string): Promise<User[]>;\n  getUserFollowing(userId: string): Promise<User[]>;\n  getUserFollowersCount(userId: string): Promise<number>;\n  getUserFollowingCount(userId: string): Promise<number>;\n  getFollowedUsersPosts(userId: string, limit?: number): Promise<PlatformPost[]>;\n\n  // Notification operations\n  createNotification(notificationData: InsertNotification): Promise<Notification>;\n  getUserNotifications(userId: string, limit?: number): Promise<Notification[]>;\n  markNotificationAsRead(id: number): Promise<void>;\n  markAllNotificationsAsRead(userId: string): Promise<void>;\n  deleteNotification(id: number): Promise<void>;\n  getUnreadNotificationCount(userId: string): Promise<number>;\n\n  // Group chat operations\n  createGroupChatQueue(queueData: InsertGroupChatQueue & { creatorId: string }): Promise<GroupChatQueue>;\n  getGroupChatQueue(id: number): Promise<GroupChatQueue | undefined>;\n  listActiveQueues(): Promise<(GroupChatQueue & { members?: User[] })[]>;\n  joinQueue(queueId: number, userId: string): Promise<void>;\n  leaveQueue(queueId: number, userId: string): Promise<void>;\n  cancelQueue(queueId: number, userId: string): Promise<void>;\n  createGroupChatFromQueue(queueId: number): Promise<GroupChat>;\n  listActiveChats(): Promise<(GroupChat & { members?: User[] })[]>;\n  getUserGroupChats(userId: string): Promise<GroupChat[]>;\n  getQueueMembers(queueId: number): Promise<User[]>;\n  getChatMembers(chatId: number): Promise<User[]>;\n  \n  // Group chat message operations\n  createGroupChatMessage(messageData: InsertGroupChatMessage): Promise<GroupChatMessage>;\n  getChatMessages(chatId: number): Promise<(GroupChatMessage & { user: User })[]>;\n  deleteGroupChatMessage(id: number): Promise<void>;\n  \n  // Direct message operations\n  getOrCreateDirectChat(user1Id: string, user2Id: string): Promise<DirectChat>;\n  getUserDirectChats(userId: string): Promise<(DirectChat & { otherUser: User; lastMessage?: DirectMessage })[]>;\n  createDirectMessage(messageData: InsertDirectMessage): Promise<DirectMessage>;\n  getDirectChatMessages(chatId: number): Promise<(DirectMessage & { sender: User })[]>;\n  markDirectMessageAsRead(messageId: number): Promise<void>;\n  getUnreadDirectMessagesCount(userId: string): Promise<number>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user || undefined;\n  }\n\n  async getUserByUsernameInsensitive(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(ilike(users.username, username));\n    return user || undefined;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.email, email));\n    return user || undefined;\n  }\n\n  async createUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .returning();\n    return user;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  async updateUser(id: string, data: Partial<User>): Promise<User> {\n    const [updatedUser] = await db\n      .update(users)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(users.id, id))\n      .returning();\n    return updatedUser;\n  }\n\n  async updateUserPassword(userId: string, hashedPassword: string): Promise<User> {\n    const [updatedUser] = await db\n      .update(users)\n      .set({ password: hashedPassword, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return updatedUser;\n  }\n\n  async getUsersCount(): Promise<number> {\n    const result = await db.select({ count: sql<number>`count(*)` }).from(users);\n    return Number(result[0].count);\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users).orderBy(desc(users.createdAt));\n  }\n\n  async updateStripeCustomerId(userId: string, stripeCustomerId: string): Promise<User> {\n    const [updatedUser] = await db\n      .update(users)\n      .set({ \n        stripeCustomerId,\n        updatedAt: new Date()\n      })\n      .where(eq(users.id, userId))\n      .returning();\n    return updatedUser;\n  }\n\n  // Campaign operations\n  async createCampaign(campaignData: InsertCampaign & { userId: string }): Promise<Campaign> {\n    const slug = await generateSlug(campaignData.title);\n    \n    const [campaign] = await db\n      .insert(campaigns)\n      .values({\n        ...campaignData,\n        slug,\n        currentAmount: \"0\",\n        isActive: true,\n        status: \"pending\",\n      })\n      .returning();\n    return campaign;\n  }\n\n  async getCampaign(id: string): Promise<Campaign | undefined> {\n    const [campaign] = await db.select().from(campaigns).where(eq(campaigns.id, id));\n    return campaign;\n  }\n\n  async getCampaignBySlug(slug: string): Promise<Campaign | undefined> {\n    const [campaign] = await db.select().from(campaigns).where(eq(campaigns.slug, slug));\n    return campaign;\n  }\n\n  async listCampaigns(limit = 100): Promise<Campaign[]> {\n    return await db\n      .select()\n      .from(campaigns)\n      .where(and(eq(campaigns.isActive, true), eq(campaigns.status, \"approved\")))\n      .orderBy(desc(campaigns.createdAt))\n      .limit(limit);\n  }\n\n  async listPendingCampaigns(): Promise<Campaign[]> {\n    return await db\n      .select()\n      .from(campaigns)\n      .where(eq(campaigns.status, \"pending\"))\n      .orderBy(desc(campaigns.createdAt));\n  }\n\n  async searchCampaigns(query: string): Promise<Campaign[]> {\n    return await db\n      .select()\n      .from(campaigns)\n      .where(\n        and(\n          eq(campaigns.isActive, true),\n          ilike(campaigns.title, `%${query}%`)\n        )\n      )\n      .orderBy(desc(campaigns.createdAt));\n  }\n\n  async updateCampaign(id: string, data: Partial<Campaign>): Promise<Campaign> {\n    const [updatedCampaign] = await db\n      .update(campaigns)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(campaigns.id, id))\n      .returning();\n    return updatedCampaign;\n  }\n\n  async getUserCampaigns(userId: string): Promise<Campaign[]> {\n    return await db\n      .select()\n      .from(campaigns)\n      .where(eq(campaigns.userId, userId))\n      .orderBy(desc(campaigns.createdAt));\n  }\n  \n  async approveCampaign(id: string): Promise<Campaign> {\n    const [approvedCampaign] = await db\n      .update(campaigns)\n      .set({ status: \"approved\", updatedAt: new Date() })\n      .where(eq(campaigns.id, id))\n      .returning();\n    return approvedCampaign;\n  }\n\n  async rejectCampaign(id: string): Promise<Campaign> {\n    const [rejectedCampaign] = await db\n      .update(campaigns)\n      .set({ status: \"rejected\", updatedAt: new Date() })\n      .where(eq(campaigns.id, id))\n      .returning();\n    return rejectedCampaign;\n  }\n\n  async deleteCampaign(id: string): Promise<void> {\n    await db\n      .delete(campaigns)\n      .where(eq(campaigns.id, id));\n  }\n\n  // Donation operations\n  async createDonation(donationData: InsertDonation, stripePaymentId: string): Promise<Donation> {\n    const [donation] = await db\n      .insert(donations)\n      .values({\n        ...donationData,\n        stripePaymentId,\n      })\n      .returning();\n    return donation;\n  }\n\n  async updateDonationAmount(campaignId: string, amount: number): Promise<Campaign> {\n    const [campaign] = await db.select().from(campaigns).where(eq(campaigns.id, campaignId));\n    \n    if (!campaign) {\n      throw new Error(\"Campaign not found\");\n    }\n    \n    const currentAmount = Number(campaign.currentAmount) || 0;\n    const newAmount = currentAmount + amount;\n    \n    const [updatedCampaign] = await db\n      .update(campaigns)\n      .set({ \n        currentAmount: newAmount.toString(),\n        updatedAt: new Date()\n      })\n      .where(eq(campaigns.id, campaignId))\n      .returning();\n      \n    return updatedCampaign;\n  }\n\n  async getCampaignDonations(campaignId: string): Promise<Donation[]> {\n    return await db\n      .select()\n      .from(donations)\n      .where(eq(donations.campaignId, campaignId))\n      .orderBy(desc(donations.createdAt));\n  }\n\n  async getUserDonations(userId: string): Promise<Donation[]> {\n    return await db\n      .select()\n      .from(donations)\n      .where(eq(donations.userId, userId))\n      .orderBy(desc(donations.createdAt));\n  }\n\n  async getAllDonations(): Promise<Donation[]> {\n    return await db\n      .select()\n      .from(donations)\n      .orderBy(desc(donations.createdAt));\n  }\n\n  // Business profile operations\n  async createBusinessProfile(profileData: InsertBusinessProfile & { userId: string }): Promise<BusinessProfile> {\n    const [profile] = await db\n      .insert(businessProfiles)\n      .values(profileData)\n      .returning();\n    return profile;\n  }\n\n  async getBusinessProfile(id: number): Promise<BusinessProfile | undefined> {\n    const [profile] = await db\n      .select()\n      .from(businessProfiles)\n      .leftJoin(membershipTiers, eq(businessProfiles.membershipTierId, membershipTiers.id))\n      .where(eq(businessProfiles.id, id));\n    \n    if (!profile) return undefined;\n    \n    return {\n      ...profile.business_profiles,\n      membershipTier: profile.membership_tiers || null,\n    } as any;\n  }\n\n  async getUserBusinessProfile(userId: string): Promise<BusinessProfile | undefined> {\n    const [profile] = await db\n      .select()\n      .from(businessProfiles)\n      .where(eq(businessProfiles.userId, userId));\n    return profile;\n  }\n\n  async updateBusinessProfile(id: number, data: Partial<BusinessProfile>): Promise<BusinessProfile> {\n    const [updatedProfile] = await db\n      .update(businessProfiles)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(businessProfiles.id, id))\n      .returning();\n    return updatedProfile;\n  }\n\n  async deleteBusinessProfile(id: number): Promise<void> {\n    await db\n      .delete(businessProfiles)\n      .where(eq(businessProfiles.id, id));\n  }\n\n  async listBusinessProfiles(): Promise<BusinessProfile[]> {\n    return await db\n      .select()\n      .from(businessProfiles)\n      .where(eq(businessProfiles.isActive, true))\n      .orderBy(desc(businessProfiles.createdAt));\n  }\n\n  // Membership tier operations\n  async getMembershipTier(id: number): Promise<MembershipTier | undefined> {\n    const [tier] = await db.select().from(membershipTiers).where(eq(membershipTiers.id, id));\n    return tier;\n  }\n\n  async listMembershipTiers(): Promise<MembershipTier[]> {\n    return await db.select().from(membershipTiers);\n  }\n\n  async updateBusinessProfileSubscription(id: number, subscriptionId: string): Promise<BusinessProfile> {\n    const [updatedProfile] = await db\n      .update(businessProfiles)\n      .set({ \n        stripeSubscriptionId: subscriptionId,\n        isActive: true,\n        updatedAt: new Date()\n      })\n      .where(eq(businessProfiles.id, id))\n      .returning();\n    return updatedProfile;\n  }\n  \n  // Content creator operations\n  async createContentCreator(creatorData: InsertContentCreator & { userId: string }): Promise<ContentCreator> {\n    const [creator] = await db\n      .insert(contentCreators)\n      .values(creatorData)\n      .returning();\n    return creator;\n  }\n\n  async getContentCreator(id: number): Promise<ContentCreator | undefined> {\n    const [creator] = await db\n      .select()\n      .from(contentCreators)\n      .where(eq(contentCreators.id, id));\n    return creator;\n  }\n\n  async getUserContentCreator(userId: string): Promise<ContentCreator | undefined> {\n    const [creator] = await db\n      .select()\n      .from(contentCreators)\n      .where(eq(contentCreators.userId, userId));\n    return creator;\n  }\n\n  async updateContentCreator(id: number, data: Partial<ContentCreator>): Promise<ContentCreator> {\n    const [creator] = await db\n      .update(contentCreators)\n      .set({\n        ...data,\n        updatedAt: new Date()\n      })\n      .where(eq(contentCreators.id, id))\n      .returning();\n    return creator;\n  }\n\n  async listContentCreators(sponsoredOnly = false): Promise<ContentCreator[]> {\n    if (sponsoredOnly) {\n      return await db\n        .select()\n        .from(contentCreators)\n        .where(eq(contentCreators.isSponsored, true))\n        .orderBy(desc(contentCreators.createdAt));\n    }\n    \n    return await db\n      .select()\n      .from(contentCreators)\n      .orderBy(desc(contentCreators.createdAt));\n  }\n\n  // Sponsorship application operations\n  async createSponsorshipApplication(applicationData: InsertSponsorshipApplication & { userId: string }): Promise<SponsorshipApplication> {\n    const [application] = await db\n      .insert(sponsorshipApplications)\n      .values(applicationData)\n      .returning();\n    return application;\n  }\n\n  async getSponsorshipApplication(id: number): Promise<SponsorshipApplication | undefined> {\n    const [application] = await db\n      .select()\n      .from(sponsorshipApplications)\n      .where(eq(sponsorshipApplications.id, id));\n    return application;\n  }\n\n  async getUserSponsorshipApplications(userId: string): Promise<SponsorshipApplication[]> {\n    return await db\n      .select()\n      .from(sponsorshipApplications)\n      .where(eq(sponsorshipApplications.userId, userId));\n  }\n\n  async listSponsorshipApplications(status?: string): Promise<SponsorshipApplication[]> {\n    if (status) {\n      return await db\n        .select()\n        .from(sponsorshipApplications)\n        .where(eq(sponsorshipApplications.status, status))\n        .orderBy(desc(sponsorshipApplications.createdAt));\n    }\n    \n    return await db\n      .select()\n      .from(sponsorshipApplications)\n      .orderBy(desc(sponsorshipApplications.createdAt));\n  }\n\n  async updateSponsorshipApplication(id: number, data: Partial<SponsorshipApplication>): Promise<SponsorshipApplication> {\n    const [application] = await db\n      .update(sponsorshipApplications)\n      .set({\n        ...data,\n        updatedAt: new Date()\n      })\n      .where(eq(sponsorshipApplications.id, id))\n      .returning();\n    return application;\n  }\n\n  // Social media post operations\n  async createSocialMediaPost(postData: InsertSocialMediaPost & { creatorId: number }): Promise<SocialMediaPost> {\n    const [post] = await db\n      .insert(socialMediaPosts)\n      .values(postData)\n      .returning();\n    return post;\n  }\n\n  async getSocialMediaPost(id: number): Promise<SocialMediaPost | undefined> {\n    const [post] = await db\n      .select()\n      .from(socialMediaPosts)\n      .where(eq(socialMediaPosts.id, id));\n    return post;\n  }\n\n  async getSocialMediaPostsByCreator(creatorId: number): Promise<SocialMediaPost[]> {\n    return await db\n      .select()\n      .from(socialMediaPosts)\n      .where(eq(socialMediaPosts.creatorId, creatorId))\n      .orderBy(desc(socialMediaPosts.postedAt));\n  }\n\n  async getVisibleSocialMediaPostsByCreator(creatorId: number): Promise<SocialMediaPost[]> {\n    return await db\n      .select()\n      .from(socialMediaPosts)\n      .where(and(\n        eq(socialMediaPosts.creatorId, creatorId),\n        eq(socialMediaPosts.isVisibleOnProfile, true)\n      ))\n      .orderBy(desc(socialMediaPosts.postedAt));\n  }\n\n  async clearCreatorPosts(creatorId: number): Promise<void> {\n    await db\n      .delete(socialMediaPosts)\n      .where(eq(socialMediaPosts.creatorId, creatorId));\n  }\n\n  async listSponsoredSocialMediaPosts(): Promise<SocialMediaPost[]> {\n    return await db\n      .select()\n      .from(socialMediaPosts)\n      .where(eq(socialMediaPosts.isSponsored, true))\n      .orderBy(desc(socialMediaPosts.postedAt));\n  }\n\n  async updateSocialMediaPost(id: number, data: Partial<SocialMediaPost>): Promise<SocialMediaPost> {\n    const [post] = await db\n      .update(socialMediaPosts)\n      .set(data)\n      .where(eq(socialMediaPosts.id, id))\n      .returning();\n    return post;\n  }\n\n  // Ministry operations\n  async createMinistryProfile(profileData: InsertMinistryProfile & { userId: string }): Promise<MinistryProfile> {\n    const [profile] = await db\n      .insert(ministryProfiles)\n      .values(profileData)\n      .returning();\n    return profile;\n  }\n\n  async getMinistry(id: number): Promise<MinistryProfile | undefined> {\n    const [ministry] = await db\n      .select()\n      .from(ministryProfiles)\n      .where(eq(ministryProfiles.id, id));\n    return ministry;\n  }\n\n  async getUserMinistryProfile(userId: string): Promise<MinistryProfile | undefined> {\n    const [profile] = await db\n      .select()\n      .from(ministryProfiles)\n      .where(eq(ministryProfiles.userId, userId));\n    return profile;\n  }\n\n  async updateMinistryProfile(id: number, data: Partial<MinistryProfile>): Promise<MinistryProfile> {\n    const [profile] = await db\n      .update(ministryProfiles)\n      .set(data)\n      .where(eq(ministryProfiles.id, id))\n      .returning();\n    return profile;\n  }\n\n  async getAllMinistries(): Promise<MinistryProfile[]> {\n    return await db\n      .select()\n      .from(ministryProfiles)\n      .where(eq(ministryProfiles.isActive, true))\n      .orderBy(desc(ministryProfiles.createdAt));\n  }\n\n  async getPendingMinistries(): Promise<MinistryProfile[]> {\n    return await db\n      .select()\n      .from(ministryProfiles)\n      .where(eq(ministryProfiles.isActive, false))\n      .orderBy(desc(ministryProfiles.createdAt));\n  }\n\n  async deleteMinistryProfile(id: number): Promise<void> {\n    await db\n      .delete(ministryProfiles)\n      .where(eq(ministryProfiles.id, id));\n  }\n\n  // Ministry posts operations\n  async createMinistryPost(postData: InsertMinistryPost & { ministryId: number }): Promise<MinistryPost> {\n    const [post] = await db\n      .insert(ministryPosts)\n      .values(postData)\n      .returning();\n    return post;\n  }\n\n  async getMinistryPosts(ministryId: number): Promise<MinistryPost[]> {\n    return await db\n      .select()\n      .from(ministryPosts)\n      .where(and(eq(ministryPosts.ministryId, ministryId), eq(ministryPosts.isPublished, true)))\n      .orderBy(desc(ministryPosts.createdAt));\n  }\n\n  async getMinistryPostById(postId: number): Promise<any> {\n    const [result] = await db\n      .select({\n        id: ministryPosts.id,\n        ministryId: ministryPosts.ministryId,\n        title: ministryPosts.title,\n        content: ministryPosts.content,\n        type: ministryPosts.type,\n        mediaUrls: ministryPosts.mediaUrls,\n        links: ministryPosts.links,\n        isPublished: ministryPosts.isPublished,\n        createdAt: ministryPosts.createdAt,\n        updatedAt: ministryPosts.updatedAt,\n        ministry: {\n          id: ministryProfiles.id,\n          name: ministryProfiles.name,\n          logo: ministryProfiles.logo,\n          denomination: ministryProfiles.denomination,\n        }\n      })\n      .from(ministryPosts)\n      .leftJoin(ministryProfiles, eq(ministryPosts.ministryId, ministryProfiles.id))\n      .where(and(eq(ministryPosts.id, postId), eq(ministryPosts.isPublished, true)));\n    \n    return result || undefined;\n  }\n\n  // Ministry events operations\n  async createMinistryEvent(eventData: InsertMinistryEvent & { ministryId: number }): Promise<MinistryEvent> {\n    const [event] = await db\n      .insert(ministryEvents)\n      .values(eventData)\n      .returning();\n    return event;\n  }\n\n  async getMinistryEvents(ministryId: number): Promise<MinistryEvent[]> {\n    return await db\n      .select()\n      .from(ministryEvents)\n      .where(and(eq(ministryEvents.ministryId, ministryId), eq(ministryEvents.isPublished, true)))\n      .orderBy(ministryEvents.startDate);\n  }\n\n  // Ministry followers operations\n  async followMinistry(userId: string, ministryId: number): Promise<void> {\n    await db\n      .insert(ministryFollowers)\n      .values({ userId, ministryId })\n      .onConflictDoNothing();\n  }\n\n  async unfollowMinistry(userId: string, ministryId: number): Promise<void> {\n    await db\n      .delete(ministryFollowers)\n      .where(and(eq(ministryFollowers.userId, userId), eq(ministryFollowers.ministryId, ministryId)));\n  }\n\n  async autoFollowChristCollectiveMinistry(userId: string): Promise<void> {\n    const CHRIST_COLLECTIVE_MINISTRY_ID = 1; // ID of Christ Collective Ministry profile\n    try {\n      await db\n        .insert(ministryFollowers)\n        .values({ userId, ministryId: CHRIST_COLLECTIVE_MINISTRY_ID })\n        .onConflictDoNothing();\n    } catch (error) {\n      console.error('Failed to auto-follow Christ Collective Ministry:', error);\n    }\n  }\n\n  async makeAllUsersFollowChristCollective(): Promise<void> {\n    const CHRIST_COLLECTIVE_MINISTRY_ID = 1;\n    try {\n      // Get all users who are not already following Christ Collective\n      const usersNotFollowing = await db\n        .select({ id: users.id })\n        .from(users)\n        .leftJoin(ministryFollowers, \n          and(\n            eq(ministryFollowers.userId, users.id),\n            eq(ministryFollowers.ministryId, CHRIST_COLLECTIVE_MINISTRY_ID)\n          )\n        )\n        .where(isNull(ministryFollowers.id));\n\n      // Add follows for all users who aren't already following\n      if (usersNotFollowing.length > 0) {\n        const followValues = usersNotFollowing.map(user => ({\n          userId: user.id,\n          ministryId: CHRIST_COLLECTIVE_MINISTRY_ID\n        }));\n        \n        await db\n          .insert(ministryFollowers)\n          .values(followValues)\n          .onConflictDoNothing();\n        \n        console.log(`Auto-followed Christ Collective Ministry for ${followValues.length} users`);\n      }\n    } catch (error) {\n      console.error('Failed to make all users follow Christ Collective:', error);\n      throw error;\n    }\n  }\n\n  // Ministry post RSVP operations\n  async createOrUpdateRsvp(userId: string, postId: number, status: string, notes?: string): Promise<MinistryPostRsvp> {\n    const [rsvp] = await db\n      .insert(ministryPostRsvps)\n      .values({ userId, postId, status, notes })\n      .onConflictDoUpdate({\n        target: [ministryPostRsvps.userId, ministryPostRsvps.postId],\n        set: { status, notes, updatedAt: new Date() }\n      })\n      .returning();\n    return rsvp;\n  }\n\n  async getRsvpByUserAndPost(userId: string, postId: number): Promise<MinistryPostRsvp | undefined> {\n    const [rsvp] = await db\n      .select()\n      .from(ministryPostRsvps)\n      .where(and(eq(ministryPostRsvps.userId, userId), eq(ministryPostRsvps.postId, postId)));\n    return rsvp;\n  }\n\n  async getRsvpsForPost(postId: number): Promise<{ status: string; count: number }[]> {\n    const result = await db\n      .select({\n        status: ministryPostRsvps.status,\n        count: sql<number>`count(*)::int`\n      })\n      .from(ministryPostRsvps)\n      .where(eq(ministryPostRsvps.postId, postId))\n      .groupBy(ministryPostRsvps.status);\n    return result;\n  }\n\n  async deleteRsvp(userId: string, postId: number): Promise<void> {\n    await db\n      .delete(ministryPostRsvps)\n      .where(and(eq(ministryPostRsvps.userId, userId), eq(ministryPostRsvps.postId, postId)));\n  }\n\n  async isUserFollowingMinistry(userId: string, ministryId: number): Promise<boolean> {\n    const [result] = await db\n      .select()\n      .from(ministryFollowers)\n      .where(and(eq(ministryFollowers.userId, userId), eq(ministryFollowers.ministryId, ministryId)));\n    return !!result;\n  }\n\n  async getUserFollowedMinistries(userId: string): Promise<MinistryProfile[]> {\n    return await db\n      .select({\n        id: ministryProfiles.id,\n        userId: ministryProfiles.userId,\n        name: ministryProfiles.name,\n        description: ministryProfiles.description,\n        denomination: ministryProfiles.denomination,\n        website: ministryProfiles.website,\n        logo: ministryProfiles.logo,\n        location: ministryProfiles.location,\n        address: ministryProfiles.address,\n        phone: ministryProfiles.phone,\n        email: ministryProfiles.email,\n        socialLinks: ministryProfiles.socialLinks,\n        isActive: ministryProfiles.isActive,\n        isVerified: ministryProfiles.isVerified,\n        createdAt: ministryProfiles.createdAt,\n        updatedAt: ministryProfiles.updatedAt,\n      })\n      .from(ministryProfiles)\n      .innerJoin(ministryFollowers, eq(ministryFollowers.ministryId, ministryProfiles.id))\n      .where(eq(ministryFollowers.userId, userId))\n      .orderBy(desc(ministryFollowers.createdAt));\n  }\n\n  async getMinistryFollowersCount(ministryId: number): Promise<number> {\n    const result = await db\n      .select({ count: sql<number>`count(*)` })\n      .from(ministryFollowers)\n      .where(eq(ministryFollowers.ministryId, ministryId));\n    return Number(result[0].count);\n  }\n\n  async getMinistryFeedPosts(userId: string): Promise<MinistryPost[]> {\n    return await db\n      .select({\n        id: ministryPosts.id,\n        ministryId: ministryPosts.ministryId,\n        title: ministryPosts.title,\n        content: ministryPosts.content,\n        type: ministryPosts.type,\n        mediaUrls: ministryPosts.mediaUrls,\n        links: ministryPosts.links,\n        isPublished: ministryPosts.isPublished,\n        createdAt: ministryPosts.createdAt,\n        updatedAt: ministryPosts.updatedAt,\n        ministry: {\n          id: ministryProfiles.id,\n          name: ministryProfiles.name,\n          logo: ministryProfiles.logo,\n          denomination: ministryProfiles.denomination,\n        }\n      })\n      .from(ministryPosts)\n      .innerJoin(ministryFollowers, eq(ministryFollowers.ministryId, ministryPosts.ministryId))\n      .innerJoin(ministryProfiles, eq(ministryProfiles.id, ministryPosts.ministryId))\n      .where(and(\n        eq(ministryFollowers.userId, userId),\n        eq(ministryPosts.isPublished, true)\n      ))\n      .orderBy(desc(ministryPosts.createdAt));\n  }\n\n  // Platform posts operations\n  async createPlatformPost(postData: InsertPlatformPost & { userId: string }): Promise<PlatformPost> {\n    const [post] = await db\n      .insert(platformPosts)\n      .values(postData)\n      .returning();\n    return post;\n  }\n\n  async getPlatformPost(id: number): Promise<PlatformPost | undefined> {\n    const [post] = await db\n      .select()\n      .from(platformPosts)\n      .where(eq(platformPosts.id, id));\n    return post;\n  }\n\n  async listPlatformPosts(limit = 50): Promise<PlatformPost[]> {\n    return await db\n      .select()\n      .from(platformPosts)\n      .where(eq(platformPosts.isPublished, true))\n      .orderBy(desc(platformPosts.createdAt))\n      .limit(limit);\n  }\n\n  async getUserPlatformPosts(userId: string): Promise<PlatformPost[]> {\n    return await db\n      .select()\n      .from(platformPosts)\n      .where(eq(platformPosts.userId, userId))\n      .orderBy(desc(platformPosts.createdAt));\n  }\n\n  // Alias method for getUserPlatformPosts\n  async getUserPosts(userId: string): Promise<PlatformPost[]> {\n    return this.getUserPlatformPosts(userId);\n  }\n\n  async updatePlatformPost(id: number, data: Partial<PlatformPost>): Promise<PlatformPost> {\n    const [post] = await db\n      .update(platformPosts)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(platformPosts.id, id))\n      .returning();\n    return post;\n  }\n\n  async deletePlatformPost(id: number): Promise<void> {\n    await db\n      .delete(platformPosts)\n      .where(eq(platformPosts.id, id));\n  }\n\n  // Post interaction operations\n  async createPostInteraction(interactionData: InsertPostInteraction): Promise<PostInteraction> {\n    const [interaction] = await db\n      .insert(postInteractions)\n      .values(interactionData)\n      .returning();\n    return interaction;\n  }\n\n  async getPostInteractions(postId: number): Promise<PostInteraction[]> {\n    return await db\n      .select()\n      .from(postInteractions)\n      .where(eq(postInteractions.postId, postId))\n      .orderBy(desc(postInteractions.createdAt));\n  }\n\n  async getPostComments(postId: number): Promise<PostInteraction[]> {\n    return await db\n      .select({\n        id: postInteractions.id,\n        postId: postInteractions.postId,\n        userId: postInteractions.userId,\n        type: postInteractions.type,\n        content: postInteractions.content,\n        createdAt: postInteractions.createdAt,\n        user: {\n          id: users.id,\n          username: users.username,\n          firstName: users.firstName,\n          lastName: users.lastName,\n          profileImageUrl: users.profileImageUrl,\n        }\n      })\n      .from(postInteractions)\n      .leftJoin(users, eq(postInteractions.userId, users.id))\n      .where(and(\n        eq(postInteractions.postId, postId),\n        eq(postInteractions.type, 'comment')\n      ))\n      .orderBy(desc(postInteractions.createdAt));\n  }\n\n  async getUserPostInteraction(postId: number, userId: string, type: string): Promise<PostInteraction | undefined> {\n    const [interaction] = await db\n      .select()\n      .from(postInteractions)\n      .where(and(\n        eq(postInteractions.postId, postId),\n        eq(postInteractions.userId, userId),\n        eq(postInteractions.type, type)\n      ));\n    return interaction;\n  }\n\n  async deletePostInteraction(id: number): Promise<void> {\n    await db\n      .delete(postInteractions)\n      .where(eq(postInteractions.id, id));\n  }\n\n  async getPostComment(id: number): Promise<PostInteraction | undefined> {\n    const [comment] = await db\n      .select()\n      .from(postInteractions)\n      .where(and(\n        eq(postInteractions.id, id),\n        eq(postInteractions.type, 'comment')\n      ));\n    return comment;\n  }\n\n  async deletePostComment(id: number): Promise<void> {\n    await db\n      .delete(postInteractions)\n      .where(and(\n        eq(postInteractions.id, id),\n        eq(postInteractions.type, 'comment')\n      ));\n  }\n\n  // User follow operations\n  async followUser(followerId: string, followingId: string): Promise<UserFollow> {\n    const [follow] = await db\n      .insert(userFollows)\n      .values({ followerId, followingId })\n      .onConflictDoNothing()\n      .returning();\n    \n    // Create notification for follow\n    if (follow) {\n      await this.createNotificationForFollow(followerId, followingId);\n    }\n    \n    return follow;\n  }\n\n  async unfollowUser(followerId: string, followingId: string): Promise<void> {\n    await db\n      .delete(userFollows)\n      .where(and(eq(userFollows.followerId, followerId), eq(userFollows.followingId, followingId)));\n  }\n\n  async isUserFollowing(followerId: string, followingId: string): Promise<boolean> {\n    const [follow] = await db\n      .select()\n      .from(userFollows)\n      .where(and(eq(userFollows.followerId, followerId), eq(userFollows.followingId, followingId)));\n    return !!follow;\n  }\n\n  async getUserFollowers(userId: string): Promise<User[]> {\n    return await db\n      .select({\n        id: users.id,\n        email: users.email,\n        firstName: users.firstName,\n        lastName: users.lastName,\n        profileImageUrl: users.profileImageUrl,\n        stripeCustomerId: users.stripeCustomerId,\n        isAdmin: users.isAdmin,\n        createdAt: users.createdAt,\n        updatedAt: users.updatedAt,\n        bio: users.bio,\n        location: users.location,\n        phone: users.phone,\n        username: users.username,\n        password: users.password,\n        userType: users.userType,\n        showEmail: users.showEmail,\n        showPhone: users.showPhone,\n        showLocation: users.showLocation,\n      })\n      .from(users)\n      .innerJoin(userFollows, eq(userFollows.followerId, users.id))\n      .where(eq(userFollows.followingId, userId))\n      .orderBy(desc(userFollows.createdAt));\n  }\n\n  async getUserFollowing(userId: string): Promise<User[]> {\n    return await db\n      .select({\n        id: users.id,\n        email: users.email,\n        firstName: users.firstName,\n        lastName: users.lastName,\n        profileImageUrl: users.profileImageUrl,\n        stripeCustomerId: users.stripeCustomerId,\n        isAdmin: users.isAdmin,\n        createdAt: users.createdAt,\n        updatedAt: users.updatedAt,\n        bio: users.bio,\n        location: users.location,\n        phone: users.phone,\n        username: users.username,\n        password: users.password,\n        userType: users.userType,\n        showEmail: users.showEmail,\n        showPhone: users.showPhone,\n        showLocation: users.showLocation,\n      })\n      .from(users)\n      .innerJoin(userFollows, eq(userFollows.followingId, users.id))\n      .where(eq(userFollows.followerId, userId))\n      .orderBy(desc(userFollows.createdAt));\n  }\n\n  async getUserFollowersCount(userId: string): Promise<number> {\n    const result = await db\n      .select({ count: sql<number>`count(*)` })\n      .from(userFollows)\n      .where(eq(userFollows.followingId, userId));\n    return Number(result[0].count);\n  }\n\n  async getUserFollowingCount(userId: string): Promise<number> {\n    const result = await db\n      .select({ count: sql<number>`count(*)` })\n      .from(userFollows)\n      .where(eq(userFollows.followerId, userId));\n    return Number(result[0].count);\n  }\n\n  async getFollowedUsersPosts(userId: string, limit = 50): Promise<PlatformPost[]> {\n    return await db\n      .select({\n        id: platformPosts.id,\n        userId: platformPosts.userId,\n        createdAt: platformPosts.createdAt,\n        updatedAt: platformPosts.updatedAt,\n        title: platformPosts.title,\n        content: platformPosts.content,\n        authorType: platformPosts.authorType,\n        authorId: platformPosts.authorId,\n        mediaUrls: platformPosts.mediaUrls,\n        mediaType: platformPosts.mediaType,\n        tags: platformPosts.tags,\n        isPublished: platformPosts.isPublished,\n        likesCount: platformPosts.likesCount,\n        commentsCount: platformPosts.commentsCount,\n        sharesCount: platformPosts.sharesCount,\n      })\n      .from(platformPosts)\n      .innerJoin(userFollows, eq(userFollows.followingId, platformPosts.userId))\n      .where(and(eq(userFollows.followerId, userId), eq(platformPosts.isPublished, true)))\n      .orderBy(desc(platformPosts.createdAt))\n      .limit(limit);\n  }\n  // Business follow operations\n  async followBusiness(userId: string, businessId: number): Promise<BusinessFollow> {\n    const [follow] = await db\n      .insert(businessFollows)\n      .values({ userId, businessId })\n      .onConflictDoNothing()\n      .returning();\n    return follow;\n  }\n\n  async unfollowBusiness(userId: string, businessId: number): Promise<void> {\n    await db\n      .delete(businessFollows)\n      .where(and(\n        eq(businessFollows.userId, userId), \n        eq(businessFollows.businessId, businessId)\n      ));\n  }\n\n  async isBusinessFollowing(userId: string, businessId: number): Promise<boolean> {\n    const [follow] = await db\n      .select()\n      .from(businessFollows)\n      .where(and(\n        eq(businessFollows.userId, userId), \n        eq(businessFollows.businessId, businessId)\n      ));\n    return !!follow;\n  }\n\n  // Notification operations\n  async createNotification(notificationData: InsertNotification): Promise<Notification> {\n    const [notification] = await db\n      .insert(notifications)\n      .values(notificationData)\n      .returning();\n    return notification;\n  }\n\n  async getUserNotifications(userId: string, limit = 50): Promise<Notification[]> {\n    return await db\n      .select()\n      .from(notifications)\n      .where(eq(notifications.userId, userId))\n      .orderBy(desc(notifications.createdAt))\n      .limit(limit);\n  }\n\n  async markNotificationAsRead(id: number): Promise<void> {\n    await db\n      .update(notifications)\n      .set({ isRead: true })\n      .where(eq(notifications.id, id));\n  }\n\n  async markAllNotificationsAsRead(userId: string): Promise<void> {\n    await db\n      .update(notifications)\n      .set({ isRead: true })\n      .where(eq(notifications.userId, userId));\n  }\n\n  async deleteNotification(id: number): Promise<void> {\n    await db\n      .delete(notifications)\n      .where(eq(notifications.id, id));\n  }\n\n  async getUnreadNotificationCount(userId: string): Promise<number> {\n    const result = await db\n      .select({ count: sql<number>`count(*)` })\n      .from(notifications)\n      .where(and(\n        eq(notifications.userId, userId),\n        eq(notifications.isRead, false)\n      ));\n    return Number(result[0].count);\n  }\n\n  // Group chat operations\n  async createGroupChatQueue(queueData: InsertGroupChatQueue & { creatorId: string }): Promise<GroupChatQueue> {\n    const [queue] = await db\n      .insert(groupChatQueues)\n      .values({\n        ...queueData,\n        currentCount: 1, // Creator is first member\n      })\n      .returning();\n\n    // Add creator to queue members\n    await db.insert(groupChatMembers).values({\n      queueId: queue.id,\n      userId: queueData.creatorId,\n      role: \"creator\",\n    });\n\n    return queue;\n  }\n\n  async getGroupChatQueue(id: number): Promise<GroupChatQueue | undefined> {\n    const [queue] = await db\n      .select()\n      .from(groupChatQueues)\n      .where(eq(groupChatQueues.id, id));\n    return queue;\n  }\n\n  async listActiveQueues(): Promise<(GroupChatQueue & { members?: User[] })[]> {\n    const queues = await db\n      .select()\n      .from(groupChatQueues)\n      .where(eq(groupChatQueues.status, \"waiting\"))\n      .orderBy(desc(groupChatQueues.createdAt));\n\n    // For each queue, fetch member profile information\n    const queuesWithMembers = await Promise.all(\n      queues.map(async (queue) => {\n        const members = await this.getQueueMembers(queue.id);\n        return { ...queue, members };\n      })\n    );\n\n    return queuesWithMembers;\n  }\n\n\n\n  async joinQueue(queueId: number, userId: string): Promise<void> {\n    // Check if user already in queue\n    const existing = await db\n      .select()\n      .from(groupChatMembers)\n      .where(and(\n        eq(groupChatMembers.queueId, queueId),\n        eq(groupChatMembers.userId, userId)\n      ));\n\n    if (existing.length > 0) return;\n\n    // Get queue info\n    const queue = await this.getGroupChatQueue(queueId);\n    if (!queue || queue.currentCount >= queue.maxPeople) return;\n\n    // Add member\n    await db.insert(groupChatMembers).values({\n      queueId,\n      userId,\n      role: \"member\",\n    });\n\n    // Update current count\n    const newCount = queue.currentCount + 1;\n    await db\n      .update(groupChatQueues)\n      .set({ \n        currentCount: newCount,\n        updatedAt: new Date(),\n      })\n      .where(eq(groupChatQueues.id, queueId));\n\n    // If we've reached the minimum, create the chat\n    if (newCount >= queue.minPeople) {\n      await this.createGroupChatFromQueue(queueId);\n    }\n  }\n\n  async leaveQueue(queueId: number, userId: string): Promise<void> {\n    await db\n      .delete(groupChatMembers)\n      .where(and(\n        eq(groupChatMembers.queueId, queueId),\n        eq(groupChatMembers.userId, userId)\n      ));\n\n    // Update current count\n    const queue = await this.getGroupChatQueue(queueId);\n    if (queue) {\n      await db\n        .update(groupChatQueues)\n        .set({ \n          currentCount: Math.max(0, queue.currentCount - 1),\n          updatedAt: new Date(),\n        })\n        .where(eq(groupChatQueues.id, queueId));\n    }\n  }\n\n  async cancelQueue(queueId: number, userId: string): Promise<void> {\n    // Only creator can cancel\n    const queue = await this.getGroupChatQueue(queueId);\n    if (queue && queue.creatorId === userId) {\n      await db\n        .update(groupChatQueues)\n        .set({ \n          status: \"cancelled\",\n          updatedAt: new Date(),\n        })\n        .where(eq(groupChatQueues.id, queueId));\n\n      // Remove all members\n      await db\n        .delete(groupChatMembers)\n        .where(eq(groupChatMembers.queueId, queueId));\n    }\n  }\n\n  async createGroupChatFromQueue(queueId: number): Promise<GroupChat> {\n    const queue = await this.getGroupChatQueue(queueId);\n    if (!queue) throw new Error(\"Queue not found\");\n\n    const [chat] = await db\n      .insert(groupChats)\n      .values({\n        queueId,\n        title: queue.title,\n        description: queue.description,\n        intention: queue.intention,\n        memberCount: queue.currentCount,\n      })\n      .returning();\n\n    // Update queue members to reference the chat\n    await db\n      .update(groupChatMembers)\n      .set({ chatId: chat.id })\n      .where(eq(groupChatMembers.queueId, queueId));\n\n    // Update queue status\n    await db\n      .update(groupChatQueues)\n      .set({ \n        status: \"active\",\n        updatedAt: new Date(),\n      })\n      .where(eq(groupChatQueues.id, queueId));\n\n    return chat;\n  }\n\n  async listActiveChats(): Promise<(GroupChat & { members?: User[] })[]> {\n    const chats = await db\n      .select()\n      .from(groupChats)\n      .where(eq(groupChats.status, \"active\"))\n      .orderBy(desc(groupChats.createdAt));\n\n    // For each chat, fetch member profile information\n    const chatsWithMembers = await Promise.all(\n      chats.map(async (chat) => {\n        const members = await this.getChatMembers(chat.id);\n        return { ...chat, members };\n      })\n    );\n\n    return chatsWithMembers;\n  }\n\n  async getUserGroupChats(userId: string): Promise<GroupChat[]> {\n    return db\n      .select({\n        id: groupChats.id,\n        queueId: groupChats.queueId,\n        title: groupChats.title,\n        description: groupChats.description,\n        intention: groupChats.intention,\n        memberCount: groupChats.memberCount,\n        status: groupChats.status,\n        createdAt: groupChats.createdAt,\n        updatedAt: groupChats.updatedAt,\n      })\n      .from(groupChats)\n      .innerJoin(groupChatMembers, eq(groupChats.id, groupChatMembers.chatId))\n      .where(eq(groupChatMembers.userId, userId));\n  }\n\n  async getQueueMembers(queueId: number): Promise<User[]> {\n    return db\n      .select({\n        id: users.id,\n        email: users.email,\n        firstName: users.firstName,\n        lastName: users.lastName,\n        displayName: users.displayName,\n        profileImageUrl: users.profileImageUrl,\n        stripeCustomerId: users.stripeCustomerId,\n        isAdmin: users.isAdmin,\n        createdAt: users.createdAt,\n        updatedAt: users.updatedAt,\n        bio: users.bio,\n        location: users.location,\n        phone: users.phone,\n        username: users.username,\n        password: users.password,\n        userType: users.userType,\n        showEmail: users.showEmail,\n        showPhone: users.showPhone,\n        showLocation: users.showLocation,\n      })\n      .from(users)\n      .innerJoin(groupChatMembers, eq(users.id, groupChatMembers.userId))\n      .where(eq(groupChatMembers.queueId, queueId));\n  }\n\n  async getGroupChatById(chatId: number): Promise<GroupChat | undefined> {\n    const [chat] = await db\n      .select()\n      .from(groupChats)\n      .where(eq(groupChats.id, chatId));\n    return chat;\n  }\n\n  async getChatMembers(chatId: number): Promise<User[]> {\n    return db\n      .select({\n        id: users.id,\n        email: users.email,\n        firstName: users.firstName,\n        lastName: users.lastName,\n        displayName: users.displayName,\n        profileImageUrl: users.profileImageUrl,\n        username: users.username,\n        bio: users.bio,\n        location: users.location,\n        phone: users.phone,\n        userType: users.userType,\n        showEmail: users.showEmail,\n        showPhone: users.showPhone,\n        showLocation: users.showLocation,\n        createdAt: users.createdAt,\n        updatedAt: users.updatedAt,\n        stripeCustomerId: users.stripeCustomerId,\n        isAdmin: users.isAdmin,\n        password: users.password,\n      })\n      .from(users)\n      .innerJoin(groupChatMembers, eq(users.id, groupChatMembers.userId))\n      .where(eq(groupChatMembers.chatId, chatId));\n  }\n\n  // Group chat message operations\n  async createGroupChatMessage(messageData: InsertGroupChatMessage): Promise<GroupChatMessage> {\n    const [message] = await db\n      .insert(groupChatMessages)\n      .values(messageData)\n      .returning();\n    \n    // Create notifications for chat message\n    if (message) {\n      await this.createNotificationForChatMessage(message.userId, message.chatId, message.message);\n    }\n    \n    return message;\n  }\n\n  async getChatMessages(chatId: number): Promise<(GroupChatMessage & { user: User })[]> {\n    return db\n      .select({\n        id: groupChatMessages.id,\n        chatId: groupChatMessages.chatId,\n        userId: groupChatMessages.userId,\n        message: groupChatMessages.message,\n        type: groupChatMessages.type,\n        createdAt: groupChatMessages.createdAt,\n        user: {\n          id: users.id,\n          firstName: users.firstName,\n          lastName: users.lastName,\n          displayName: users.displayName,\n          profileImageUrl: users.profileImageUrl,\n          username: users.username,\n          email: users.email,\n          bio: users.bio,\n          location: users.location,\n          phone: users.phone,\n          userType: users.userType,\n          showEmail: users.showEmail,\n          showPhone: users.showPhone,\n          showLocation: users.showLocation,\n          createdAt: users.createdAt,\n          updatedAt: users.updatedAt,\n          stripeCustomerId: users.stripeCustomerId,\n          isAdmin: users.isAdmin,\n          password: users.password,\n        }\n      })\n      .from(groupChatMessages)\n      .innerJoin(users, eq(groupChatMessages.userId, users.id))\n      .where(eq(groupChatMessages.chatId, chatId))\n      .orderBy(groupChatMessages.createdAt);\n  }\n\n  async deleteGroupChatMessage(id: number): Promise<void> {\n    await db\n      .delete(groupChatMessages)\n      .where(eq(groupChatMessages.id, id));\n  }\n\n  // Notification helper functions\n  async createNotificationForFollow(followerId: string, followingId: string): Promise<void> {\n    // Get follower details\n    const follower = await this.getUser(followerId);\n    if (!follower) return;\n\n    await this.createNotification({\n      userId: followingId,\n      type: \"follow\",\n      title: \"New Follower\",\n      message: `${follower.displayName || follower.firstName || follower.username} started following you`,\n      relatedId: followerId,\n      relatedType: \"user\",\n      actorId: followerId,\n      actorName: follower.displayName || follower.firstName || follower.username,\n      actorImage: follower.profileImageUrl,\n      isRead: false,\n    });\n  }\n\n  async createNotificationForLike(likerId: string, postId: number, postOwnerId: string): Promise<void> {\n    // Don't notify if someone likes their own post\n    if (likerId === postOwnerId) return;\n\n    // Get liker details\n    const liker = await this.getUser(likerId);\n    if (!liker) return;\n\n    await this.createNotification({\n      userId: postOwnerId,\n      type: \"like\",\n      title: \"Someone liked your post\",\n      message: `${liker.displayName || liker.firstName || liker.username} liked your post`,\n      relatedId: postId.toString(),\n      relatedType: \"platform_post\",\n      actorId: likerId,\n      actorName: liker.displayName || liker.firstName || liker.username,\n      actorImage: liker.profileImageUrl,\n      isRead: false,\n    });\n  }\n\n  async createNotificationForComment(commenterId: string, postId: number, postOwnerId: string, comment: string): Promise<void> {\n    // Don't notify if someone comments on their own post\n    if (commenterId === postOwnerId) return;\n\n    // Get commenter details\n    const commenter = await this.getUser(commenterId);\n    if (!commenter) return;\n\n    // Truncate comment if too long\n    const truncatedComment = comment.length > 50 ? comment.slice(0, 50) + \"...\" : comment;\n\n    await this.createNotification({\n      userId: postOwnerId,\n      type: \"comment\",\n      title: \"New comment on your post\",\n      message: `${commenter.displayName || commenter.firstName || commenter.username} commented: \"${truncatedComment}\"`,\n      relatedId: postId.toString(),\n      relatedType: \"platform_post\",\n      actorId: commenterId,\n      actorName: commenter.displayName || commenter.firstName || commenter.username,\n      actorImage: commenter.profileImageUrl,\n      isRead: false,\n    });\n  }\n\n  async createNotificationForChatMessage(senderId: string, chatId: number, message: string): Promise<void> {\n    // Get chat details and members\n    const chat = await this.getGroupChatById(chatId);\n    if (!chat) return;\n\n    const members = await this.getChatMembers(chatId);\n    const sender = await this.getUser(senderId);\n    if (!sender) return;\n\n    // Notify all chat members except the sender\n    for (const member of members) {\n      if (member.id !== senderId) {\n        // Truncate message if too long\n        const truncatedMessage = message.length > 50 ? message.slice(0, 50) + \"...\" : message;\n\n        await this.createNotification({\n          userId: member.id,\n          type: \"chat_message\",\n          title: `New message in ${chat.title}`,\n          message: `${sender.displayName || sender.firstName || sender.username}: ${truncatedMessage}`,\n          relatedId: chatId.toString(),\n          relatedType: \"group_chat\",\n          actorId: senderId,\n          actorName: sender.displayName || sender.firstName || sender.username,\n          actorImage: sender.profileImageUrl,\n          isRead: false,\n        });\n      }\n    }\n  }\n\n  // Direct message operations\n  async getOrCreateDirectChat(user1Id: string, user2Id: string): Promise<DirectChat> {\n    // Ensure consistent ordering (smaller ID first)\n    const [firstUserId, secondUserId] = [user1Id, user2Id].sort();\n    \n    // Try to find existing chat\n    const existingChat = await db\n      .select()\n      .from(directChats)\n      .where(\n        and(\n          eq(directChats.user1Id, firstUserId),\n          eq(directChats.user2Id, secondUserId)\n        )\n      )\n      .limit(1);\n\n    if (existingChat.length > 0) {\n      return existingChat[0];\n    }\n\n    // Create new chat\n    const [newChat] = await db\n      .insert(directChats)\n      .values({\n        user1Id: firstUserId,\n        user2Id: secondUserId,\n      })\n      .returning();\n\n    return newChat;\n  }\n\n  async getUserDirectChats(userId: string): Promise<(DirectChat & { otherUser: User; lastMessage?: DirectMessage })[]> {\n    const chats = await db\n      .select({\n        id: directChats.id,\n        user1Id: directChats.user1Id,\n        user2Id: directChats.user2Id,\n        lastMessageAt: directChats.lastMessageAt,\n        createdAt: directChats.createdAt,\n        otherUser: users,\n      })\n      .from(directChats)\n      .leftJoin(\n        users,\n        sql`${users.id} = CASE WHEN ${directChats.user1Id} = ${userId} THEN ${directChats.user2Id} ELSE ${directChats.user1Id} END`\n      )\n      .where(\n        sql`${directChats.user1Id} = ${userId} OR ${directChats.user2Id} = ${userId}`\n      )\n      .orderBy(desc(directChats.lastMessageAt));\n\n    // Get last message for each chat\n    const chatsWithMessages = await Promise.all(\n      chats.map(async (chat) => {\n        const lastMessage = await db\n          .select()\n          .from(directMessages)\n          .where(eq(directMessages.chatId, chat.id))\n          .orderBy(desc(directMessages.createdAt))\n          .limit(1);\n\n        return {\n          ...chat,\n          lastMessage: lastMessage[0] || undefined,\n        };\n      })\n    );\n\n    return chatsWithMessages;\n  }\n\n  async getDirectChatById(chatId: number, userId: string): Promise<any | null> {\n    try {\n      const chat = await db\n        .select({\n          id: directChats.id,\n          user1Id: directChats.user1Id,\n          user2Id: directChats.user2Id,\n          lastMessageAt: directChats.lastMessageAt,\n          createdAt: directChats.createdAt,\n          otherUser: users,\n        })\n        .from(directChats)\n        .leftJoin(\n          users,\n          sql`${users.id} = CASE WHEN ${directChats.user1Id} = ${userId} THEN ${directChats.user2Id} ELSE ${directChats.user1Id} END`\n        )\n        .where(\n          and(\n            eq(directChats.id, chatId),\n            sql`${directChats.user1Id} = ${userId} OR ${directChats.user2Id} = ${userId}`\n          )\n        )\n        .limit(1);\n\n      return chat[0] || null;\n    } catch (error) {\n      console.error(\"Error fetching direct chat by ID:\", error);\n      throw error;\n    }\n  }\n\n  async createDirectMessage(messageData: InsertDirectMessage): Promise<DirectMessage> {\n    const [message] = await db\n      .insert(directMessages)\n      .values(messageData)\n      .returning();\n\n    // Update chat's lastMessageAt\n    await db\n      .update(directChats)\n      .set({ lastMessageAt: new Date() })\n      .where(eq(directChats.id, messageData.chatId));\n\n    // Create notification for the recipient\n    const chat = await db\n      .select()\n      .from(directChats)\n      .where(eq(directChats.id, messageData.chatId))\n      .limit(1);\n\n    if (chat[0]) {\n      const recipientId = chat[0].user1Id === messageData.senderId ? chat[0].user2Id : chat[0].user1Id;\n      await this.createNotificationForDirectMessage(messageData.senderId, recipientId, messageData.message);\n    }\n\n    return message;\n  }\n\n  async getDirectChatMessages(chatId: number): Promise<(DirectMessage & { sender: User })[]> {\n    const messages = await db\n      .select({\n        id: directMessages.id,\n        chatId: directMessages.chatId,\n        senderId: directMessages.senderId,\n        message: directMessages.message,\n        readAt: directMessages.readAt,\n        createdAt: directMessages.createdAt,\n        sender: users,\n      })\n      .from(directMessages)\n      .leftJoin(users, eq(directMessages.senderId, users.id))\n      .where(eq(directMessages.chatId, chatId))\n      .orderBy(directMessages.createdAt);\n\n    return messages;\n  }\n\n  async markDirectMessageAsRead(messageId: number): Promise<void> {\n    await db\n      .update(directMessages)\n      .set({ readAt: new Date() })\n      .where(eq(directMessages.id, messageId));\n  }\n\n  async getUnreadDirectMessagesCount(userId: string): Promise<number> {\n    const result = await db\n      .select({ count: sql<number>`count(*)` })\n      .from(directMessages)\n      .leftJoin(directChats, eq(directMessages.chatId, directChats.id))\n      .where(\n        and(\n          sql`${directChats.user1Id} = ${userId} OR ${directChats.user2Id} = ${userId}`,\n          sql`${directMessages.senderId} != ${userId}`,\n          isNull(directMessages.readAt)\n        )\n      );\n\n    return result[0]?.count || 0;\n  }\n\n  async createNotificationForDirectMessage(senderId: string, recipientId: string, message: string): Promise<void> {\n    const sender = await this.getUser(senderId);\n    if (!sender) return;\n\n    // Truncate message if too long\n    const truncatedMessage = message.length > 50 ? message.slice(0, 50) + \"...\" : message;\n\n    await this.createNotification({\n      userId: recipientId,\n      type: \"direct_message\",\n      title: \"New direct message\",\n      message: `${sender.displayName || sender.firstName || sender.username}: ${truncatedMessage}`,\n      relatedId: recipientId,\n      relatedType: \"direct_chat\",\n      actorId: senderId,\n      actorName: sender.displayName || sender.firstName || sender.username,\n      actorImage: sender.profileImageUrl,\n      isRead: false,\n    });\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":63767},"server/tiktok.ts":{"content":"interface TikTokVideoData {\n  id: string;\n  title: string;\n  description: string;\n  thumbnail: string;\n  username: string;\n  displayName: string;\n  publishedAt: string;\n  viewCount: string;\n  likeCount: string;\n  commentCount: string;\n  shareCount: string;\n  duration: string;\n}\n\ninterface TikTokUserData {\n  id: string;\n  username: string;\n  displayName: string;\n  description: string;\n  avatar: string;\n  followerCount: string;\n  followingCount: string;\n  videoCount: string;\n  likeCount: string;\n  verified: boolean;\n}\n\nexport class TikTokService {\n  private apifyToken: string;\n  private apifyActorId = 'clockworks~free-tiktok-scraper';\n\n  constructor() {\n    // Check for API key dynamically to support runtime configuration\n    this.apifyToken = '';\n  }\n\n  private getApiToken(): string {\n    if (!this.apifyToken) {\n      this.apifyToken = process.env.TIKTOK_API_KEY || '';\n      if (!this.apifyToken) {\n        console.warn('TIKTOK_API_KEY environment variable not provided - TikTok features will use sample data');\n      }\n    }\n    return this.apifyToken;\n  }\n\n  extractUsername(url: string): string | null {\n    // Extract username from TikTok URL patterns\n    const patterns = [\n      /tiktok\\.com\\/@([^\\/\\?]+)/,\n      /tiktok\\.com\\/([^\\/\\?@]+)/,\n      /vm\\.tiktok\\.com\\/([^\\/\\?]+)/\n    ];\n    \n    for (const pattern of patterns) {\n      const match = url.match(pattern);\n      if (match) return match[1];\n    }\n    return null;\n  }\n\n  async getUserData(username: string): Promise<TikTokUserData | null> {\n    const token = this.getApiToken();\n    if (!token) {\n      return this.getSampleUserData(username);\n    }\n\n    try {\n      // Start Apify actor run with TikTok profile URL\n      const runResponse = await fetch(`https://api.apify.com/v2/acts/${this.apifyActorId}/runs`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          profiles: [`https://www.tiktok.com/@${username}`],\n          resultsLimit: 1,\n        }),\n      });\n\n      if (!runResponse.ok) {\n        throw new Error(`Apify API error: ${runResponse.status}`);\n      }\n\n      const runData = await runResponse.json();\n      const runId = runData.data.id;\n\n      // Wait for the run to complete and get results  \n      let attempts = 0;\n      const maxAttempts = 10; // 10 seconds timeout for faster response\n\n      while (attempts < maxAttempts) {\n        await new Promise(resolve => setTimeout(resolve, 1000)); // Wait 1 second\n        \n        const statusResponse = await fetch(`https://api.apify.com/v2/acts/${this.apifyActorId}/runs/${runId}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        if (statusResponse.ok) {\n          const statusData = await statusResponse.json();\n          \n          if (statusData.data.status === 'SUCCEEDED') {\n            // Get the dataset results\n            const resultsResponse = await fetch(`https://api.apify.com/v2/acts/${this.apifyActorId}/runs/${runId}/dataset/items`, {\n              headers: {\n                'Authorization': `Bearer ${this.apifyToken}`,\n              },\n            });\n\n            if (resultsResponse.ok) {\n              const results = await resultsResponse.json();\n              \n              if (results.length > 0) {\n                const profile = results[0];\n                return {\n                  id: profile.id || username,\n                  username: profile.uniqueId || username,\n                  displayName: profile.nickname || username,\n                  description: profile.signature || '',\n                  avatar: profile.avatarLarger || '/placeholder-avatar.jpg',\n                  followerCount: profile.followerCount?.toString() || '0',\n                  followingCount: profile.followingCount?.toString() || '0',\n                  videoCount: profile.videoCount?.toString() || '0',\n                  likeCount: profile.heartCount?.toString() || '0',\n                  verified: profile.verified || false,\n                };\n              }\n            }\n            break;\n          } else if (statusData.data.status === 'FAILED') {\n            throw new Error('Apify scraping failed');\n          }\n        }\n        \n        attempts++;\n      }\n\n      throw new Error('Timeout waiting for Apify results');\n    } catch (error) {\n      console.error('Error fetching TikTok user data from Apify:', error);\n      return this.getSampleUserData(username);\n    }\n  }\n\n  private getSampleUserData(username: string): TikTokUserData {\n    // Authentic data from Luis Lucero's profile via Apify scraper\n    if (username === 'luislucero369') {\n      return {\n        id: '6924070655164253190',\n        username: 'luislucero369',\n        displayName: 'Luis Lucero ♱',\n        description: 'CHRIST IS KING & he reigns over this page ♱\\nCheck out our YouTube channel⤵️',\n        avatar: 'https://ui-avatars.com/api/?name=Luis+Lucero&background=d4a574&color=000&size=100',\n        followerCount: '56400',\n        followingCount: '363',\n        videoCount: '242',\n        likeCount: '873100',\n        verified: false,\n      };\n    }\n    \n    // Default sample data for other usernames\n    return {\n      id: 'sample_id',\n      username: username || 'creator',\n      displayName: 'Faith Creator',\n      description: 'Spreading God\\'s word through short-form content 🙏 Biblical encouragement for the next generation',\n      avatar: '/placeholder-avatar.jpg',\n      followerCount: '8900',\n      followingCount: '245',\n      videoCount: '45',\n      likeCount: '125000',\n      verified: false,\n    };\n  }\n\n  formatCount(count: string): string {\n    const num = parseInt(count);\n    if (num >= 1000000) {\n      return (num / 1000000).toFixed(1) + 'M';\n    }\n    if (num >= 1000) {\n      return (num / 1000).toFixed(1) + 'K';\n    }\n    return num.toString();\n  }\n\n  async getUserVideos(username: string, limit: number = 2): Promise<TikTokVideoData[]> {\n    const token = this.getApiToken();\n    if (!token) {\n      console.log('No TikTok API token available');\n      return [];\n    }\n\n    console.log(`Fetching live TikTok videos for @${username} using Apify API...`);\n\n    try {\n      // Start an Apify actor run to scrape TikTok videos\n      const runResponse = await fetch(`https://api.apify.com/v2/acts/${this.apifyActorId}/runs`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          profiles: [`https://www.tiktok.com/@${username}`],\n          resultsLimit: limit,\n          shouldDownloadVideos: false,\n          shouldDownloadCovers: true,\n        }),\n      });\n\n      if (!runResponse.ok) {\n        const errorText = await runResponse.text();\n        console.error(`Failed to start Apify actor for @${username}: ${runResponse.status} - ${errorText}`);\n        return [];\n      }\n\n      const runData = await runResponse.json();\n      const runId = runData.data.id;\n      console.log(`Started TikTok scraping job ${runId} for @${username}`);\n\n      // Poll for results with timeout\n      const maxAttempts = 12; // 2 minutes total\n      for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n        await new Promise(resolve => setTimeout(resolve, 10000)); // Wait 10 seconds\n\n        const statusResponse = await fetch(`https://api.apify.com/v2/acts/${this.apifyActorId}/runs/${runId}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        if (statusResponse.ok) {\n          const statusData = await statusResponse.json();\n          console.log(`TikTok job ${runId} status (attempt ${attempt}): ${statusData.data.status}`);\n          \n          if (statusData.data.status === 'SUCCEEDED') {\n            // Get the dataset results\n            const resultsResponse = await fetch(`https://api.apify.com/v2/acts/${this.apifyActorId}/runs/${runId}/dataset/items`, {\n              headers: {\n                'Authorization': `Bearer ${token}`,\n              },\n            });\n\n            if (resultsResponse.ok) {\n              const results = await resultsResponse.json();\n              console.log(`Retrieved ${results.length} live TikTok videos for @${username}`);\n              \n              if (results.length > 0) {\n                const liveVideos = results.slice(0, limit).map((video: any, index: number) => {\n                  console.log(`Live TikTok video ${index + 1}:`, {\n                    id: video.id,\n                    text: video.text?.substring(0, 50),\n                    playCount: video.playCount,\n                    diggCount: video.diggCount\n                  });\n                  \n                  return {\n                    id: video.id || `tiktok_${username}_${Date.now()}_${index}`,\n                    title: video.text || `TikTok Video by @${username}`,\n                    description: video.text || '',\n                    thumbnail: video.videoMeta?.coverUrl || video.covers?.[0] || `https://ui-avatars.com/api/?name=${username.charAt(0).toUpperCase()}&background=fe2c55&color=fff&size=400`,\n                    username: video.authorMeta?.uniqueId || username,\n                    displayName: video.authorMeta?.nickName || `@${username}`,\n                    publishedAt: video.createTimeISO || new Date().toISOString(),\n                    viewCount: video.playCount?.toString() || '0',\n                    likeCount: video.diggCount?.toString() || '0',\n                    commentCount: video.commentCount?.toString() || '0',\n                    shareCount: video.shareCount?.toString() || '0',\n                    duration: this.formatDuration(video.videoMeta?.duration || 30)\n                  };\n                });\n\n                console.log(`Successfully fetched ${liveVideos.length} authentic TikTok videos from @${username}`);\n                return liveVideos;\n              }\n            }\n            break;\n          } else if (statusData.data.status === 'FAILED') {\n            console.error(`TikTok scraping job ${runId} failed for @${username}`);\n            break;\n          }\n        }\n      }\n\n      console.warn(`TikTok scraping timed out for @${username} after ${maxAttempts} attempts`);\n      return [];\n    } catch (error) {\n      console.error(`Error fetching TikTok videos for @${username}:`, error);\n      return [];\n    }\n  }\n\n  private getSampleVideos(username: string, limit: number): TikTokVideoData[] {\n    // Return a message indicating API is processing for live data\n    if (username === 'luislucero369') {\n      console.log('TikTok API is processing live data in the background. Current content may be cached.');\n      return [\n        {\n          id: 'processing_video1',\n          title: 'Loading Live TikTok Content...',\n          description: 'Fetching authentic TikTok videos from @luislucero369. This may take a moment as we retrieve real-time data.',\n          thumbnail: 'https://ui-avatars.com/api/?name=TT&background=fe2c55&color=fff&size=400',\n          username: 'luislucero369',\n          displayName: 'Luis Lucero ♱',\n          publishedAt: new Date().toISOString(),\n          viewCount: 'Loading...',\n          likeCount: 'Loading...',\n          commentCount: 'Loading...',\n          shareCount: 'Loading...',\n          duration: '--:--'\n        }\n      ].slice(0, limit);\n    }\n\n    return [];\n  }\n\n  formatDuration(seconds: number): string {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  }\n}\n\nexport const tiktokService = new TikTokService();","size_bytes":11688},"server/utils.ts":{"content":"import { storage } from \"./storage\";\nimport slugify from \"slugify\";\n\nexport async function generateSlug(title: string): Promise<string> {\n  let slug = slugify(title, {\n    lower: true,\n    strict: true,\n    trim: true,\n  });\n  \n  // Check if slug exists\n  const existingCampaign = await storage.getCampaignBySlug(slug);\n  \n  // If exists, append a random suffix\n  if (existingCampaign) {\n    const randomSuffix = Math.floor(Math.random() * 10000);\n    slug = `${slug}-${randomSuffix}`;\n  }\n  \n  return slug;\n}\n","size_bytes":510},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2254},"server/youtube.ts":{"content":"interface YouTubeVideoData {\n  id: string;\n  title: string;\n  description: string;\n  thumbnail: string;\n  channelTitle: string;\n  publishedAt: string;\n  viewCount: string;\n  likeCount: string;\n  commentCount: string;\n  duration: string;\n}\n\ninterface YouTubeChannelData {\n  id: string;\n  title: string;\n  description: string;\n  thumbnail: string;\n  subscriberCount: string;\n  videoCount: string;\n  viewCount: string;\n  customUrl: string;\n  publishedAt: string;\n}\n\nexport class YouTubeService {\n  private apiKey: string;\n  private baseUrl = 'https://www.googleapis.com/youtube/v3';\n\n  constructor() {\n    if (!process.env.YOUTUBE_API_KEY) {\n      throw new Error('YOUTUBE_API_KEY environment variable is required');\n    }\n    this.apiKey = process.env.YOUTUBE_API_KEY;\n  }\n\n  extractVideoId(url: string): string | null {\n    const regex = /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/)([^&\\n?#]+)/;\n    const match = url.match(regex);\n    return match ? match[1] : null;\n  }\n\n  async getVideoData(videoUrl: string): Promise<YouTubeVideoData | null> {\n    const videoId = this.extractVideoId(videoUrl);\n    if (!videoId) {\n      throw new Error('Invalid YouTube URL');\n    }\n\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/videos?part=snippet,statistics,contentDetails&id=${videoId}&key=${this.apiKey}`\n      );\n\n      if (!response.ok) {\n        throw new Error(`YouTube API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n      \n      if (!data.items || data.items.length === 0) {\n        return null;\n      }\n\n      const video = data.items[0];\n      const snippet = video.snippet;\n      const statistics = video.statistics;\n\n      return {\n        id: videoId,\n        title: snippet.title,\n        description: snippet.description,\n        thumbnail: snippet.thumbnails.maxres?.url || snippet.thumbnails.high?.url || snippet.thumbnails.default.url,\n        channelTitle: snippet.channelTitle,\n        publishedAt: snippet.publishedAt,\n        viewCount: statistics.viewCount || '0',\n        likeCount: statistics.likeCount || '0',\n        commentCount: statistics.commentCount || '0',\n        duration: video.contentDetails.duration\n      };\n    } catch (error) {\n      console.error('Error fetching YouTube data:', error);\n      throw error;\n    }\n  }\n\n  formatDuration(duration: string): string {\n    // Convert ISO 8601 duration (PT4M13S) to readable format (4:13)\n    const match = duration.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/);\n    if (!match) return '0:00';\n\n    const hours = match[1] ? parseInt(match[1].slice(0, -1)) : 0;\n    const minutes = match[2] ? parseInt(match[2].slice(0, -1)) : 0;\n    const seconds = match[3] ? parseInt(match[3].slice(0, -1)) : 0;\n\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  }\n\n  async getChannelData(channelHandle: string): Promise<YouTubeChannelData | null> {\n    try {\n      // First, get channel ID from handle\n      const searchResponse = await fetch(\n        `${this.baseUrl}/search?part=snippet&type=channel&q=${channelHandle}&key=${this.apiKey}`\n      );\n\n      if (!searchResponse.ok) {\n        throw new Error(`YouTube API error: ${searchResponse.status}`);\n      }\n\n      const searchData = await searchResponse.json();\n      \n      if (!searchData.items || searchData.items.length === 0) {\n        return null;\n      }\n\n      const channelId = searchData.items[0].id.channelId;\n\n      // Get detailed channel information\n      const channelResponse = await fetch(\n        `${this.baseUrl}/channels?part=snippet,statistics&id=${channelId}&key=${this.apiKey}`\n      );\n\n      if (!channelResponse.ok) {\n        throw new Error(`YouTube API error: ${channelResponse.status}`);\n      }\n\n      const channelData = await channelResponse.json();\n      \n      if (!channelData.items || channelData.items.length === 0) {\n        return null;\n      }\n\n      const channel = channelData.items[0];\n      \n      return {\n        id: channel.id,\n        title: channel.snippet.title,\n        description: channel.snippet.description,\n        thumbnail: channel.snippet.thumbnails.high?.url || channel.snippet.thumbnails.default?.url,\n        subscriberCount: channel.statistics.subscriberCount || '0',\n        videoCount: channel.statistics.videoCount || '0',\n        viewCount: channel.statistics.viewCount || '0',\n        customUrl: channel.snippet.customUrl || '',\n        publishedAt: channel.snippet.publishedAt,\n      };\n    } catch (error) {\n      console.error('Error fetching YouTube channel data:', error);\n      throw error;\n    }\n  }\n\n  formatCount(count: string): string {\n    const num = parseInt(count);\n    if (num >= 1000000) {\n      return (num / 1000000).toFixed(1) + 'M';\n    }\n    if (num >= 1000) {\n      return (num / 1000).toFixed(1) + 'K';\n    }\n    return num.toString();\n  }\n\n  async getChannelVideos(channelId: string, maxResults: number = 10): Promise<YouTubeVideoData[]> {\n    try {\n      // Get channel's latest videos\n      const searchResponse = await fetch(\n        `${this.baseUrl}/search?part=snippet&channelId=${channelId}&order=date&type=video&maxResults=${maxResults}&key=${this.apiKey}`\n      );\n\n      if (!searchResponse.ok) {\n        throw new Error(`YouTube API error: ${searchResponse.status}`);\n      }\n\n      const searchData = await searchResponse.json();\n      \n      if (!searchData.items || searchData.items.length === 0) {\n        return [];\n      }\n\n      // Get detailed video information for each video\n      const videoIds = searchData.items.map((item: any) => item.id.videoId).join(',');\n      \n      const videosResponse = await fetch(\n        `${this.baseUrl}/videos?part=snippet,statistics,contentDetails&id=${videoIds}&key=${this.apiKey}`\n      );\n\n      if (!videosResponse.ok) {\n        throw new Error(`YouTube API error: ${videosResponse.status}`);\n      }\n\n      const videosData = await videosResponse.json();\n      \n      return videosData.items.map((video: any) => ({\n        id: video.id,\n        title: video.snippet.title,\n        description: video.snippet.description,\n        thumbnail: video.snippet.thumbnails.maxres?.url || video.snippet.thumbnails.high?.url || video.snippet.thumbnails.default.url,\n        channelTitle: video.snippet.channelTitle,\n        publishedAt: video.snippet.publishedAt,\n        viewCount: video.statistics.viewCount || '0',\n        likeCount: video.statistics.likeCount || '0',\n        commentCount: video.statistics.commentCount || '0',\n        duration: video.contentDetails.duration\n      }));\n    } catch (error) {\n      console.error('Error fetching channel videos:', error);\n      throw error;\n    }\n  }\n\n  async getChannelIdFromHandle(handle: string): Promise<string | null> {\n    try {\n      const searchResponse = await fetch(\n        `${this.baseUrl}/search?part=snippet&type=channel&q=${handle}&key=${this.apiKey}`\n      );\n\n      if (!searchResponse.ok) {\n        throw new Error(`YouTube API error: ${searchResponse.status}`);\n      }\n\n      const searchData = await searchResponse.json();\n      \n      if (!searchData.items || searchData.items.length === 0) {\n        return null;\n      }\n\n      return searchData.items[0].id.channelId;\n    } catch (error) {\n      console.error('Error fetching channel ID:', error);\n      return null;\n    }\n  }\n}\n\nexport const youtubeService = new YouTubeService();","size_bytes":7477},"shared/schema.ts":{"content":"import {\n  pgTable,\n  text,\n  varchar,\n  timestamp,\n  jsonb,\n  index,\n  serial,\n  integer,\n  boolean,\n  decimal,\n  uuid,\n  uniqueIndex,\n} from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\nimport { relations } from \"drizzle-orm\";\n\n// Session storage table.\n// (IMPORTANT) This table is mandatory for Replit Auth, don't drop it.\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table.\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().notNull(),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  displayName: varchar(\"display_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  stripeCustomerId: varchar(\"stripe_customer_id\"),\n  isAdmin: boolean(\"is_admin\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  bio: text(\"bio\"),\n  location: varchar(\"location\"),\n  phone: varchar(\"phone\"),\n  username: varchar(\"username\", { length: 50 }),\n  password: varchar(\"password\"),\n  userType: varchar(\"user_type\", { enum: [\"creator\", \"business_owner\", \"ministry\"] }),\n  // Privacy settings\n  showEmail: boolean(\"show_email\").default(false),\n  showPhone: boolean(\"show_phone\").default(false),\n  showLocation: boolean(\"show_location\").default(false),\n});\n\n// Note: User relations are defined at the bottom of this file after all tables\n\n// Membership tiers\nexport const membershipTiers = pgTable(\"membership_tiers\", {\n  id: serial(\"id\").primaryKey(),\n  name: varchar(\"name\").notNull(),\n  price: decimal(\"price\", { precision: 10, scale: 2 }).notNull(),\n  description: text(\"description\"),\n  stripePriceId: varchar(\"stripe_price_id\"),\n  features: text(\"features\").array(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Business profiles\nexport const businessProfiles = pgTable(\"business_profiles\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: \"cascade\" }),\n  companyName: varchar(\"company_name\").notNull(),\n  industry: varchar(\"industry\"),\n  description: text(\"description\"),\n  website: varchar(\"website\"),\n  logo: varchar(\"logo\"),\n  location: varchar(\"location\"),\n  phone: varchar(\"phone\"),\n  email: varchar(\"email\"),\n  services: text(\"services\").array(),\n  membershipTierId: integer(\"membership_tier_id\").references(() => membershipTiers.id),\n  stripeSubscriptionId: varchar(\"stripe_subscription_id\"),\n  isActive: boolean(\"is_active\").default(true),\n  networkingGoals: text(\"networking_goals\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const businessProfilesRelations = relations(businessProfiles, ({ one }) => ({\n  user: one(users, {\n    fields: [businessProfiles.userId],\n    references: [users.id],\n  }),\n  membershipTier: one(membershipTiers, {\n    fields: [businessProfiles.membershipTierId],\n    references: [membershipTiers.id],\n  }),\n}));\n\n// Campaigns for donations\nexport const campaigns = pgTable(\"campaigns\", {\n  id: uuid(\"id\").defaultRandom().primaryKey(),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: \"cascade\" }),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  goal: decimal(\"goal\", { precision: 10, scale: 2 }).notNull(),\n  currentAmount: decimal(\"current_amount\", { precision: 10, scale: 2 }).default(\"0\"),\n  image: varchar(\"image\"),\n  additionalImages: text(\"additional_images\").array(),\n  video: varchar(\"video\"),\n  isActive: boolean(\"is_active\").default(true),\n  status: varchar(\"status\", { enum: [\"pending\", \"approved\", \"rejected\"] }).default(\"pending\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  endDate: timestamp(\"end_date\"),\n  slug: varchar(\"slug\").notNull(),\n}, (table) => ({\n  slugIndex: uniqueIndex(\"campaigns_slug_idx\").on(table.slug),\n}));\n\nexport const campaignsRelations = relations(campaigns, ({ one, many }) => ({\n  user: one(users, {\n    fields: [campaigns.userId],\n    references: [users.id],\n  }),\n  donations: many(donations),\n}));\n\n// Donations\nexport const donations = pgTable(\"donations\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").references(() => users.id),\n  campaignId: uuid(\"campaign_id\").references(() => campaigns.id, { onDelete: \"cascade\" }),\n  amount: decimal(\"amount\", { precision: 10, scale: 2 }).notNull(),\n  stripePaymentId: varchar(\"stripe_payment_id\"),\n  message: text(\"message\"),\n  isAnonymous: boolean(\"is_anonymous\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const donationsRelations = relations(donations, ({ one }) => ({\n  user: one(users, {\n    fields: [donations.userId],\n    references: [users.id],\n  }),\n  campaign: one(campaigns, {\n    fields: [donations.campaignId],\n    references: [campaigns.id],\n  }),\n}));\n\n// Schemas for form validation and inserts\nexport type UpsertUser = typeof users.$inferInsert;\nexport type User = typeof users.$inferSelect;\n\nexport const insertCampaignSchema = createInsertSchema(campaigns)\n  .omit({ id: true, userId: true, currentAmount: true, createdAt: true, updatedAt: true, slug: true })\n  .extend({\n    additionalImages: z.array(z.string()).optional(),\n    video: z.string().optional()\n  });\nexport type InsertCampaign = z.infer<typeof insertCampaignSchema>;\nexport type Campaign = typeof campaigns.$inferSelect;\n\nexport const insertDonationSchema = createInsertSchema(donations)\n  .omit({ id: true, stripePaymentId: true, createdAt: true });\nexport type InsertDonation = z.infer<typeof insertDonationSchema>;\nexport type Donation = typeof donations.$inferSelect;\n\nexport const insertBusinessProfileSchema = createInsertSchema(businessProfiles)\n  .omit({ id: true, userId: true, stripeSubscriptionId: true, isActive: true, createdAt: true, updatedAt: true });\nexport type InsertBusinessProfile = z.infer<typeof insertBusinessProfileSchema>;\nexport type BusinessProfile = typeof businessProfiles.$inferSelect;\n\nexport type MembershipTier = typeof membershipTiers.$inferSelect;\n\n// Content creators - updated to support multiple platforms\nexport const contentCreators = pgTable(\"content_creators\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  name: varchar(\"name\").notNull(),\n  platforms: jsonb(\"platforms\").notNull(), // Array of platform objects: {platform, profileUrl, subscriberCount}\n  content: text(\"content\").notNull(), // Type of content they create\n  audience: varchar(\"audience\"), // Target audience\n  bio: text(\"bio\"),\n  profileImage: varchar(\"profile_image\"), // Creator's profile image\n  isSponsored: boolean(\"is_sponsored\").default(false),\n  sponsorshipStartDate: timestamp(\"sponsorship_start_date\"),\n  sponsorshipEndDate: timestamp(\"sponsorship_end_date\"),\n  sponsorshipAmount: varchar(\"sponsorship_amount\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Social media posts from content creators\nexport const socialMediaPosts = pgTable(\"social_media_posts\", {\n  id: serial(\"id\").primaryKey(),\n  creatorId: integer(\"creator_id\").notNull().references(() => contentCreators.id),\n  postUrl: varchar(\"post_url\").notNull(),\n  postTitle: varchar(\"post_title\"),\n  postDescription: text(\"post_description\"),\n  thumbnailUrl: varchar(\"thumbnail_url\"),\n  videoUrl: varchar(\"video_url\"),\n  platform: varchar(\"platform\").notNull(),\n  viewCount: integer(\"view_count\"),\n  likeCount: integer(\"like_count\"),\n  commentCount: integer(\"comment_count\"),\n  postedAt: timestamp(\"posted_at\"),\n  isSponsored: boolean(\"is_sponsored\").default(false),\n  isVisibleOnProfile: boolean(\"is_visible_on_profile\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Sponsorship applications\nexport const sponsorshipApplications = pgTable(\"sponsorship_applications\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  name: varchar(\"name\").notNull(),\n  email: varchar(\"email\").notNull(),\n  platforms: jsonb(\"platforms\").notNull(), // Array of platform objects: {platform, profileUrl, subscriberCount}\n  content: text(\"content\").notNull(),\n  audience: varchar(\"audience\"),\n  message: text(\"message\"),\n  status: varchar(\"status\").default(\"pending\").notNull(), // pending, approved, rejected\n  reviewedAt: timestamp(\"reviewed_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Ministry profiles\nexport const ministryProfiles = pgTable(\"ministry_profiles\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  name: varchar(\"name\").notNull(),\n  description: text(\"description\"),\n  denomination: varchar(\"denomination\"),\n  website: varchar(\"website\"),\n  logo: varchar(\"logo\"),\n  location: varchar(\"location\"),\n  address: text(\"address\"),\n  phone: varchar(\"phone\"),\n  email: varchar(\"email\"),\n  socialLinks: jsonb(\"social_links\"), // {facebook, instagram, youtube, etc.}\n  isActive: boolean(\"is_active\").default(true),\n  isVerified: boolean(\"is_verified\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Ministry posts (informational posts, updates, etc.)\nexport const ministryPosts = pgTable(\"ministry_posts\", {\n  id: serial(\"id\").primaryKey(),\n  ministryId: integer(\"ministry_id\").notNull().references(() => ministryProfiles.id),\n  title: varchar(\"title\").notNull(),\n  content: text(\"content\").notNull(),\n  type: varchar(\"type\").notNull().default(\"post\"), // post, announcement, update\n  mediaUrls: text(\"media_urls\").array(), // Array of image/video URLs\n  links: jsonb(\"links\"), // Array of external links with titles\n  isPublished: boolean(\"is_published\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Platform content posts - unified content sharing for all user types\nexport const platformPosts = pgTable(\"platform_posts\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  authorType: varchar(\"author_type\").notNull(), // creator, business, ministry, user\n  authorId: integer(\"author_id\"), // reference to specific profile (creator_id, business_id, ministry_id)\n  title: varchar(\"title\"),\n  content: text(\"content\").notNull(),\n  mediaUrls: text(\"media_urls\").array(), // Array of image/video URLs\n  mediaType: varchar(\"media_type\").notNull().default(\"image\"), // image, video, text\n  tags: text(\"tags\").array(), // Array of hashtags\n  isPublished: boolean(\"is_published\").default(true),\n  likesCount: integer(\"likes_count\").default(0),\n  commentsCount: integer(\"comments_count\").default(0),\n  sharesCount: integer(\"shares_count\").default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Post interactions (likes, comments, shares)\nexport const postInteractions = pgTable(\"post_interactions\", {\n  id: serial(\"id\").primaryKey(),\n  postId: integer(\"post_id\").notNull().references(() => platformPosts.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  type: varchar(\"type\").notNull(), // like, comment, share\n  content: text(\"content\"), // For comments\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// User follows (users following other users)\nexport const userFollows = pgTable(\"user_follows\", {\n  id: serial(\"id\").primaryKey(),\n  followerId: varchar(\"follower_id\").notNull().references(() => users.id),\n  followingId: varchar(\"following_id\").notNull().references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => ({\n  uniqueFollow: uniqueIndex(\"unique_user_follow\").on(table.followerId, table.followingId),\n}));\n\n// Business profile follows (users following business profiles)\nexport const businessFollows = pgTable(\"business_follows\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  businessId: integer(\"business_id\").notNull().references(() => businessProfiles.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => ({\n  uniqueFollow: uniqueIndex(\"unique_business_follow\").on(table.userId, table.businessId),\n}));\n\n// Ministry events (Bible studies, services, missions, community events)\nexport const ministryEvents = pgTable(\"ministry_events\", {\n  id: serial(\"id\").primaryKey(),\n  ministryId: integer(\"ministry_id\").notNull().references(() => ministryProfiles.id),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  type: varchar(\"type\").notNull(), // bible_study, service, mission, community_event, worship, prayer\n  startDate: timestamp(\"start_date\").notNull(),\n  endDate: timestamp(\"end_date\"),\n  location: varchar(\"location\"),\n  address: text(\"address\"),\n  isOnline: boolean(\"is_online\").default(false),\n  onlineLink: varchar(\"online_link\"),\n  maxAttendees: integer(\"max_attendees\"),\n  currentAttendees: integer(\"current_attendees\").default(0),\n  isPublished: boolean(\"is_published\").default(true),\n  requiresRegistration: boolean(\"requires_registration\").default(false),\n  flyerImage: varchar(\"flyer_image\"), // URL to uploaded flyer image\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Ministry followers (users who follow ministry accounts)\nexport const ministryFollowers = pgTable(\"ministry_followers\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  ministryId: integer(\"ministry_id\").notNull().references(() => ministryProfiles.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => ({\n  uniqueFollower: uniqueIndex(\"unique_ministry_follower\").on(table.userId, table.ministryId),\n}));\n\n// Event registrations\nexport const eventRegistrations = pgTable(\"event_registrations\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  eventId: integer(\"event_id\").notNull().references(() => ministryEvents.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => ({\n  uniqueRegistration: uniqueIndex(\"unique_event_registration\").on(table.userId, table.eventId),\n}));\n\n// Ministry post RSVPs (for event announcements)\nexport const ministryPostRsvps = pgTable(\"ministry_post_rsvps\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  postId: integer(\"post_id\").notNull().references(() => ministryPosts.id),\n  status: varchar(\"status\").notNull().default(\"going\"), // going, maybe, not_going\n  notes: text(\"notes\"), // Optional notes from user\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => ({\n  uniqueRsvp: uniqueIndex(\"unique_ministry_post_rsvp\").on(table.userId, table.postId),\n}));\n\n// Relations\nexport const contentCreatorsRelations = relations(contentCreators, ({ one, many }) => ({\n  user: one(users, {\n    fields: [contentCreators.userId],\n    references: [users.id],\n  }),\n  posts: many(socialMediaPosts),\n}));\n\nexport const socialMediaPostsRelations = relations(socialMediaPosts, ({ one }) => ({\n  creator: one(contentCreators, {\n    fields: [socialMediaPosts.creatorId],\n    references: [contentCreators.id],\n  }),\n}));\n\nexport const sponsorshipApplicationsRelations = relations(sponsorshipApplications, ({ one }) => ({\n  user: one(users, {\n    fields: [sponsorshipApplications.userId],\n    references: [users.id],\n  }),\n}));\n\n// Ministry relations\nexport const ministryProfilesRelations = relations(ministryProfiles, ({ one, many }) => ({\n  user: one(users, {\n    fields: [ministryProfiles.userId],\n    references: [users.id],\n  }),\n  posts: many(ministryPosts),\n  events: many(ministryEvents),\n  followers: many(ministryFollowers),\n}));\n\nexport const ministryPostsRelations = relations(ministryPosts, ({ one }) => ({\n  ministry: one(ministryProfiles, {\n    fields: [ministryPosts.ministryId],\n    references: [ministryProfiles.id],\n  }),\n}));\n\nexport const ministryEventsRelations = relations(ministryEvents, ({ one, many }) => ({\n  ministry: one(ministryProfiles, {\n    fields: [ministryEvents.ministryId],\n    references: [ministryProfiles.id],\n  }),\n  registrations: many(eventRegistrations),\n}));\n\nexport const ministryFollowersRelations = relations(ministryFollowers, ({ one }) => ({\n  user: one(users, {\n    fields: [ministryFollowers.userId],\n    references: [users.id],\n  }),\n  ministry: one(ministryProfiles, {\n    fields: [ministryFollowers.ministryId],\n    references: [ministryProfiles.id],\n  }),\n}));\n\nexport const eventRegistrationsRelations = relations(eventRegistrations, ({ one }) => ({\n  user: one(users, {\n    fields: [eventRegistrations.userId],\n    references: [users.id],\n  }),\n  event: one(ministryEvents, {\n    fields: [eventRegistrations.eventId],\n    references: [ministryEvents.id],\n  }),\n}));\n\n// Add relations to users\nexport const usersRelations = relations(users, ({ many, one }) => ({\n  campaigns: many(campaigns),\n  businessProfile: one(businessProfiles, {\n    fields: [users.id],\n    references: [businessProfiles.userId],\n  }),\n  contentCreator: one(contentCreators, {\n    fields: [users.id],\n    references: [contentCreators.userId],\n  }),\n  sponsorshipApplications: many(sponsorshipApplications),\n  ministryProfile: one(ministryProfiles, {\n    fields: [users.id],\n    references: [ministryProfiles.userId],\n  }),\n  ministryFollowers: many(ministryFollowers),\n  eventRegistrations: many(eventRegistrations),\n  businessFollows: many(businessFollows),\n  notifications: many(notifications),\n}));\n\nexport const businessFollowsRelations = relations(businessFollows, ({ one }) => ({\n  user: one(users, {\n    fields: [businessFollows.userId],\n    references: [users.id],\n  }),\n  business: one(businessProfiles, {\n    fields: [businessFollows.businessId],\n    references: [businessProfiles.id],\n  }),\n}));\n\n// Platform schema for sponsorship applications\nconst platformSchema = z.object({\n  platform: z.string().min(1, \"Please select a platform\"),\n  profileUrl: z.string().url(\"Please provide a valid profile URL\"),\n  subscriberCount: z.coerce.number().min(0, \"Subscriber count must be 0 or greater\").optional(),\n});\n\n// Schema for creating content creators\nexport const insertContentCreatorSchema = createInsertSchema(contentCreators)\n  .omit({ id: true, isSponsored: true, sponsorshipStartDate: true, \n    sponsorshipEndDate: true, sponsorshipAmount: true, createdAt: true, updatedAt: true })\n  .extend({\n    platforms: z.array(platformSchema).min(1, \"Please add at least one platform\"),\n  });\n\n// Schema for creating sponsorship applications\nexport const insertSponsorshipApplicationSchema = createInsertSchema(sponsorshipApplications)\n  .omit({ id: true, userId: true, status: true, reviewedAt: true, createdAt: true, updatedAt: true })\n  .extend({\n    platforms: z.array(platformSchema).min(1, \"Please add at least one platform\"),\n  });\n\n// Schema for creating social media posts\nexport const insertSocialMediaPostSchema = createInsertSchema(socialMediaPosts)\n  .omit({ id: true, creatorId: true, createdAt: true });\n\n\n\nexport type InsertContentCreator = z.infer<typeof insertContentCreatorSchema>;\nexport type ContentCreator = typeof contentCreators.$inferSelect;\n\nexport type InsertSocialMediaPost = z.infer<typeof insertSocialMediaPostSchema>;\nexport type SocialMediaPost = typeof socialMediaPosts.$inferSelect;\n\nexport type InsertSponsorshipApplication = z.infer<typeof insertSponsorshipApplicationSchema>;\nexport type SponsorshipApplication = typeof sponsorshipApplications.$inferSelect;\n\n// Ministry schemas\nexport const insertMinistryProfileSchema = createInsertSchema(ministryProfiles)\n  .omit({ id: true, userId: true, isActive: true, isVerified: true, createdAt: true, updatedAt: true })\n  .extend({\n    socialLinks: z.record(z.string().url()).optional(),\n  });\n\nexport const insertMinistryPostSchema = createInsertSchema(ministryPosts)\n  .omit({ id: true, ministryId: true, createdAt: true, updatedAt: true })\n  .extend({\n    mediaUrls: z.array(z.string().url()).optional(),\n    links: z.array(z.object({\n      title: z.string(),\n      url: z.string().url(),\n    })).optional(),\n  });\n\nexport const insertMinistryEventSchema = createInsertSchema(ministryEvents)\n  .omit({ id: true, ministryId: true, currentAttendees: true, createdAt: true, updatedAt: true })\n  .extend({\n    startDate: z.coerce.date(),\n    endDate: z.coerce.date().optional(),\n  });\n\nexport type InsertMinistryProfile = z.infer<typeof insertMinistryProfileSchema>;\nexport type MinistryProfile = typeof ministryProfiles.$inferSelect;\n\nexport type InsertMinistryPost = z.infer<typeof insertMinistryPostSchema>;\nexport type MinistryPost = typeof ministryPosts.$inferSelect;\n\nexport type InsertMinistryEvent = z.infer<typeof insertMinistryEventSchema>;\nexport type MinistryEvent = typeof ministryEvents.$inferSelect;\n\n// Notifications table\nexport const notifications = pgTable(\"notifications\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: \"cascade\" }).notNull(),\n  type: varchar(\"type\", { \n    enum: [\"like\", \"comment\", \"follow\", \"post\", \"rsvp\", \"campaign_update\", \"ministry_post\", \"chat_message\", \"direct_message\"] \n  }).notNull(),\n  title: varchar(\"title\").notNull(),\n  message: text(\"message\").notNull(),\n  relatedId: varchar(\"related_id\"), // ID of the related entity (post, comment, etc.)\n  relatedType: varchar(\"related_type\", { \n    enum: [\"platform_post\", \"ministry_post\", \"comment\", \"campaign\", \"user\", \"ministry\", \"group_chat\", \"chat_message\", \"direct_chat\"] \n  }),\n  isRead: boolean(\"is_read\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  // Optional metadata for rich notifications\n  actorId: varchar(\"actor_id\").references(() => users.id), // Who performed the action\n  actorName: varchar(\"actor_name\"),\n  actorImage: varchar(\"actor_image\"),\n});\n\nexport const notificationsRelations = relations(notifications, ({ one }) => ({\n  user: one(users, {\n    fields: [notifications.userId],\n    references: [users.id],\n  }),\n  actor: one(users, {\n    fields: [notifications.actorId],\n    references: [users.id],\n  }),\n}));\n\n// Notification insert schema\nexport const insertNotificationSchema = createInsertSchema(notifications)\n  .omit({ id: true, createdAt: true });\n\nexport type InsertNotification = z.infer<typeof insertNotificationSchema>;\nexport type Notification = typeof notifications.$inferSelect;\n\n// Ministry post RSVP schemas\nexport const insertMinistryPostRsvpSchema = createInsertSchema(ministryPostRsvps)\n  .omit({ id: true, userId: true, createdAt: true, updatedAt: true });\n\nexport type InsertMinistryPostRsvp = z.infer<typeof insertMinistryPostRsvpSchema>;\nexport type MinistryPostRsvp = typeof ministryPostRsvps.$inferSelect;\n\nexport type MinistryFollower = typeof ministryFollowers.$inferSelect;\nexport type EventRegistration = typeof eventRegistrations.$inferSelect;\nexport type BusinessFollow = typeof businessFollows.$inferSelect;\n\n// Platform posts schemas\nexport const insertPlatformPostSchema = createInsertSchema(platformPosts).omit({\n  id: true,\n  likesCount: true,\n  commentsCount: true,\n  sharesCount: true,\n  createdAt: true,\n  updatedAt: true,\n}).extend({\n  tags: z.array(z.string()).optional(),\n  mediaUrls: z.array(z.string().url()).optional(),\n});\n\nexport type InsertPlatformPost = z.infer<typeof insertPlatformPostSchema>;\nexport type PlatformPost = typeof platformPosts.$inferSelect;\n\nexport const insertPostInteractionSchema = createInsertSchema(postInteractions).omit({\n  id: true,\n  createdAt: true,\n});\nexport type InsertPostInteraction = z.infer<typeof insertPostInteractionSchema>;\nexport type PostInteraction = typeof postInteractions.$inferSelect;\n\nexport type UserFollow = typeof userFollows.$inferSelect;\nexport type InsertUserFollow = typeof userFollows.$inferInsert;\n\n// Group chat queues and chats\nexport const groupChatQueues = pgTable(\"group_chat_queues\", {\n  id: serial(\"id\").primaryKey(),\n  creatorId: varchar(\"creator_id\").notNull().references(() => users.id),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  intention: varchar(\"intention\").notNull(), // prayer, bible_study, evangelizing, fellowship, etc.\n  minPeople: integer(\"min_people\").notNull().default(4),\n  maxPeople: integer(\"max_people\").notNull().default(12),\n  currentCount: integer(\"current_count\").notNull().default(1), // starts with creator\n  status: varchar(\"status\").notNull().default(\"waiting\"), // waiting, active, completed, cancelled\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const groupChats = pgTable(\"group_chats\", {\n  id: serial(\"id\").primaryKey(),\n  queueId: integer(\"queue_id\").notNull().references(() => groupChatQueues.id),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  intention: varchar(\"intention\").notNull(),\n  memberCount: integer(\"member_count\").notNull(),\n  status: varchar(\"status\").notNull().default(\"active\"), // active, completed, archived\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const groupChatMembers = pgTable(\"group_chat_members\", {\n  id: serial(\"id\").primaryKey(),\n  queueId: integer(\"queue_id\").references(() => groupChatQueues.id),\n  chatId: integer(\"chat_id\").references(() => groupChats.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  role: varchar(\"role\").notNull().default(\"member\"), // creator, member\n  joinedAt: timestamp(\"joined_at\").defaultNow(),\n});\n\n// Group chat relations\nexport const groupChatQueuesRelations = relations(groupChatQueues, ({ one, many }) => ({\n  creator: one(users, {\n    fields: [groupChatQueues.creatorId],\n    references: [users.id],\n  }),\n  members: many(groupChatMembers),\n  chat: one(groupChats),\n}));\n\nexport const groupChatsRelations = relations(groupChats, ({ one, many }) => ({\n  queue: one(groupChatQueues, {\n    fields: [groupChats.queueId],\n    references: [groupChatQueues.id],\n  }),\n  members: many(groupChatMembers),\n  messages: many(groupChatMessages),\n}));\n\nexport const groupChatMembersRelations = relations(groupChatMembers, ({ one }) => ({\n  user: one(users, {\n    fields: [groupChatMembers.userId],\n    references: [users.id],\n  }),\n  queue: one(groupChatQueues, {\n    fields: [groupChatMembers.queueId],\n    references: [groupChatQueues.id],\n  }),\n  chat: one(groupChats, {\n    fields: [groupChatMembers.chatId],\n    references: [groupChats.id],\n  }),\n}));\n\n// Group chat messages\nexport const groupChatMessages = pgTable(\"group_chat_messages\", {\n  id: serial(\"id\").primaryKey(),\n  chatId: integer(\"chat_id\").notNull().references(() => groupChats.id, { onDelete: \"cascade\" }),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  message: text(\"message\").notNull(),\n  type: varchar(\"type\").notNull().default(\"message\"), // message, prayer_request, system\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const groupChatMessagesRelations = relations(groupChatMessages, ({ one }) => ({\n  chat: one(groupChats, {\n    fields: [groupChatMessages.chatId],\n    references: [groupChats.id],\n  }),\n  user: one(users, {\n    fields: [groupChatMessages.userId],\n    references: [users.id],\n  }),\n}));\n\n// Insert schemas for group chats\nexport const insertGroupChatQueueSchema = createInsertSchema(groupChatQueues)\n  .omit({ id: true, creatorId: true, currentCount: true, status: true, createdAt: true, updatedAt: true })\n  .extend({\n    minPeople: z.coerce.number().min(2).max(12),\n    maxPeople: z.coerce.number().min(4).max(12),\n  });\n\nexport const insertGroupChatMemberSchema = createInsertSchema(groupChatMembers)\n  .omit({ id: true, joinedAt: true });\n\nexport const insertGroupChatMessageSchema = createInsertSchema(groupChatMessages)\n  .omit({ id: true, createdAt: true });\n\nexport type InsertGroupChatQueue = z.infer<typeof insertGroupChatQueueSchema>;\nexport type GroupChatQueue = typeof groupChatQueues.$inferSelect;\nexport type GroupChat = typeof groupChats.$inferSelect;\nexport type GroupChatMember = typeof groupChatMembers.$inferSelect;\nexport type GroupChatMessage = typeof groupChatMessages.$inferSelect;\nexport type InsertGroupChatMember = z.infer<typeof insertGroupChatMemberSchema>;\nexport type InsertGroupChatMessage = z.infer<typeof insertGroupChatMessageSchema>;\n\n// Direct Messages / 1-on-1 Chats\nexport const directChats = pgTable(\"direct_chats\", {\n  id: serial(\"id\").primaryKey(),\n  user1Id: varchar(\"user1_id\").notNull().references(() => users.id),\n  user2Id: varchar(\"user2_id\").notNull().references(() => users.id),\n  lastMessageAt: timestamp(\"last_message_at\").defaultNow(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const directMessages = pgTable(\"direct_messages\", {\n  id: serial(\"id\").primaryKey(),\n  chatId: integer(\"chat_id\").notNull().references(() => directChats.id, { onDelete: \"cascade\" }),\n  senderId: varchar(\"sender_id\").notNull().references(() => users.id),\n  message: text(\"message\").notNull(),\n  readAt: timestamp(\"read_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Direct chat relations\nexport const directChatsRelations = relations(directChats, ({ one, many }) => ({\n  user1: one(users, {\n    fields: [directChats.user1Id],\n    references: [users.id],\n  }),\n  user2: one(users, {\n    fields: [directChats.user2Id],\n    references: [users.id],\n  }),\n  messages: many(directMessages),\n}));\n\nexport const directMessagesRelations = relations(directMessages, ({ one }) => ({\n  chat: one(directChats, {\n    fields: [directMessages.chatId],\n    references: [directChats.id],\n  }),\n  sender: one(users, {\n    fields: [directMessages.senderId],\n    references: [users.id],\n  }),\n}));\n\n// Insert schemas for direct messages\nexport const insertDirectMessageSchema = createInsertSchema(directMessages)\n  .omit({ id: true, createdAt: true });\n\nexport type DirectChat = typeof directChats.$inferSelect;\nexport type DirectMessage = typeof directMessages.$inferSelect;\nexport type InsertDirectMessage = z.infer<typeof insertDirectMessageSchema>;\n","size_bytes":30534},"client/public/disable-errors.js":{"content":"// Script to disable the error overlay\nwindow.addEventListener('load', function() {\n  // Try to disable the error overlay by setting the config option\n  try {\n    // This is the direct way to disable the error overlay\n    window.server = window.server || {};\n    window.server.hmr = window.server.hmr || {};\n    window.server.hmr.overlay = false;\n    \n    // Also try to disable by direct attribute\n    if (window.__vite_plugin_react_preamble_installed__) {\n      window.__vite_plugin_react_preamble_installed__ = false;\n    }\n    \n    // Also try to capture and prevent errors\n    window.addEventListener('error', function(event) {\n      if (event.message && event.message.includes('Failed to fetch')) {\n        console.warn('Suppressed error:', event.message);\n        event.preventDefault();\n        event.stopPropagation();\n        return true;\n      }\n    }, true);\n    \n    // Handle unhandled promise rejections\n    window.addEventListener('unhandledrejection', function(event) {\n      console.warn('Suppressed rejection:', event.reason);\n      event.preventDefault();\n      event.stopPropagation();\n      return true;\n    }, true);\n    \n    // Additional attempts to disable the error overlay\n    if (window.__vite_plugin_runtime_error_overlay) {\n      window.__vite_plugin_runtime_error_overlay.clearRuntimeErrors = function() {};\n      window.__vite_plugin_runtime_error_overlay.onError = function() {};\n    }\n    \n    console.log('Error overlay disabled via external script');\n  } catch (e) {\n    console.error('Failed to disable error overlay:', e);\n  }\n});","size_bytes":1569},"client/public/vite-error-override.js":{"content":"// This script completely disables the Vite error overlay\n(function() {\n  // Override the error overlay by defining an empty module\n  window.__vite_plugin_react_runtime_error_overlay__ = {\n    onError: function() {},\n    clearRuntimeErrors: function() {}\n  };\n  \n  // Also override all Vite HMR error reporting\n  window.__vite_plugin_react_preamble_installed__ = false;\n  \n  // Set server.hmr.overlay to false\n  if (!window.server) window.server = {};\n  if (!window.server.hmr) window.server.hmr = {};\n  window.server.hmr.overlay = false;\n  \n  // Capture any runtime errors and prevent them from rendering error overlays\n  window.addEventListener('error', function(event) {\n    if (event.filename && (\n      event.filename.includes('queryClient.ts') ||\n      event.message && event.message.includes('Failed to fetch')\n    )) {\n      console.warn('Prevented error overlay for:', event.message);\n      event.preventDefault();\n      event.stopPropagation();\n      return true;\n    }\n  }, true);\n  \n  // Also capture unhandled promise rejections\n  window.addEventListener('unhandledrejection', function(event) {\n    console.warn('Suppressed promise rejection:', event.reason);\n    event.preventDefault();\n    event.stopPropagation();\n    return true;\n  }, true);\n  \n  // Look for and remove any existing error overlays\n  function removeExistingOverlays() {\n    const overlays = document.querySelectorAll('[vite-plugin-react-runtime-error-overlay]');\n    overlays.forEach(function(overlay) {\n      overlay.remove();\n    });\n    \n    // Also look for elements with specific class names that might be error overlays\n    const possibleOverlays = document.querySelectorAll('.vite-error-overlay, .vite-runtime-error');\n    possibleOverlays.forEach(function(overlay) {\n      overlay.remove();\n    });\n  }\n  \n  // Run immediately and also periodically check for and remove overlays\n  removeExistingOverlays();\n  setInterval(removeExistingOverlays, 100);\n  \n  console.log('Vite error overlay has been completely disabled');\n})();","size_bytes":2016},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { ThemeProvider } from \"next-themes\";\nimport { AuthProvider, useAuth } from \"@/hooks/useAuth\";\nimport NotFound from \"@/pages/not-found\";\nimport Header from \"@/components/layout/Header\";\nimport Footer from \"@/components/layout/Footer\";\nimport HomePage from \"@/pages/HomePage\";\nimport DonationsPage from \"@/pages/DonationsPage\";\nimport CampaignDetailsPage from \"@/pages/CampaignDetailsPage\";\nimport CreateCampaignPage from \"@/pages/CreateCampaignPage\";\nimport EditCampaignPage from \"@/pages/EditCampaignPage\";\nimport ManageCampaignsPage from \"@/pages/ManageCampaignsPage\";\nimport BusinessNetworkPage from \"@/pages/BusinessNetworkPage\";\nimport BusinessProfilePage from \"@/pages/BusinessProfilePage\";\nimport MembershipCheckoutPage from \"@/pages/MembershipCheckoutPage\";\nimport DonationCheckoutPage from \"@/pages/DonationCheckoutPage\";\nimport DonationSuccessPage from \"@/pages/DonationSuccessPage\";\nimport ProfilePage from \"@/pages/ProfilePage\";\nimport SponsoredCreatorsPage from \"@/pages/SponsoredCreatorsPage\";\nimport SponsorshipApplicationPage from \"@/pages/SponsorshipApplicationPageNew\";\nimport CreatorsPage from \"@/pages/CreatorsPage\";\nimport CreatorProfilePage from \"@/pages/CreatorProfilePage\";\nimport CreatorProfileManagePage from \"@/pages/CreatorProfileManagePage\";\nimport AdminDashboard from \"@/pages/AdminDashboard\";\nimport AuthPage from \"@/pages/AuthPage\";\nimport AuthTestPage from \"@/pages/AuthTestPage\";\nimport AboutPage from \"@/pages/AboutPage\";\nimport FeedPage from \"@/pages/FeedPage\";\nimport ExplorePage from \"@/pages/ExplorePage\";\nimport CreatePage from \"@/pages/CreatePage\";\nimport ConnectPage from \"@/pages/ConnectPage\";\nimport ChatRoom from \"@/pages/ChatRoom\";\nimport NotificationsPage from \"@/pages/NotificationsPage\";\nimport MinistryProfilePage from \"@/pages/MinistryProfilePage\";\nimport MinistryCreatePage from \"@/pages/MinistryCreatePage\";\nimport EditProfilePage from \"@/pages/EditProfilePage\";\nimport CreatorSharePage from \"@/pages/CreatorSharePage\";\nimport CreatorSocialSharePage from \"@/pages/CreatorSocialSharePage\";\nimport MinistriesPage from \"@/pages/MinistriesPage\";\nimport MinistryProfileViewPage from \"@/pages/MinistryProfileViewPage\";\nimport EditMinistryProfilePage from \"@/pages/EditMinistryProfilePage\";\nimport EventCreatePage from \"@/pages/EventCreatePage\";\nimport PostPage from \"@/pages/PostPage\";\nimport DirectChatPage from \"@/pages/DirectChatPage\";\n\nimport PrivacySettingsPage from \"@/pages/PrivacySettingsPage\";\nimport BottomNavigation from \"@/components/layout/BottomNavigation\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={HomePage} />\n      <Route path=\"/auth\" component={AuthPage} />\n      <Route path=\"/donate\" component={DonationsPage} />\n      <Route path=\"/donate/create\" component={CreateCampaignPage} />\n      <Route path=\"/donate/edit/:id\" component={EditCampaignPage} />\n      <Route path=\"/donate/checkout/:campaignId\" component={DonationCheckoutPage} />\n      <Route path=\"/donate/success\" component={DonationSuccessPage} />\n      <Route path=\"/donate/:slug\" component={CampaignDetailsPage} />\n      <Route path=\"/manage-campaigns\" component={ManageCampaignsPage} />\n      <Route path=\"/business\" component={BusinessNetworkPage} />\n      <Route path=\"/business/profile/:id\" component={BusinessProfilePage} />\n      <Route path=\"/business-profile\" component={BusinessNetworkPage} />\n      <Route path=\"/ministry-profile\" component={MinistryProfilePage} />\n      <Route path=\"/ministry/create\" component={MinistryCreatePage} />\n      <Route path=\"/edit-ministry-profile\" component={EditMinistryProfilePage} />\n      <Route path=\"/membership/checkout/:tierId\" component={MembershipCheckoutPage} />\n      <Route path=\"/profile\" component={ProfilePage} />\n      <Route path=\"/profile/:username\" component={ProfilePage} />\n      <Route path=\"/edit-profile\" component={EditProfilePage} />\n      <Route path=\"/sponsored-creators\" component={SponsoredCreatorsPage} />\n      <Route path=\"/creators\" component={CreatorsPage} />\n      <Route path=\"/creators/:id\" component={CreatorProfilePage} />\n      <Route path=\"/creator-profile\" component={CreatorProfileManagePage} />\n      <Route path=\"/ministries\" component={MinistriesPage} />\n      <Route path=\"/ministry/:id\" component={MinistryProfileViewPage} />\n      <Route path=\"/sponsorship-application\" component={SponsorshipApplicationPage} />\n      <Route path=\"/apply-sponsorship\" component={SponsorshipApplicationPage} />\n      <Route path=\"/admin\" component={AdminDashboard} />\n      <Route path=\"/auth-test\" component={AuthTestPage} />\n      <Route path=\"/about\" component={AboutPage} />\n      <Route path=\"/feed\" component={FeedPage} />\n      <Route path=\"/post/:id\" component={PostPage} />\n      <Route path=\"/ministry-post/:id\" component={PostPage} />\n      <Route path=\"/explore\" component={ExplorePage} />\n      <Route path=\"/create\" component={CreatePage} />\n      <Route path=\"/events/create\" component={EventCreatePage} />\n      <Route path=\"/creators/share\" component={CreatorSocialSharePage} />\n      <Route path=\"/creators/share/:platform\" component={CreatorSharePage} />\n      <Route path=\"/connect\" component={ConnectPage} />\n      <Route path=\"/chat/:id\" component={ChatRoom} />\n      <Route path=\"/direct-chat/:chatId\" component={DirectChatPage} />\n      <Route path=\"/notifications\" component={NotificationsPage} />\n\n      <Route path=\"/privacy-settings\" component={PrivacySettingsPage} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction AppContent() {\n  const { user } = useAuth();\n  \n  return (\n    <>\n      <Header />\n      <main className=\"min-h-screen\">\n        <Router />\n      </main>\n      <Footer />\n      {user && <BottomNavigation />}\n      <Toaster />\n    </>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider attribute=\"class\" defaultTheme=\"dark\">\n        <TooltipProvider>\n          <AuthProvider>\n            <AppContent />\n          </AuthProvider>\n        </TooltipProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":6358},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer utilities {\n  .line-clamp-2 {\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n  }\n}\n\n/* Bell Animation Keyframes */\n@keyframes bell-ring {\n  0%, 50%, 100% { transform: rotate(0deg); }\n  10% { transform: rotate(10deg); }\n  20% { transform: rotate(-8deg); }\n  30% { transform: rotate(8deg); }\n  40% { transform: rotate(-5deg); }\n}\n\n@keyframes notification-glow {\n  0%, 100% { box-shadow: 0 0 5px rgba(212, 175, 55, 0.5); }\n  50% { box-shadow: 0 0 20px rgba(212, 175, 55, 0.8), 0 0 30px rgba(212, 175, 55, 0.4); }\n}\n\n@keyframes notification-pop {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.2); }\n  100% { transform: scale(1); }\n}\n\n.bell-animate {\n  animation: bell-ring 2s ease-in-out infinite;\n}\n\n.notification-glow {\n  animation: notification-glow 2s ease-in-out infinite;\n}\n\n.notification-pop {\n  animation: notification-pop 0.6s ease-in-out;\n}\n\n.hero-section {\n  background-image: url('/images/mountain-cross-background.jpg');\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  position: relative;\n}\n\n.hero-section::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.4);\n  z-index: 1;\n}\n\n.hero-section > div {\n  position: relative;\n  z-index: 2;\n}\n\n:root {\n  /* Light Mode */\n  --background: 0 0% 100%;\n  --foreground: 0 0% 0%;\n  --muted: 0 0% 96%;\n  --muted-foreground: 0 0% 35%;\n  --popover: 0 0% 100%;\n  --popover-foreground: 0 0% 0%;\n  --card: 0 0% 100%;\n  --card-foreground: 0 0% 0%;\n  --border: 0 0% 90%;\n  --input: 0 0% 90%;\n  --primary: 45 100% 50%; /* Yellow */\n  --primary-foreground: 0 0% 0%;\n  --secondary: 0 0% 96%;\n  --secondary-foreground: 0 0% 0%;\n  --accent: 45 100% 50%; /* Yellow */\n  --accent-foreground: 0 0% 0%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 100%;\n  --ring: 45 100% 50%; /* Yellow */\n  --radius: 0.5rem;\n  --chart-1: 43 77% 53%;\n  --chart-2: 0 0% 0%;\n  --chart-3: 0 0% 30%;\n  --chart-4: 43 57% 43%;\n  --chart-5: 0 0% 60%;\n  --sidebar-background: 0 0% 96%;\n  --sidebar-foreground: 0 0% 0%;\n  --sidebar-primary: 43 77% 53%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 43 77% 53%;\n  --sidebar-accent-foreground: 0 0% 100%;\n  --sidebar-border: 0 0% 90%;\n  --sidebar-ring: 43 77% 53%;\n}\n\n.dark {\n  /* Dark Mode */\n  --background: 0 0% 0%;\n  --foreground: 0 0% 100%;\n  --muted: 0 0% 10%;\n  --muted-foreground: 0 0% 100%;\n  --popover: 0 0% 0%;\n  --popover-foreground: 0 0% 100%;\n  --card: 0 0% 15%;\n  --card-foreground: 0 0% 100%;\n  --border: 0 0% 25%; /* Subtle gray border */\n  --input: 0 0% 20%;\n  --primary: 45 100% 50%; /* Yellow */\n  --primary-foreground: 0 0% 0%;\n  --secondary: 0 0% 10%;\n  --secondary-foreground: 0 0% 100%;\n  --accent: 45 100% 50%; /* Yellow */\n  --accent-foreground: 0 0% 0%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 100%;\n  --ring: 45 100% 50%; /* Yellow */\n  --chart-1: 43 77% 53%;\n  --chart-2: 0 0% 100%;\n  --chart-3: 0 0% 100%;\n  --chart-4: 43 57% 43%;\n  --chart-5: 0 0% 100%;\n  --sidebar-background: 0 0% 10%;\n  --sidebar-foreground: 0 0% 100%;\n  --sidebar-primary: 43 77% 53%;\n  --sidebar-primary-foreground: 0 0% 0%;\n  --sidebar-accent: 43 77% 53%;\n  --sidebar-accent-foreground: 0 0% 0%;\n  --sidebar-border: 0 0% 25%; /* Subtle gray border */\n  --sidebar-ring: 43 77% 53%;\n}\n\n@layer base {\n  * {\n    border-color: hsl(var(--border));\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n  \n  /* Dark mode page background */\n  .dark body {\n    background-color: black;\n  }\n  \n  /* Dark mode card styling with subtle gray borders */\n  .dark .card-section {\n    background-color: hsl(var(--card));\n    border-width: 1px;\n    border-color: hsl(var(--border));\n  }\n  \n  /* Subtle shadows for cards in dark mode */\n  .dark [class*=\"card\"],\n  .dark .bg-card {\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  }\n  \n  /* Subtle border styling for dark mode */\n  .dark .border-primary,\n  .dark .border-border {\n    border-color: hsl(var(--border));\n  }\n  \n  /* Dark mode main content areas */\n  .dark main {\n    background-color: black;\n  }\n  \n  /* Header gradient shadow styling */\n  .header-gradient-shadow {\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);\n  }\n  \n  /* Dark mode header gradient shadow */\n  .dark .header-gradient-shadow {\n    box-shadow: 0 2px 16px rgba(0, 0, 0, 0.5), 0 1px 6px rgba(0, 0, 0, 0.3);\n  }\n  \n  /* Bottom navigation gradient shadow styling (flipped) */\n  .bottom-nav-gradient-shadow {\n    box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.15);\n  }\n  \n  /* Dark mode bottom navigation gradient shadow */\n  .dark .bottom-nav-gradient-shadow {\n    box-shadow: 0 -2px 16px rgba(0, 0, 0, 0.5), 0 -1px 6px rgba(0, 0, 0, 0.3);\n  }\n  \n  /* Make all page borders thinner */\n  .border-b {\n    border-bottom-width: 1px !important;\n  }\n  \n  .border-t {\n    border-top-width: 1px !important;\n  }\n  \n  .border {\n    border-width: 1px !important;\n  }\n  \n  /* Hide scrollbar on mobile */\n  .scrollbar-hide {\n    -ms-overflow-style: none;  /* IE and Edge */\n    scrollbar-width: none;  /* Firefox */\n  }\n  \n  .scrollbar-hide::-webkit-scrollbar {\n    display: none;  /* Chrome, Safari, and Opera */\n  }\n}\n\n.hero-section {\n  background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('/attached_assets/mountain-majesty-artistic-silhouette-of-crucifix-cross-against-sunset-sky-photo.jpg');\n  background-size: cover;\n  background-position: center;\n}\n\n.cta-section {\n  background-image: linear-gradient(rgba(18, 18, 18, 0.9), rgba(18, 18, 18, 0.9)), url('https://images.unsplash.com/photo-1584707824245-f67bad2c62d5?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1920&h=1080');\n  background-size: cover;\n  background-position: center;\n}\n\n/* 3D Flip Card Styles */\n.perspective-1000 {\n  perspective: 1000px;\n}\n\n.transform-style-preserve-3d {\n  transform-style: preserve-3d;\n}\n\n.backface-hidden {\n  backface-visibility: hidden;\n}\n\n.rotate-y-180 {\n  transform: rotateY(180deg);\n}\n\n/* Custom animations for Connect page */\n@keyframes slideInFromLeft {\n  0% {\n    transform: translateX(-100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n@keyframes fadeInUp {\n  0% {\n    transform: translateY(30px);\n    opacity: 0;\n  }\n  100% {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n\n@keyframes glow {\n  0%, 100% {\n    box-shadow: 0 0 5px rgba(212, 175, 55, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(212, 175, 55, 0.6), 0 0 30px rgba(212, 175, 55, 0.4);\n  }\n}\n\n@keyframes ripple {\n  0% {\n    transform: scale(0);\n    opacity: 0.8;\n  }\n  100% {\n    transform: scale(4);\n    opacity: 0;\n  }\n}\n\n.queue-card-enter {\n  animation: slideInFromLeft 0.5s ease-out;\n}\n\n.chat-card-enter {\n  animation: fadeInUp 0.6s ease-out;\n}\n\n.intention-shimmer {\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite;\n}\n\n.float-animation {\n  animation: float 3s ease-in-out infinite;\n}\n\n.glow-animation {\n  animation: glow 2s ease-in-out infinite;\n}\n\n.ripple-effect {\n  position: relative;\n  overflow: hidden;\n}\n\n.ripple-effect::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-radius: 50%;\n  background: rgba(212, 175, 55, 0.3);\n  transform: translate(-50%, -50%);\n  transition: width 0.3s, height 0.3s;\n}\n\n.ripple-effect:hover::before {\n  width: 100%;\n  height: 100%;\n}\n","size_bytes":7831},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\nimport { disableRuntimeErrorOverlay } from \"./lib/disableErrorOverlay\";\n\n// Disable the error overlay that keeps appearing on page refresh\ndisableRuntimeErrorOverlay();\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":326},"client/public/css/no-error-overlay.css":{"content":"/* Hide error overlays with CSS */\n[vite-plugin-react-runtime-error-overlay],\n[data-vite-dev-server-overlay],\n[data-plugin-runtime-error],\n.vite-error-overlay,\n.vite-runtime-error,\n#vite-error-overlay,\n#vite-runtime-error-overlay {\n  display: none !important;\n  visibility: hidden !important;\n  opacity: 0 !important;\n  z-index: -9999 !important;\n  pointer-events: none !important;\n}","size_bytes":383},"client/src/components/CreatePostModal.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Plus, X, Upload, Image, Video, Type } from \"lucide-react\";\n\ninterface CreatePostModalProps {\n  trigger?: React.ReactNode;\n  onPostCreated?: () => void;\n}\n\n\n\nconst MEDIA_TYPES = [\n  { value: \"image\", label: \"Image\", icon: Image },\n  { value: \"video\", label: \"Video\", icon: Video },\n  { value: \"text\", label: \"Text Only\", icon: Type },\n];\n\nexport function CreatePostModal({ trigger, onPostCreated }: CreatePostModalProps) {\n  const [open, setOpen] = useState(false);\n  \n  // Debug logging\n  console.log(\"CreatePostModal rendered, open state:\", open);\n  const [formData, setFormData] = useState({\n    title: \"\",\n    content: \"\",\n    authorType: \"user\",\n    authorId: null,\n    mediaType: \"image\",\n    mediaUrls: [] as string[],\n    tags: [] as string[],\n  });\n  const [newTag, setNewTag] = useState(\"\");\n  const [newMediaUrl, setNewMediaUrl] = useState(\"\");\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Get user's profile data to determine available author types\n  const { data: creatorStatus } = useQuery({\n    queryKey: [\"/api/user/creator-status\"],\n  });\n\n  const { data: businessProfiles } = useQuery({\n    queryKey: [\"/api/business-profiles\"],\n  });\n\n  const { data: ministryProfile } = useQuery({\n    queryKey: [\"/api/user/ministry-profile\"],\n  });\n\n  const createPostMutation = useMutation({\n    mutationFn: async (postData: any) => {\n      return await apiRequest(\"/api/platform-posts\", {\n        method: \"POST\",\n        data: postData,\n      });\n    },\n    onSuccess: () => {\n      toast({ title: \"Post created successfully!\" });\n      setOpen(false);\n      resetForm();\n      queryClient.invalidateQueries({ queryKey: [\"/api/platform-posts\"] });\n      onPostCreated?.(); // Call the callback when post is created\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Failed to create post\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      title: \"\",\n      content: \"\",\n      authorType: \"user\",\n      authorId: null,\n      mediaType: \"image\",\n      mediaUrls: [],\n      tags: [],\n    });\n    setNewTag(\"\");\n    setNewMediaUrl(\"\");\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.content.trim()) {\n      toast({\n        title: \"Content required\",\n        description: \"Please enter some content for your post\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    createPostMutation.mutate(formData);\n  };\n\n  const addTag = () => {\n    if (newTag.trim() && !formData.tags.includes(newTag.trim())) {\n      setFormData(prev => ({\n        ...prev,\n        tags: [...prev.tags, newTag.trim()]\n      }));\n      setNewTag(\"\");\n    }\n  };\n\n  const removeTag = (tagToRemove: string) => {\n    setFormData(prev => ({\n      ...prev,\n      tags: prev.tags.filter(tag => tag !== tagToRemove)\n    }));\n  };\n\n  const addMediaUrl = () => {\n    if (newMediaUrl.trim() && !formData.mediaUrls.includes(newMediaUrl.trim())) {\n      setFormData(prev => ({\n        ...prev,\n        mediaUrls: [...prev.mediaUrls, newMediaUrl.trim()]\n      }));\n      setNewMediaUrl(\"\");\n    }\n  };\n\n  const removeMediaUrl = (urlToRemove: string) => {\n    setFormData(prev => ({\n      ...prev,\n      mediaUrls: prev.mediaUrls.filter(url => url !== urlToRemove)\n    }));\n  };\n\n  const getAuthorOptions = () => {\n    const options = [{ value: \"user\", label: \"Personal Account\", id: null }];\n\n    if (creatorStatus && typeof creatorStatus === 'object' && 'isCreator' in creatorStatus && creatorStatus.isCreator && 'creatorProfile' in creatorStatus && creatorStatus.creatorProfile) {\n      const creatorProfile = creatorStatus.creatorProfile as any;\n      options.push({\n        value: \"creator\",\n        label: `Creator: ${creatorProfile.name}`,\n        id: creatorProfile.id,\n      });\n    }\n\n    if (Array.isArray(businessProfiles) && businessProfiles.length > 0) {\n      businessProfiles.forEach((business: any) => {\n        options.push({\n          value: \"business\",\n          label: `Business: ${business.companyName}`,\n          id: business.id,\n        });\n      });\n    }\n\n    if (ministryProfile && typeof ministryProfile === 'object' && 'name' in ministryProfile && ministryProfile.name) {\n      options.push({\n        value: \"ministry\",\n        label: `Ministry: ${ministryProfile.name}`,\n        id: (ministryProfile as any).id,\n      });\n    }\n\n    return options;\n  };\n\n  return (\n    <div>\n      {trigger ? (\n        <div onClick={() => {\n          console.log(\"Custom trigger clicked!\");\n          setOpen(true);\n        }}>\n          {trigger}\n        </div>\n      ) : (\n        <Button \n          onClick={() => {\n            console.log(\"Default button clicked!\");\n            setOpen(true);\n          }}\n          className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F]\"\n        >\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Create Post\n        </Button>\n      )}\n    \n      <Dialog open={open} onOpenChange={(newOpen) => {\n        console.log(\"Dialog onOpenChange called with:\", newOpen);\n        setOpen(newOpen);\n      }}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto bg-gray-900 border-gray-700\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white\">Create New Post</DialogTitle>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* Author Selection */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium text-white\">Post As</label>\n            <Select\n              value={formData.authorType}\n              onValueChange={(value) => {\n                const option = getAuthorOptions().find(opt => opt.value === value);\n                setFormData(prev => ({\n                  ...prev,\n                  authorType: value,\n                  authorId: option?.id || null,\n                }));\n              }}\n            >\n              <SelectTrigger className=\"bg-gray-800 border-gray-600 text-white\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent className=\"bg-gray-800 border-gray-600\">\n                {getAuthorOptions().map((option) => (\n                  <SelectItem key={option.value} value={option.value}>\n                    {option.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Title */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium text-white\">Title (Optional)</label>\n            <Input\n              value={formData.title}\n              onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\n              placeholder=\"Add a title to your post...\"\n              className=\"bg-gray-800 border-gray-600 text-white placeholder-gray-400\"\n            />\n          </div>\n\n          {/* Content */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium text-white\">Content *</label>\n            <Textarea\n              value={formData.content}\n              onChange={(e) => setFormData(prev => ({ ...prev, content: e.target.value }))}\n              placeholder=\"What would you like to share?\"\n              rows={4}\n              className=\"bg-gray-800 border-gray-600 text-white placeholder-gray-400\"\n              required\n            />\n          </div>\n\n          {/* Media Type */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium text-white\">Media Type</label>\n            <div className=\"grid grid-cols-3 gap-2\">\n              {MEDIA_TYPES.map((type) => {\n                const Icon = type.icon;\n                return (\n                  <Button\n                    key={type.value}\n                    type=\"button\"\n                    variant={formData.mediaType === type.value ? \"default\" : \"outline\"}\n                    className={`flex items-center gap-2 ${\n                      formData.mediaType === type.value\n                        ? \"bg-[#D4AF37] text-black hover:bg-[#B8941F]\"\n                        : \"bg-gray-800 border-gray-600 text-white hover:bg-gray-700\"\n                    }`}\n                    onClick={() => setFormData(prev => ({ ...prev, mediaType: type.value }))}\n                  >\n                    <Icon className=\"w-4 h-4\" />\n                    {type.label}\n                  </Button>\n                );\n              })}\n            </div>\n          </div>\n\n\n\n          {/* File Upload - Only show for Image/Video */}\n          {formData.mediaType !== \"text\" && (\n            <div className=\"space-y-3\">\n              <label className=\"text-sm font-medium text-white\">\n                Upload {formData.mediaType === \"image\" ? \"Image\" : \"Video\"}\n              </label>\n              \n              {/* File Upload Area */}\n              <div className=\"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-gray-500 transition-colors\">\n                <Upload className=\"w-8 h-8 text-gray-400 mx-auto mb-2\" />\n                <p className=\"text-gray-400 mb-2\">\n                  Click to upload or drag and drop your {formData.mediaType}\n                </p>\n                <p className=\"text-xs text-gray-500\">\n                  {formData.mediaType === \"image\" ? \"PNG, JPG, GIF up to 10MB\" : \"MP4, MOV up to 100MB\"}\n                </p>\n                <input\n                  type=\"file\"\n                  accept={formData.mediaType === \"image\" ? \"image/*\" : \"video/*\"}\n                  className=\"hidden\"\n                  onChange={(e) => {\n                    const file = e.target.files?.[0];\n                    if (file) {\n                      // In a real app, you'd upload the file to a storage service\n                      // For now, we'll use a placeholder URL\n                      const fileUrl = URL.createObjectURL(file);\n                      setFormData(prev => ({\n                        ...prev,\n                        mediaUrls: [...prev.mediaUrls, fileUrl]\n                      }));\n                    }\n                  }}\n                />\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  className=\"mt-2 border-gray-600 text-gray-300 hover:bg-gray-800\"\n                  onClick={(e) => {\n                    const input = e.currentTarget.parentElement?.querySelector('input[type=\"file\"]') as HTMLInputElement;\n                    input?.click();\n                  }}\n                >\n                  Choose File\n                </Button>\n              </div>\n\n              {/* Alternative: Add Media URL */}\n              <div className=\"space-y-2\">\n                <label className=\"text-xs font-medium text-gray-400\">Or add media URL:</label>\n                <div className=\"flex gap-2\">\n                  <Input\n                    value={newMediaUrl}\n                    onChange={(e) => setNewMediaUrl(e.target.value)}\n                    placeholder={`https://example.com/${formData.mediaType === \"image\" ? \"image.jpg\" : \"video.mp4\"}`}\n                    className=\"bg-gray-800 border-gray-600 text-white placeholder-gray-400\"\n                  />\n                  <Button\n                    type=\"button\"\n                    onClick={addMediaUrl}\n                    className=\"bg-gray-700 hover:bg-gray-600\"\n                  >\n                    Add\n                  </Button>\n                </div>\n              </div>\n\n              {/* Media Preview */}\n              {formData.mediaUrls.length > 0 && (\n                <div className=\"space-y-3\">\n                  <label className=\"text-sm font-medium text-white\">Preview</label>\n                  <div className=\"grid gap-3\">\n                    {formData.mediaUrls.map((url, index) => (\n                      <div key={index} className=\"relative bg-gray-800 rounded-lg overflow-hidden\">\n                        {formData.mediaType === \"video\" ? (\n                          <video\n                            controls\n                            className=\"w-full max-h-64 object-contain\"\n                            style={{ maxHeight: '256px' }}\n                          >\n                            <source src={url} type=\"video/mp4\" />\n                            Your browser does not support the video tag.\n                          </video>\n                        ) : (\n                          <img\n                            src={url}\n                            alt={`Preview ${index + 1}`}\n                            className=\"w-full max-h-64 object-contain\"\n                            style={{ maxHeight: '256px' }}\n                            onError={(e) => {\n                              const target = e.target as HTMLImageElement;\n                              target.src = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzM3NDE1MSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5Q0EzQUYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBub3QgZm91bmQ8L3RleHQ+PC9zdmc+\";\n                            }}\n                          />\n                        )}\n                        \n                        {/* Remove button */}\n                        <Button\n                          type=\"button\"\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          className=\"absolute top-2 right-2 h-8 w-8 p-0\"\n                          onClick={() => removeMediaUrl(url)}\n                        >\n                          <X className=\"w-4 h-4\" />\n                        </Button>\n                        \n                        {/* URL display */}\n                        <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 p-2\">\n                          <p className=\"text-xs text-gray-300 truncate\">\n                            {url}\n                          </p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n            </div>\n          )}\n\n          {/* Tags */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium text-white\">Tags</label>\n            <div className=\"flex gap-2\">\n              <Input\n                value={newTag}\n                onChange={(e) => setNewTag(e.target.value)}\n                placeholder=\"Add a tag...\"\n                className=\"bg-gray-800 border-gray-600 text-white placeholder-gray-400\"\n                onKeyPress={(e) => {\n                  if (e.key === \"Enter\") {\n                    e.preventDefault();\n                    addTag();\n                  }\n                }}\n              />\n              <Button\n                type=\"button\"\n                onClick={addTag}\n                className=\"bg-gray-700 hover:bg-gray-600\"\n              >\n                Add\n              </Button>\n            </div>\n            {formData.tags.length > 0 && (\n              <div className=\"flex flex-wrap gap-2\">\n                {formData.tags.map((tag, index) => (\n                  <Badge\n                    key={index}\n                    variant=\"secondary\"\n                    className=\"bg-gray-700 text-white flex items-center gap-1\"\n                  >\n                    #{tag}\n                    <Button\n                      type=\"button\"\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => removeTag(tag)}\n                      className=\"p-0 h-auto text-gray-400 hover:text-white\"\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </Button>\n                  </Badge>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Submit Buttons */}\n          <div className=\"flex justify-end gap-2 pt-4\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => setOpen(false)}\n              className=\"border-gray-600 text-gray-300 hover:bg-gray-800\"\n            >\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={createPostMutation.isPending}\n              className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F]\"\n            >\n              {createPostMutation.isPending ? \"Creating...\" : \"Create Post\"}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n    </div>\n  );\n}","size_bytes":17308},"client/src/components/FollowSuggestions.tsx":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { CreatePostModal } from \"@/components/CreatePostModal\";\nimport { Link } from \"wouter\";\nimport { Plus, Users, Building2, Church, UserPlus, Heart, ChevronLeft, ChevronRight, X } from \"lucide-react\";\nimport React, { useRef, useState } from \"react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\n// Add CSS for hiding scrollbar\nconst scrollbarHideStyle = `\n  .scrollbar-hide {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n  .scrollbar-hide::-webkit-scrollbar {\n    display: none;\n  }\n`;\n\nexport function FollowSuggestions() {\n  const { data: user } = useQuery({\n    queryKey: [\"/api/user\"],\n  });\n\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const [suggestions, setSuggestions] = useState<any[]>([]);\n  const [followedUsers, setFollowedUsers] = useState<Set<string>>(new Set());\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Check if user has already dismissed welcome or has posts\n  const { data: userPosts } = useQuery({\n    queryKey: [`/api/users/${user?.id}/posts`],\n    enabled: !!user?.id,\n  });\n\n  // Check if welcome section should be visible\n  const shouldShowWelcome = user && (!userPosts || userPosts.length === 0) && \n    !localStorage.getItem(`welcome-dismissed-${user.id}`);\n\n  const hideWelcomeSection = () => {\n    if (user?.id) {\n      localStorage.setItem(`welcome-dismissed-${user.id}`, 'true');\n    }\n  };\n\n  // Get user's current following list to pre-populate followedUsers\n  const { data: following } = useQuery({\n    queryKey: [`/api/users/${user?.id}/following`],\n    enabled: !!user?.id,\n  });\n\n  const { data: creators } = useQuery({\n    queryKey: [\"/api/content-creators\"],\n  });\n\n  const { data: businesses } = useQuery({\n    queryKey: [\"/api/business-profiles\"],\n  });\n\n  const { data: ministries } = useQuery({\n    queryKey: [\"/api/ministries\"],\n  });\n\n  // Get all users for basic profile suggestions\n  const { data: allUsers } = useQuery({\n    queryKey: [\"/api/users\"],\n  });\n\n  // Scroll functions for the slider\n  const scrollLeft = () => {\n    if (scrollContainerRef.current) {\n      scrollContainerRef.current.scrollBy({ left: -320, behavior: 'smooth' });\n    }\n  };\n\n  const scrollRight = () => {\n    if (scrollContainerRef.current) {\n      scrollContainerRef.current.scrollBy({ left: 320, behavior: 'smooth' });\n    }\n  };\n\n  // Get random suggestions from each category\n  const getRandomSuggestions = () => {\n    const suggestions: any[] = [];\n\n    // Add random creators\n    if (creators?.length) {\n      const randomCreators = creators\n        .sort(() => Math.random() - 0.5)\n        .slice(0, 3)\n        .map((creator: any) => ({\n          ...creator,\n          type: 'creator',\n          displayName: creator.name,\n          description: creator.bio || 'Content Creator',\n          followers: creator.totalFollowers || 0,\n          avatar: creator.profileImageUrl,\n          userId: creator.userId, // Add userId for follow functionality\n        }));\n      suggestions.push(...randomCreators);\n    }\n\n    // Add random businesses\n    if (businesses?.length) {\n      const randomBusinesses = businesses\n        .sort(() => Math.random() - 0.5)\n        .slice(0, 2)\n        .map((business: any) => ({\n          ...business,\n          type: 'business',\n          displayName: business.companyName,\n          description: business.description || business.industry || 'Business professional',\n          avatar: business.logoUrl,\n          businessId: business.id, // Use business ID for follow functionality\n          userId: business.userId, // Keep for ownership checks\n        }));\n      suggestions.push(...randomBusinesses);\n    }\n\n    // Add random ministries\n    if (ministries?.length) {\n      const randomMinistries = ministries\n        .sort(() => Math.random() - 0.5)\n        .slice(0, 2)\n        .map((ministry: any) => ({\n          ...ministry,\n          type: 'ministry',\n          displayName: ministry.name,\n          description: ministry.description || 'Ministry organization',\n          followers: 0, // No follower count for ministries\n          avatar: ministry.logoUrl,\n          ministryId: ministry.id, // Use ministry ID for follow functionality\n          userId: ministry.userId, // Keep for ownership checks\n        }));\n      suggestions.push(...randomMinistries);\n    }\n\n    // Add basic user profiles for users without specific profiles\n    if (allUsers?.length) {\n      // Get users who don't have creator, business, or ministry profiles\n      const profiledUserIds = new Set([\n        ...(creators || []).map((c: any) => c.userId),\n        ...(businesses || []).map((b: any) => b.userId),\n        ...(ministries || []).map((m: any) => m.userId)\n      ]);\n\n      const basicUsers = allUsers\n        .filter((user: any) => !profiledUserIds.has(user.id) && user.username) // Only include users with valid usernames\n        .sort(() => Math.random() - 0.5)\n        .slice(0, 2)\n        .map((user: any) => ({\n          ...user,\n          type: 'user',\n          displayName: user.firstName && user.lastName \n            ? `${user.firstName} ${user.lastName}` \n            : user.username || user.email?.split('@')[0] || 'User',\n          description: 'Community member',\n          avatar: user.profileImageUrl,\n          userId: user.id,\n          username: user.username, // Ensure username is explicitly set\n        }));\n      \n      suggestions.push(...basicUsers);\n    }\n\n    return suggestions.sort(() => Math.random() - 0.5).slice(0, 6);\n  };\n\n  // Follow mutation\n  const followMutation = useMutation({\n    mutationFn: async (targetUserId: string) => {\n      return apiRequest(`/api/users/${targetUserId}/follow`, {\n        method: \"POST\",\n      });\n    },\n    onSuccess: (_, targetUserId) => {\n      setFollowedUsers(prev => new Set(prev).add(targetUserId));\n      toast({\n        title: \"Success\",\n        description: \"Successfully followed user!\",\n      });\n      // Refetch following list to keep it in sync\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}/following`] });\n    },\n    onError: (error: any) => {\n      console.error(\"Follow error:\", error);\n      // Parse error message from response\n      let errorMessage = \"Failed to follow user\";\n      if (error?.message) {\n        errorMessage = error.message;\n      }\n      toast({\n        title: \"Error\",\n        description: errorMessage,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Unfollow mutation\n  const unfollowMutation = useMutation({\n    mutationFn: async (targetUserId: string) => {\n      return apiRequest(`/api/users/${targetUserId}/follow`, {\n        method: \"DELETE\",\n      });\n    },\n    onSuccess: (_, targetUserId) => {\n      setFollowedUsers(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(targetUserId);\n        return newSet;\n      });\n      toast({\n        title: \"Success\",\n        description: \"Successfully unfollowed user!\",\n      });\n      // Refetch following list to keep it in sync\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${user?.id}/following`] });\n    },\n    onError: (error: any) => {\n      console.error(\"Unfollow error:\", error);\n      let errorMessage = \"Failed to unfollow user\";\n      if (error?.message) {\n        errorMessage = error.message;\n      }\n      toast({\n        title: \"Error\",\n        description: errorMessage,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Update suggestions when data loads\n  React.useEffect(() => {\n    setSuggestions(getRandomSuggestions());\n  }, [creators, businesses, ministries, allUsers, user]);\n\n  // Update followedUsers when following data loads\n  React.useEffect(() => {\n    if (following?.length) {\n      const followedIds = new Set(following.map((f: any) => f.id));\n      setFollowedUsers(followedIds);\n    }\n  }, [following]);\n\n  const getProfileLink = (suggestion: any) => {\n    switch (suggestion.type) {\n      case 'creator':\n        return `/creators/${suggestion.id}`;\n      case 'business':\n        return `/business/profile/${suggestion.id}`;\n      case 'ministry':\n        return `/ministry-profile`;\n      case 'user':\n        // Validate username before creating link\n        if (!suggestion.username || suggestion.username === 'null' || suggestion.username === null) {\n          return '#'; // Return placeholder if no valid username\n        }\n        return `/profile/${suggestion.username}`;\n      default:\n        return '#';\n    }\n  };\n\n  const getTypeIcon = (type: string) => {\n    switch (type) {\n      case 'creator':\n        return <Users className=\"w-4 h-4\" />;\n      case 'business':\n        return <Building2 className=\"w-4 h-4\" />;\n      case 'ministry':\n        return <Church className=\"w-4 h-4\" />;\n      case 'user':\n        return <UserPlus className=\"w-4 h-4\" />;\n      default:\n        return <Users className=\"w-4 h-4\" />;\n    }\n  };\n\n  const getTypeColor = (type: string) => {\n    switch (type) {\n      case 'creator':\n        return 'bg-purple-500/20 text-purple-300';\n      case 'business':\n        return 'bg-blue-500/20 text-blue-300';\n      case 'ministry':\n        return 'bg-green-500/20 text-green-300';\n      case 'user':\n        return 'bg-gray-500/20 text-gray-300';\n      default:\n        return 'bg-gray-500/20 text-gray-300';\n    }\n  };\n\n  return (\n    <>\n      <style dangerouslySetInnerHTML={{ __html: scrollbarHideStyle }} />\n      <div className=\"col-span-full space-y-8\">\n      {/* Header Section - Only show to new users without posts */}\n      {shouldShowWelcome && (\n        <div className=\"text-center\">\n          <div className=\"bg-gray-900 rounded-lg p-8 border border-gray-700 relative\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\"\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-white hover:bg-gray-800\"\n              onClick={hideWelcomeSection}\n            >\n              <X className=\"w-4 h-4\" />\n            </Button>\n            <Heart className=\"w-16 h-16 text-[#D4AF37] mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-white mb-2\">Welcome to the Community!</h3>\n            <p className=\"text-gray-400 mb-6\">\n              Share your faith journey, inspire others with God's love, and help build a community where Christ's light shines through every story\n            </p>\n            {user && (\n              <CreatePostModal\n                trigger={\n                  <Button className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F]\">\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    Create Your First Post\n                  </Button>\n                }\n                onPostCreated={hideWelcomeSection}\n              />\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Follow Suggestions */}\n      {suggestions.length > 0 && (\n        <div>\n          <div className=\"flex items-center justify-between mb-6\">\n            <div className=\"flex items-center gap-2\">\n              <UserPlus className=\"w-5 h-5 text-[#D4AF37]\" />\n              <h2 className=\"text-xl font-semibold text-white\">Discover Amazing Profiles</h2>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button \n                variant=\"outline\" \n                size=\"sm\"\n                className=\"border-gray-600 text-gray-300 hover:bg-gray-800\"\n                onClick={() => setSuggestions(getRandomSuggestions())}\n              >\n                Show More Suggestions\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={scrollLeft}\n                className=\"border-gray-600 text-gray-300 hover:bg-gray-800 p-2\"\n              >\n                <ChevronLeft className=\"w-4 h-4\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={scrollRight}\n                className=\"border-gray-600 text-gray-300 hover:bg-gray-800 p-2\"\n              >\n                <ChevronRight className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </div>\n          \n          <div \n            ref={scrollContainerRef}\n            className=\"flex overflow-x-auto gap-4 pb-4 scrollbar-hide\"\n            style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}>\n            {suggestions.map((suggestion, index) => (\n              <Card key={`${suggestion.type}-${suggestion.id}-${index}`} className=\"bg-black border-gray-700 hover:border-[#D4AF37]/50 transition-colors flex-shrink-0 w-80\">\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-center gap-3\">\n                    <Avatar className=\"w-12 h-12\">\n                      <AvatarImage src={suggestion.avatar} alt={suggestion.displayName} />\n                      <AvatarFallback className=\"bg-[#D4AF37] text-black\">\n                        {suggestion.displayName?.charAt(0) || '?'}\n                      </AvatarFallback>\n                    </Avatar>\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"font-medium text-white truncate\">{suggestion.displayName}</h3>\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        <Badge className={`text-xs ${getTypeColor(suggestion.type)}`}>\n                          {getTypeIcon(suggestion.type)}\n                          <span className=\"ml-1 capitalize\">{suggestion.type}</span>\n                        </Badge>\n                      </div>\n                    </div>\n                  </div>\n                </CardHeader>\n                \n                <CardContent className=\"space-y-3\">\n                  <p className=\"text-sm text-gray-300 line-clamp-2\">\n                    {suggestion.description}\n                  </p>\n                  \n                  <div className=\"flex items-center justify-between\">\n                    {suggestion.type === 'creator' && suggestion.totalFollowers ? (\n                      <span className=\"text-xs text-gray-400\">\n                        {(suggestion.totalFollowers || 0).toLocaleString()} followers\n                      </span>\n                    ) : (\n                      <div className=\"flex-1\"></div>\n                    )}\n                    \n                    <div className=\"flex gap-2 flex-shrink-0\">\n                      <Link href={getProfileLink(suggestion)}>\n                        <Button variant=\"outline\" size=\"sm\" className=\"border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white\">\n                          View\n                        </Button>\n                      </Link>\n                      {user && user.id !== suggestion.userId && (\n                        <Button \n                          size=\"sm\" \n                          className={followedUsers.has(suggestion.userId) \n                            ? \"bg-gray-600 text-gray-300 hover:bg-red-600 hover:text-white\" \n                            : \"bg-[#D4AF37] text-black hover:bg-[#B8941F] font-medium\"\n                          }\n                          onClick={() => {\n                            if (followedUsers.has(suggestion.userId)) {\n                              unfollowMutation.mutate(suggestion.userId);\n                            } else {\n                              followMutation.mutate(suggestion.userId);\n                            }\n                          }}\n                          disabled={followMutation.isPending || unfollowMutation.isPending}\n                        >\n                          <UserPlus className=\"w-3 h-3 mr-1\" />\n                          {followedUsers.has(suggestion.userId) \n                            ? (unfollowMutation.isPending ? \"Unfollowing...\" : \"Following\")\n                            : (followMutation.isPending ? \"Following...\" : \"Follow\")\n                          }\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n\n        </div>\n      )}\n\n      {/* Fallback if no profiles exist */}\n      {suggestions.length === 0 && (\n        <div className=\"bg-gray-900 rounded-lg p-8 border border-gray-700 text-center\">\n          <Users className=\"w-16 h-16 text-gray-500 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold text-white mb-2\">No Profiles Yet</h3>\n          <p className=\"text-gray-400\">\n            Be the first to create a profile and start building the community!\n          </p>\n        </div>\n      )}\n      </div>\n    </>\n  );\n}","size_bytes":16947},"client/src/components/Logo.tsx":{"content":"import logoPath from \"@assets/Untitled design (4)_1749330134801.png\";\n\ninterface LogoProps {\n  className?: string;\n  dark?: boolean;\n}\n\nexport function Logo({ className = \"h-8 w-auto\", dark = false }: LogoProps) {\n  return (\n    <img \n      src={logoPath}\n      alt=\"Christ Collective\" \n      className={className}\n    />\n  );\n}\n","size_bytes":329},"client/src/components/LogoSvg.tsx":{"content":"import React from 'react';\n\ninterface LogoSvgProps {\n  className?: string;\n}\n\nexport const LogoSvg: React.FC<LogoSvgProps> = ({ className = \"\" }) => {\n  return (\n    <svg \n      className={className}\n      width=\"340\" \n      height=\"100\" \n      viewBox=\"0 0 340 100\" \n      fill=\"none\" \n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      {/* Circle with star */}\n      <circle cx=\"50\" cy=\"50\" r=\"45\" stroke=\"#D4AF37\" strokeWidth=\"4\" fill=\"transparent\" />\n      <path d=\"M50 10 L60 40 L90 50 L60 60 L50 90 L40 60 L10 50 L40 40 Z\" fill=\"#D4AF37\" />\n      \n      {/* Text: CHRIST */}\n      <path d=\"M115 30 Q127 30 133 36 Q139 42 139 53 Q139 64 133 70 Q127 76 115 76 L100 76 L100 30 L115 30 Z M115 68 Q123 68 127 64 Q131 60 131 53 Q131 46 127 42 Q123 38 115 38 L108 38 L108 68 L115 68 Z\" fill=\"#D4AF37\" />\n      <path d=\"M147 30 L178 30 L178 38 L155 38 L155 48 L173 48 L173 56 L155 56 L155 68 L178 68 L178 76 L147 76 L147 30 Z\" fill=\"#D4AF37\" />\n      <path d=\"M185 30 L193 30 L193 68 L213 68 L213 76 L185 76 L185 30 Z\" fill=\"#D4AF37\" />\n      <path d=\"M219 30 L227 30 L227 50 L243 30 L253 30 L234 52 L254 76 L244 76 L227 56 L227 76 L219 76 L219 30 Z\" fill=\"#D4AF37\" />\n      <path d=\"M258 30 L287 30 L287 38 L280 38 L280 76 L272 76 L272 38 L258 38 L258 30 Z\" fill=\"#D4AF37\" />\n      \n      {/* Text: COLLECTIVE */}\n      <path d=\"M115 84 Q126 84 132 89 Q138 94 138 104 Q138 114 132 119 Q126 124 115 124 Q104 124 98 119 Q92 114 92 104 Q92 94 98 89 Q104 84 115 84 Z M115 90 Q107 90 103 94 Q99 98 99 104 Q99 110 103 114 Q107 118 115 118 Q123 118 127 114 Q131 110 131 104 Q131 98 127 94 Q123 90 115 90 Z\" fill=\"#D4AF37\" />\n      <path d=\"M146 84 L159 84 Q167 84 171 87 Q175 90 175 96 Q175 100 173 103 Q171 106 167 107 L175 124 L167 124 L160 108 L153 108 L153 124 L146 124 L146 84 Z M158 102 Q163 102 166 100 Q169 98 169 94 Q169 90 166 88 Q163 86 158 86 L153 86 L153 102 L158 102 Z\" fill=\"#D4AF37\" />\n      <path d=\"M182 84 L189 84 L189 124 L182 124 L182 84 Z\" fill=\"#D4AF37\" />\n      <path d=\"M197 84 L204 84 L204 124 L197 124 L197 84 Z\" fill=\"#D4AF37\" />\n      <path d=\"M211 84 L218 84 L218 116 L235 116 L235 124 L211 124 L211 84 Z\" fill=\"#D4AF37\" />\n      <path d=\"M241 84 L263 84 L263 92 L248 92 L248 100 L260 100 L260 108 L248 108 L248 124 L241 124 L241 84 Z\" fill=\"#D4AF37\" />\n      <path d=\"M269 84 Q280 84 286 89 Q292 94 292 104 Q292 114 286 119 Q280 124 269 124 Q258 124 252 119 Q246 114 246 104 Q246 94 252 89 Q258 84 269 84 Z M269 90 Q261 90 257 94 Q253 98 253 104 Q253 110 257 114 Q261 118 269 118 Q277 118 281 114 Q285 110 285 104 Q285 98 281 94 Q277 90 269 90 Z\" fill=\"#D4AF37\" />\n      <path d=\"M298 84 L305 84 L305 116 L322 116 L322 124 L298 124 L298 84 Z\" fill=\"#D4AF37\" />\n    </svg>\n  );\n};","size_bytes":2704},"client/src/components/MinistryPostCard.tsx":{"content":"import { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calendar, MapPin, Clock, Church, RotateCcw, MousePointer, ExternalLink, Users, CheckCircle, Clock3, X } from \"lucide-react\";\nimport { MinistryPost } from \"@shared/schema\";\nimport { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface MinistryPostCardProps {\n  post: MinistryPost & {\n    ministry?: {\n      id: number;\n      name: string;\n      logo?: string;\n      denomination?: string;\n    };\n  };\n  disableClick?: boolean;\n  flatLayout?: boolean;\n}\n\nexport function MinistryPostCard({ post, disableClick = false, flatLayout = false }: MinistryPostCardProps) {\n  const [isFlipped, setIsFlipped] = useState(false);\n  const { user } = useAuth();\n  const isAuthenticated = !!user;\n  const queryClient = useQueryClient();\n\n  // RSVP functionality for event posts\n  const { data: userRsvp } = useQuery({\n    queryKey: [`/api/ministry-posts/${post.id}/rsvp`],\n    enabled: post.type === 'event_announcement' && isAuthenticated,\n  });\n\n  const { data: rsvpCounts } = useQuery({\n    queryKey: [`/api/ministry-posts/${post.id}/rsvps`],\n    enabled: post.type === 'event_announcement',\n  });\n\n  const rsvpMutation = useMutation({\n    mutationFn: async ({ status, notes }: { status: string; notes?: string }) => {\n      return apiRequest(`/api/ministry-posts/${post.id}/rsvp`, {\n        method: 'POST',\n        data: { status, notes }\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/ministry-posts/${post.id}/rsvp`] });\n      queryClient.invalidateQueries({ queryKey: [`/api/ministry-posts/${post.id}/rsvps`] });\n      queryClient.invalidateQueries({ queryKey: ['/api/ministry-posts'] });\n    }\n  });\n\n  const removeRsvpMutation = useMutation({\n    mutationFn: async () => {\n      return apiRequest(`/api/ministry-posts/${post.id}/rsvp`, {\n        method: 'DELETE'\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/ministry-posts/${post.id}/rsvp`] });\n      queryClient.invalidateQueries({ queryKey: [`/api/ministry-posts/${post.id}/rsvps`] });\n      queryClient.invalidateQueries({ queryKey: ['/api/ministry-posts'] });\n    }\n  });\n\n  const handleRsvp = (status: string) => {\n    if ((userRsvp as any)?.status === status) {\n      removeRsvpMutation.mutate();\n    } else {\n      rsvpMutation.mutate({ status });\n    }\n  };\n\n  const getRsvpIcon = (status: string) => {\n    switch (status) {\n      case 'going':\n        return <CheckCircle className=\"w-4 h-4\" />;\n      case 'maybe':\n        return <Clock3 className=\"w-4 h-4\" />;\n      case 'not_going':\n        return <X className=\"w-4 h-4\" />;\n      default:\n        return null;\n    }\n  };\n\n  const getRsvpColor = (status: string, isActive: boolean) => {\n    if (!isActive) return \"text-gray-400 border-gray-300\";\n    \n    switch (status) {\n      case 'going':\n        return \"text-green-600 border-green-600 bg-green-50\";\n      case 'maybe':\n        return \"text-yellow-600 border-yellow-600 bg-yellow-50\";\n      case 'not_going':\n        return \"text-red-600 border-red-600 bg-red-50\";\n      default:\n        return \"text-gray-600 border-gray-300\";\n    }\n  };\n\n  const getRsvpCount = (status: string) => {\n    return Array.isArray(rsvpCounts) ? rsvpCounts.find((r: any) => r.status === status)?.count || 0 : 0;\n  };\n  \n  const formatDate = (dateString: string | Date | null) => {\n    if (!dateString) return 'Unknown date';\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Check if this is an event post with media\n  const isEventWithMedia = post.type === 'event_announcement' && post.mediaUrls && post.mediaUrls.length > 0;\n\n  // For event posts with media, render interactive flip card (unless flat layout is requested)\n  if (isEventWithMedia && !flatLayout) {\n    return (\n      <div className=\"flip-card-container relative h-96 w-full perspective-1000\">\n        <div \n          className={`flip-card relative w-full h-full transition-transform duration-700 transform-style-preserve-3d cursor-pointer ${\n            isFlipped ? 'rotate-y-180' : ''\n          }`}\n          onMouseEnter={() => setIsFlipped(true)}\n          onMouseLeave={() => setIsFlipped(false)}\n          onClick={() => setIsFlipped(!isFlipped)}\n        >\n          {/* Front side - Image */}\n          <div className=\"flip-card-front absolute inset-0 w-full h-full backface-hidden\">\n            <Card className=\"h-full bg-black border-gray-700 backdrop-blur overflow-hidden\">\n              <div className=\"relative h-full\">\n                <img \n                  src={post.mediaUrls?.[0] || ''} \n                  alt=\"Event flyer\"\n                  className=\"w-full h-full object-cover\"\n                  onError={(e) => {\n                    console.log('Image failed to load:', post.mediaUrls?.[0]);\n                    e.currentTarget.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjMUYyOTM3Ii8+CjxwYXRoIGQ9Ik0yMDAgMTUwTDE2MCA5MUwyNDAgOTFMMjAwIDE1MFoiIGZpbGw9IiNENEFGMzciLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSIxODgiIHk9IjEzOCI+CjxwYXRoIGQ9Im0xNSAyLTEgMWg0djJIMHYtMmg0bC0xLTFoMTJabTIuNSA0aC0xMWwyIDExaDdsMi0xMVoiIGZpbGw9IiNENEFGMzciLz4KPHN2Zz4=';\n                  }}\n                  onLoad={() => console.log('Image loaded successfully:', post.mediaUrls?.[0])}\n                />\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-black/50\" />\n                \n                {/* Hover indicator */}\n                <div className=\"absolute top-4 right-4 bg-black/60 rounded-full p-2\">\n                  <MousePointer className=\"h-4 w-4 text-white\" />\n                </div>\n                \n                {/* Basic info overlay */}\n                <div className=\"absolute bottom-0 left-0 right-0 p-4\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <Avatar className=\"h-8 w-8\">\n                      <AvatarImage src={post.ministry?.logo} alt={post.ministry?.name} />\n                      <AvatarFallback className=\"bg-primary text-black\">\n                        <Church className=\"h-4 w-4\" />\n                      </AvatarFallback>\n                    </Avatar>\n                    <div className=\"flex flex-col\">\n                      <h3 className=\"font-semibold text-white text-sm\">\n                        {post.ministry?.name || 'Ministry'}\n                      </h3>\n                      <div className=\"flex gap-1 mt-1\">\n                        {post.ministry?.denomination && (\n                          <Badge variant=\"outline\" className=\"text-xs bg-blue-900/50 border-blue-400 text-blue-200\">\n                            {post.ministry.denomination}\n                          </Badge>\n                        )}\n                        <Badge variant=\"outline\" className=\"text-xs bg-green-900/50 border-green-400 text-green-200\">\n                          <Calendar className=\"h-3 w-3 mr-1\" />\n                          Event\n                        </Badge>\n                      </div>\n                    </div>\n                  </div>\n                  <h4 className=\"font-bold text-white text-lg mb-1\">\n                    {post.title?.replace('New Event: ', '') || 'Event'}\n                  </h4>\n                  <p className=\"text-xs text-gray-300 opacity-80\">\n                    Hover or click for details\n                  </p>\n                </div>\n              </div>\n            </Card>\n          </div>\n\n          {/* Back side - Details */}\n          <div className=\"flip-card-back absolute inset-0 w-full h-full backface-hidden rotate-y-180\">\n            <Card className=\"h-full bg-black border-gray-700 backdrop-blur flex flex-col\">\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-start space-x-3\">\n                  <Avatar className=\"h-10 w-10\">\n                    <AvatarImage src={post.ministry?.logo} alt={post.ministry?.name} />\n                    <AvatarFallback className=\"bg-primary text-black\">\n                      <Church className=\"h-4 w-4\" />\n                    </AvatarFallback>\n                  </Avatar>\n                  \n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center space-x-2\">\n                      <h3 className=\"font-semibold text-white text-sm truncate\">\n                        {post.ministry?.name || 'Ministry'}\n                      </h3>\n                      {post.ministry?.denomination && (\n                        <Badge variant=\"outline\" className=\"text-xs bg-blue-900/30 border-blue-600 text-blue-300\">\n                          {post.ministry.denomination}\n                        </Badge>\n                      )}\n                    </div>\n                    <div className=\"flex items-center text-xs text-gray-400 mt-1\">\n                      <Clock className=\"h-3 w-3 mr-1\" />\n                      <span>{formatDate(post.createdAt)}</span>\n                      <Badge variant=\"outline\" className=\"ml-2 text-xs bg-green-900/30 border-green-600 text-green-300\">\n                        <Calendar className=\"h-3 w-3 mr-1\" />\n                        Event\n                      </Badge>\n                    </div>\n                  </div>\n                  \n                  <div className=\"text-xs text-gray-400 flex items-center\">\n                    <RotateCcw className=\"h-3 w-3 mr-1\" />\n                    Flip\n                  </div>\n                </div>\n              </CardHeader>\n              \n              <CardContent className=\"pt-0 flex flex-col h-full p-4\">\n                <div className=\"flex-1 overflow-y-auto\">\n                  {post.title && (\n                    <h4 className=\"font-semibold text-white mb-3 text-base\">\n                      {post.title.replace('New Event: ', '')}\n                    </h4>\n                  )}\n                  \n                  <div className=\"text-gray-300 text-sm leading-relaxed line-clamp-6\">\n                    {post.content\n                      .replace(/📅\\s*Beach & Bonfire \\(Young Adults\\)/gi, '')\n                      .replace(/all are welcome/gi, '')\n                      .replace(/!/g, '')\n                      .trim()}\n                  </div>\n                </div>\n                \n                {/* RSVP and View Post Buttons */}\n                <div className=\"pt-3 border-t border-gray-600 mt-3\">\n                  <div className=\"flex space-x-2\">\n                    {/* View Post Button */}\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className={`${post.type === 'event_announcement' ? 'flex-1' : 'w-full'} bg-[#D4AF37] border-[#D4AF37] text-black hover:bg-[#B8941F] hover:text-black`}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        window.location.href = `/ministry-post/${post.id}`;\n                      }}\n                    >\n                      <ExternalLink className=\"w-4 h-4 mr-2\" />\n                      View Post\n                    </Button>\n\n                    {/* RSVP Button - Only for event posts */}\n                    {post.type === 'event_announcement' && (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className={`flex-1 ${(userRsvp as any)?.status ? getRsvpColor((userRsvp as any).status, true) : 'text-gray-400 border-gray-500 hover:border-green-500 hover:text-green-400'}`}\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          \n                          if (!isAuthenticated) {\n                            window.location.href = '/login';\n                            return;\n                          }\n                          \n                          // Cycle through RSVP states: null -> going -> maybe -> not_going -> null\n                          const currentStatus = (userRsvp as any)?.status;\n                          if (!currentStatus) {\n                            handleRsvp('going');\n                          } else if (currentStatus === 'going') {\n                            handleRsvp('maybe');\n                          } else if (currentStatus === 'maybe') {\n                            handleRsvp('not_going');\n                          } else {\n                            removeRsvpMutation.mutate();\n                          }\n                        }}\n                        disabled={rsvpMutation.isPending || removeRsvpMutation.isPending}\n                      >\n                        {(userRsvp as any)?.status ? getRsvpIcon((userRsvp as any).status) : <Users className=\"w-4 h-4\" />}\n                        <span className=\"ml-1 text-xs\">\n                          {(userRsvp as any)?.status ? \n                            ((userRsvp as any).status === 'going' ? 'Going' : \n                             (userRsvp as any).status === 'maybe' ? 'Maybe' : \"Can't Go\") \n                            : 'RSVP'}\n                        </span>\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Flat layout for event posts on individual post pages\n  if (isEventWithMedia && flatLayout) {\n    return (\n      <Card className=\"bg-black border-gray-700 backdrop-blur\">\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-start space-x-3\">\n            <Avatar className=\"h-10 w-10\">\n              <AvatarImage src={post.ministry?.logo} alt={post.ministry?.name} />\n              <AvatarFallback className=\"bg-primary text-black\">\n                <Church className=\"h-4 w-4\" />\n              </AvatarFallback>\n            </Avatar>\n            \n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center space-x-2\">\n                <h3 className=\"font-semibold text-white text-sm truncate\">\n                  {post.ministry?.name || 'Ministry'}\n                </h3>\n                {post.ministry?.denomination && (\n                  <Badge variant=\"outline\" className=\"text-xs bg-blue-900/30 border-blue-600 text-blue-300\">\n                    {post.ministry.denomination}\n                  </Badge>\n                )}\n              </div>\n              <div className=\"flex items-center text-xs text-gray-400 mt-1\">\n                <Clock className=\"h-3 w-3 mr-1\" />\n                <span>{formatDate(post.createdAt)}</span>\n                <Badge variant=\"outline\" className=\"ml-2 text-xs bg-green-900/30 border-green-600 text-green-300\">\n                  <Calendar className=\"h-3 w-3 mr-1\" />\n                  Event\n                </Badge>\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n        \n        <CardContent className=\"space-y-6\">\n          {/* Event Title */}\n          {post.title && (\n            <h4 className=\"font-semibold text-white text-base\">\n              {post.title.replace('New Event: ', '')}\n            </h4>\n          )}\n          \n          {/* Event Content */}\n          <div className=\"text-gray-300 leading-relaxed whitespace-pre-wrap\">\n            {post.content\n              .replace(/📅\\s*Beach & Bonfire \\(Young Adults\\)/gi, '')\n              .replace(/all are welcome/gi, '')\n              .replace(/!/g, '')\n              .trim()}\n          </div>\n          \n          {/* Event Image - Full Size */}\n          {post.mediaUrls && post.mediaUrls.length > 0 && (\n            <div className=\"w-full\">\n              <img \n                src={post.mediaUrls[0]} \n                alt=\"Event flyer\"\n                className=\"w-full h-auto object-contain rounded-lg\"\n                onError={(e) => {\n                  e.currentTarget.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjMUYyOTM3Ii8+CjxwYXRoIGQ9Ik0yMDAgMTUwTDE2MCA5MUwyNDAgOTFMMjAwIDE1MFoiIGZpbGw9IiNENEFGMzciLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSIxODgiIHk9IjEzOCI+CjxwYXRoIGQ9Im0xNSAyLTEgMWg0djJIMHYtMmg0bC0xLTFoMTJabTIuNSA0aC0xMWwyIDExaDdsMi0xMVoiIGZpbGw9IiNENEFGMzciLz4KPHN2Zz4=';\n                }}\n              />\n            </div>\n          )}\n          \n          {/* Additional Links */}\n          {post.links && Array.isArray(post.links) && post.links.length > 0 && (\n            <div className=\"space-y-2\">\n              <h4 className=\"font-semibold text-white\">Related Links:</h4>\n              {post.links.map((link: string, index: number) => (\n                  <a\n                    key={index}\n                    href={link}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-primary hover:text-primary/90 block break-all\"\n                  >\n                    {link}\n                  </a>\n                ))}\n            </div>\n          )}\n\n\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Regular ministry post layout for non-event posts or events without media\n  return (\n    <Card className=\"bg-black border-gray-700 backdrop-blur hover:bg-gray-900/70 transition-all duration-300\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-start space-x-3\">\n          <Avatar className=\"h-10 w-10\">\n            <AvatarImage src={post.ministry?.logo} alt={post.ministry?.name} />\n            <AvatarFallback className=\"bg-primary text-black text-sm font-bold\">\n              <Church className=\"h-4 w-4\" />\n            </AvatarFallback>\n          </Avatar>\n          \n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center space-x-2\">\n              <h3 className=\"font-semibold text-white text-sm truncate\">\n                {post.ministry?.name || 'Ministry'}\n              </h3>\n              {post.ministry?.denomination && (\n                <Badge variant=\"outline\" className=\"text-xs bg-blue-900/30 border-blue-600 text-blue-300\">\n                  {post.ministry.denomination}\n                </Badge>\n              )}\n            </div>\n            <div className=\"flex items-center text-xs text-gray-400 mt-1\">\n              <Clock className=\"h-3 w-3 mr-1\" />\n              <span>{formatDate(post.createdAt)}</span>\n              {post.type === 'event_announcement' && (\n                <Badge variant=\"outline\" className=\"ml-2 text-xs bg-green-900/30 border-green-600 text-green-300\">\n                  <Calendar className=\"h-3 w-3 mr-1\" />\n                  Event\n                </Badge>\n              )}\n            </div>\n          </div>\n        </div>\n      </CardHeader>\n      \n      <CardContent className=\"pt-0\">\n        {post.title && (\n          <h4 className=\"font-semibold text-white mb-2 text-sm\">{post.title}</h4>\n        )}\n        \n        <div className=\"text-gray-300 text-sm leading-relaxed whitespace-pre-wrap\">\n          {post.content\n            .replace(/📅\\s*Beach & Bonfire \\(Young Adults\\)/gi, '')\n            .replace(/all are welcome/gi, '')\n            .replace(/!/g, '')\n            .trim()}\n        </div>\n        \n        {post.mediaUrls && post.mediaUrls.length > 0 && (\n          <div className=\"mt-3\">\n            {post.mediaUrls.map((url, index) => (\n              <img\n                key={index}\n                src={url}\n                alt={`Ministry post media ${index + 1}`}\n                className=\"w-full rounded-lg object-cover max-h-64\"\n              />\n            ))}\n          </div>\n        )}\n        \n        {post.links && Array.isArray(post.links) && post.links.length > 0 && (\n          <div className=\"mt-3 space-y-1\">\n            {post.links.map((link: string, index: number) => (\n                <a\n                  key={index}\n                  href={link}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"text-primary hover:text-primary/90 text-sm break-all\"\n                >\n                  {link}\n                </a>\n              ))}\n          </div>\n        )}\n        \n        {/* RSVP and View Post Buttons */}\n        <div className=\"mt-4 pt-3 border-t border-gray-700\">\n          <div className=\"flex space-x-2\">\n            {/* View Post Button */}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className={`${post.type === 'event_announcement' ? 'flex-1' : 'w-full'} bg-[#D4AF37] border-[#D4AF37] text-black hover:bg-[#B8941F] hover:text-black`}\n              onClick={() => window.location.href = `/ministry-post/${post.id}`}\n            >\n              <ExternalLink className=\"w-4 h-4 mr-2\" />\n              View Post\n            </Button>\n\n            {/* RSVP Button - Only for event posts */}\n            {post.type === 'event_announcement' && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className={`flex-1 ${(userRsvp as any)?.status ? getRsvpColor((userRsvp as any).status, true) : 'text-gray-400 border-gray-500 hover:border-green-500 hover:text-green-400'}`}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  \n                  if (!isAuthenticated) {\n                    window.location.href = '/login';\n                    return;\n                  }\n                  \n                  // Cycle through RSVP states: null -> going -> maybe -> not_going -> null\n                  const currentStatus = (userRsvp as any)?.status;\n                  if (!currentStatus) {\n                    handleRsvp('going');\n                  } else if (currentStatus === 'going') {\n                    handleRsvp('maybe');\n                  } else if (currentStatus === 'maybe') {\n                    handleRsvp('not_going');\n                  } else {\n                    removeRsvpMutation.mutate();\n                  }\n                }}\n                disabled={rsvpMutation.isPending || removeRsvpMutation.isPending}\n              >\n                {(userRsvp as any)?.status ? getRsvpIcon((userRsvp as any).status) : <Users className=\"w-4 h-4\" />}\n                <span className=\"ml-1 text-xs\">\n                  {(userRsvp as any)?.status ? \n                    ((userRsvp as any).status === 'going' ? 'Going' : \n                     (userRsvp as any).status === 'maybe' ? 'Maybe' : \"Can't Go\") \n                    : 'RSVP'}\n                </span>\n              </Button>\n            )}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":23461},"client/src/components/NotificationsList.tsx":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Bell, Heart, MessageCircle, UserPlus, Calendar, Gift, Church, Trash2, Check, CheckCheck } from \"lucide-react\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface Notification {\n  id: number;\n  type: string;\n  title: string;\n  message: string;\n  relatedId?: string;\n  relatedType?: string;\n  isRead: boolean;\n  createdAt: string;\n  actorName?: string;\n  actorImage?: string;\n}\n\nexport function NotificationsList() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [selectedNotifications, setSelectedNotifications] = useState<number[]>([]);\n\n  const { data: notifications = [], isLoading } = useQuery<Notification[]>({\n    queryKey: [\"/api/notifications\"],\n  });\n\n  const { data: unreadCount = { count: 0 } } = useQuery<{ count: number }>({\n    queryKey: [\"/api/notifications/unread-count\"],\n  });\n\n  const markAsReadMutation = useMutation({\n    mutationFn: async (id: number) => {\n      await apiRequest(`/api/notifications/${id}/read`, {\n        method: 'PATCH',\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications/unread-count\"] });\n    },\n  });\n\n  const markAllAsReadMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest('/api/notifications/mark-all-read', {\n        method: 'PATCH',\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications/unread-count\"] });\n      toast({\n        title: \"Success\",\n        description: \"All notifications marked as read\",\n      });\n    },\n  });\n\n  const deleteNotificationMutation = useMutation({\n    mutationFn: async (id: number) => {\n      await apiRequest(`/api/notifications/${id}`, {\n        method: 'DELETE',\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications/unread-count\"] });\n      toast({\n        title: \"Success\",\n        description: \"Notification deleted\",\n      });\n    },\n  });\n\n  const createTestNotificationsMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest('/api/notifications/test-all', {\n        method: 'POST',\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications/unread-count\"] });\n      toast({\n        title: \"Success\",\n        description: \"Test notifications created! Check your notifications.\",\n      });\n    },\n  });\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'like':\n        return <Heart className=\"h-5 w-5 text-red-500\" />;\n      case 'comment':\n        return <MessageCircle className=\"h-5 w-5 text-blue-500\" />;\n      case 'follow':\n        return <UserPlus className=\"h-5 w-5 text-green-500\" />;\n      case 'rsvp':\n        return <Calendar className=\"h-5 w-5 text-purple-500\" />;\n      case 'campaign_update':\n        return <Gift className=\"h-5 w-5 text-orange-500\" />;\n      case 'ministry_post':\n        return <Church className=\"h-5 w-5 text-[#D4AF37]\" />;\n      case 'post':\n        return <Bell className=\"h-5 w-5 text-gray-400\" />;\n      case 'chat_message':\n        return <MessageCircle className=\"h-5 w-5 text-cyan-400\" />;\n      default:\n        return <Bell className=\"h-5 w-5 text-gray-400\" />;\n    }\n  };\n\n  const handleMarkAsRead = (id: number) => {\n    markAsReadMutation.mutate(id);\n  };\n\n  const handleDelete = (id: number) => {\n    deleteNotificationMutation.mutate(id);\n  };\n\n  const toggleNotificationSelection = (id: number) => {\n    setSelectedNotifications(prev => \n      prev.includes(id) \n        ? prev.filter(notifId => notifId !== id)\n        : [...prev, id]\n    );\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-4\">\n        {[1, 2, 3].map((i) => (\n          <Card key={i} className=\"bg-gray-800 border-gray-700 animate-pulse\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 bg-gray-700 rounded-full\"></div>\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"h-4 bg-gray-700 rounded w-3/4\"></div>\n                  <div className=\"h-3 bg-gray-700 rounded w-1/2\"></div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Actions header */}\n      <div className=\"flex justify-between items-center\">\n        <Button\n          onClick={() => createTestNotificationsMutation.mutate()}\n          disabled={createTestNotificationsMutation.isPending}\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"text-blue-400 border-blue-600 hover:bg-blue-700/20\"\n        >\n          <Bell className=\"h-4 w-4 mr-2\" />\n          Test Notifications\n        </Button>\n        \n        {notifications.length > 0 && (\n          <Button\n            onClick={() => markAllAsReadMutation.mutate()}\n            disabled={markAllAsReadMutation.isPending}\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"text-gray-300 border-gray-600 hover:bg-gray-700\"\n          >\n            <CheckCheck className=\"h-4 w-4 mr-2\" />\n            Mark All Read\n          </Button>\n        )}\n      </div>\n\n      {/* Notifications list */}\n      {notifications.length === 0 ? (\n        <Card className=\"bg-gray-800 border-gray-700\">\n          <CardContent className=\"p-8 text-center\">\n            <Bell className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-gray-300 mb-2\">No notifications yet</h3>\n            <p className=\"text-gray-400\">\n              You'll see likes, comments, follows, and updates here when they happen.\n            </p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-3\">\n          {notifications.map((notification: Notification) => (\n            <Card \n              key={notification.id} \n              className={`border transition-all duration-200 hover:shadow-lg ${\n                !notification.isRead \n                  ? 'bg-gray-800 border-[#D4AF37] shadow-sm' \n                  : 'bg-gray-800/50 border-gray-700'\n              }`}\n            >\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-start space-x-3\">\n                  {/* Notification icon */}\n                  <div className=\"flex-shrink-0 mt-1\">\n                    {getNotificationIcon(notification.type)}\n                  </div>\n\n                  {/* Actor image */}\n                  {notification.actorImage && (\n                    <div className=\"flex-shrink-0\">\n                      <img\n                        src={notification.actorImage}\n                        alt={notification.actorName || 'User'}\n                        className=\"w-8 h-8 rounded-full object-cover\"\n                      />\n                    </div>\n                  )}\n\n                  {/* Notification content */}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <h4 className={`text-sm font-medium ${\n                          !notification.isRead ? 'text-white' : 'text-gray-300'\n                        }`}>\n                          {notification.title}\n                        </h4>\n                        <p className={`text-sm mt-1 ${\n                          !notification.isRead ? 'text-gray-300' : 'text-gray-400'\n                        }`}>\n                          {notification.message}\n                        </p>\n                        <p className=\"text-xs text-gray-500 mt-2\">\n                          {formatDistanceToNow(new Date(notification.createdAt), { addSuffix: true })}\n                        </p>\n                      </div>\n\n                      {/* Action buttons */}\n                      <div className=\"flex items-center space-x-2 ml-4\">\n                        {!notification.isRead && (\n                          <Button\n                            onClick={() => handleMarkAsRead(notification.id)}\n                            disabled={markAsReadMutation.isPending}\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            className=\"text-gray-400 hover:text-white p-1\"\n                          >\n                            <Check className=\"h-4 w-4\" />\n                          </Button>\n                        )}\n                        <Button\n                          onClick={() => handleDelete(notification.id)}\n                          disabled={deleteNotificationMutation.isPending}\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className=\"text-gray-400 hover:text-red-400 p-1\"\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":9790},"client/src/components/PlatformPostCard.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient, useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Heart, MessageCircle, Share2, Send, MoreHorizontal, Calendar, Trash2 } from \"lucide-react\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { Link } from \"wouter\";\n// import { formatDistanceToNow } from \"date-fns\";\n\ninterface PlatformPostProps {\n  post: {\n    id: number;\n    userId: string;\n    authorType: string;\n    authorId?: number;\n    title?: string;\n    content: string;\n    mediaUrls?: string[];\n    aspectRatio: string;\n    mediaType: string;\n    tags?: string[];\n    isPublished: boolean;\n    likesCount: number;\n    commentsCount: number;\n    sharesCount: number;\n    createdAt: string;\n    updatedAt: string;\n  };\n  currentUserId?: string;\n  showActions?: boolean;\n  expandComments?: boolean;\n  disablePostClick?: boolean;\n}\n\nexport function PlatformPostCard({ post, currentUserId, showActions = true, expandComments = false, disablePostClick = false }: PlatformPostProps) {\n  const [showComments, setShowComments] = useState(expandComments);\n  const [newComment, setNewComment] = useState(\"\");\n  const [isLiked, setIsLiked] = useState(false);\n  const [likesCount, setLikesCount] = useState(post.likesCount || 0);\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Fetch user data for the post author\n  const { data: postAuthor } = useQuery({\n    queryKey: [\"/api/users/by-id\", post.userId],\n    queryFn: async () => {\n      const response = await fetch(`/api/users/by-id?userId=${encodeURIComponent(post.userId)}`);\n      if (!response.ok) {\n        throw new Error('User not found');\n      }\n      return response.json();\n    },\n    enabled: !!post.userId,\n  });\n\n  // Fetch ministry data - try for all posts since platform posts might include ministry content\n  const { data: ministryData } = useQuery({\n    queryKey: [\"/api/ministry-posts\", post.id],\n    queryFn: async () => {\n      const response = await fetch(`/api/ministry-posts/${post.id}`);\n      if (!response.ok) {\n        return null; // Not a ministry post\n      }\n      return response.json();\n    },\n    enabled: !!post.id, // Enable for all posts to check if they're ministry posts\n  });\n\n  // Fetch comments for the post\n  const { data: comments = [] } = useQuery<any[]>({\n    queryKey: [`/api/platform-posts/${post.id}/comments`],\n    enabled: showComments || expandComments,\n  });\n\n  const likeMutation = useMutation({\n    mutationFn: async () => {\n      return await apiRequest(`/api/platform-posts/${post.id}/like`, {\n        method: \"POST\",\n      });\n    },\n    onSuccess: (data: any) => {\n      setIsLiked(data.liked);\n      setLikesCount(data.likesCount);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const commentMutation = useMutation({\n    mutationFn: async (content: string) => {\n      return await apiRequest(`/api/platform-posts/${post.id}/comment`, {\n        method: \"POST\",\n        data: { content },\n      });\n    },\n    onSuccess: () => {\n      setNewComment(\"\");\n      toast({ title: \"Comment added successfully!\" });\n      queryClient.invalidateQueries({ queryKey: [`/api/platform-posts/${post.id}/comments`] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error adding comment\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deletePostMutation = useMutation({\n    mutationFn: async () => {\n      return await apiRequest(`/api/platform-posts/${post.id}`, {\n        method: 'DELETE',\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/platform-posts\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/feed/following\"] });\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${post.userId}/posts`] });\n      toast({\n        title: \"Post deleted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error deleting post\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteCommentMutation = useMutation({\n    mutationFn: async (commentId: number) => {\n      return await apiRequest(`/api/comments/${commentId}`, {\n        method: 'DELETE',\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/platform-posts/${post.id}/comments`] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/platform-posts\"] });\n      toast({\n        title: \"Comment deleted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error deleting comment\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleLike = () => {\n    if (!currentUserId) {\n      toast({\n        title: \"Login required\",\n        description: \"Please log in to like posts\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    likeMutation.mutate();\n  };\n\n  const handleComment = () => {\n    if (!currentUserId) {\n      toast({\n        title: \"Login required\",\n        description: \"Please log in to comment\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    if (!newComment.trim()) {\n      toast({\n        title: \"Comment required\",\n        description: \"Please enter a comment\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    commentMutation.mutate(newComment.trim());\n  };\n\n  const handleDeletePost = () => {\n    if (!currentUserId) {\n      toast({\n        title: \"Login required\",\n        description: \"Please log in to delete posts\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (post.userId !== currentUserId) {\n      toast({\n        title: \"Not authorized\",\n        description: \"You can only delete your own posts\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (confirm(\"Are you sure you want to delete this post? This action cannot be undone.\")) {\n      deletePostMutation.mutate();\n    }\n  };\n\n  const handleDeleteComment = (commentId: number) => {\n    if (confirm(\"Are you sure you want to delete this comment? This action cannot be undone.\")) {\n      deleteCommentMutation.mutate(commentId);\n    }\n  };\n\n\n\n  const getAuthorDisplayName = () => {\n    switch (post.authorType) {\n      case \"creator\":\n        return \"Creator Profile\";\n      case \"business\":\n        return \"Business Profile\";\n      case \"ministry\":\n        return \"Ministry Profile\";\n      default:\n        return \"Personal Account\";\n    }\n  };\n\n  // Helper functions for user profile information\n  const getUserProfileImage = () => {\n    const imageUrl = postAuthor?.profileImageUrl || \"\";\n    console.log(\"Profile image URL:\", imageUrl, \"for user:\", postAuthor?.username);\n    return imageUrl;\n  };\n\n  const getUserInitials = () => {\n    if (postAuthor?.firstName && postAuthor?.lastName) {\n      return `${postAuthor.firstName.charAt(0)}${postAuthor.lastName.charAt(0)}`.toUpperCase();\n    }\n    if (postAuthor?.username) {\n      return postAuthor.username.charAt(0).toUpperCase();\n    }\n    if (post.authorType) {\n      return post.authorType.charAt(0).toUpperCase();\n    }\n    return \"U\"; // Default fallback\n  };\n\n  const getUserDisplayName = () => {\n    if (postAuthor?.firstName && postAuthor?.lastName) {\n      return `${postAuthor.firstName} ${postAuthor.lastName}`;\n    }\n    if (postAuthor?.username) {\n      return postAuthor.username;\n    }\n    return getAuthorDisplayName();\n  };\n\n  const getUserUsername = () => {\n    return postAuthor?.username || post.userId || \"username\";\n  };\n\n  const handlePostClick = (e: React.MouseEvent) => {\n    // Don't navigate if disabled or clicking on interactive elements\n    if (disablePostClick || (e.target as HTMLElement).closest('button, input, textarea, a')) {\n      return;\n    }\n    window.location.href = `/post/${post.id}`;\n  };\n\n  return (\n    <Card \n      className={`bg-black border-gray-800 w-full transition-colors ${\n        disablePostClick ? '' : 'cursor-pointer hover:bg-gray-900/20'\n      }`}\n      onClick={handlePostClick}\n    >\n      <CardContent className=\"p-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-3\">\n          <div className=\"flex items-center gap-3\">\n            <Avatar className=\"w-10 h-10\">\n              <AvatarImage src={getUserProfileImage()} alt=\"Profile\" />\n              <AvatarFallback className=\"bg-[#D4AF37] text-black\">\n                {getUserInitials()}\n              </AvatarFallback>\n            </Avatar>\n            <div>\n              <p className=\"font-medium text-white text-sm\">{getUserDisplayName()}</p>\n              <p className=\"text-xs text-gray-400\">@{getUserUsername()}</p>\n            </div>\n          </div>\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button \n                variant=\"ghost\" \n                size=\"sm\" \n                className=\"text-gray-400 hover:text-white z-10 relative\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <MoreHorizontal className=\"w-4 h-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"bg-gray-800 border-gray-700\">\n              {currentUserId && post.userId === currentUserId && (\n                <DropdownMenuItem \n                  className=\"text-red-400 hover:text-red-300 hover:bg-red-900/20\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDeletePost();\n                  }}\n                  disabled={deletePostMutation.isPending}\n                >\n                  <Trash2 className=\"w-4 h-4 mr-2\" />\n                  Delete Post\n                </DropdownMenuItem>\n              )}\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n        \n        {/* Title */}\n        {post.title && (\n          <h3 className=\"font-semibold text-white text-base mb-2\">{post.title}</h3>\n        )}\n\n        {/* Content Text */}\n        <p className=\"text-white text-sm leading-relaxed mb-3\">{post.content}</p>\n\n        {/* Media Content - Dynamic aspect ratio like Twitter */}\n        {post.mediaUrls && post.mediaUrls.length > 0 && post.mediaType !== \"text\" && (\n          <div className=\"w-full mb-3\">\n            {post.mediaType === \"video\" ? (\n              <video\n                controls\n                className=\"w-full rounded-lg bg-gray-900\"\n                style={{ maxHeight: '500px' }}\n                poster={post.mediaUrls[0]}\n              >\n                <source src={post.mediaUrls[0]} type=\"video/mp4\" />\n                Your browser does not support the video tag.\n              </video>\n            ) : (\n              <img\n                src={post.mediaUrls[0]}\n                alt={post.title || \"Post media\"}\n                className=\"w-full rounded-lg bg-gray-900\"\n                style={{ maxHeight: '500px', objectFit: 'cover' }}\n                onError={(e) => {\n                  const target = e.target as HTMLImageElement;\n                  target.style.display = \"none\";\n                }}\n              />\n            )}\n          </div>\n        )}\n\n        {/* Tags */}\n        {post.tags && post.tags.length > 0 && (\n          <div className=\"flex flex-wrap gap-1 mb-3\">\n            {post.tags.map((tag, index) => (\n              <Badge\n                key={index}\n                variant=\"secondary\"\n                className=\"bg-gray-800 text-gray-300 text-xs px-2 py-1\"\n              >\n                #{tag}\n              </Badge>\n            ))}\n          </div>\n        )}\n\n        {/* Action Buttons */}\n        {showActions && (\n          <div className=\"flex items-center justify-between pt-2 border-t border-gray-700\">\n            <div className=\"flex items-center gap-4\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleLike();\n                }}\n                disabled={likeMutation.isPending}\n                className={`flex items-center gap-2 ${\n                  isLiked ? \"text-red-500\" : \"text-gray-400 hover:text-red-500\"\n                }`}\n              >\n                <Heart className={`w-4 h-4 ${isLiked ? \"fill-current\" : \"\"}`} />\n                <span className=\"text-xs\">{likesCount}</span>\n              </Button>\n\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setShowComments(!showComments);\n                }}\n                className=\"flex items-center gap-2 text-gray-400 hover:text-white\"\n              >\n                <MessageCircle className=\"w-4 h-4\" />\n                <span className=\"text-xs\">{post.commentsCount}</span>\n              </Button>\n\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={(e) => e.stopPropagation()}\n                className=\"flex items-center gap-2 text-gray-400 hover:text-white\"\n              >\n                <Share2 className=\"w-4 h-4\" />\n                <span className=\"text-xs\">{post.sharesCount}</span>\n              </Button>\n            </div>\n            \n            {/* Date moved to bottom right */}\n            <div className=\"text-xs text-gray-500\">\n              {new Date(post.createdAt).toLocaleDateString()}\n            </div>\n          </div>\n        )}\n\n        {/* Comments Section */}\n        {(showComments || expandComments) && (\n          <div className=\"space-y-3 pt-3\">\n            {/* Existing Comments */}\n            {Array.isArray(comments) && comments.length > 0 && (\n              <div className=\"space-y-3 mb-4\">\n                {comments.map((comment: any) => (\n                  <div \n                    key={comment.id} \n                    className=\"flex gap-2 items-start group hover:bg-gray-800/30 rounded-md p-1 -m-1 transition-colors\"\n                  >\n                    <Avatar className=\"w-6 h-6\">\n                      <AvatarImage src={comment.user?.profileImageUrl} alt={comment.user?.firstName} />\n                      <AvatarFallback className=\"bg-gray-700 text-gray-300 text-xs\">\n                        {comment.user?.firstName?.[0] || comment.user?.username?.[0] || \"U\"}\n                      </AvatarFallback>\n                    </Avatar>\n                    <div className=\"flex-1\">\n                      <div className=\"text-sm\">\n                        <span className=\"font-semibold text-white\">\n                          {comment.user?.firstName || comment.user?.username || \"User\"}\n                        </span>\n                        <span className=\"text-gray-300 ml-2\">{comment.content}</span>\n                      </div>\n                    </div>\n                    {currentUserId && comment.userId === currentUserId && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        className=\"opacity-0 group-hover:opacity-100 transition-opacity text-red-400 hover:text-red-300 hover:bg-red-900/20 h-6 w-6 p-0\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleDeleteComment(comment.id);\n                        }}\n                        disabled={deleteCommentMutation.isPending}\n                      >\n                        <Trash2 className=\"w-3 h-3\" />\n                      </Button>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n            \n            {/* Add Comment Form */}\n            {currentUserId && (\n              <div className=\"flex gap-2 items-center\">\n                <Textarea\n                  value={newComment}\n                  onChange={(e) => setNewComment(e.target.value)}\n                  placeholder=\"Add a comment...\"\n                  rows={1}\n                  className=\"bg-gray-800 border-gray-600 text-white placeholder-gray-400 text-sm resize-none h-8 min-h-[32px] max-h-[32px] py-1\"\n                />\n                <Button\n                  onClick={handleComment}\n                  disabled={commentMutation.isPending || !newComment.trim()}\n                  className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F] h-8 w-8 p-0 flex items-center justify-center\"\n                >\n                  <Send className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":17169},"client/src/components/ThemeToggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { useTheme } from \"next-themes\";\nimport { Button } from \"@/components/ui/button\";\nimport { useEffect, useState } from \"react\";\n\nexport function ThemeToggle() {\n  const { theme, setTheme } = useTheme();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return (\n      <Button variant=\"outline\" size=\"sm\" disabled>\n        <Sun className=\"h-4 w-4\" />\n      </Button>\n    );\n  }\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"sm\"\n      onClick={() => setTheme(theme === \"light\" ? \"dark\" : \"light\")}\n      className=\"w-9 h-9\"\n    >\n      {theme === \"light\" ? (\n        <Moon className=\"h-4 w-4\" />\n      ) : (\n        <Sun className=\"h-4 w-4\" />\n      )}\n      <span className=\"sr-only\">Toggle theme</span>\n    </Button>\n  );\n}\n\nexport function ThemeToggleWithLabel() {\n  const { theme, setTheme } = useTheme();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return (\n      <div className=\"flex items-center justify-between\">\n        <div className=\"space-y-0.5\">\n          <div className=\"text-sm font-medium\">Theme</div>\n          <div className=\"text-xs text-muted-foreground\">\n            Choose your preferred theme\n          </div>\n        </div>\n        <Button variant=\"outline\" size=\"sm\" disabled>\n          <Sun className=\"h-4 w-4 mr-2\" />\n          Loading...\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex items-center justify-between\">\n      <div className=\"space-y-0.5\">\n        <div className=\"text-sm font-medium\">Theme</div>\n        <div className=\"text-xs text-muted-foreground\">\n          Choose your preferred theme\n        </div>\n      </div>\n      <Button\n        variant=\"outline\"\n        size=\"sm\"\n        onClick={() => setTheme(theme === \"light\" ? \"dark\" : \"light\")}\n        className=\"min-w-24\"\n      >\n        {theme === \"light\" ? (\n          <>\n            <Moon className=\"h-4 w-4 mr-2\" />\n            Dark\n          </>\n        ) : (\n          <>\n            <Sun className=\"h-4 w-4 mr-2\" />\n            Light\n          </>\n        )}\n      </Button>\n    </div>\n  );\n}","size_bytes":2242},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useAuth.tsx":{"content":"import React, { createContext, ReactNode, useContext } from \"react\";\nimport {\n  useQuery,\n  useMutation,\n  UseMutationResult,\n} from \"@tanstack/react-query\";\nimport { apiRequest, getQueryFn, queryClient } from \"../lib/queryClient\";\nimport { useToast } from \"./use-toast\";\n\nimport { User } from \"@shared/schema\";\n\ntype AuthContextType = {\n  user: User | null;\n  isLoading: boolean;\n  error: Error | null;\n  loginMutation: UseMutationResult<User, Error, LoginData>;\n  logoutMutation: UseMutationResult<void, Error, void>;\n  registerMutation: UseMutationResult<User, Error, RegisterData>;\n};\n\ntype LoginData = {\n  usernameOrEmail: string;\n  password: string;\n};\n\ntype RegisterData = {\n  username: string;\n  email?: string;\n  password: string;\n  firstName?: string;\n  lastName?: string;\n};\n\nexport const AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const { toast } = useToast();\n  const {\n    data: user,\n    error,\n    isLoading,\n    refetch,\n  } = useQuery<User | undefined, Error>({\n    queryKey: [\"/api/user\"],\n    queryFn: getQueryFn({ on401: \"returnNull\" }),\n    retry: false,\n    staleTime: 5 * 60 * 1000, // Cache for 5 minutes\n    gcTime: 10 * 60 * 1000, // Garbage collect after 10 minutes\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: LoginData) => {\n      const res = await apiRequest(\"/api/login\", {\n        method: \"POST\",\n        data: credentials,\n      });\n      \n      // Check if login failed\n      if (!res.ok) {\n        const errorData = await res.json().catch(() => ({ message: \"Login failed\" }));\n        throw new Error(errorData.message || \"Incorrect password\");\n      }\n      \n      return await res.json();\n    },\n    onSuccess: (user: User) => {\n      queryClient.setQueryData([\"/api/user\"], user);\n      refetch(); // Ensure fresh user data\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Login failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (credentials: RegisterData) => {\n      const response = await fetch(\"/api/register\", {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(credentials),\n      });\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(errorText || `Registration failed: ${response.status}`);\n      }\n      \n      return await response.json();\n    },\n    onSuccess: (user: User) => {\n      queryClient.setQueryData([\"/api/user\"], user);\n      queryClient.invalidateQueries({ queryKey: [\"/api/user\"] });\n      setTimeout(() => {\n        refetch();\n      }, 100);\n      toast({\n        title: \"Account created!\",\n        description: \"Welcome to Christ Collective.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Registration failed\",\n        description: \"Please try again with different details.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"POST\", \"/api/logout\");\n    },\n    onSuccess: () => {\n      // Clear all cached data\n      queryClient.clear();\n      queryClient.setQueryData([\"/api/user\"], null);\n      toast({\n        title: \"Signed out\",\n        description: \"You have been successfully signed out.\",\n      });\n      // Redirect to home page after logout\n      setTimeout(() => {\n        window.location.href = \"/\";\n      }, 500);\n    },\n    onError: (error: Error) => {\n      // Even if logout fails on server, clear local data\n      queryClient.clear();\n      queryClient.setQueryData([\"/api/user\"], null);\n      toast({\n        title: \"Signed out\",\n        description: \"You have been signed out.\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/\";\n      }, 500);\n    },\n  });\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user: user ?? null,\n        isLoading,\n        error,\n        loginMutation,\n        logoutMutation,\n        registerMutation,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}","size_bytes":4457},"client/src/hooks/useCreatorStatus.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"./useAuth\";\n\nexport interface CreatorStatus {\n  isCreator: boolean;\n  creatorProfile?: {\n    id: number;\n    name: string;\n    content: string;\n    audience?: string;\n    bio?: string;\n    isSponsored: boolean;\n    platforms: any[];\n    profileImage?: string;\n  };\n}\n\nexport function useCreatorStatus() {\n  const { user } = useAuth();\n\n  return useQuery<CreatorStatus>({\n    queryKey: ['/api/user/creator-status'],\n    queryFn: async () => {\n      if (!user) {\n        return { isCreator: false };\n      }\n      \n      const response = await fetch('/api/user/creator-status');\n      if (!response.ok) {\n        if (response.status === 404) {\n          return { isCreator: false };\n        }\n        throw new Error('Failed to fetch creator status');\n      }\n      return response.json();\n    },\n    enabled: !!user,\n  });\n}","size_bytes":898},"client/src/hooks/useSimpleAuth.tsx":{"content":"import { createContext, ReactNode, useContext, useEffect, useState } from \"react\";\nimport { User } from \"@shared/schema\";\n\ntype SimpleAuthContextType = {\n  user: User | null;\n  isLoading: boolean;\n  login: (credentials: { usernameOrEmail: string; password: string }) => Promise<boolean>;\n  logout: () => Promise<void>;\n  checkAuth: () => Promise<void>;\n};\n\nexport const SimpleAuthContext = createContext<SimpleAuthContextType | null>(null);\n\nexport function SimpleAuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const checkAuth = async () => {\n    try {\n      const response = await fetch(\"/api/user\", {\n        method: \"GET\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      \n      if (response.ok) {\n        const userData = await response.json();\n        setUser(userData);\n      } else {\n        setUser(null);\n      }\n    } catch (error) {\n      console.error(\"Auth check failed:\", error);\n      setUser(null);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const login = async (credentials: { usernameOrEmail: string; password: string }): Promise<boolean> => {\n    try {\n      const response = await fetch(\"/api/login\", {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(credentials),\n      });\n      \n      if (response.ok) {\n        const userData = await response.json();\n        setUser(userData);\n        return true;\n      } else {\n        setUser(null);\n        return false;\n      }\n    } catch (error) {\n      console.error(\"Login failed:\", error);\n      setUser(null);\n      return false;\n    }\n  };\n\n  const logout = async () => {\n    try {\n      await fetch(\"/api/logout\", {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n    } catch (error) {\n      console.error(\"Logout failed:\", error);\n    } finally {\n      setUser(null);\n      // Force page reload to clear all state\n      window.location.href = \"/\";\n    }\n  };\n\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  return (\n    <SimpleAuthContext.Provider\n      value={{\n        user,\n        isLoading,\n        login,\n        logout,\n        checkAuth,\n      }}\n    >\n      {children}\n    </SimpleAuthContext.Provider>\n  );\n}\n\nexport function useSimpleAuth() {\n  const context = useContext(SimpleAuthContext);\n  if (!context) {\n    throw new Error(\"useSimpleAuth must be used within a SimpleAuthProvider\");\n  }\n  return context;\n}","size_bytes":2711},"client/src/lib/auth-utils.ts":{"content":"// Authentication utility functions\nexport async function checkAuthStatus(): Promise<boolean> {\n  try {\n    const response = await fetch(\"/api/user\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    \n    return response.ok && response.status === 200;\n  } catch (error) {\n    console.error(\"Auth check failed:\", error);\n    return false;\n  }\n}\n\nexport async function loginUser(credentials: { usernameOrEmail: string; password: string }) {\n  try {\n    const response = await fetch(\"/api/login\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(credentials),\n    });\n    \n    if (!response.ok) {\n      throw new Error(`Login failed: ${response.status}`);\n    }\n    \n    return await response.json();\n  } catch (error) {\n    console.error(\"Login failed:\", error);\n    throw error;\n  }\n}\n\nexport async function logoutUser() {\n  try {\n    const response = await fetch(\"/api/logout\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    \n    if (!response.ok) {\n      console.warn(`Logout request failed: ${response.status}`);\n    }\n    \n    // Clear any local storage or session data\n    if (typeof window !== 'undefined') {\n      window.location.reload();\n    }\n  } catch (error) {\n    console.error(\"Logout failed:\", error);\n    // Force reload anyway to clear state\n    if (typeof window !== 'undefined') {\n      window.location.reload();\n    }\n  }\n}","size_bytes":1618},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}","size_bytes":115},"client/src/lib/disableErrorOverlay.ts":{"content":"// This utility will disable the runtime error overlay\nexport function disableRuntimeErrorOverlay() {\n  // Check if we're in the browser\n  if (typeof window !== 'undefined') {\n    // Set the server.hmr.overlay to false in Vite config\n    // This is a client-side workaround since we can't modify vite.config.ts directly\n    try {\n      window.addEventListener('error', (event) => {\n        // Prevent error overlay from appearing for specific errors related to fetch\n        if (event.error && event.error.message && event.error.message.includes('Failed to fetch')) {\n          event.preventDefault();\n          console.warn('Fetch error suppressed:', event.error.message);\n          return true;\n        }\n      });\n\n      // Also handle unhandled promise rejections\n      window.addEventListener('unhandledrejection', (event) => {\n        if (event.reason && (\n          (typeof event.reason.message === 'string' && event.reason.message.includes('Failed to fetch')) ||\n          event.reason.type === 'unhandledrejection'\n        )) {\n          event.preventDefault();\n          console.warn('Promise rejection suppressed:', event.reason);\n          return true;\n        }\n      });\n      \n      // Try to access and modify Vite HMR config\n      if (window.__vite_plugin_runtime_error_overlay) {\n        // @ts-ignore - Disable the error overlay by nullifying its methods\n        window.__vite_plugin_runtime_error_overlay = {\n          onError: () => {},\n          clearRuntimeErrors: () => {}\n        };\n      }\n      \n      console.log('Error overlay has been disabled');\n    } catch (error) {\n      console.error('Failed to disable error overlay:', error);\n    }\n  }\n}","size_bytes":1674},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\n// Global flag to prevent error messages during initial load\nlet isInitialLoad = true;\nsetTimeout(() => { isInitialLoad = false; }, 3000); // After 3 seconds, consider initial load complete\n\n// Safely check if the app is trying to make requests while not authenticated\nconst isAuthRelatedRequest = (url: string) => {\n  return url.includes('/api/auth/') || url === '/api/login';\n};\n\nasync function throwIfResNotOk(res: Response) {\n  // Don't throw on auth errors, they'll be handled specially\n  if (!res.ok && res.status !== 401) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  url: string,\n  options?: {\n    method?: string;\n    data?: unknown;\n  }\n): Promise<Response> {\n  const method = options?.method || 'GET';\n  const data = options?.data;\n  \n  try {\n    const headers: Record<string, string> = {\n      'Accept': 'application/json',\n    };\n    \n    if (data) {\n      headers['Content-Type'] = 'application/json';\n    }\n\n    const res = await fetch(url, {\n      method,\n      headers,\n      body: data ? JSON.stringify(data) : undefined,\n      credentials: \"include\",\n      cache: \"no-cache\",\n    });\n\n    // Handle 401 error specially\n    if (res.status === 401) {\n      if (!isInitialLoad && !isAuthRelatedRequest(url)) {\n        console.log(`Auth required for ${url}`);\n      }\n      return res;\n    }\n\n    await throwIfResNotOk(res);\n    return res;\n  } catch (error) {\n    // Prevent errors during initial page load\n    if (isInitialLoad) {\n      console.warn(\"Request failed during initial load, suppressing error:\", url);\n      return new Response(JSON.stringify(null), {\n        status: 200,\n        headers: { 'Content-Type': 'application/json' }\n      });\n    }\n    throw error;\n  }\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    try {\n      // Construct URL from queryKey array segments\n      let url: string;\n      if (Array.isArray(queryKey) && queryKey.length > 0) {\n        // Join array elements to create the full URL path\n        url = queryKey.filter(Boolean).join('/');\n      } else {\n        url = \"/\";\n      }\n\n      if (typeof url !== 'string') {\n        console.warn(\"Invalid queryKey, expected string but got:\", typeof url);\n        return null;\n      }\n\n      try {\n        const res = await fetch(url as string, {\n          credentials: \"include\",\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          cache: 'no-cache',\n        });\n\n        if (res.status === 401) {\n          if (!isInitialLoad && !isAuthRelatedRequest(url)) {\n            console.log(`Auth required for ${url}`);\n          }\n          return null; // Always return null for 401 errors to prevent errors\n        }\n\n        if (!res.ok) {\n          const text = (await res.text()) || res.statusText;\n          throw new Error(`${res.status}: ${text}`);\n        }\n\n        return await res.json();\n      } catch (fetchError) {\n        // Handle fetch errors silently - this is expected during initial load\n        if (!isInitialLoad && !isAuthRelatedRequest(url)) {\n          console.warn(\"Fetch error suppressed:\", url);\n        }\n        return null;\n      }\n    } catch (error) {\n      // Only log errors when not in initial load\n      if (!isInitialLoad) {\n        console.warn(\"Query error suppressed for:\", queryKey);\n      }\n      return null; // Always return null for errors to prevent UI breaking\n    }\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"returnNull\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});","size_bytes":4001},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/AboutPage.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Heart, Users, Globe, Target, CheckCircle, Star } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport default function AboutPage() {\n  const { isAuthenticated } = useAuth();\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      {/* Hero Section */}\n      <section className=\"py-20 bg-black\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h1 className=\"text-4xl md:text-6xl font-bold mb-6\">\n            About <span className=\"text-primary\">Christ Collective</span>\n          </h1>\n          <div className=\"w-24 h-1 bg-primary mx-auto mb-8\"></div>\n          <p className=\"text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed\">\n            Uniting Christians worldwide through faith, community, and purpose-driven collaboration. \n            We're building a platform where believers can connect, grow, and make a meaningful impact together.\n          </p>\n        </div>\n      </section>\n\n      {/* Mission Section */}\n      <section className=\"py-16 bg-background\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl md:text-4xl font-bold mb-4 text-foreground\">Our Mission</h2>\n            <div className=\"w-16 h-1 bg-primary mx-auto mb-6\"></div>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-12 items-center\">\n            <div>\n              <h3 className=\"text-2xl font-semibold mb-6 text-primary\">Breaking Down Barriers</h3>\n              <p className=\"text-muted-foreground mb-6 leading-relaxed\">\n                Christ Collective was founded on the belief that denominational differences should not divide \n                the body of Christ. We create spaces where Christians from all backgrounds can come together, \n                support one another, and work toward common goals.\n              </p>\n              <p className=\"text-muted-foreground leading-relaxed\">\n                Whether you're looking to support charitable causes, grow your business network, \n                or collaborate on creative projects, our platform provides the tools and community \n                to make it happen.\n              </p>\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-6\">\n              <Card className=\"bg-black border-primary/20\">\n                <CardContent className=\"p-6 text-center\">\n                  <Heart className=\"w-12 h-12 text-primary mx-auto mb-4\" />\n                  <h4 className=\"font-semibold mb-2 text-white\">Unity</h4>\n                  <p className=\"text-sm text-gray-300\">Bringing believers together across denominations</p>\n                </CardContent>\n              </Card>\n              \n              <Card className=\"bg-black border-primary/20\">\n                <CardContent className=\"p-6 text-center\">\n                  <Users className=\"w-12 h-12 text-primary mx-auto mb-4\" />\n                  <h4 className=\"font-semibold mb-2 text-white\">Community</h4>\n                  <p className=\"text-sm text-gray-300\">Creating meaningful connections and relationships</p>\n                </CardContent>\n              </Card>\n              \n              <Card className=\"bg-black border-primary/20\">\n                <CardContent className=\"p-6 text-center\">\n                  <Globe className=\"w-12 h-12 text-primary mx-auto mb-4\" />\n                  <h4 className=\"font-semibold mb-2 text-white\">Global Impact</h4>\n                  <p className=\"text-sm text-gray-300\">Making a difference in communities worldwide</p>\n                </CardContent>\n              </Card>\n              \n              <Card className=\"bg-black border-primary/20\">\n                <CardContent className=\"p-6 text-center\">\n                  <Target className=\"w-12 h-12 text-primary mx-auto mb-4\" />\n                  <h4 className=\"font-semibold mb-2 text-white\">Purpose</h4>\n                  <p className=\"text-sm text-gray-300\">Empowering kingdom-building initiatives</p>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Platform Features */}\n      <section className=\"py-16 bg-black\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl md:text-4xl font-bold mb-4\">What We Offer</h2>\n            <div className=\"w-16 h-1 bg-primary mx-auto mb-6\"></div>\n            <p className=\"text-lg text-gray-300 max-w-3xl mx-auto\">\n              Four core areas designed to help Christians connect, grow, and make an impact\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            <Card className=\"bg-card border-primary/20 hover:border-primary/40 transition-all duration-300\">\n              <CardContent className=\"p-6\">\n                <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4\">\n                  <Heart className=\"w-6 h-6 text-primary\" />\n                </div>\n                <h3 className=\"text-xl font-semibold mb-3 text-foreground\">Donations & Campaigns</h3>\n                <p className=\"text-muted-foreground text-sm leading-relaxed\">\n                  Support meaningful causes and create fundraising campaigns for ministries, \n                  missions, and community projects.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card className=\"bg-card border-primary/20 hover:border-primary/40 transition-all duration-300\">\n              <CardContent className=\"p-6\">\n                <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4\">\n                  <Users className=\"w-6 h-6 text-primary\" />\n                </div>\n                <h3 className=\"text-xl font-semibold mb-3 text-foreground\">Business Network</h3>\n                <p className=\"text-muted-foreground text-sm leading-relaxed\">\n                  Connect with Christian business owners and professionals to grow your network \n                  with those who share your values.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card className=\"bg-card border-primary/20 hover:border-primary/40 transition-all duration-300\">\n              <CardContent className=\"p-6\">\n                <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4\">\n                  <Star className=\"w-6 h-6 text-primary\" />\n                </div>\n                <h3 className=\"text-xl font-semibold mb-3 text-foreground\">Creator Sponsorship</h3>\n                <p className=\"text-muted-foreground text-sm leading-relaxed\">\n                  Support Christian content creators and influencers who are making a positive \n                  impact through their platforms.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card className=\"bg-card border-primary/20 hover:border-primary/40 transition-all duration-300\">\n              <CardContent className=\"p-6\">\n                <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4\">\n                  <Target className=\"w-6 h-6 text-primary\" />\n                </div>\n                <h3 className=\"text-xl font-semibold mb-3 text-foreground\">Community Building</h3>\n                <p className=\"text-muted-foreground text-sm leading-relaxed\">\n                  Join groups, attend events, and participate in discussions that strengthen \n                  the global Christian community.\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      {/* Values Section */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl md:text-4xl font-bold mb-4 text-black\">Our Values</h2>\n            <div className=\"w-16 h-1 bg-primary mx-auto mb-6\"></div>\n          </div>\n\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n              <div className=\"flex items-start space-x-4\">\n                <CheckCircle className=\"w-6 h-6 text-primary mt-1 flex-shrink-0\" />\n                <div>\n                  <h3 className=\"text-xl font-semibold mb-2 text-black\">Christ-Centered</h3>\n                  <p className=\"text-gray-700\">\n                    Christ is at the center of everything we do. Our platform exists to serve \n                    His kingdom and advance His purposes.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start space-x-4\">\n                <CheckCircle className=\"w-6 h-6 text-primary mt-1 flex-shrink-0\" />\n                <div>\n                  <h3 className=\"text-xl font-semibold mb-2 text-black\">Inclusive Community</h3>\n                  <p className=\"text-gray-700\">\n                    We welcome Christians from all denominations and backgrounds, believing \n                    unity strengthens the body of Christ.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start space-x-4\">\n                <CheckCircle className=\"w-6 h-6 text-primary mt-1 flex-shrink-0\" />\n                <div>\n                  <h3 className=\"text-xl font-semibold mb-2 text-black\">Integrity</h3>\n                  <p className=\"text-gray-700\">\n                    We operate with transparency, honesty, and accountability in all our \n                    interactions and business practices.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start space-x-4\">\n                <CheckCircle className=\"w-6 h-6 text-primary mt-1 flex-shrink-0\" />\n                <div>\n                  <h3 className=\"text-xl font-semibold mb-2 text-black\">Stewardship</h3>\n                  <p className=\"text-gray-700\">\n                    We believe in using our resources, talents, and platform responsibly \n                    to serve others and honor God.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start space-x-4\">\n                <CheckCircle className=\"w-6 h-6 text-primary mt-1 flex-shrink-0\" />\n                <div>\n                  <h3 className=\"text-xl font-semibold mb-2 text-black\">Innovation</h3>\n                  <p className=\"text-gray-700\">\n                    We embrace technology and creative solutions to better serve the \n                    Christian community and reach more people.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start space-x-4\">\n                <CheckCircle className=\"w-6 h-6 text-primary mt-1 flex-shrink-0\" />\n                <div>\n                  <h3 className=\"text-xl font-semibold mb-2 text-black\">Global Vision</h3>\n                  <p className=\"text-gray-700\">\n                    Our mission extends beyond borders, seeking to unite Christians \n                    worldwide in service and fellowship.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Call to Action */}\n      <section className=\"py-16 bg-black\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h2 className=\"text-3xl md:text-4xl font-bold mb-6\">Join Our Growing Community</h2>\n          <p className=\"text-lg text-gray-300 max-w-3xl mx-auto mb-8\">\n            Become part of a global movement of Christians making a difference in their communities and beyond.\n          </p>\n          \n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\n            <Button \n              asChild\n              size=\"lg\"\n              className=\"bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/50 hover:shadow-primary/70 transition-all duration-300\"\n            >\n              {isAuthenticated ? (\n                <Link href=\"/profile\">Complete Your Profile</Link>\n              ) : (\n                <a href=\"/api/login\">Get Started Today</a>\n              )}\n            </Button>\n            \n            <Button \n              asChild\n              size=\"lg\"\n              variant=\"outline\"\n              className=\"border-primary text-primary hover:bg-primary hover:text-white\"\n            >\n              <Link href=\"/donate\">Explore Campaigns</Link>\n            </Button>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}","size_bytes":12867},"client/src/pages/AdminDashboard.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useEffect, useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Input } from \"@/components/ui/input\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { CheckCircle, XCircle, Trash2, Clock, DollarSign, Users, Building, Receipt, UserCheck, Search, Eye, Calendar, Mail, X, Phone, MapPin, ExternalLink } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport type { Campaign, User, Donation, SponsorshipApplication } from \"@shared/schema\";\n\nexport default function AdminDashboard() {\n  const { user, isLoading: authLoading } = useAuth();\n  const { toast } = useToast();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n\n\n\n  // Redirect if not authenticated or not admin\n  useEffect(() => {\n    if (!authLoading && user && !user.isAdmin) {\n      toast({\n        title: \"Access Denied\",\n        description: \"You don't have permission to access this page.\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/\";\n      }, 500);\n      return;\n    }\n  }, [user, authLoading, toast]);\n\n  const { data: pendingCampaigns, isLoading: pendingLoading } = useQuery({\n    queryKey: [\"/api/admin/campaigns/pending\"],\n    enabled: user?.isAdmin === true,\n  });\n\n  const { data: allCampaigns = [], isLoading: campaignsLoading } = useQuery({\n    queryKey: [\"/api/admin/campaigns\"],\n    enabled: user?.isAdmin === true,\n  });\n\n  // Fetch all users for admin management\n  const { data: allUsers = [], isLoading: usersLoading } = useQuery({\n    queryKey: [\"/api/admin/users\"],\n    enabled: user?.isAdmin === true,\n  });\n\n  // Fetch all transactions\n  const { data: allTransactions = [], isLoading: transactionsLoading } = useQuery({\n    queryKey: [\"/api/admin/transactions\"],\n    enabled: user?.isAdmin === true,\n  });\n\n  // Fetch sponsorship applications\n  const { data: sponsorshipApplications = [], isLoading: applicationsLoading } = useQuery({\n    queryKey: [\"/api/admin/sponsorship-applications\"],\n    enabled: user?.isAdmin === true,\n  });\n\n  // Fetch pending ministries for approval\n  const { data: pendingMinistries = [], isLoading: ministriesLoading } = useQuery({\n    queryKey: [\"/api/ministries/pending\"],\n    enabled: user?.isAdmin === true,\n  });\n\n  const approveMutation = useMutation({\n    mutationFn: async (campaignId: string) => {\n      await apiRequest(`/api/admin/campaigns/${campaignId}/approve`, { method: \"POST\" });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/campaigns/pending\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/campaigns\"] });\n      toast({\n        title: \"Campaign Approved\",\n        description: \"The campaign has been approved and is now live.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const rejectMutation = useMutation({\n    mutationFn: async (campaignId: string) => {\n      await apiRequest(`/api/admin/campaigns/${campaignId}/reject`, { method: \"POST\" });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/campaigns/pending\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/campaigns\"] });\n      toast({\n        title: \"Campaign Rejected\",\n        description: \"The campaign has been rejected.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (campaignId: string) => {\n      await apiRequest(`/api/admin/campaigns/${campaignId}`, { method: \"DELETE\" });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/campaigns/pending\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/campaigns\"] });\n      toast({\n        title: \"Campaign Deleted\",\n        description: \"The campaign has been permanently removed.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Sponsorship application mutations\n  const approveApplicationMutation = useMutation({\n    mutationFn: async (applicationId: number) => {\n      await apiRequest(`/api/admin/sponsorship-applications/${applicationId}/approve`, { method: \"POST\" });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/sponsorship-applications\"] });\n      toast({\n        title: \"Application Approved\",\n        description: \"The sponsorship application has been approved.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const rejectApplicationMutation = useMutation({\n    mutationFn: async (applicationId: number) => {\n      await apiRequest(`/api/admin/sponsorship-applications/${applicationId}/reject`, { method: \"POST\" });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/sponsorship-applications\"] });\n      toast({\n        title: \"Application Rejected\",\n        description: \"The sponsorship application has been rejected.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Ministry approval mutations\n  const approveMinistryMutation = useMutation({\n    mutationFn: async (ministryId: number) => {\n      await apiRequest(`/api/ministries/${ministryId}/approve`, { method: \"PATCH\" });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/ministries/pending\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/ministries\"] });\n      toast({\n        title: \"Ministry Approved\",\n        description: \"The ministry profile has been approved and is now live.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const rejectMinistryMutation = useMutation({\n    mutationFn: async (ministryId: number) => {\n      await apiRequest(`/api/ministries/${ministryId}/reject`, { method: \"PATCH\" });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/ministries/pending\"] });\n      toast({\n        title: \"Ministry Rejected\",\n        description: \"The ministry profile has been rejected and removed.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  if (!user?.isAdmin) {\n    return null;\n  }\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat(\"en-US\", {\n      style: \"currency\",\n      currency: \"USD\",\n    }).format(amount);\n  };\n\n  const formatDate = (date: string | Date) => {\n    return new Date(date).toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  // Filter users based on search query\n  const filteredUsers = Array.isArray(allUsers) ? allUsers.filter((user: User) =>\n    !searchQuery || \n    user.firstName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    user.lastName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    user.email?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    user.username?.toLowerCase().includes(searchQuery.toLowerCase())\n  ) : [];\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-4xl font-bold text-primary mb-2\">Admin Dashboard</h1>\n          <p className=\"text-gray-400\">Manage campaigns, transactions, and user accounts.</p>\n        </div>\n\n        {/* Stats Overview */}\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n          <Card className=\"bg-gray-900/50 border-gray-700 backdrop-blur\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-xs font-medium text-gray-400 uppercase tracking-wide\">Pending Ministries</p>\n                  <p className=\"text-2xl font-bold text-green-400 mt-1\">\n                    {ministriesLoading ? \"...\" : Array.isArray(pendingMinistries) ? pendingMinistries.length : 0}\n                  </p>\n                </div>\n                <Building className=\"h-8 w-8 text-green-400/50\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gray-900/50 border-gray-700 backdrop-blur\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-xs font-medium text-gray-400 uppercase tracking-wide\">Pending Campaigns</p>\n                  <p className=\"text-2xl font-bold text-primary mt-1\">\n                    {pendingLoading ? \"...\" : Array.isArray(pendingCampaigns) ? pendingCampaigns.length : 0}\n                  </p>\n                </div>\n                <Clock className=\"h-8 w-8 text-primary/50\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gray-900/50 border-gray-700 backdrop-blur\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-xs font-medium text-gray-400 uppercase tracking-wide\">Total Users</p>\n                  <p className=\"text-2xl font-bold text-blue-400 mt-1\">\n                    {usersLoading ? \"...\" : Array.isArray(allUsers) ? allUsers.length : 0}\n                  </p>\n                </div>\n                <Users className=\"h-8 w-8 text-blue-400/50\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gray-900/50 border-gray-700 backdrop-blur\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-xs font-medium text-gray-400 uppercase tracking-wide\">Total Raised</p>\n                  <p className=\"text-xl font-bold text-primary mt-1\">\n                    {transactionsLoading \n                      ? \"...\" \n                      : formatCurrency(\n                          Array.isArray(allTransactions) ? allTransactions.reduce((sum: number, transaction: Donation) => \n                            sum + (Number(transaction.amount) || 0), 0\n                          ) : 0\n                        )\n                    }\n                  </p>\n                </div>\n                <DollarSign className=\"h-8 w-8 text-primary/50\" />\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <Tabs defaultValue=\"ministries\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3 lg:grid-cols-6 bg-gray-900/70 backdrop-blur-sm border border-gray-700/50 rounded-xl p-4 pt-2 gap-3 shadow-lg shadow-black/20 items-start min-h-[90px]\">\n            <TabsTrigger value=\"ministries\" className=\"relative text-gray-300 data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-primary/90 data-[state=active]:text-black data-[state=active]:shadow-lg data-[state=active]:shadow-primary/25 hover:bg-gray-800/50 hover:text-white transition-all duration-200 px-3 py-3 rounded-lg border border-transparent data-[state=active]:border-primary/20 h-[70px]\">\n              <div className=\"flex flex-col items-center justify-center gap-1.5 h-full\">\n                <span className=\"font-semibold text-xs\">Ministries</span>\n                <span className=\"text-xs opacity-75 bg-gray-700/60 data-[state=active]:bg-black/20 px-2 py-0.5 rounded-full\">\n                  {Array.isArray(pendingMinistries) ? pendingMinistries.length : 0}\n                </span>\n              </div>\n            </TabsTrigger>\n            <TabsTrigger value=\"pending\" className=\"relative text-gray-300 data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-primary/90 data-[state=active]:text-black data-[state=active]:shadow-lg data-[state=active]:shadow-primary/25 hover:bg-gray-800/50 hover:text-white transition-all duration-200 px-3 py-3 rounded-lg border border-transparent data-[state=active]:border-primary/20 h-[70px]\">\n              <div className=\"flex flex-col items-center justify-center gap-1.5 h-full\">\n                <span className=\"font-semibold text-xs\">Campaigns</span>\n                <span className=\"text-xs opacity-75 bg-gray-700/60 data-[state=active]:bg-black/20 px-2 py-0.5 rounded-full\">\n                  {Array.isArray(pendingCampaigns) ? pendingCampaigns.length : 0}\n                </span>\n              </div>\n            </TabsTrigger>\n            <TabsTrigger value=\"sponsorships\" className=\"relative text-gray-300 data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-primary/90 data-[state=active]:text-black data-[state=active]:shadow-lg data-[state=active]:shadow-primary/25 hover:bg-gray-800/50 hover:text-white transition-all duration-200 px-3 py-3 rounded-lg border border-transparent data-[state=active]:border-primary/20 h-[70px]\">\n              <div className=\"flex flex-col items-center justify-center gap-1.5 h-full\">\n                <span className=\"font-semibold text-xs\">Sponsors</span>\n                <span className=\"text-xs opacity-75 bg-gray-700/60 data-[state=active]:bg-black/20 px-2 py-0.5 rounded-full\">\n                  {Array.isArray(sponsorshipApplications) ? sponsorshipApplications.filter((app: SponsorshipApplication) => app.status === 'pending').length : 0}\n                </span>\n              </div>\n            </TabsTrigger>\n            <TabsTrigger value=\"campaigns\" className=\"relative text-gray-300 data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-primary/90 data-[state=active]:text-black data-[state=active]:shadow-lg data-[state=active]:shadow-primary/25 hover:bg-gray-800/50 hover:text-white transition-all duration-200 px-3 py-3 rounded-lg border border-transparent data-[state=active]:border-primary/20 hidden lg:flex h-[70px]\">\n              <div className=\"flex flex-col items-center justify-center gap-1.5 h-full\">\n                <span className=\"font-semibold text-xs\">All Campaigns</span>\n                <span className=\"text-xs opacity-75 bg-gray-700/60 data-[state=active]:bg-black/20 px-2 py-0.5 rounded-full\">\n                  Manage\n                </span>\n              </div>\n            </TabsTrigger>\n            <TabsTrigger value=\"transactions\" className=\"relative text-gray-300 data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-primary/90 data-[state=active]:text-black data-[state=active]:shadow-lg data-[state=active]:shadow-primary/25 hover:bg-gray-800/50 hover:text-white transition-all duration-200 px-3 py-3 rounded-lg border border-transparent data-[state=active]:border-primary/20 hidden lg:flex h-[70px]\">\n              <div className=\"flex flex-col items-center justify-center gap-1.5 h-full\">\n                <span className=\"font-semibold text-xs\">Transactions</span>\n                <span className=\"text-xs opacity-75 bg-gray-700/60 data-[state=active]:bg-black/20 px-2 py-0.5 rounded-full\">\n                  View\n                </span>\n              </div>\n            </TabsTrigger>\n            <TabsTrigger value=\"users\" className=\"relative text-gray-300 data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-primary/90 data-[state=active]:text-black data-[state=active]:shadow-lg data-[state=active]:shadow-primary/25 hover:bg-gray-800/50 hover:text-white transition-all duration-200 px-3 py-3 rounded-lg border border-transparent data-[state=active]:border-primary/20 hidden lg:flex h-[70px]\">\n              <div className=\"flex flex-col items-center justify-center gap-1.5 h-full\">\n                <span className=\"font-semibold text-xs\">Users</span>\n                <span className=\"text-xs opacity-75 bg-gray-700/60 data-[state=active]:bg-black/20 px-2 py-0.5 rounded-full\">\n                  Manage\n                </span>\n              </div>\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"transactions\" className=\"space-y-6\">\n            <div className=\"mt-8\">\n              <h2 className=\"text-2xl font-bold text-primary mb-4\">All Transactions</h2>\n              {transactionsLoading ? (\n                <Card className=\"bg-gray-900 border-gray-800\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"animate-pulse\">\n                      <div className=\"h-4 bg-gray-700 rounded w-1/4 mb-4\"></div>\n                      <div className=\"space-y-3\">\n                        {[...Array(5)].map((_, i) => (\n                          <div key={i} className=\"h-3 bg-gray-700 rounded\"></div>\n                        ))}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ) : Array.isArray(allTransactions) && allTransactions.length === 0 ? (\n                <Card className=\"bg-gray-900 border-gray-800\">\n                  <CardContent className=\"p-6 text-center\">\n                    <Receipt className=\"h-12 w-12 text-gray-600 mx-auto mb-4\" />\n                    <p className=\"text-gray-400\">No transactions found.</p>\n                  </CardContent>\n                </Card>\n              ) : (\n                <Card className=\"bg-gray-900 border-gray-800\">\n                  <CardContent className=\"p-0\">\n                    <Table>\n                      <TableHeader>\n                        <TableRow className=\"border-gray-700\">\n                          <TableHead className=\"text-gray-300\">Date</TableHead>\n                          <TableHead className=\"text-gray-300\">Amount</TableHead>\n                          <TableHead className=\"text-gray-300\">Campaign</TableHead>\n                          <TableHead className=\"text-gray-300\">Transaction ID</TableHead>\n                          <TableHead className=\"text-gray-300\">Status</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {Array.isArray(allTransactions) && allTransactions.map((transaction: Donation) => (\n                          <TableRow key={transaction.id} className=\"border-gray-700\">\n                            <TableCell className=\"text-gray-300\">\n                              <div className=\"flex items-center space-x-2\">\n                                <Calendar className=\"h-4 w-4 text-gray-500\" />\n                                <span>{formatDate(transaction.createdAt || new Date())}</span>\n                              </div>\n                            </TableCell>\n                            <TableCell className=\"text-green-400 font-medium\">\n                              {formatCurrency(Number(transaction.amount))}\n                            </TableCell>\n                            <TableCell className=\"text-gray-300\">\n                              {transaction.campaignId}\n                            </TableCell>\n                            <TableCell className=\"text-gray-400 font-mono text-sm\">\n                              {transaction.stripePaymentId}\n                            </TableCell>\n                            <TableCell>\n                              <Badge className=\"bg-green-900 text-green-300\">\n                                <CheckCircle className=\"h-3 w-3 mr-1\" />\n                                Completed\n                              </Badge>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"users\" className=\"space-y-6\">\n            <div className=\"mt-8\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-2xl font-bold text-primary\">User Management</h2>\n                <div className=\"relative w-64\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n                  <Input\n                    type=\"text\"\n                    placeholder=\"Search users...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"pl-10 bg-gray-800 border-gray-700 text-white\"\n                  />\n                </div>\n              </div>\n\n              {usersLoading ? (\n                <Card className=\"bg-gray-900 border-gray-800\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"animate-pulse\">\n                      <div className=\"h-4 bg-gray-700 rounded w-1/4 mb-4\"></div>\n                      <div className=\"space-y-3\">\n                        {[...Array(5)].map((_, i) => (\n                          <div key={i} className=\"h-3 bg-gray-700 rounded\"></div>\n                        ))}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ) : filteredUsers.length === 0 ? (\n                <Card className=\"bg-gray-900 border-gray-800\">\n                  <CardContent className=\"p-6 text-center\">\n                    <Users className=\"h-12 w-12 text-gray-600 mx-auto mb-4\" />\n                    <p className=\"text-gray-400\">No users found.</p>\n                  </CardContent>\n                </Card>\n              ) : (\n                <Card className=\"bg-gray-900 border-gray-800\">\n                  <CardContent className=\"p-0\">\n                    <Table>\n                      <TableHeader>\n                        <TableRow className=\"border-gray-700\">\n                          <TableHead className=\"text-gray-300\">User</TableHead>\n                          <TableHead className=\"text-gray-300\">Email</TableHead>\n                          <TableHead className=\"text-gray-300\">Joined</TableHead>\n                          <TableHead className=\"text-gray-300\">Status</TableHead>\n                          <TableHead className=\"text-gray-300\">Actions</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {filteredUsers.map((user: User) => (\n                          <TableRow key={user.id} className=\"border-gray-700\">\n                            <TableCell className=\"text-gray-300\">\n                              <div className=\"flex items-center space-x-3\">\n                                <Avatar className=\"h-8 w-8\">\n                                  <AvatarImage src={user.profileImageUrl || undefined} />\n                                  <AvatarFallback className=\"bg-gray-700 text-gray-300\">\n                                    {user.firstName?.[0]}{user.lastName?.[0]}\n                                  </AvatarFallback>\n                                </Avatar>\n                                <div>\n                                  <p className=\"font-medium\">{user.firstName} {user.lastName}</p>\n                                  <p className=\"text-sm text-gray-500\">@{user.username}</p>\n                                </div>\n                              </div>\n                            </TableCell>\n                            <TableCell className=\"text-gray-300\">\n                              <div className=\"flex items-center space-x-2\">\n                                <Mail className=\"h-4 w-4 text-gray-500\" />\n                                <span>{user.email}</span>\n                              </div>\n                            </TableCell>\n                            <TableCell className=\"text-gray-400\">\n                              {formatDate(user.createdAt || new Date())}\n                            </TableCell>\n                            <TableCell>\n                              <Badge className={user.isAdmin ? \"bg-purple-900 text-purple-300\" : \"bg-green-900 text-green-300\"}>\n                                <UserCheck className=\"h-3 w-3 mr-1\" />\n                                {user.isAdmin ? \"Admin\" : \"User\"}\n                              </Badge>\n                            </TableCell>\n                            <TableCell>\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                className=\"border-gray-600 text-gray-300 hover:bg-gray-700\"\n                                onClick={() => setSelectedUser(user)}\n                              >\n                                <Eye className=\"h-4 w-4 mr-1\" />\n                                View Details\n                              </Button>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"campaigns\" className=\"space-y-6\">\n            <div className=\"mt-8\">\n              <h2 className=\"text-2xl font-bold text-primary mb-4\">All Campaigns</h2>\n              {campaignsLoading ? (\n                <div className=\"space-y-4\">\n                  {[...Array(5)].map((_, i) => (\n                    <Card key={i} className=\"bg-gray-900 border-gray-800\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"animate-pulse\">\n                          <div className=\"h-4 bg-gray-700 rounded w-3/4 mb-2\"></div>\n                          <div className=\"h-3 bg-gray-700 rounded w-1/2 mb-4\"></div>\n                          <div className=\"h-8 bg-gray-700 rounded w-20\"></div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : Array.isArray(allCampaigns) && allCampaigns.length === 0 ? (\n                <Card className=\"bg-gray-900 border-gray-800\">\n                  <CardContent className=\"p-6 text-center\">\n                    <Building className=\"h-12 w-12 text-gray-600 mx-auto mb-4\" />\n                    <p className=\"text-gray-400\">No active campaigns found.</p>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"space-y-4\">\n                  {Array.isArray(allCampaigns) && allCampaigns.map((campaign: Campaign) => (\n                    <Card key={campaign.id} className=\"bg-gray-900 border-gray-800\">\n                      <CardHeader>\n                        <div className=\"flex justify-between items-start\">\n                          <div>\n                            <CardTitle className=\"text-white\">{campaign.title}</CardTitle>\n                            <CardDescription className=\"text-gray-400 mt-2\">\n                              {formatCurrency(Number(campaign.currentAmount))} of {formatCurrency(Number(campaign.goal))} raised • \n                              Status: {campaign.status}\n                            </CardDescription>\n                          </div>\n                          <Badge className=\"bg-green-900 text-green-300\">\n                            <CheckCircle className=\"h-3 w-3 mr-1\" />\n                            Active\n                          </Badge>\n                        </div>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"flex justify-between items-center\">\n                          <div className=\"flex-1\">\n                            <div className=\"w-full bg-gray-700 rounded-full h-2 mb-2\">\n                              <div\n                                className=\"bg-primary h-2 rounded-full shadow-lg shadow-primary/50\"\n                                style={{\n                                  width: `${Math.min(\n                                    (Number(campaign.currentAmount) / Number(campaign.goal)) * 100,\n                                    100\n                                  )}%`,\n                                }}\n                              ></div>\n                            </div>\n                            <p className=\"text-sm text-gray-400\">\n                              {Math.round((Number(campaign.currentAmount) / Number(campaign.goal)) * 100)}% funded\n                            </p>\n                          </div>\n                          <div className=\"ml-4 flex space-x-2\">\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              className=\"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white\"\n                              onClick={() => {/* Add view transactions functionality */}}\n                            >\n                              <Receipt className=\"h-4 w-4 mr-1\" />\n                              Transactions\n                            </Button>\n                            <Button\n                              onClick={() => deleteMutation.mutate(campaign.id)}\n                              disabled={deleteMutation.isPending}\n                              variant=\"outline\"\n                              size=\"sm\"\n                              className=\"border-red-600 text-red-400 hover:bg-red-600 hover:text-white\"\n                            >\n                              <Trash2 className=\"h-4 w-4 mr-1\" />\n                              Delete\n                            </Button>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"sponsorships\" className=\"space-y-6\">\n            <div className=\"mt-8\">\n              <h2 className=\"text-2xl font-bold text-primary mb-4\">Sponsorship Applications</h2>\n              {applicationsLoading ? (\n                <div className=\"space-y-4\">\n                  {[...Array(3)].map((_, i) => (\n                    <Card key={i} className=\"bg-gray-900 border-gray-800\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"animate-pulse\">\n                          <div className=\"h-4 bg-gray-700 rounded w-3/4 mb-2\"></div>\n                          <div className=\"h-3 bg-gray-700 rounded w-1/2 mb-4\"></div>\n                          <div className=\"h-8 bg-gray-700 rounded w-20\"></div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : Array.isArray(sponsorshipApplications) && sponsorshipApplications.length === 0 ? (\n                <Card className=\"bg-gray-900 border-gray-800\">\n                  <CardContent className=\"p-6 text-center\">\n                    <UserCheck className=\"h-12 w-12 text-gray-600 mx-auto mb-4\" />\n                    <p className=\"text-gray-400\">No sponsorship applications yet.</p>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"space-y-4\">\n                  {Array.isArray(sponsorshipApplications) && sponsorshipApplications.map((application: SponsorshipApplication) => (\n                    <Card key={application.id} className=\"bg-gray-900 border-gray-800\">\n                      <CardHeader>\n                        <div className=\"flex justify-between items-start\">\n                          <div className=\"flex-1\">\n                            <CardTitle className=\"text-white\">{application.name}</CardTitle>\n                            <CardDescription className=\"text-gray-400 mt-1\">\n                              {application.email}\n                            </CardDescription>\n                            \n                            {/* Platforms */}\n                            <div className=\"mt-3\">\n                              <p className=\"text-sm font-medium text-gray-300 mb-2\">Platforms:</p>\n                              <div className=\"flex flex-wrap gap-2\">\n                                {Array.isArray(application.platforms) && application.platforms.map((platform: any, index: number) => (\n                                  <a\n                                    key={index}\n                                    href={platform.profileUrl}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                    className=\"inline-block\"\n                                  >\n                                    <Badge variant=\"outline\" className=\"text-xs hover:bg-blue-900 hover:border-blue-600 transition-colors cursor-pointer\">\n                                      <ExternalLink className=\"h-3 w-3 mr-1\" />\n                                      {platform.platform} ({platform.subscriberCount ? platform.subscriberCount.toLocaleString() : 'N/A'} followers)\n                                    </Badge>\n                                  </a>\n                                ))}\n                              </div>\n                            </div>\n\n                            {/* Content Description */}\n                            <div className=\"mt-3\">\n                              <p className=\"text-sm font-medium text-gray-300\">Content:</p>\n                              <p className=\"text-gray-400 text-sm mt-1 line-clamp-2\">{application.content}</p>\n                            </div>\n\n                            {/* Target Audience */}\n                            {application.audience && (\n                              <div className=\"mt-2\">\n                                <p className=\"text-sm font-medium text-gray-300\">Target Audience:</p>\n                                <p className=\"text-gray-400 text-sm\">{application.audience}</p>\n                              </div>\n                            )}\n\n                            {/* Message */}\n                            {application.message && (\n                              <div className=\"mt-3\">\n                                <p className=\"text-sm font-medium text-gray-300\">Why they want to join:</p>\n                                <p className=\"text-gray-400 text-sm mt-1 line-clamp-3\">{application.message}</p>\n                              </div>\n                            )}\n\n                            <div className=\"mt-3 text-xs text-gray-500\">\n                              Applied: {application.createdAt ? formatDate(application.createdAt) : 'Unknown'}\n                            </div>\n                          </div>\n                          \n                          <div className=\"flex items-center gap-2 ml-4\">\n                            <Badge \n                              className={\n                                application.status === 'pending' ? 'bg-yellow-900 text-yellow-300' :\n                                application.status === 'approved' ? 'bg-green-900 text-green-300' :\n                                'bg-red-900 text-red-300'\n                              }\n                            >\n                              {application.status === 'pending' && <Clock className=\"h-3 w-3 mr-1\" />}\n                              {application.status === 'approved' && <CheckCircle className=\"h-3 w-3 mr-1\" />}\n                              {application.status === 'rejected' && <XCircle className=\"h-3 w-3 mr-1\" />}\n                              {application.status.charAt(0).toUpperCase() + application.status.slice(1)}\n                            </Badge>\n                          </div>\n                        </div>\n                      </CardHeader>\n                      \n                      {application.status === 'pending' && (\n                        <CardContent>\n                          <div className=\"flex gap-2\">\n                            <Button\n                              size=\"sm\"\n                              className=\"bg-green-700 hover:bg-green-600 text-white\"\n                              onClick={() => approveApplicationMutation.mutate(application.id)}\n                              disabled={approveApplicationMutation.isPending}\n                            >\n                              <CheckCircle className=\"h-4 w-4 mr-2\" />\n                              {approveApplicationMutation.isPending ? \"Approving...\" : \"Approve\"}\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"destructive\"\n                              onClick={() => rejectApplicationMutation.mutate(application.id)}\n                              disabled={rejectApplicationMutation.isPending}\n                            >\n                              <XCircle className=\"h-4 w-4 mr-2\" />\n                              {rejectApplicationMutation.isPending ? \"Rejecting...\" : \"Reject\"}\n                            </Button>\n                          </div>\n                        </CardContent>\n                      )}\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"ministries\" className=\"space-y-6\">\n            <div className=\"mt-8\">\n              <h2 className=\"text-2xl font-bold text-primary mb-4\">Ministry Profile Approvals</h2>\n              {ministriesLoading ? (\n                <div className=\"space-y-4\">\n                  {[...Array(3)].map((_, i) => (\n                    <Card key={i} className=\"bg-gray-900 border-gray-800\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"animate-pulse\">\n                          <div className=\"h-4 bg-gray-700 rounded w-3/4 mb-2\"></div>\n                          <div className=\"h-3 bg-gray-700 rounded w-1/2 mb-4\"></div>\n                          <div className=\"h-8 bg-gray-700 rounded w-20\"></div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : Array.isArray(pendingMinistries) && pendingMinistries.length === 0 ? (\n                <Card className=\"bg-gray-900 border-gray-800\">\n                  <CardContent className=\"p-6 text-center\">\n                    <Building className=\"h-12 w-12 text-gray-600 mx-auto mb-4\" />\n                    <p className=\"text-gray-400\">No pending ministry profiles.</p>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"space-y-6\">\n                  {Array.isArray(pendingMinistries) && pendingMinistries.map((ministry: any) => (\n                    <Card key={ministry.id} className=\"bg-gray-900/50 border-gray-700 backdrop-blur overflow-hidden\">\n                      <div className=\"p-6\">\n                        <div className=\"flex flex-col sm:flex-row gap-6\">\n                          {/* Ministry Logo */}\n                          <div className=\"flex-shrink-0\">\n                            <Avatar className=\"h-20 w-20 mx-auto sm:mx-0\">\n                              <AvatarImage src={ministry.logo} alt={ministry.name} />\n                              <AvatarFallback className=\"bg-primary text-black text-2xl font-bold\">\n                                {ministry.name?.charAt(0) || 'M'}\n                              </AvatarFallback>\n                            </Avatar>\n                          </div>\n                          \n                          {/* Ministry Details */}\n                          <div className=\"flex-1 min-w-0 text-center sm:text-left\">\n                            <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4\">\n                              <div>\n                                <h3 className=\"text-xl font-bold text-white mb-2\">{ministry.name}</h3>\n                                <div className=\"flex flex-wrap gap-2 justify-center sm:justify-start\">\n                                  {ministry.denomination && (\n                                    <Badge variant=\"outline\" className=\"text-xs bg-blue-900/30 border-blue-600 text-blue-300\">\n                                      {ministry.denomination}\n                                    </Badge>\n                                  )}\n                                  <Badge className=\"bg-yellow-900/30 border-yellow-600 text-yellow-300\">\n                                    <Clock className=\"h-3 w-3 mr-1\" />\n                                    Pending Review\n                                  </Badge>\n                                </div>\n                              </div>\n                            </div>\n                            \n                            {/* Description */}\n                            <div className=\"mb-6\">\n                              <p className=\"text-gray-300 text-sm leading-relaxed\">\n                                {ministry.description}\n                              </p>\n                            </div>\n\n                            {/* Contact Grid */}\n                            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6\">\n                              <div className=\"space-y-3\">\n                                <div className=\"flex items-center justify-center sm:justify-start text-sm text-gray-400\">\n                                  <Mail className=\"h-4 w-4 mr-2 text-primary\" />\n                                  <span className=\"break-all\">{ministry.email}</span>\n                                </div>\n                                <div className=\"flex items-center justify-center sm:justify-start text-sm text-gray-400\">\n                                  <Phone className=\"h-4 w-4 mr-2 text-primary\" />\n                                  <span>{ministry.phone}</span>\n                                </div>\n                              </div>\n                              <div className=\"space-y-3\">\n                                <div className=\"flex items-center justify-center sm:justify-start text-sm text-gray-400\">\n                                  <MapPin className=\"h-4 w-4 mr-2 text-primary\" />\n                                  <span className=\"break-words\">{ministry.address}</span>\n                                </div>\n                                {ministry.website && (\n                                  <div className=\"flex items-center justify-center sm:justify-start text-sm text-gray-400\">\n                                    <ExternalLink className=\"h-4 w-4 mr-2 text-primary\" />\n                                    <a \n                                      href={ministry.website} \n                                      target=\"_blank\" \n                                      rel=\"noopener noreferrer\"\n                                      className=\"text-primary hover:underline break-all\"\n                                    >\n                                      {ministry.website}\n                                    </a>\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n\n                            {/* Actions */}\n                            <div className=\"flex flex-col sm:flex-row gap-3 items-center\">\n                              <div className=\"flex gap-3\">\n                                <Button\n                                  size=\"sm\"\n                                  className=\"bg-green-700 hover:bg-green-600 text-white px-6\"\n                                  onClick={() => approveMinistryMutation.mutate(ministry.id)}\n                                  disabled={approveMinistryMutation.isPending}\n                                >\n                                  <CheckCircle className=\"h-4 w-4 mr-2\" />\n                                  {approveMinistryMutation.isPending ? \"Approving...\" : \"Approve\"}\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"destructive\"\n                                  className=\"px-6\"\n                                  onClick={() => rejectMinistryMutation.mutate(ministry.id)}\n                                  disabled={rejectMinistryMutation.isPending}\n                                >\n                                  <XCircle className=\"h-4 w-4 mr-2\" />\n                                  {rejectMinistryMutation.isPending ? \"Rejecting...\" : \"Reject\"}\n                                </Button>\n                              </div>\n                              <div className=\"text-xs text-gray-500 sm:ml-auto\">\n                                Submitted: {ministry.createdAt ? formatDate(ministry.createdAt) : 'Unknown'}\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"pending\" className=\"space-y-6\">\n            <div className=\"mt-8\">\n              <h2 className=\"text-2xl font-bold text-primary mb-4\">Pending Campaign Approvals</h2>\n              {pendingLoading ? (\n                <div className=\"space-y-4\">\n                  {[...Array(3)].map((_, i) => (\n                    <Card key={i} className=\"bg-gray-900 border-gray-800\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"animate-pulse\">\n                          <div className=\"h-4 bg-gray-700 rounded w-3/4 mb-2\"></div>\n                          <div className=\"h-3 bg-gray-700 rounded w-1/2 mb-4\"></div>\n                          <div className=\"h-8 bg-gray-700 rounded w-20\"></div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : Array.isArray(pendingCampaigns) && pendingCampaigns.length === 0 ? (\n                <Card className=\"bg-gray-900 border-gray-800\">\n                  <CardContent className=\"p-6 text-center\">\n                    <Clock className=\"h-12 w-12 text-gray-600 mx-auto mb-4\" />\n                    <p className=\"text-gray-400\">No pending campaigns to review.</p>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"space-y-4\">\n                  {Array.isArray(pendingCampaigns) && pendingCampaigns.map((campaign: Campaign) => (\n                    <Card key={campaign.id} className=\"bg-gray-900 border-gray-800\">\n                      <CardHeader>\n                        <div className=\"flex justify-between items-start\">\n                          <div className=\"flex-1\">\n                            <CardTitle className=\"text-white\">{campaign.title}</CardTitle>\n                            <CardDescription className=\"text-gray-400 mt-2\">\n                              Goal: {formatCurrency(Number(campaign.goal))}\n                            </CardDescription>\n                            <p className=\"text-gray-300 mt-3 line-clamp-3\">{campaign.description}</p>\n                          </div>\n                          <Badge className=\"bg-yellow-900 text-yellow-300 ml-4\">\n                            <Clock className=\"h-3 w-3 mr-1\" />\n                            Pending\n                          </Badge>\n                        </div>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"flex justify-between items-center\">\n                          <div className=\"text-sm text-gray-400\">\n                            <p>Created: {formatDate(campaign.createdAt || new Date())}</p>\n                            {campaign.image && (\n                              <p className=\"mt-1\">\n                                <span className=\"text-green-400\">✓</span> Image attached\n                              </p>\n                            )}\n                          </div>\n                          <div className=\"flex space-x-3\">\n                            <Button\n                              onClick={() => approveMutation.mutate(campaign.id)}\n                              disabled={approveMutation.isPending}\n                              className=\"bg-green-600 hover:bg-green-700 text-white\"\n                            >\n                              <CheckCircle className=\"h-4 w-4 mr-2\" />\n                              Approve\n                            </Button>\n                            <Button\n                              onClick={() => rejectMutation.mutate(campaign.id)}\n                              disabled={rejectMutation.isPending}\n                              variant=\"outline\"\n                              className=\"border-red-600 text-red-400 hover:bg-red-600 hover:text-white\"\n                            >\n                              <XCircle className=\"h-4 w-4 mr-2\" />\n                              Reject\n                            </Button>\n                            <Button\n                              onClick={() => deleteMutation.mutate(campaign.id)}\n                              disabled={deleteMutation.isPending}\n                              variant=\"outline\"\n                              className=\"border-gray-600 text-gray-400 hover:bg-gray-600 hover:text-white\"\n                            >\n                              <Trash2 className=\"h-4 w-4 mr-2\" />\n                              Delete\n                            </Button>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </div>\n          </TabsContent>\n        </Tabs>\n\n        {/* User Details Modal */}\n        {selectedUser && (\n          <Dialog open={!!selectedUser} onOpenChange={() => setSelectedUser(null)}>\n            <DialogContent className=\"max-w-4xl bg-gray-900 border-gray-800 text-white\">\n              <DialogHeader>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-4\">\n                    <Avatar className=\"h-16 w-16\">\n                      <AvatarImage src={selectedUser.profileImageUrl || undefined} />\n                      <AvatarFallback className=\"bg-gray-700 text-gray-300 text-lg\">\n                        {selectedUser.firstName?.[0]}{selectedUser.lastName?.[0]}\n                      </AvatarFallback>\n                    </Avatar>\n                    <div>\n                      <DialogTitle className=\"text-2xl font-bold text-white\">\n                        {selectedUser.firstName} {selectedUser.lastName}\n                      </DialogTitle>\n                      <DialogDescription className=\"text-gray-400\">\n                        @{selectedUser.username} • {selectedUser.isAdmin ? 'Administrator' : 'User'}\n                      </DialogDescription>\n                    </div>\n                  </div>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setSelectedUser(null)}\n                    className=\"text-gray-400 hover:text-white\"\n                  >\n                    <X className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </DialogHeader>\n\n              <div className=\"space-y-6 mt-6\">\n                {/* Basic Information */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <Card className=\"bg-gray-800 border-gray-700\">\n                    <CardHeader>\n                      <CardTitle className=\"text-lg text-white flex items-center\">\n                        <Mail className=\"h-5 w-5 mr-2 text-primary\" />\n                        Contact Information\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-3\">\n                      <div className=\"flex items-center space-x-3\">\n                        <Mail className=\"h-4 w-4 text-gray-400\" />\n                        <span className=\"text-gray-300\">{selectedUser.email || 'No email provided'}</span>\n                      </div>\n                      {selectedUser.phone && (\n                        <div className=\"flex items-center space-x-3\">\n                          <Phone className=\"h-4 w-4 text-gray-400\" />\n                          <span className=\"text-gray-300\">{selectedUser.phone}</span>\n                        </div>\n                      )}\n                      {selectedUser.location && (\n                        <div className=\"flex items-center space-x-3\">\n                          <MapPin className=\"h-4 w-4 text-gray-400\" />\n                          <span className=\"text-gray-300\">{selectedUser.location}</span>\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n\n                  <Card className=\"bg-gray-800 border-gray-700\">\n                    <CardHeader>\n                      <CardTitle className=\"text-lg text-white flex items-center\">\n                        <Calendar className=\"h-5 w-5 mr-2 text-primary\" />\n                        Account Information\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-3\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-400\">User ID:</span>\n                        <span className=\"text-gray-300 font-mono text-sm\">{selectedUser.id}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-400\">Account Type:</span>\n                        <Badge className={selectedUser.isAdmin ? \"bg-purple-900 text-purple-300\" : \"bg-green-900 text-green-300\"}>\n                          {selectedUser.isAdmin ? \"Administrator\" : \"Standard User\"}\n                        </Badge>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-400\">Member Since:</span>\n                        <span className=\"text-gray-300\">{formatDate(selectedUser.createdAt || new Date())}</span>\n                      </div>\n                      {selectedUser.updatedAt && (\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-400\">Last Updated:</span>\n                          <span className=\"text-gray-300\">{formatDate(selectedUser.updatedAt)}</span>\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                </div>\n\n                {/* Bio Section */}\n                {selectedUser.bio && (\n                  <Card className=\"bg-gray-800 border-gray-700\">\n                    <CardHeader>\n                      <CardTitle className=\"text-lg text-white\">Biography</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <p className=\"text-gray-300 leading-relaxed\">{selectedUser.bio}</p>\n                    </CardContent>\n                  </Card>\n                )}\n\n                {/* Stripe Information */}\n                {selectedUser.stripeCustomerId && (\n                  <Card className=\"bg-gray-800 border-gray-700\">\n                    <CardHeader>\n                      <CardTitle className=\"text-lg text-white flex items-center\">\n                        <Receipt className=\"h-5 w-5 mr-2 text-primary\" />\n                        Payment Information\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-400\">Stripe Customer ID:</span>\n                        <span className=\"text-gray-300 font-mono text-sm\">{selectedUser.stripeCustomerId}</span>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n\n                {/* Quick Actions */}\n                <Card className=\"bg-gray-800 border-gray-700\">\n                  <CardHeader>\n                    <CardTitle className=\"text-lg text-white\">Quick Actions</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"flex flex-wrap gap-3\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white\"\n                      >\n                        <Mail className=\"h-4 w-4 mr-2\" />\n                        Send Email\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"border-green-600 text-green-400 hover:bg-green-600 hover:text-white\"\n                      >\n                        <UserCheck className=\"h-4 w-4 mr-2\" />\n                        Toggle Admin\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"border-gray-600 text-gray-400 hover:bg-gray-600 hover:text-white\"\n                      >\n                        <Eye className=\"h-4 w-4 mr-2\" />\n                        View Activity\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </DialogContent>\n          </Dialog>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":61894},"client/src/pages/AuthPage.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Logo } from \"@/components/Logo\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\n\nexport default function AuthPage() {\n  const [, setLocation] = useLocation();\n  const { user, isLoading, loginMutation, registerMutation } = useAuth();\n  const { toast } = useToast();\n  \n  const [loginData, setLoginData] = useState({\n    usernameOrEmail: \"\",\n    password: \"\"\n  });\n  \n  const [registerData, setRegisterData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    phone: \"\",\n    userType: \"\"\n  });\n\n  // Redirect if already logged in\n  useEffect(() => {\n    if (!isLoading && user) {\n      setLocation(\"/\");\n    }\n  }, [isLoading, user, setLocation]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    loginMutation.mutate(loginData, {\n      onSuccess: () => {\n        setLocation(\"/\");\n      },\n      onError: (error) => {\n        console.error(\"Login failed:\", error);\n        toast({\n          title: \"Login Failed\",\n          description: error.message || \"An error occurred during login\",\n          variant: \"destructive\",\n        });\n      }\n    });\n  };\n\n  const handleRegister = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validate required fields\n    if (!registerData.username || !registerData.password || !registerData.phone) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Username, password, and phone number are required\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    // Validate password confirmation\n    if (registerData.password !== registerData.confirmPassword) {\n      toast({\n        title: \"Password Mismatch\",\n        description: \"Passwords do not match. Please try again.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    // Basic phone number validation\n    const phoneRegex = /^[\\+]?[1-9][\\d]{0,15}$/;\n    if (!phoneRegex.test(registerData.phone.replace(/[\\s\\-\\(\\)]/g, ''))) {\n      toast({\n        title: \"Invalid Phone Number\",\n        description: \"Please enter a valid phone number\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    try {\n      // Remove confirmPassword before sending to API\n      const { confirmPassword, ...registrationData } = registerData;\n      await registerMutation.mutateAsync(registrationData);\n      \n      // Guide user based on their selected type\n      if (registerData.userType === \"creator\") {\n        toast({\n          title: \"Welcome, Creator! 🎬\",\n          description: \"Ready to share your faith-based content? Let's set up your creator profile and get you started with sponsorship opportunities.\",\n        });\n        setLocation(\"/creator-profile\");\n      } else if (registerData.userType === \"business_owner\") {\n        toast({\n          title: \"Welcome, Business Owner! 💼\",\n          description: \"Time to connect with fellow Christian professionals. Let's create your business profile and explore networking opportunities.\",\n        });\n        setLocation(\"/business\");\n      } else if (registerData.userType === \"ministry\") {\n        toast({\n          title: \"Welcome to Ministry! ⛪\",\n          description: \"Called to serve? Let's help you connect with your community and organize impactful ministry events.\",\n        });\n        setLocation(\"/ministry-profile\");\n      } else {\n        // No user type selected - go to main feed\n        toast({\n          title: \"Welcome to Christ Collective! ✨\",\n          description: \"Explore our community and discover how you can make a difference through faith.\",\n        });\n        setLocation(\"/\");\n      }\n    } catch (error) {\n      console.error(\"Registration failed:\", error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-6xl grid lg:grid-cols-2 gap-8 items-center\">\n        {/* Left side - Auth forms */}\n        <div className=\"w-full max-w-md mx-auto\">\n          <div className=\"text-center mb-8\">\n            <Logo className=\"h-12 mx-auto mb-4\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">Welcome to Christ Collective</h1>\n            <p className=\"text-gray-600 mt-2\">Join our community of faith-driven individuals</p>\n          </div>\n\n          <Tabs defaultValue=\"login\" className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-2\">\n              <TabsTrigger value=\"login\">Sign In</TabsTrigger>\n              <TabsTrigger value=\"register\">Sign Up</TabsTrigger>\n            </TabsList>\n            \n            <TabsContent value=\"login\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Sign In</CardTitle>\n                  <CardDescription>\n                    Enter your credentials to access your account\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <form onSubmit={handleLogin} className=\"space-y-4\">\n                    <div>\n                      <Label htmlFor=\"login-username\">Username or Email</Label>\n                      <Input\n                        id=\"login-username\"\n                        type=\"text\"\n                        value={loginData.usernameOrEmail}\n                        onChange={(e) => setLoginData({ ...loginData, usernameOrEmail: e.target.value })}\n                        placeholder=\"Enter your username or email\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"login-password\">Password</Label>\n                      <Input\n                        id=\"login-password\"\n                        type=\"password\"\n                        value={loginData.password}\n                        onChange={(e) => setLoginData({ ...loginData, password: e.target.value })}\n                        placeholder=\"Enter your password\"\n                        required\n                      />\n                    </div>\n                    <Button \n                      type=\"submit\" \n                      className=\"w-full\" \n                      disabled={loginMutation.isPending}\n                    >\n                      {loginMutation.isPending ? \"Signing In...\" : \"Sign In\"}\n                    </Button>\n                  </form>\n                </CardContent>\n              </Card>\n            </TabsContent>\n            \n            <TabsContent value=\"register\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Create Account</CardTitle>\n                  <CardDescription>\n                    Join our community and start making a difference\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <form onSubmit={handleRegister} className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <Label htmlFor=\"firstName\">First Name *</Label>\n                        <Input\n                          id=\"firstName\"\n                          type=\"text\"\n                          value={registerData.firstName}\n                          onChange={(e) => setRegisterData({ ...registerData, firstName: e.target.value })}\n                          placeholder=\"First name\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <Label htmlFor=\"lastName\">Last Name *</Label>\n                        <Input\n                          id=\"lastName\"\n                          type=\"text\"\n                          value={registerData.lastName}\n                          onChange={(e) => setRegisterData({ ...registerData, lastName: e.target.value })}\n                          placeholder=\"Last name\"\n                          required\n                        />\n                      </div>\n                    </div>\n                    <div>\n                      <Label htmlFor=\"register-username\">Username *</Label>\n                      <Input\n                        id=\"register-username\"\n                        type=\"text\"\n                        value={registerData.username}\n                        onChange={(e) => setRegisterData({ ...registerData, username: e.target.value })}\n                        placeholder=\"Choose a username\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"email\">Email *</Label>\n                      <Input\n                        id=\"email\"\n                        type=\"email\"\n                        value={registerData.email}\n                        onChange={(e) => setRegisterData({ ...registerData, email: e.target.value })}\n                        placeholder=\"your@email.com\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"phone\">Phone Number *</Label>\n                      <Input\n                        id=\"phone\"\n                        type=\"tel\"\n                        value={registerData.phone}\n                        onChange={(e) => setRegisterData({ ...registerData, phone: e.target.value })}\n                        placeholder=\"(555) 123-4567\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"userType\">Are you a... (Optional)</Label>\n                      <Select \n                        value={registerData.userType} \n                        onValueChange={(value) => setRegisterData({ ...registerData, userType: value })}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select your role\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"creator\">\n                            Content Creator - Share your faith through content\n                          </SelectItem>\n                          <SelectItem value=\"business_owner\">\n                            Business Owner - Connect with Christian professionals  \n                          </SelectItem>\n                          <SelectItem value=\"ministry\">\n                            Ministry - Serve and lead your community\n                          </SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        Selecting your role helps us guide you to the right features after registration.\n                      </p>\n                    </div>\n                    <div>\n                      <Label htmlFor=\"register-password\">Password *</Label>\n                      <Input\n                        id=\"register-password\"\n                        type=\"password\"\n                        value={registerData.password}\n                        onChange={(e) => setRegisterData({ ...registerData, password: e.target.value })}\n                        placeholder=\"Create a password\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"confirm-password\">Confirm Password *</Label>\n                      <Input\n                        id=\"confirm-password\"\n                        type=\"password\"\n                        value={registerData.confirmPassword}\n                        onChange={(e) => setRegisterData({ ...registerData, confirmPassword: e.target.value })}\n                        placeholder=\"Confirm your password\"\n                        required\n                      />\n                    </div>\n                    <Button \n                      type=\"submit\" \n                      className=\"w-full\" \n                      disabled={registerMutation.isPending}\n                    >\n                      {registerMutation.isPending ? \"Creating Account...\" : \"Create Account\"}\n                    </Button>\n                  </form>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n\n        {/* Right side - Hero content */}\n        <div className=\"hidden lg:block\">\n          <div className=\"text-center space-y-6\">\n            <h2 className=\"text-4xl font-bold text-gray-900\">\n              Unite in Faith, <span className=\"text-primary\">Grow Together</span>\n            </h2>\n            <p className=\"text-xl text-gray-600 max-w-lg mx-auto\">\n              Join a community where faith meets action. Support causes you believe in, connect with like-minded businesses, and make a lasting impact.\n            </p>\n            <div className=\"grid grid-cols-1 gap-4 max-w-md mx-auto mt-8\">\n              <div className=\"bg-white rounded-lg p-6 border-2 border-primary shadow-[0_0_20px_rgba(255,215,0,0.3)]\">\n                <h3 className=\"font-semibold text-gray-900 mb-2\">Support Causes</h3>\n                <p className=\"text-gray-600 text-sm\">Donate to verified campaigns and see your impact grow</p>\n              </div>\n              <div className=\"bg-white rounded-lg p-6 border-2 border-primary shadow-[0_0_20px_rgba(255,215,0,0.3)]\">\n                <h3 className=\"font-semibold text-gray-900 mb-2\">Network & Connect</h3>\n                <p className=\"text-gray-600 text-sm\">Build meaningful relationships with Christian businesses</p>\n              </div>\n              <div className=\"bg-white rounded-lg p-6 border-2 border-primary shadow-[0_0_20px_rgba(255,215,0,0.3)]\">\n                <h3 className=\"font-semibold text-gray-900 mb-2\">Create Content</h3>\n                <p className=\"text-gray-600 text-sm\">Share your faith journey and get sponsored</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":14838},"client/src/pages/AuthTestPage.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useLocation } from \"wouter\";\n\nexport default function AuthTestPage() {\n  const [username, setUsername] = useState(\"admin\");\n  const [password, setPassword] = useState(\"admin123\");\n  const [status, setStatus] = useState<string>(\"\");\n  const [user, setUser] = useState<any>(null);\n  const [, navigate] = useLocation();\n\n  const testLogin = async () => {\n    try {\n      setStatus(\"Logging in...\");\n      const response = await fetch(\"/api/login\", {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ usernameOrEmail: username, password }),\n      });\n\n      if (response.ok) {\n        const userData = await response.json();\n        setUser(userData);\n        setStatus(\"Login successful!\");\n      } else {\n        setStatus(\"Login failed\");\n      }\n    } catch (error) {\n      setStatus(\"Login error: \" + error);\n    }\n  };\n\n  const testAuthStatus = async () => {\n    try {\n      setStatus(\"Checking auth...\");\n      const response = await fetch(\"/api/user\", {\n        method: \"GET\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n\n      if (response.ok) {\n        const userData = await response.json();\n        setUser(userData);\n        setStatus(\"Authenticated!\");\n      } else {\n        setUser(null);\n        setStatus(\"Not authenticated (401)\");\n      }\n    } catch (error) {\n      setStatus(\"Auth check error: \" + error);\n    }\n  };\n\n  const testSponsorshipNavigation = async () => {\n    try {\n      setStatus(\"Checking auth for sponsorship...\");\n      const response = await fetch(\"/api/user\", {\n        method: \"GET\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n\n      if (response.ok) {\n        const userData = await response.json();\n        if (userData && userData.id) {\n          setStatus(\"Auth confirmed, navigating to sponsorship page...\");\n          navigate(\"/sponsorship-application\");\n        } else {\n          setStatus(\"No user data, going to auth page...\");\n          navigate(\"/auth\");\n        }\n      } else {\n        setStatus(\"Not authenticated, going to auth page...\");\n        navigate(\"/auth\");\n      }\n    } catch (error) {\n      setStatus(\"Navigation check error: \" + error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-8\">\n      <Card className=\"max-w-md mx-auto\">\n        <CardHeader>\n          <CardTitle>Authentication Test</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Input\n              placeholder=\"Username\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n            <Input\n              type=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Button onClick={testLogin} className=\"w-full\">\n              Test Login\n            </Button>\n            <Button onClick={testAuthStatus} variant=\"outline\" className=\"w-full\">\n              Check Auth Status\n            </Button>\n            <Button onClick={testSponsorshipNavigation} variant=\"secondary\" className=\"w-full\">\n              Test Sponsorship Navigation\n            </Button>\n          </div>\n\n          <div className=\"p-3 bg-gray-100 rounded text-sm\">\n            <strong>Status:</strong> {status}\n          </div>\n\n          {user && (\n            <div className=\"p-3 bg-green-100 rounded text-sm\">\n              <strong>User:</strong> {user.username} ({user.email})\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":4073},"client/src/pages/BusinessNetworkPage.tsx":{"content":"import { useState } from \"react\";\nimport { Link } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, Users, Briefcase, MapPin, Mail, ExternalLink, Eye, Globe } from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Helmet } from \"react-helmet\";\n\ntype BusinessProfile = {\n  id: number;\n  companyName: string;\n  industry: string;\n  description: string;\n  logo?: string;\n  location: string;\n  networkingGoals?: string;\n  user: {\n    firstName?: string;\n    lastName?: string;\n    profileImageUrl?: string;\n  };\n};\n\ntype MembershipTier = {\n  id: number;\n  name: string;\n  price: string;\n  description: string;\n  features: string[];\n};\n\nexport default function BusinessNetworkPage() {\n  const { user } = useAuth();\n  const isAuthenticated = !!user;\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [industryFilter, setIndustryFilter] = useState(\"\");\n  \n  // Fetch business profiles\n  const { data: profiles = [], isLoading: isLoadingProfiles } = useQuery({\n    queryKey: [\"/api/business-profiles\"],\n  });\n  \n  // Fetch membership tiers\n  const { data: membershipTiers = [], isLoading: isLoadingTiers } = useQuery({\n    queryKey: [\"/api/membership-tiers\"],\n  });\n  \n  // Fetch live statistics\n  const { data: statistics, isLoading: isLoadingStats } = useQuery({\n    queryKey: [\"/api/statistics\"],\n  });\n  \n  // Default membership tiers if API fails or while loading\n  const defaultTiers: MembershipTier[] = [\n    {\n      id: 1,\n      name: \"Basic Membership\",\n      price: \"9\",\n      description: \"Perfect for startups and small businesses\",\n      features: [\n        \"Basic profile in our business directory\",\n        \"Access to monthly virtual networking events\",\n        \"Join industry-specific groups\",\n        \"Email support\"\n      ]\n    },\n    {\n      id: 2,\n      name: \"Professional Membership\",\n      price: \"29\",\n      description: \"For established businesses and professionals\",\n      features: [\n        \"Enhanced profile with portfolio showcase\",\n        \"Priority access to all networking events\",\n        \"1:1 business matchmaking service\",\n        \"Access to exclusive resources and training\",\n        \"Priority support\"\n      ]\n    },\n    {\n      id: 3,\n      name: \"Executive Membership\",\n      price: \"99\",\n      description: \"For industry leaders and executives\",\n      features: [\n        \"Premium featured profile with brand spotlight\",\n        \"VIP access to all events including exclusive executive roundtables\",\n        \"Dedicated business advisor\",\n        \"Opportunity to host and speak at events\",\n        \"All Professional benefits plus executive coaching sessions\"\n      ]\n    }\n  ];\n  \n  // Use API data if available, otherwise use default tiers\n  const tiers = Array.isArray(membershipTiers) && membershipTiers.length > 0 ? membershipTiers : defaultTiers;\n  \n  // Get unique industries for filter\n  const industries = Array.from(new Set(\n    Array.isArray(profiles) \n      ? profiles.map((p: BusinessProfile) => p.industry).filter(Boolean)\n      : []\n  ));\n  \n  // Filter and search profiles\n  const filteredProfiles = Array.isArray(profiles) ? profiles.filter((profile: BusinessProfile) => {\n    const matchesSearch = !searchQuery || \n      profile.companyName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      profile.description?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      profile.location?.toLowerCase().includes(searchQuery.toLowerCase());\n      \n    const matchesIndustry = !industryFilter || profile.industry?.toLowerCase().includes(industryFilter.toLowerCase());\n    \n    return matchesSearch && matchesIndustry;\n  }) : [];\n  \n  return (\n    <>\n      <Helmet>\n        <title>Business Network - Christ Collective</title>\n        <meta name=\"description\" content=\"Connect with Christian business owners and professionals who share your values through Christ Collective.\" />\n      </Helmet>\n      \n      <div className=\"min-h-screen bg-black text-white\">\n        {/* Header */}\n        <div className=\"bg-black py-16\">\n          <div className=\"max-w-6xl mx-auto px-4 text-center\">\n            <h1 className=\"text-4xl md:text-5xl font-bold text-white mb-4\">\n              Christian Business Network\n            </h1>\n            <p className=\"text-xl text-gray-300 mb-8 max-w-3xl mx-auto\">\n              Connect with Christian business owners and professionals who share your values. Build meaningful relationships and grow your network in our faith-centered community.\n            </p>\n            \n            {/* Search and Filter */}\n            <div className=\"max-w-2xl mx-auto space-y-4\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                <Input\n                  placeholder=\"Search businesses by name, location, or description...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 bg-gray-800 border-gray-700 text-white placeholder-gray-400\"\n                />\n              </div>\n              \n              <div className=\"flex flex-wrap gap-2 justify-center\">\n                <Button\n                  variant={industryFilter === \"\" ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => setIndustryFilter(\"\")}\n                  className=\"text-xs\"\n                >\n                  All Industries\n                </Button>\n                {industries.slice(0, 6).map((industry) => (\n                  <Button\n                    key={industry}\n                    variant={industryFilter === industry ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => setIndustryFilter(industry === industryFilter ? \"\" : industry)}\n                    className=\"text-xs\"\n                  >\n                    {industry}\n                  </Button>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Business Grid */}\n        <div className=\"bg-white\">\n          <div className=\"max-w-6xl mx-auto px-4 py-12\">\n            {isLoadingProfiles ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[...Array(9)].map((_, i) => (\n                <Card key={i} className=\"bg-black border-gray-800\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"animate-pulse\">\n                      <div className=\"h-16 w-16 bg-gray-700 rounded-full mb-4 mx-auto\"></div>\n                      <div className=\"h-4 bg-gray-700 rounded w-3/4 mb-2 mx-auto\"></div>\n                      <div className=\"h-3 bg-gray-700 rounded w-1/2 mb-4 mx-auto\"></div>\n                      <div className=\"space-y-2\">\n                        <div className=\"h-3 bg-gray-700 rounded\"></div>\n                        <div className=\"h-3 bg-gray-700 rounded w-5/6\"></div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : filteredProfiles.length === 0 ? (\n            <div className=\"text-center py-16\">\n              <Briefcase className=\"h-16 w-16 text-gray-600 mx-auto mb-4\" />\n              <h3 className=\"text-xl font-semibold text-black mb-2\">\n                {searchQuery || industryFilter ? \"No businesses found\" : \"No businesses yet\"}\n              </h3>\n              <p className=\"text-gray-600 mb-6\">\n                {searchQuery || industryFilter \n                  ? \"Try adjusting your search or filter criteria\" \n                  : \"Be the first to add your business to our community\"\n                }\n              </p>\n              {!searchQuery && !industryFilter && (\n                <Button className=\"bg-primary hover:bg-primary/90\">\n                  Add Your Business\n                </Button>\n              )}\n            </div>\n          ) : (\n            <>\n\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {filteredProfiles.map((profile: BusinessProfile) => (\n                  <Card key={profile.id} className=\"bg-black border-gray-800 hover:bg-gray-900 transition-all duration-300 flex flex-col h-full\">\n                    <CardHeader className=\"text-center pb-4\">\n                      <Avatar className=\"h-20 w-20 mx-auto mb-4\">\n                        <AvatarImage src={profile.logo} alt={profile.companyName} />\n                        <AvatarFallback className=\"bg-primary text-black text-2xl font-bold\">\n                          {profile.companyName?.charAt(0) || 'B'}\n                        </AvatarFallback>\n                      </Avatar>\n                      \n                      <CardTitle className=\"text-white text-lg\">{profile.companyName}</CardTitle>\n                      <CardDescription className=\"text-gray-400\">\n                        <div className=\"flex flex-wrap gap-2 justify-center mt-2\">\n                          {profile.industry && (\n                            <Badge variant=\"outline\" className=\"text-xs bg-blue-900/30 border-blue-600 text-blue-300\">\n                              {profile.industry}\n                            </Badge>\n                          )}\n                        </div>\n                      </CardDescription>\n                    </CardHeader>\n                    \n                    <CardContent className=\"pt-0 flex flex-col flex-1\">\n                      <p className=\"text-gray-300 text-sm mb-4 line-clamp-3 leading-relaxed\">\n                        {profile.description}\n                      </p>\n                      \n                      <div className=\"space-y-2 mb-4 flex-1\">\n                        {profile.location && (\n                          <div className=\"flex items-center text-xs text-gray-400\">\n                            <MapPin className=\"h-3 w-3 mr-2 text-primary\" />\n                            <span className=\"truncate\">{profile.location}</span>\n                          </div>\n                        )}\n                        {profile.user?.firstName && profile.user?.lastName && (\n                          <div className=\"flex items-center text-xs text-gray-400\">\n                            <Users className=\"h-3 w-3 mr-2 text-primary\" />\n                            <span className=\"truncate\">{profile.user.firstName} {profile.user.lastName}</span>\n                          </div>\n                        )}\n                      </div>\n                      \n                      <div className=\"flex gap-2 mt-auto\">\n                        <Link href={`/business/profile/${profile.id}`} className=\"flex-1\">\n                          <Button \n                            size=\"sm\" \n                            className=\"w-full bg-primary hover:bg-primary/90\"\n                          >\n                            <Eye className=\"h-4 w-4 mr-2\" />\n                            View Profile\n                          </Button>\n                        </Link>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </>\n          )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":11602},"client/src/pages/BusinessProfilePage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useParams } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { MapPin, Globe, Phone, Mail, Calendar, Users, Star } from \"lucide-react\";\nimport { BusinessProfile } from \"@shared/schema\";\n\nexport default function BusinessProfilePage() {\n  const { id } = useParams();\n\n  const { data: profile, isLoading, error } = useQuery<BusinessProfile>({\n    queryKey: [\"/api/business-profiles\", id],\n    queryFn: async () => {\n      const response = await fetch(`/api/business-profiles/${id}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch business profile');\n      }\n      return response.json();\n    },\n    enabled: !!id,\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100\">\n        <div className=\"container mx-auto px-4 py-12\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"animate-pulse space-y-8\">\n              <div className=\"h-8 bg-slate-200 rounded w-1/3\"></div>\n              <div className=\"space-y-4\">\n                <div className=\"h-4 bg-slate-200 rounded w-full\"></div>\n                <div className=\"h-4 bg-slate-200 rounded w-2/3\"></div>\n                <div className=\"h-4 bg-slate-200 rounded w-1/2\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !profile) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100\">\n        <div className=\"container mx-auto px-4 py-12\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            <h1 className=\"text-2xl font-bold text-slate-900 mb-4\">Business Profile Not Found</h1>\n            <p className=\"text-slate-600 mb-8\">The business profile you're looking for doesn't exist or has been removed.</p>\n            <Button onClick={() => window.history.back()}>Go Back</Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100\">\n      \n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"max-w-4xl mx-auto space-y-8\">\n          \n          {/* Header Section */}\n          <Card className=\"border-0 shadow-xl bg-white/80 backdrop-blur-sm\">\n            <CardHeader className=\"pb-6\">\n              <div className=\"flex flex-col md:flex-row gap-6 items-start\">\n                <Avatar className=\"h-24 w-24 border-4 border-white shadow-lg\">\n                  <AvatarImage src={profile?.logo || undefined} alt={profile?.companyName} />\n                  <AvatarFallback className=\"bg-gradient-to-br from-amber-400 to-amber-600 text-white text-xl font-bold\">\n                    {profile?.companyName?.charAt(0) || \"B\"}\n                  </AvatarFallback>\n                </Avatar>\n                \n                <div className=\"flex-1\">\n                  <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n                    <div>\n                      <CardTitle className=\"text-3xl font-bold text-slate-900 mb-2\">{profile?.companyName || \"Business Name\"}</CardTitle>\n                      <CardDescription className=\"text-lg text-slate-600\">{profile?.industry || \"Industry\"}</CardDescription>\n                    </div>\n                    \n                    <div className=\"flex flex-wrap gap-2\">\n                      <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800 border-green-200\">\n                        <Users className=\"w-3 h-3 mr-1\" />\n                        Active Member\n                      </Badge>\n                      {(profile as any)?.membershipTier && (\n                        <Badge variant=\"outline\" className=\"bg-amber-50 text-amber-800 border-amber-200\">\n                          <Star className=\"w-3 h-3 mr-1\" />\n                          {(profile as any).membershipTier.name}\n                        </Badge>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardHeader>\n          </Card>\n\n          {/* Company Description */}\n          {profile.description && (\n            <Card className=\"border-0 shadow-lg bg-white/60 backdrop-blur-sm\">\n              <CardHeader>\n                <CardTitle className=\"text-xl font-semibold text-slate-900\">About {profile.companyName}</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-slate-700 leading-relaxed\">{profile.description}</p>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Contact Information */}\n          <Card className=\"border-0 shadow-lg bg-white/60 backdrop-blur-sm\">\n            <CardHeader>\n              <CardTitle className=\"text-xl font-semibold text-slate-900\">Contact Information</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                {profile.website && (\n                  <div className=\"flex items-center gap-3\">\n                    <Globe className=\"w-5 h-5 text-slate-500\" />\n                    <a \n                      href={profile.website.startsWith('http') ? profile.website : `https://${profile.website}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-blue-600 hover:text-blue-800 transition-colors\"\n                    >\n                      {profile.website}\n                    </a>\n                  </div>\n                )}\n                \n                {profile?.phone && (\n                  <div className=\"flex items-center gap-3\">\n                    <Phone className=\"w-5 h-5 text-slate-500\" />\n                    <a href={`tel:${profile.phone}`} className=\"text-slate-700 hover:text-slate-900 transition-colors\">\n                      {profile.phone}\n                    </a>\n                  </div>\n                )}\n                \n                {profile?.email && (\n                  <div className=\"flex items-center gap-3\">\n                    <Mail className=\"w-5 h-5 text-slate-500\" />\n                    <a href={`mailto:${profile.email}`} className=\"text-slate-700 hover:text-slate-900 transition-colors\">\n                      {profile.email}\n                    </a>\n                  </div>\n                )}\n                \n                {profile.location && (\n                  <div className=\"flex items-center gap-3\">\n                    <MapPin className=\"w-5 h-5 text-slate-500\" />\n                    <span className=\"text-slate-700\">{profile.location}</span>\n                  </div>\n                )}\n              </div>\n              \n              {profile.createdAt && (\n                <div className=\"pt-4 border-t border-slate-200\">\n                  <div className=\"flex items-center gap-3 text-sm text-slate-500\">\n                    <Calendar className=\"w-4 h-4\" />\n                    <span>Member since {new Date(profile.createdAt).toLocaleDateString('en-US', { year: 'numeric', month: 'long' })}</span>\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Services */}\n          {profile?.services && profile.services.length > 0 && (\n            <Card className=\"border-0 shadow-lg bg-white/60 backdrop-blur-sm\">\n              <CardHeader>\n                <CardTitle className=\"text-xl font-semibold text-slate-900\">Services</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex flex-wrap gap-2\">\n                  {profile.services.map((service: string, index: number) => (\n                    <Badge key={index} variant=\"outline\" className=\"bg-slate-50 text-slate-700 border-slate-300\">\n                      {service}\n                    </Badge>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Contact CTA */}\n          <Card className=\"border-0 shadow-lg bg-gradient-to-r from-amber-50 to-amber-100 border-amber-200\">\n            <CardContent className=\"pt-6\">\n              <div className=\"text-center space-y-4\">\n                <h3 className=\"text-xl font-semibold text-slate-900\">Ready to Connect?</h3>\n                <p className=\"text-slate-600\">Reach out to {profile.companyName} to explore collaboration opportunities.</p>\n                <div className=\"flex flex-wrap justify-center gap-3\">\n                  {profile.email && (\n                    <Button className=\"bg-amber-600 hover:bg-amber-700 text-white\">\n                      <Mail className=\"w-4 h-4 mr-2\" />\n                      Send Email\n                    </Button>\n                  )}\n                  {profile.website && (\n                    <Button variant=\"outline\" className=\"border-amber-300 text-amber-700 hover:bg-amber-50\">\n                      <Globe className=\"w-4 h-4 mr-2\" />\n                      Visit Website\n                    </Button>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":9536},"client/src/pages/CampaignDetailsPage.tsx":{"content":"import { useParams, Link, useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Card, \n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { \n  Avatar, \n  AvatarFallback, \n  AvatarImage \n} from \"@/components/ui/avatar\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { CalendarDays, Share2, Heart, Users, ImageIcon, PlayIcon, X } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { Helmet } from \"react-helmet\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState, useEffect } from \"react\";\nimport type { Campaign, Donation } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogTrigger,\n  DialogClose\n} from \"@/components/ui/dialog\";\nimport DonationSuccessPage from \"./DonationSuccessPage\";\n\nexport default function CampaignDetailsPage() {\n  const { slug } = useParams();\n  const [, navigate] = useLocation();\n  const [selectedMedia, setSelectedMedia] = useState<string | null>(null);\n  const [mediaType, setMediaType] = useState<'image' | 'video'>('image');\n  const [videoThumbnail, setVideoThumbnail] = useState<string | null>(null);\n  const { toast } = useToast();\n\n  // Check for success parameter and redirect to success page\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const isSuccess = urlParams.get('success') === 'true';\n    const paymentIntent = urlParams.get('payment_intent');\n    const campaignId = urlParams.get('campaignId');\n    \n    if (isSuccess && paymentIntent && campaignId) {\n      // Render the success page instead of campaign details\n      return;\n    }\n  }, []);\n\n  // If this is a success redirect, render the success page\n  const urlParams = new URLSearchParams(window.location.search);\n  const isSuccess = urlParams.get('success') === 'true';\n  const paymentIntent = urlParams.get('payment_intent');\n  const campaignId = urlParams.get('campaignId');\n  \n  if (isSuccess && paymentIntent && campaignId) {\n    return <DonationSuccessPage />;\n  }\n\n  const { data: campaign = {} as Campaign, isLoading: isLoadingCampaign } = useQuery<Campaign>({\n    queryKey: [`/api/campaigns/${slug}`],\n  });\n\n  const { data: donations = [], isLoading: isLoadingDonations } = useQuery<Donation[]>({\n    queryKey: [campaign && 'id' in campaign ? `/api/campaigns/${campaign.id}/donations` : null],\n    enabled: !!(campaign && 'id' in campaign),\n  });\n\n  function calculateProgress(current: string, goal: string): number {\n    const currentAmount = parseFloat(current) || 0;\n    const goalAmount = parseFloat(goal) || 1;\n    const percentage = (currentAmount / goalAmount) * 100;\n    return Math.min(percentage, 100);\n  }\n\n  function formatCurrency(amount: string): string {\n    const value = parseFloat(amount) || 0;\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n    }).format(value);\n  }\n\n  const generateVideoThumbnail = (videoUrl: string): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const video = document.createElement('video');\n      video.muted = true;\n      video.playsInline = true;\n      video.currentTime = 0.5; // Capture frame at 0.5 seconds\n\n      video.onloadedmetadata = () => {\n        video.currentTime = 0.5;\n      };\n\n      video.onseeked = () => {\n        const canvas = document.createElement('canvas');\n        canvas.width = video.videoWidth || 320;\n        canvas.height = video.videoHeight || 240;\n\n        const ctx = canvas.getContext('2d');\n        if (ctx) {\n          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n          const thumbnail = canvas.toDataURL('image/jpeg', 0.8);\n          resolve(thumbnail);\n        } else {\n          reject(new Error('Could not get canvas context'));\n        }\n      };\n\n      video.onerror = () => reject(new Error('Video load error'));\n      video.onabort = () => reject(new Error('Video load aborted'));\n      video.src = videoUrl;\n      video.load();\n    });\n  };\n\n  useEffect(() => {\n    if (campaign.video) {\n      generateVideoThumbnail(campaign.video)\n        .then(thumbnail => {\n          setVideoThumbnail(thumbnail);\n          // If there's no image, default to showing video\n          if (!campaign.image) {\n            setMediaType('video');\n            setSelectedMedia(campaign.video);\n          }\n        })\n        .catch(error => console.error('Error generating video thumbnail:', error));\n    }\n  }, [campaign.video, campaign.image]);\n\n  const handleShare = async () => {\n    const url = window.location.href;\n\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: campaign.title,\n          text: campaign.description,\n          url: url,\n        });\n      } catch (error) {\n        // User cancelled sharing, do nothing\n      }\n    } else {\n      // Fallback to clipboard\n      try {\n        await navigator.clipboard.writeText(url);\n        toast({\n          title: \"Link copied!\",\n          description: \"Campaign link has been copied to your clipboard.\",\n        });\n      } catch (error) {\n        toast({\n          title: \"Unable to copy link\",\n          description: \"Please copy the URL from your browser's address bar.\",\n          variant: \"destructive\",\n        });\n      }\n    }\n  };\n\n  if (isLoadingCampaign) {\n    return (\n      <div className=\"container mx-auto px-4 py-16\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-10 bg-gray-200 rounded mb-4 w-3/4\" />\n            <div className=\"w-full h-64 bg-gray-200 rounded-lg mb-6\" />\n            <div className=\"h-6 bg-gray-200 rounded mb-2 w-1/2\" />\n            <div className=\"h-4 bg-gray-100 rounded mb-2 w-full\" />\n            <div className=\"h-4 bg-gray-100 rounded mb-2 w-full\" />\n            <div className=\"h-4 bg-gray-100 rounded mb-4 w-3/4\" />\n            <div className=\"w-full bg-gray-200 rounded-full h-3 mb-6\" />\n            <div className=\"h-10 bg-gray-200 rounded w-40\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!campaign) {\n    return (\n      <div className=\"container mx-auto px-4 py-16\">\n        <div className=\"max-w-4xl mx-auto text-center\">\n          <h1 className=\"text-2xl font-bold mb-4\">Campaign Not Found</h1>\n          <p className=\"text-gray-300 mb-6\">The campaign you're looking for doesn't exist or has been removed.</p>\n          <Link href=\"/donate\">\n            <button className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\n              Browse Campaigns\n            </button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>{campaign.title} - Christ Collective</title>\n        <meta name=\"description\" content={campaign.description.substring(0, 160)} />\n        <meta property=\"og:title\" content={`${campaign.title} - Christ Collective`} />\n        <meta property=\"og:description\" content={campaign.description.substring(0, 160)} />\n        <meta property=\"og:type\" content=\"website\" />\n      </Helmet>\n\n      <section className=\"bg-white\">\n        <div className=\"container mx-auto px-4 py-16\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Link href=\"/donate\" className=\"text-primary hover:text-primary/80 inline-flex items-center mb-6 font-medium\">\n              ← Back to All Campaigns\n            </Link>\n\n            <h1 className=\"text-3xl md:text-4xl font-bold mb-6 text-black\">{campaign.title}</h1>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-10\">\n            <div className=\"md:col-span-2\">\n              {/* Main media display (image or video) */}\n              <div className=\"mb-4\">\n                {(campaign.image || campaign.video) ? (\n                  <Dialog>\n                    <DialogTrigger asChild>\n                      <div className=\"cursor-pointer relative\">\n                        {/* Show video thumbnail if video exists and no image, or if video is selected */}\n                        {campaign.video && (!campaign.image || mediaType === 'video') && videoThumbnail ? (\n                          <img \n                            src={mediaType === 'video' && selectedMedia === campaign.video ? videoThumbnail : (videoThumbnail || campaign.image)} \n                            alt={campaign.title} \n                            className=\"w-full h-auto rounded-lg object-cover aspect-video\"\n                          />\n                        ) : campaign.image ? (\n                          <img \n                            src={selectedMedia || campaign.image} \n                            alt={campaign.title} \n                            className=\"w-full h-auto rounded-lg object-cover aspect-video\"\n                          />\n                        ) : (\n                          <div className=\"w-full h-64 bg-gray-800 rounded-lg flex items-center justify-center\">\n                            <PlayIcon size={64} className=\"text-gray-400\" />\n                          </div>\n                        )}\n\n                        {(mediaType === 'video' || (campaign.video && !campaign.image)) && (\n                          <div className=\"absolute inset-0 flex items-center justify-center bg-black/30 rounded-lg\">\n                            <PlayIcon size={64} className=\"text-white\" />\n                          </div>\n                        )}\n                      </div>\n                    </DialogTrigger>\n                    <DialogContent className=\"sm:max-w-4xl bg-gray-900 border-gray-800\">\n                      <DialogClose className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n                        <X className=\"h-4 w-4 text-white\" />\n                        <span className=\"sr-only\">Close</span>\n                      </DialogClose>\n                      {mediaType === 'image' ? (\n                        <img \n                          src={selectedMedia || campaign.image} \n                          alt={campaign.title} \n                          className=\"w-full h-auto max-h-[80vh] object-contain\"\n                        />\n                      ) : (\n                        <video\n                          src={selectedMedia || campaign.video}\n                          controls\n                          className=\"w-full h-auto max-h-[80vh]\"\n                        >\n                          Your browser does not support the video tag.\n                        </video>\n                      )}\n                    </DialogContent>\n                  </Dialog>\n                ) : (\n                  <div className=\"w-full h-64 bg-gray-800 rounded-lg flex items-center justify-center mb-6\">\n                    <ImageIcon size={64} className=\"text-gray-400\" />\n                  </div>\n                )}\n              </div>\n\n              {/* Media gallery (additional images and video) */}\n              <div className=\"grid grid-cols-6 gap-2 mb-6\">\n                {/* Main image thumbnail */}\n                {campaign.image && (\n                  <div \n                    className={`relative rounded-md overflow-hidden cursor-pointer aspect-square ${selectedMedia === campaign.image || (!selectedMedia && mediaType === 'image') ? 'ring-2 ring-primary' : ''}`}\n                    onClick={() => {\n                      setSelectedMedia(campaign.image);\n                      setMediaType('image');\n                    }}\n                  >\n                    <img \n                      src={campaign.image} \n                      alt={`${campaign.title} - main`} \n                      className=\"w-full h-full object-cover\"\n                    />\n                  </div>\n                )}\n\n                {/* Additional images thumbnails */}\n                {campaign.additionalImages && campaign.additionalImages.length > 0 && campaign.additionalImages.map((img: string, idx: number) => (\n                  <div \n                    key={`img-${idx}`}\n                    className={`relative rounded-md overflow-hidden cursor-pointer aspect-square ${selectedMedia === img ? 'ring-2 ring-primary' : ''}`}\n                    onClick={() => {\n                      setSelectedMedia(img);\n                      setMediaType('image');\n                    }}\n                  >\n                    <img \n                      src={img} \n                      alt={`${campaign.title} - ${idx + 1}`} \n                      className=\"w-full h-full object-cover\"\n                    />\n                  </div>\n                ))}\n\n                {/* Video thumbnail (if available) */}\n                {campaign.video && (\n                  <div \n                    className={`relative rounded-md overflow-hidden cursor-pointer aspect-square ${mediaType === 'video' ? 'ring-2 ring-primary' : ''}`}\n                    onClick={() => {\n                      setSelectedMedia(campaign.video);\n                      setMediaType('video');\n                    }}\n                  >\n                    {videoThumbnail ? (\n                      <img \n                        src={videoThumbnail} \n                        alt={`${campaign.title} - video`} \n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full bg-gray-800 flex items-center justify-center\">\n                        <PlayIcon className=\"text-gray-400\" size={24} />\n                      </div>\n                    )}\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\n                      <PlayIcon size={32} className=\"text-white drop-shadow-lg\" />\n                    </div>\n                    <div className=\"absolute bottom-1 right-1 bg-primary text-primary-foreground text-xs p-1 rounded\">\n                      Video\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"prose max-w-none\">\n                <h2 className=\"text-2xl font-semibold mb-4 text-black\">About this campaign</h2>\n                <p className=\"whitespace-pre-line text-gray-600\">{campaign.description}</p>\n              </div>\n            </div>\n\n            <div className=\"space-y-6\">\n              <Card className=\"rounded-2xl\">\n                <CardHeader className=\"pb-2 bg-black rounded-t-2xl\">\n                  <CardTitle className=\"text-2xl text-black dark:text-white\">\n                    {formatCurrency(campaign.currentAmount)}\n                  </CardTitle>\n                  <CardDescription className=\"text-gray-700 dark:text-gray-300\">\n                    raised of {formatCurrency(campaign.goal)} goal\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"bg-black rounded-b-2xl\">\n                  <Progress \n                    value={calculateProgress(campaign.currentAmount, campaign.goal)} \n                    className=\"h-2.5 mb-4\" \n                  />\n\n                  <div className=\"flex justify-between text-sm text-gray-700 dark:text-gray-300 mb-6\">\n                    <div className=\"flex items-center\">\n                      <Users className=\"mr-1\" size={16} />\n                      <span>{donations.length} donors</span>\n                    </div>\n                    <div className=\"flex items-center\">\n                      <CalendarDays className=\"mr-1\" size={16} />\n                      <span>\n                        {campaign.createdAt ? format(new Date(campaign.createdAt), \"MMM d, yyyy\") : \"\"}\n                      </span>\n                    </div>\n                  </div>\n\n                  <Link href={`/donate/checkout/${campaign.id}`}>\n                    <button className=\"w-full mb-3 inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\n                      Donate Now\n                    </button>\n                  </Link>\n\n                  <div className=\"flex space-x-2\">\n                    <Button variant=\"outline\" className=\"flex-1 flex items-center justify-center\">\n                      <Heart className=\"mr-2\" size={16} />\n                      Save\n                    </Button>\n                    <Button variant=\"outline\" className=\"flex-1 flex items-center justify-center\" onClick={handleShare}>\n                      <Share2 className=\"mr-2\" size={16} />\n                      Share\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"rounded-2xl\">\n                <CardHeader className=\"bg-black rounded-t-2xl\">\n                  <CardTitle>Creator</CardTitle>\n                </CardHeader>\n                <CardContent className=\"flex items-center bg-black rounded-b-2xl\">\n                  <Avatar className=\"h-10 w-10 mr-4\">\n                    <AvatarImage \n                      src={campaign.user?.profileImageUrl} \n                      alt={campaign.user?.firstName || \"Campaign Creator\"} \n                    />\n                    <AvatarFallback>\n                      {campaign.user?.firstName?.[0] || \"C\"}\n                    </AvatarFallback>\n                  </Avatar>\n                  <div>\n                    <h3 className=\"font-medium\">\n                      {campaign.user?.firstName \n                        ? `${campaign.user.firstName} ${campaign.user.lastName || ''}`\n                        : \"Campaign Creator\"}\n                    </h3>\n                    <p className=\"text-sm text-gray-800 dark:text-gray-300\">\n                      {campaign.user?.location || \"Christ Collective Member\"}\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n\n          <div className=\"mb-10\">\n            <h2 className=\"text-2xl font-semibold mb-6 text-black\">Recent Donations</h2>\n\n            {isLoadingDonations ? (\n              <div className=\"space-y-4\">\n                {[1, 2, 3].map((i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <CardContent className=\"p-4 flex items-center\">\n                      <div className=\"w-10 h-10 bg-gray-200 rounded-full mr-4\" />\n                      <div className=\"flex-1\">\n                        <div className=\"h-4 bg-gray-200 rounded w-1/4 mb-2\" />\n                        <div className=\"h-3 bg-gray-100 rounded w-3/4\" />\n                      </div>\n                      <div className=\"h-5 bg-gray-200 rounded w-20\" />\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : donations.length > 0 ? (\n              <div className=\"space-y-4\">\n                {donations.map((donation: any) => (\n                  <Card key={donation.id}>\n                    <CardContent className=\"p-4 flex items-center\">\n                      <Avatar className=\"h-10 w-10 mr-4\">\n                        <AvatarImage \n                          src={donation.user?.profileImageUrl} \n                          alt={donation.isAnonymous ? \"Anonymous\" : (donation.user?.firstName || \"Donor\")}\n                        />\n                        <AvatarFallback>\n                          {donation.isAnonymous \n                            ? \"A\" \n                            : (donation.user?.firstName?.[0] || \"D\")}\n                        </AvatarFallback>\n                      </Avatar>\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-medium\">\n                          {donation.isAnonymous\n                            ? \"Anonymous\"\n                            : (donation.user?.firstName\n                              ? `${donation.user.firstName} ${donation.user.lastName || ''}`\n                              : \"Generous Donor\")}\n                        </h3>\n                      </div>\n                      <div className=\"font-medium\">{formatCurrency(donation.amount)}</div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <Card className=\"rounded-2xl\">\n                <CardContent className=\"p-6 text-center bg-black rounded-2xl\">\n                  <p className=\"text-gray-300 mb-4\">No donations yet. Be the first to contribute!</p>\n                  <Link href={`/donate/checkout/${campaign.id}`}>\n                    <button className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\n                      Make a Donation\n                    </button>\n                  </Link>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n      </div>\n      </section>\n    </>\n  );\n}","size_bytes":21871},"client/src/pages/ChatRoom.tsx":{"content":"import { useParams } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useState, useRef, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { \n  Send, \n  Users, \n  Heart, \n  ArrowLeft,\n  Settings,\n  Phone,\n  Video\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface ChatMessage {\n  id: number;\n  chatId: number;\n  userId: string;\n  message: string;\n  type: 'message' | 'prayer_request' | 'system';\n  createdAt: string;\n  user: {\n    id: string;\n    firstName?: string;\n    lastName?: string;\n    displayName?: string;\n    profileImageUrl?: string;\n    username?: string;\n  };\n}\n\nexport default function ChatRoom() {\n  const { id } = useParams<{ id: string }>();\n  const [message, setMessage] = useState(\"\");\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n\n  const { data: chat } = useQuery({\n    queryKey: ['/api/group-chats', id],\n    enabled: !!id\n  }) as { data?: { id: number; title: string; memberCount: number; intention: string; createdAt: string } };\n\n  const { data: members = [] } = useQuery({\n    queryKey: ['/api/group-chats', id, 'members'],\n    enabled: !!id\n  }) as { data?: Array<{ id: string; firstName?: string; lastName?: string; displayName?: string; username?: string; profileImageUrl?: string }> };\n\n  const { data: messages = [] } = useQuery({\n    queryKey: ['/api/group-chats', id, 'messages'],\n    enabled: !!id\n  }) as { data?: ChatMessage[] };\n\n\n\n  const { data: currentUser } = useQuery({\n    queryKey: ['/api/user']\n  }) as { data?: { id: string; username: string; firstName?: string; lastName?: string; profileImageUrl?: string } };\n\n  const sendMessageMutation = useMutation({\n    mutationFn: async (messageText: string) => {\n      const response = await apiRequest(`/api/group-chats/${id}/messages`, {\n        method: 'POST',\n        data: {\n          message: messageText,\n          type: 'message'\n        }\n      });\n      \n      // Check if the response was successful\n      if (!response.ok) {\n        if (response.status === 401) {\n          throw new Error('Session expired. Please log in again.');\n        }\n        throw new Error('Failed to send message. Please try again.');\n      }\n      \n      return response;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/group-chats', id, 'messages'] });\n      setMessage(\"\");\n    },\n    onError: (error: Error) => {\n      console.error('Error sending message:', error);\n      toast({\n        title: \"Message Failed\",\n        description: error.message || \"Could not send your message. Please try again.\",\n        variant: \"destructive\",\n      });\n      \n      // If it's an auth error, redirect to login\n      if (error.message.includes('Session expired')) {\n        setTimeout(() => {\n          window.location.href = '/auth';\n        }, 2000);\n      }\n    }\n  });\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Auto-refresh messages every 10 seconds to catch new messages from other users\n  useEffect(() => {\n    if (!id) return;\n    \n    const interval = setInterval(() => {\n      queryClient.invalidateQueries({ queryKey: ['/api/group-chats', id, 'messages'] });\n    }, 10000); // 10 seconds\n    \n    return () => clearInterval(interval);\n  }, [id, queryClient]);\n\n  const handleSendMessage = () => {\n    if (!message.trim() || sendMessageMutation.isPending) return;\n    \n    sendMessageMutation.mutate(message.trim());\n  };\n\n  const formatTime = (timestamp: string) => {\n    return new Date(timestamp).toLocaleTimeString([], { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  const getUserDisplayName = (user?: ChatMessage['user']) => {\n    if (!user) return \"Unknown User\";\n    if (user.displayName) return user.displayName;\n    if (user.firstName && user.lastName) return `${user.firstName} ${user.lastName}`;\n    if (user.firstName) return user.firstName;\n    return user.username || \"Unknown User\";\n  };\n\n  const getIntentionIcon = () => {\n    switch (chat?.intention) {\n      case 'prayer': return Heart;\n      case 'bible_study': return Heart;\n      default: return Heart;\n    }\n  };\n\n  const Icon = getIntentionIcon();\n  const onlineCount = members?.length || 0;\n\n  // Show actual chat members only - with null check\n  const chatMembers = (members || []).map((member) => ({\n    id: member.id,\n    username: member.displayName || (member.firstName && member.lastName ? `${member.firstName} ${member.lastName}` : member.firstName || member.username || \"User\"),\n    initials: (member.displayName || (member.firstName && member.lastName ? `${member.firstName} ${member.lastName}` : member.firstName || member.username || \"U\")).slice(0, 2).toUpperCase(),\n    color: member.id === currentUser?.id ? \"bg-[#D4AF37]\" : \"bg-blue-500\",\n    profileImage: member.profileImageUrl\n  }));\n\n  return (\n    <div className=\"h-screen bg-black flex flex-col overflow-hidden\">\n      {/* Header */}\n      <div className=\"flex-shrink-0 bg-black border-b border-gray-800 p-3\">\n        <div className=\"max-w-2xl mx-auto w-full\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <div className=\"flex items-center space-x-3\">\n              <Link href=\"/connect\">\n                <Button variant=\"ghost\" size=\"sm\" className=\"text-gray-400 hover:text-white p-1\">\n                  <ArrowLeft className=\"w-5 h-5\" />\n                </Button>\n              </Link>\n              <div className=\"p-2 bg-blue-600 rounded-lg\">\n                <Icon className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-lg font-bold text-white\">\n                  {chat?.title || \"Bible Study Circle\"}\n                </h1>\n                <div className=\"flex items-center space-x-1 text-sm text-gray-400\">\n                  <Users className=\"w-4 h-4\" />\n                  <span>{onlineCount} online</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-1\">\n              <Button variant=\"ghost\" size=\"sm\" className=\"text-gray-400 hover:text-white p-2\">\n                <Settings className=\"w-5 h-5\" />\n              </Button>\n            </div>\n          </div>\n          \n          {/* Member Profile Pictures Row */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-sm text-gray-400 font-medium\">Members:</span>\n              <div className=\"flex items-center -space-x-2\">\n                {chatMembers.map((member, index) => (\n                  <Avatar key={member.id} className=\"w-8 h-8 border-2 border-black hover:z-10 transition-all\">\n                    {member.profileImage && (\n                      <AvatarImage src={member.profileImage} alt={member.username} />\n                    )}\n                    <AvatarFallback className={`${member.color} text-white text-xs font-semibold`}>\n                      {member.initials}\n                    </AvatarFallback>\n                  </Avatar>\n                ))}\n              </div>\n            </div>\n            <Badge className=\"bg-green-500/20 text-green-400 border-green-500/30 text-xs\">\n              Active Chat\n            </Badge>\n          </div>\n        </div>\n      </div>\n\n      {/* Messages Area - Fixed height with scroll */}\n      <div className=\"flex-1 bg-black flex flex-col min-h-0\">\n        <div className=\"flex-1 overflow-hidden\">\n          <ScrollArea className=\"h-full\">\n            <div className=\"px-4 pb-0 pt-6 min-h-full flex flex-col justify-end\">\n              <div className=\"max-w-2xl mx-auto w-full space-y-4\">\n                {messages.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <div className=\"p-4 bg-blue-600/20 rounded-full w-fit mx-auto mb-4\">\n                      <Icon className=\"w-8 h-8 text-blue-400\" />\n                    </div>\n                    <h3 className=\"text-lg font-semibold text-white mb-2\">Welcome to {chat?.title || \"Bible Study Circle\"}</h3>\n                    <p className=\"text-gray-400 text-sm max-w-md mx-auto\">Start the conversation with your fellow believers. Share thoughts, prayers, or questions.</p>\n                    <div className=\"mt-4 text-xs text-gray-500\">\n                      {members.length} members in this chat\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {messages.map((msg) => (\n                      <div key={msg.id} className=\"flex items-start space-x-3 group hover:bg-gray-900/30 p-2 rounded-lg transition-colors\">\n                        <Avatar className=\"w-9 h-9 flex-shrink-0\">\n                          {msg.user?.profileImageUrl && (\n                            <AvatarImage src={msg.user.profileImageUrl} alt={getUserDisplayName(msg.user)} />\n                          )}\n                          <AvatarFallback className=\"bg-gray-700 text-white text-sm font-semibold\">\n                            {msg.user ? getUserDisplayName(msg.user).slice(0, 2).toUpperCase() : \"??\"}\n                          </AvatarFallback>\n                        </Avatar>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center space-x-2 mb-2\">\n                            <span className=\"text-sm font-semibold text-white\">\n                              {msg.user ? getUserDisplayName(msg.user) : \"Unknown User\"}\n                            </span>\n                            <span className=\"text-xs text-gray-500\">\n                              {formatTime(msg.createdAt)}\n                            </span>\n                            {msg.type === 'prayer_request' && (\n                              <Badge className=\"bg-purple-600/20 text-purple-300 border-purple-500/30 text-xs\">\n                                Prayer Request\n                              </Badge>\n                            )}\n                          </div>\n                          <p className=\"text-sm text-gray-200 leading-relaxed\">\n                            {msg.message}\n                          </p>\n                        </div>\n                      </div>\n                    ))}\n                    <div ref={messagesEndRef} />\n                  </div>\n                )}\n              </div>\n            </div>\n          </ScrollArea>\n        </div>\n      </div>\n\n      {/* Message Input */}\n      <div className=\"flex-shrink-0 px-4 pt-1 pb-2 bg-black\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"flex items-end space-x-3\">\n            <div className=\"flex-1\">\n              <Input\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                placeholder=\"Send a message...\"\n                className=\"bg-gray-900 border-gray-700 text-white placeholder-gray-400 text-sm min-h-[44px] rounded-xl px-4 py-3 focus:border-[#D4AF37] focus:ring-1 focus:ring-[#D4AF37]\"\n                onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\n              />\n            </div>\n            <Button \n              onClick={handleSendMessage}\n              className=\"bg-[#D4AF37] hover:bg-[#B8941F] text-black px-4 py-3 rounded-xl font-semibold shadow-lg transition-all duration-200 min-w-[50px]\"\n              disabled={!message.trim() || sendMessageMutation.isPending}\n            >\n              <Send className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":12126},"client/src/pages/ConnectPage.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { z } from \"zod\";\nimport { Helmet } from \"react-helmet\";\nimport { \n  Users, \n  Plus, \n  Heart, \n  BookOpen, \n  MessageCircle, \n  ChevronLeft, \n  ChevronRight, \n  X, \n  UserPlus,\n  Clock,\n  Calendar\n} from \"lucide-react\";\nimport { insertGroupChatQueueSchema, type GroupChatQueue, type GroupChat } from \"@shared/schema\";\n\nconst createQueueSchema = insertGroupChatQueueSchema.extend({\n  minPeople: z.coerce.number().min(2, \"Minimum 2 people\").max(12, \"Maximum 12 people\"),\n  maxPeople: z.coerce.number().min(4, \"Minimum 4 people\").max(12, \"Maximum 12 people\"),\n});\n\ntype CreateQueueForm = z.infer<typeof createQueueSchema>;\n\nconst intentionOptions = [\n  { value: \"prayer\", label: \"Prayer\", icon: Heart, color: \"bg-red-500\", badgeColor: \"bg-red-500/20\" },\n  { value: \"bible_study\", label: \"Bible Study\", icon: BookOpen, color: \"bg-blue-500\", badgeColor: \"bg-blue-500/20\" },\n  { value: \"evangelizing\", label: \"Evangelizing\", icon: MessageCircle, color: \"bg-green-500\", badgeColor: \"bg-green-500/20\" },\n  { value: \"fellowship\", label: \"Fellowship\", icon: Users, color: \"bg-purple-500\", badgeColor: \"bg-purple-500/20\" },\n  { value: \"worship\", label: \"Worship\", icon: Calendar, color: \"bg-[#D4AF37]\", badgeColor: \"bg-[#D4AF37]/20\" },\n];\n\nexport default function ConnectPage() {\n  const { user } = useAuth();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const [joinedQueues, setJoinedQueues] = useState<Set<number>>(new Set());\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\n  const [canScrollRight, setCanScrollRight] = useState(false);\n\n  const form = useForm<CreateQueueForm>({\n    resolver: zodResolver(createQueueSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      intention: \"prayer\",\n      minPeople: 4,\n      maxPeople: 8,\n    },\n  });\n\n  // Fetch active queues\n  const { data: queues = [] } = useQuery<GroupChatQueue[]>({\n    queryKey: [\"/api/group-chat-queues\"],\n    refetchInterval: 5000, // Refresh every 5 seconds\n  });\n\n  // Fetch active chats\n  const { data: activeChats = [] } = useQuery<GroupChat[]>({\n    queryKey: [\"/api/group-chats/active\"],\n    refetchInterval: 10000, // Refresh every 10 seconds\n  });\n\n  // Fetch direct chats\n  const { data: directChats = [] } = useQuery<any[]>({\n    queryKey: [\"/api/direct-chats\"],\n    refetchInterval: 10000, // Refresh every 10 seconds\n  });\n\n  // Create queue mutation\n  const createQueueMutation = useMutation({\n    mutationFn: async (data: CreateQueueForm) => {\n      return apiRequest(\"/api/group-chat-queues\", {\n        method: \"POST\",\n        data: data,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/group-chat-queues\"] });\n      setCreateDialogOpen(false);\n      form.reset();\n      toast({\n        title: \"Queue created!\",\n        description: \"People can now join your group chat queue.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create queue. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Join queue mutation\n  const joinQueueMutation = useMutation({\n    mutationFn: async (queueId: number) => {\n      return apiRequest(`/api/group-chat-queues/${queueId}/join`, {\n        method: \"POST\",\n      });\n    },\n    onSuccess: (_, queueId) => {\n      setJoinedQueues(prev => new Set(Array.from(prev).concat(queueId)));\n      queryClient.invalidateQueries({ queryKey: [\"/api/group-chat-queues\"] });\n      toast({\n        title: \"Joined queue!\",\n        description: \"You'll be notified when the chat starts.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to join queue. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Cancel queue mutation\n  const cancelQueueMutation = useMutation({\n    mutationFn: async (queueId: number) => {\n      return apiRequest(`/api/group-chat-queues/${queueId}`, {\n        method: \"DELETE\",\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/group-chat-queues\"] });\n      toast({\n        title: \"Queue cancelled\",\n        description: \"Your queue has been cancelled.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to cancel queue. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Exit queue mutation\n  const exitQueueMutation = useMutation({\n    mutationFn: async (queueId: number) => {\n      return apiRequest(`/api/group-chat-queues/${queueId}/leave`, {\n        method: \"POST\",\n      });\n    },\n    onSuccess: (_, queueId) => {\n      setJoinedQueues(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(queueId);\n        return newSet;\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/group-chat-queues\"] });\n      toast({\n        title: \"Left queue\",\n        description: \"You have left the queue.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to leave queue. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const checkScrollPosition = () => {\n    if (scrollContainerRef.current) {\n      const { scrollLeft, scrollWidth, clientWidth } = scrollContainerRef.current;\n      setCanScrollLeft(scrollLeft > 0);\n      setCanScrollRight(scrollLeft < scrollWidth - clientWidth - 1);\n    }\n  };\n\n  const scrollLeft = () => {\n    if (scrollContainerRef.current) {\n      scrollContainerRef.current.scrollBy({ left: -300, behavior: 'smooth' });\n    }\n  };\n\n  const scrollRight = () => {\n    if (scrollContainerRef.current) {\n      scrollContainerRef.current.scrollBy({ left: 300, behavior: 'smooth' });\n    }\n  };\n\n  // Check scroll position when queues change or component mounts\n  useEffect(() => {\n    checkScrollPosition();\n  }, [queues]);\n\n  // Add scroll event listener\n  useEffect(() => {\n    const container = scrollContainerRef.current;\n    if (container) {\n      container.addEventListener('scroll', checkScrollPosition);\n      return () => container.removeEventListener('scroll', checkScrollPosition);\n    }\n  }, []);\n\n  const getIntentionInfo = (intention: string) => {\n    return intentionOptions.find(opt => opt.value === intention) || intentionOptions[0];\n  };\n\n  const formatTimeAgo = (date: string | Date) => {\n    const now = new Date();\n    const created = typeof date === 'string' ? new Date(date) : date;\n    const diffInMinutes = Math.floor((now.getTime() - created.getTime()) / (1000 * 60));\n    \n    if (diffInMinutes < 1) return \"Just now\";\n    if (diffInMinutes < 60) return `${diffInMinutes}m ago`;\n    if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h ago`;\n    return `${Math.floor(diffInMinutes / 1440)}d ago`;\n  };\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold mb-4\">Please sign in</h1>\n          <p className=\"text-gray-400\">You need to be signed in to access the Connect page.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      <Helmet>\n        <title>Connect - Christ Collective</title>\n        <meta name=\"description\" content=\"Join group chats for prayer, Bible study, evangelizing, and fellowship with other believers\" />\n      </Helmet>\n\n      <div className=\"container mx-auto px-4 py-4 max-w-4xl\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-white\">Active Chats</h1>\n            <p className=\"text-gray-400 text-sm mt-1\">Join ongoing conversations with fellow believers</p>\n          </div>\n          <Button \n            onClick={() => setCreateDialogOpen(true)}\n            className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F] font-medium px-4 py-2 text-sm\"\n          >\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Start Queue\n          </Button>\n        </div>\n\n        {/* Create Queue Dialog */}\n        <div className=\"hidden\">\n          <Dialog open={createDialogOpen} onOpenChange={setCreateDialogOpen}>\n            <DialogTrigger asChild>\n              <Button className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F] font-medium\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Start Chat Queue\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"bg-black text-white border border-[#D4AF37]/20 shadow-2xl max-w-lg max-h-[85vh] overflow-y-auto\">\n              <DialogHeader className=\"pb-6\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-10 h-10 bg-[#D4AF37] rounded-full flex items-center justify-center shadow-lg\">\n                    <Users className=\"w-5 h-5 text-black\" />\n                  </div>\n                  <div>\n                    <DialogTitle className=\"text-2xl font-bold text-[#D4AF37]\">\n                      Create Group Chat Queue\n                    </DialogTitle>\n                    <p className=\"text-sm text-gray-400 mt-1\">Bring believers together for meaningful connection</p>\n                  </div>\n                </div>\n              </DialogHeader>\n              \n              <Form {...form}>\n                <form onSubmit={form.handleSubmit((data) => createQueueMutation.mutate(data))} className=\"space-y-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"title\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-[#D4AF37] font-medium text-sm\">Queue Title</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            placeholder=\"e.g., Evening Prayer Circle\"\n                            className=\"bg-black/50 border border-gray-600 text-white placeholder-gray-500 h-12 rounded-lg transition-all duration-200 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 focus:bg-black/70\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-[#D4AF37] font-medium text-sm\">Description (Optional)</FormLabel>\n                        <FormControl>\n                          <div className=\"relative\">\n                            <Textarea \n                              {...field} \n                              value={field.value || \"\"}\n                              placeholder=\"Share what your group will discuss, pray about, or study together...\"\n                              className=\"bg-black/50 border border-gray-600 text-white placeholder-gray-500 rounded-lg resize-none transition-all duration-200 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 focus:bg-black/70\"\n                              rows={3}\n                              maxLength={70}\n                              onChange={(e) => {\n                                const value = e.target.value;\n                                if (value.length <= 70) {\n                                  field.onChange(value);\n                                }\n                              }}\n                            />\n                            <div className=\"absolute bottom-2 right-3 text-xs text-gray-500\">\n                              {(field.value || \"\").length}/70\n                            </div>\n                          </div>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"intention\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-[#D4AF37] font-medium text-sm\">Purpose</FormLabel>\n                        <div className=\"grid grid-cols-5 gap-3 mt-2\">\n                          {intentionOptions.map((option) => {\n                            const Icon = option.icon;\n                            const isSelected = field.value === option.value;\n                            return (\n                              <button\n                                key={option.value}\n                                type=\"button\"\n                                onClick={() => field.onChange(option.value)}\n                                className={`\n                                  flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all duration-300 group hover:scale-105\n                                  ${isSelected \n                                    ? `${option.color} border-white shadow-lg shadow-${option.color}/30` \n                                    : 'bg-black/30 border-gray-600 hover:border-gray-500 hover:bg-black/50'\n                                  }\n                                `}\n                              >\n                                <Icon className={`w-6 h-6 mb-2 transition-all duration-300 ${isSelected ? 'text-white' : 'text-gray-400 group-hover:text-white'}`} />\n                                <span className={`text-xs font-medium transition-all duration-300 ${isSelected ? 'text-white' : 'text-gray-400 group-hover:text-white'}`}>\n                                  {option.label}\n                                </span>\n\n                              </button>\n                            );\n                          })}\n                        </div>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"bg-black/30 rounded-xl p-6 border border-gray-700\">\n                    <h4 className=\"text-[#D4AF37] font-medium text-sm mb-4 flex items-center\">\n                      <Users className=\"w-4 h-4 mr-2\" />\n                      Group Size\n                    </h4>\n                    <div className=\"grid grid-cols-2 gap-6\">\n                      <FormField\n                        control={form.control}\n                        name=\"minPeople\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-gray-300 text-sm\">Minimum People</FormLabel>\n                            <FormControl>\n                              <div className=\"relative\">\n                                <Input \n                                  {...field} \n                                  type=\"number\"\n                                  min={4}\n                                  max={12}\n                                  value={field.value || \"\"}\n                                  onChange={(e) => field.onChange(parseInt(e.target.value) || 0)}\n                                  className=\"bg-black/50 border border-gray-600 text-white h-12 rounded-lg transition-all duration-200 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 pl-4 pr-8\"\n                                />\n                                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-gray-500\">\n                                  min\n                                </div>\n                              </div>\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"maxPeople\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-gray-300 text-sm\">Maximum People</FormLabel>\n                            <FormControl>\n                              <div className=\"relative\">\n                                <Input \n                                  {...field} \n                                  type=\"number\"\n                                  min={4}\n                                  max={12}\n                                  value={field.value || \"\"}\n                                  onChange={(e) => field.onChange(parseInt(e.target.value) || 0)}\n                                  className=\"bg-black/50 border border-gray-600 text-white h-12 rounded-lg transition-all duration-200 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 pl-4 pr-8\"\n                                />\n                                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-gray-500\">\n                                  max\n                                </div>\n                              </div>\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                    \n                    <div className=\"mt-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg\">\n                      <p className=\"text-xs text-blue-300 flex items-center\">\n                        <MessageCircle className=\"w-3 h-3 mr-2\" />\n                        Chat starts automatically when minimum people join\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-end space-x-3 pt-4\">\n                    <Button \n                      type=\"button\" \n                      variant=\"outline\" \n                      onClick={() => setCreateDialogOpen(false)}\n                      className=\"border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white px-6 h-12\"\n                    >\n                      Cancel\n                    </Button>\n                    <Button \n                      type=\"submit\" \n                      disabled={createQueueMutation.isPending}\n                      className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F] font-semibold px-8 h-12 shadow-lg transition-all duration-300\"\n                    >\n                      {createQueueMutation.isPending ? (\n                        <div className=\"flex items-center\">\n                          <div className=\"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin mr-2\" />\n                          Creating...\n                        </div>\n                      ) : (\n                        <div className=\"flex items-center\">\n                          <Plus className=\"w-4 h-4 mr-2\" />\n                          Create Queue\n                        </div>\n                      )}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n\n        {/* Chat Queues Section - Top */}\n        {(queues.length > 0 || activeChats.length === 0) && (\n          <div className=\"mb-6\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div>\n                <h2 className=\"text-lg font-semibold text-white\">Chat Queues</h2>\n                <p className=\"text-xs text-gray-400\">Available queues waiting for people to join</p>\n              </div>\n              {queues.length > 0 && (\n                <Badge variant=\"outline\" className=\"bg-[#D4AF37]/10 border-[#D4AF37]/30 text-[#D4AF37]\">\n                  {queues.length} Available\n                </Badge>\n              )}\n            </div>\n            \n            {queues.length > 0 ? (\n              <div className=\"relative\">\n                {/* Navigation Arrows */}\n                {canScrollLeft && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={scrollLeft}\n                    className=\"absolute -left-4 top-1/2 -translate-y-1/2 z-10 w-8 h-8 rounded-full bg-gray-900/80 border border-gray-700 hover:bg-gray-800 text-gray-300 hover:text-white p-0\"\n                  >\n                    <ChevronLeft className=\"w-4 h-4\" />\n                  </Button>\n                )}\n                {canScrollRight && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={scrollRight}\n                    className=\"absolute -right-4 top-1/2 -translate-y-1/2 z-10 w-8 h-8 rounded-full bg-gray-900/80 border border-gray-700 hover:bg-gray-800 text-gray-300 hover:text-white p-0\"\n                  >\n                    <ChevronRight className=\"w-4 h-4\" />\n                  </Button>\n                )}\n                \n                {/* Horizontal Scroll Container */}\n                <div \n                  ref={scrollContainerRef}\n                  className=\"flex gap-4 overflow-x-auto scrollbar-hide pb-2\"\n                  style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}\n                >\n                  {queues.map((queue) => {\n                    const intentionInfo = getIntentionInfo(queue.intention);\n                    const Icon = intentionInfo.icon;\n                    const isOwner = queue.creatorId === user.id;\n                    const progressPercent = (queue.currentCount / queue.maxPeople) * 100;\n                    // Check if user is already a member of this queue\n                    const isMember = joinedQueues.has(queue.id);\n                    const createdDate = new Date().toLocaleDateString(); // Since we don't have createdAt, using current date\n                    \n                    return (\n                      <div key={queue.id} className=\"rounded-lg bg-black border border-gray-700/50 hover:border-[#D4AF37]/50 transition-all duration-300 flex-shrink-0 w-80\">\n                        <div className=\"p-4\">\n                          {/* Top Row - Icon, Title and Badge */}\n                          <div className=\"flex items-center space-x-3 mb-3\">\n                            <div className={`p-2 rounded-lg ${intentionInfo.color} flex-shrink-0`}>\n                              <Icon className=\"w-5 h-5 text-white\" />\n                            </div>\n                            <div className=\"flex items-center space-x-2 flex-1\">\n                              <h3 className=\"text-sm font-semibold text-white\">{queue.title}</h3>\n                              <Badge className={`${intentionInfo.badgeColor} text-white text-xs px-2 py-0.5 font-medium`}>\n                                {intentionInfo.label}\n                              </Badge>\n                            </div>\n                          </div>\n                          \n                          {/* Date and Member Count */}\n                          <div className=\"text-xs text-gray-400 mb-3 ml-11\">\n                            {createdDate} • {queue.currentCount}/{queue.maxPeople} members\n                          </div>\n                          \n                          {/* Profile Pictures Row */}\n                          <div className=\"flex space-x-2 ml-11 mb-4\">\n                            {queue.members?.slice(0, 5).map((member: any, index: number) => (\n                              <div key={member.id} className=\"w-8 h-8 rounded-full border-2 border-gray-800 flex items-center justify-center overflow-hidden\">\n                                {member.profileImageUrl ? (\n                                  <img \n                                    src={member.profileImageUrl} \n                                    alt={member.displayName || member.username || `User ${index + 1}`}\n                                    className=\"w-full h-full object-cover\"\n                                  />\n                                ) : (\n                                  <div className=\"w-full h-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center\">\n                                    <span className=\"text-xs text-white font-medium\">\n                                      {(member.displayName || member.username || 'U').charAt(0).toUpperCase()}\n                                    </span>\n                                  </div>\n                                )}\n                              </div>\n                            )) || Array.from({ length: Math.min(queue.currentCount, 5) }).map((_, index) => (\n                              <div key={index} className=\"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 border-2 border-gray-800 flex items-center justify-center\">\n                                <span className=\"text-xs text-white font-medium\">\n                                  {String.fromCharCode(65 + index)}\n                                </span>\n                              </div>\n                            ))}\n                            {queue.currentCount > 5 && (\n                              <div className=\"w-8 h-8 rounded-full bg-gray-600 border-2 border-gray-800 flex items-center justify-center\">\n                                <span className=\"text-xs text-white font-medium\">+{queue.currentCount - 5}</span>\n                              </div>\n                            )}\n                          </div>\n                          \n                          {/* Action Button - Full Width at Bottom */}\n                          {isOwner ? (\n                            <Button\n                              variant=\"outline\"\n                              onClick={() => cancelQueueMutation.mutate(queue.id)}\n                              disabled={cancelQueueMutation.isPending}\n                              className=\"w-full text-red-400 border-red-400/50 hover:bg-red-400/10 py-2 text-sm rounded-lg\"\n                            >\n                              Cancel Queue\n                            </Button>\n                          ) : isMember ? (\n                            <Button\n                              variant=\"outline\"\n                              onClick={() => exitQueueMutation.mutate(queue.id)}\n                              disabled={exitQueueMutation.isPending}\n                              className=\"w-full text-orange-400 border-orange-400/50 hover:bg-orange-400/10 py-2 text-sm rounded-lg\"\n                            >\n                              {exitQueueMutation.isPending ? \"Leaving Queue...\" : \"Exit Queue\"}\n                            </Button>\n                          ) : (\n                            <Button\n                              onClick={() => joinQueueMutation.mutate(queue.id)}\n                              disabled={joinQueueMutation.isPending || queue.currentCount >= queue.maxPeople}\n                              className=\"w-full bg-[#D4AF37] hover:bg-[#D4AF37]/90 text-black font-medium py-2 text-sm rounded-lg\"\n                            >\n                              {joinQueueMutation.isPending ? \"Joining...\" : queue.currentCount >= queue.maxPeople ? \"Queue Full\" : \"Join Queue\"}\n                            </Button>\n                          )}\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-6 bg-black border border-gray-700/50 rounded-lg\">\n                <div className=\"flex items-center justify-center mb-2\">\n                  <div className=\"p-2 bg-[#D4AF37]/20 rounded-full\">\n                    <Users className=\"w-5 h-5 text-[#D4AF37]\" />\n                  </div>\n                </div>\n                <h3 className=\"text-base font-semibold text-white mb-1\">No active queues</h3>\n                <p className=\"text-gray-400 text-xs\">Start a queue to connect with other believers</p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Active Chats Section - Bottom */}\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <div>\n              <h2 className=\"text-lg font-semibold text-white\">Chats</h2>\n              <p className=\"text-xs text-gray-400\">Your active group chats and direct messages</p>\n            </div>\n            {(activeChats.length > 0 || directChats.length > 0) && (\n              <Badge variant=\"outline\" className=\"bg-green-500/10 border-green-500/30 text-green-400\">\n                {activeChats.length + directChats.length} Active\n              </Badge>\n            )}\n          </div>\n          \n          {(activeChats.length > 0 || directChats.length > 0) ? (\n            <div className=\"space-y-3\">\n              {/* Direct Chats */}\n              {directChats.map((chat: any) => {\n                const otherUser = chat.otherUser;\n                const otherUserName = otherUser?.displayName || otherUser?.firstName || otherUser?.username || \"User\";\n                const lastMessage = chat.lastMessage;\n                \n                return (\n                  <Card \n                    key={`direct-${chat.id}`} \n                    className=\"bg-black border border-gray-700/50 hover:border-[#D4AF37]/30 transition-all duration-300 cursor-pointer hover:bg-gray-900/50\"\n                    onClick={() => navigate(`/direct-chat/${chat.id}`)}\n                  >\n                    <CardContent className=\"p-3\">\n                      <div className=\"flex items-start space-x-3\">\n                        <div className=\"relative flex-shrink-0\">\n                          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-600 flex items-center justify-center\">\n                            {otherUser?.profileImageUrl ? (\n                              <img \n                                src={otherUser.profileImageUrl} \n                                alt={otherUserName}\n                                className=\"w-full h-full object-cover rounded-full\"\n                              />\n                            ) : (\n                              <span className=\"text-white text-sm font-bold\">\n                                {otherUserName.charAt(0).toUpperCase()}\n                              </span>\n                            )}\n                          </div>\n                          <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-blue-400 rounded-full\"></div>\n                        </div>\n                        \n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center space-x-2 mb-1\">\n                            <h3 className=\"text-base font-bold text-white truncate\">{otherUserName}</h3>\n                            <Badge className=\"bg-blue-500 text-white text-xs border-none flex-shrink-0\">\n                              Direct\n                            </Badge>\n                          </div>\n                          \n                          <div className=\"text-xs text-gray-500 mb-1\">\n                            <span>@{otherUser?.username}</span>\n                          </div>\n                          \n                          {lastMessage && (\n                            <p className=\"text-xs text-gray-400 truncate\">\n                              {lastMessage.message}\n                            </p>\n                          )}\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                );\n              })}\n              \n              {/* Group Chats */}\n              {activeChats.map((chat) => {\n                const intentionInfo = getIntentionInfo(chat.intention);\n                const Icon = intentionInfo.icon;\n                const startDate = new Date().toLocaleDateString(); // Since we don't have startedAt, using current date\n                \n                return (\n                  <div \n                    key={`group-${chat.id}`} \n                    className=\"rounded-lg bg-black border border-gray-700/50 hover:border-[#D4AF37]/50 transition-all duration-300 cursor-pointer w-full\"\n                    onClick={() => navigate(`/chat/${chat.id}`)}\n                  >\n                    <div className=\"p-4\">\n                      {/* Top Row - Icon, Title and Badge */}\n                      <div className=\"flex items-center space-x-3 mb-3\">\n                        <div className={`p-2 rounded-lg ${intentionInfo.color} flex-shrink-0 relative`}>\n                          <Icon className=\"w-5 h-5 text-white\" />\n                          <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-black\"></div>\n                        </div>\n                        <div className=\"flex items-center space-x-2 flex-1\">\n                          <h3 className=\"text-sm font-semibold text-white\">{chat.title}</h3>\n                          <Badge className={`${intentionInfo.badgeColor} text-white text-xs px-2 py-0.5 font-medium`}>\n                            {intentionInfo.label}\n                          </Badge>\n                        </div>\n                      </div>\n                      \n                      {/* Date and Member Count */}\n                      <div className=\"text-xs text-gray-400 mb-3 ml-11\">\n                        Started {startDate} • {chat.memberCount} members\n                      </div>\n                      \n                      {/* Profile Pictures Row */}\n                      <div className=\"flex space-x-2 ml-11 mb-4\">\n                        {chat.members?.slice(0, 5).map((member, index) => (\n                          <div key={member.id} className=\"w-8 h-8 rounded-full border-2 border-gray-800 flex items-center justify-center overflow-hidden\">\n                            {member.profileImageUrl ? (\n                              <img \n                                src={member.profileImageUrl} \n                                alt={member.displayName || member.username || `User ${index + 1}`}\n                                className=\"w-full h-full object-cover\"\n                              />\n                            ) : (\n                              <div className=\"w-full h-full bg-gradient-to-r from-green-500 to-blue-500 flex items-center justify-center\">\n                                <span className=\"text-xs text-white font-medium\">\n                                  {(member.displayName || member.username || 'U').charAt(0).toUpperCase()}\n                                </span>\n                              </div>\n                            )}\n                          </div>\n                        )) || Array.from({ length: Math.min(chat.memberCount, 5) }).map((_, index) => (\n                          <div key={index} className=\"w-8 h-8 rounded-full bg-gradient-to-r from-green-500 to-blue-500 border-2 border-gray-800 flex items-center justify-center\">\n                            <span className=\"text-xs text-white font-medium\">\n                              {String.fromCharCode(65 + index)}\n                            </span>\n                          </div>\n                        ))}\n                        {chat.memberCount > 5 && (\n                          <div className=\"w-8 h-8 rounded-full bg-gray-600 border-2 border-gray-800 flex items-center justify-center\">\n                            <span className=\"text-xs text-white font-medium\">+{chat.memberCount - 5}</span>\n                          </div>\n                        )}\n                      </div>\n                      \n                      {/* Open Chat Button - Full Width at Bottom */}\n                      <Button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          navigate(`/chat/${chat.id}`);\n                        }}\n                        className=\"w-full bg-[#D4AF37] hover:bg-[#D4AF37]/90 text-black font-medium py-2 text-sm rounded-lg\"\n                      >\n                        Open Chat\n                      </Button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <div className=\"text-center py-6 bg-black border border-gray-700/50 rounded-lg\">\n              <div className=\"flex items-center justify-center mb-2\">\n                <div className=\"p-2 bg-green-500/20 rounded-full\">\n                  <MessageCircle className=\"w-5 h-5 text-green-400\" />\n                </div>\n              </div>\n              <h3 className=\"text-base font-semibold text-white mb-1\">No active chats</h3>\n              <p className=\"text-gray-400 text-xs\">Join a queue or message someone to start chatting</p>\n            </div>\n          )}\n        </div>\n\n\n      </div>\n    </div>\n  );\n}","size_bytes":38210},"client/src/pages/ConnectPageOld.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { NotificationsList } from \"@/components/NotificationsList\";\nimport { Bell, Users, MessageSquare, Activity } from \"lucide-react\";\nimport { Helmet } from \"react-helmet\";\n\nconst US_CITIES = [\n  \"New York, NY\",\n  \"Los Angeles, CA\",\n  \"Chicago, IL\",\n  \"Houston, TX\",\n  \"Phoenix, AZ\",\n  \"Philadelphia, PA\",\n  \"San Antonio, TX\",\n  \"San Diego, CA\",\n  \"Dallas, TX\",\n  \"San Jose, CA\",\n  \"Austin, TX\",\n  \"Jacksonville, FL\",\n  \"Fort Worth, TX\",\n  \"Columbus, OH\",\n  \"Charlotte, NC\",\n  \"San Francisco, CA\",\n  \"Indianapolis, IN\",\n  \"Seattle, WA\",\n  \"Denver, CO\",\n  \"Washington, DC\",\n  \"Boston, MA\",\n  \"Nashville, TN\",\n  \"Detroit, MI\",\n  \"Portland, OR\",\n  \"Memphis, TN\",\n  \"Oklahoma City, OK\",\n  \"Las Vegas, NV\",\n  \"Louisville, KY\",\n  \"Baltimore, MD\",\n  \"Milwaukee, WI\",\n  \"Atlanta, GA\",\n  \"Miami, FL\",\n  \"Other\"\n];\n\nconst HOBBIES_SPORTS = [\n  \"Basketball\",\n  \"Football\",\n  \"Soccer\",\n  \"Tennis\",\n  \"Golf\",\n  \"Running\",\n  \"Cycling\",\n  \"Swimming\",\n  \"Hiking\",\n  \"Rock Climbing\",\n  \"Yoga\",\n  \"Martial Arts\",\n  \"Weightlifting\",\n  \"CrossFit\",\n  \"Reading\",\n  \"Writing\",\n  \"Photography\",\n  \"Painting\",\n  \"Music (Playing)\",\n  \"Music (Listening)\",\n  \"Cooking\",\n  \"Gardening\",\n  \"Board Games\",\n  \"Video Games\",\n  \"Chess\",\n  \"Fishing\",\n  \"Hunting\",\n  \"Camping\",\n  \"Travel\",\n  \"Volunteering\",\n  \"Dancing\",\n  \"Theater\",\n  \"Movies\",\n  \"Podcasts\",\n  \"Crafts/DIY\",\n  \"Collecting\",\n  \"Trivia\",\n  \"Bowling\",\n  \"Baseball\",\n  \"Volleyball\"\n];\n\nconst AGE_RANGES = [\n  \"18-25\",\n  \"26-35\",\n  \"36-45\",\n  \"46-60\",\n  \"60+\"\n];\n\ninterface SurveyData {\n  goal: string;\n  reasoning: string;\n  city: string;\n  customCity: string;\n  ageRange: string;\n  gender: string;\n  hobbies: string[];\n  commitment: boolean | null;\n  paymentWilling: boolean | null;\n}\n\nexport default function ConnectPage() {\n  const { user } = useAuth();\n  const [, navigate] = useLocation();\n  const [currentStep, setCurrentStep] = useState(0);\n  const [surveyData, setSurveyData] = useState<SurveyData>({\n    goal: \"\",\n    reasoning: \"\",\n    city: \"\",\n    customCity: \"\",\n    ageRange: \"\",\n    gender: \"\",\n    hobbies: [],\n    commitment: null,\n    paymentWilling: null\n  });\n\n  const steps = [\n    \"Welcome\",\n    \"Your Goal\",\n    \"Your Why\",\n    \"Your City\",\n    \"Age & Gender\",\n    \"Hobbies & Sports\",\n    \"Time Commitment\",\n    \"Investment\"\n  ];\n\n  const getProgressValue = () => ((currentStep + 1) / steps.length) * 100;\n\n  const handleNext = () => {\n    if (currentStep < steps.length - 1) {\n      // Skip hobbies step if the goal is \"community\"\n      if (currentStep === 4 && surveyData.goal === \"community\") {\n        setCurrentStep(currentStep + 2); // Skip hobbies step\n      } else {\n        setCurrentStep(currentStep + 1);\n      }\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > 0) {\n      // Skip hobbies step when going back if the goal is \"community\"\n      if (currentStep === 6 && surveyData.goal === \"community\") {\n        setCurrentStep(currentStep - 2); // Skip hobbies step\n      } else {\n        setCurrentStep(currentStep - 1);\n      }\n    }\n  };\n\n  const handleSubmit = () => {\n    // TODO: Submit survey data to backend\n    console.log(\"Survey submitted:\", surveyData);\n    // For now, just show success message\n    alert(\"Application submitted! We'll match you with local Christians in your area.\");\n    navigate(\"/dashboard\");\n  };\n\n  const getGoalText = () => {\n    switch (surveyData.goal) {\n      case \"entrepreneurs\":\n        return \"meet with local Christian entrepreneurs\";\n      case \"friends\":\n        return \"make new local Christian friends\";\n      case \"community\":\n        return \"find a Christian community/church\";\n      default:\n        return \"connect with other Christians\";\n    }\n  };\n\n  const canProceed = () => {\n    switch (currentStep) {\n      case 0:\n        return true;\n      case 1:\n        return surveyData.goal !== \"\";\n      case 2:\n        return surveyData.reasoning.trim() !== \"\";\n      case 3:\n        return surveyData.city !== \"\" && (surveyData.city !== \"Other\" || surveyData.customCity.trim() !== \"\");\n      case 4:\n        return surveyData.ageRange !== \"\" && surveyData.gender !== \"\";\n      case 5:\n        // Skip hobbies validation for community goal\n        if (surveyData.goal === \"community\") {\n          return true;\n        }\n        return surveyData.hobbies.length > 0;\n      case 6:\n        return surveyData.commitment !== null;\n      case 7:\n        return surveyData.paymentWilling !== null;\n      default:\n        return false;\n    }\n  };\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <Card className=\"w-full max-w-md bg-black border-gray-600\">\n          <CardContent className=\"p-6 text-center\">\n            <h2 className=\"text-xl font-semibold mb-4\">Authentication Required</h2>\n            <p className=\"text-muted-foreground mb-4\">Please log in to join our Christian community matching program.</p>\n            <Button onClick={() => navigate(\"/auth\")} className=\"w-full\">\n              Log In\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <div className=\"bg-background border-b border-border p-4\">\n        <div className=\"container mx-auto max-w-2xl\">\n          <div className=\"flex items-center justify-between\">\n            <h1 className=\"text-xl font-bold text-foreground\">Connect with Christians</h1>\n            <div className=\"text-sm text-muted-foreground\">\n              Step {currentStep + 1} of {steps.length}\n            </div>\n          </div>\n          <div className=\"mt-4\">\n            <Progress value={getProgressValue()} className=\"h-2\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"container mx-auto max-w-2xl px-4 py-8\">\n        <Card className=\"bg-black border-gray-600\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-white\">\n              {currentStep === 0 && <Users className=\"h-5 w-5 text-primary\" />}\n              {currentStep === 1 && <Heart className=\"h-5 w-5 text-primary\" />}\n              {currentStep === 2 && <Heart className=\"h-5 w-5 text-primary\" />}\n              {currentStep === 3 && <MapPin className=\"h-5 w-5 text-primary\" />}\n              {currentStep === 4 && <Calendar className=\"h-5 w-5 text-primary\" />}\n              {currentStep === 5 && <Gamepad2 className=\"h-5 w-5 text-primary\" />}\n              {currentStep === 6 && <Clock className=\"h-5 w-5 text-primary\" />}\n              {currentStep === 7 && <DollarSign className=\"h-5 w-5 text-primary\" />}\n              {steps[currentStep]}\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Step 1: Welcome */}\n            {currentStep === 0 && (\n              <div className=\"space-y-4\">\n                <div className=\"text-center\">\n                  <div className=\"bg-primary/10 rounded-full p-4 w-16 h-16 mx-auto mb-4 flex items-center justify-center\">\n                    <Users className=\"h-8 w-8 text-primary\" />\n                  </div>\n                  <h2 className=\"text-2xl font-semibold mb-4\">Welcome to Christ Collective Connect</h2>\n                  <p className=\"text-muted-foreground leading-relaxed\">\n                    Our mission is to unite Christians worldwide through meaningful local connections. \n                    Whether you're looking to network with fellow Christian entrepreneurs, make new friends \n                    in your faith community, or find a local church, we'll match you with like-minded \n                    believers in your area.\n                  </p>\n                </div>\n                <div className=\"bg-primary/5 rounded-lg p-4\">\n                  <h3 className=\"font-semibold mb-2\">How it works:</h3>\n                  <ul className=\"space-y-2 text-sm text-muted-foreground\">\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                      Complete our quick 5-minute survey\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                      Get matched with Christians in your city\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                      Join organized meetups and events\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                      Build lasting faith-based relationships\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            )}\n\n            {/* Step 2: Goal Selection */}\n            {currentStep === 1 && (\n              <div className=\"space-y-4\">\n                <div className=\"text-center mb-6\">\n                  <h2 className=\"text-xl font-semibold mb-2\">What's your main goal?</h2>\n                  <p className=\"text-muted-foreground\">Choose what you're most interested in connecting with other Christians about.</p>\n                </div>\n                <RadioGroup\n                  value={surveyData.goal}\n                  onValueChange={(value) => setSurveyData({ ...surveyData, goal: value })}\n                  className=\"space-y-3\"\n                >\n                  <div className=\"flex items-center space-x-2 p-4 rounded-lg border hover:bg-accent transition-colors\">\n                    <RadioGroupItem value=\"entrepreneurs\" id=\"entrepreneurs\" />\n                    <Label htmlFor=\"entrepreneurs\" className=\"flex-1 cursor-pointer\">\n                      <div className=\"font-bold text-base\">Meet Local Christian Entrepreneurs</div>\n                      <div className=\"text-xs text-muted-foreground font-normal\">Network with faith-based business owners and professionals</div>\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2 p-4 rounded-lg border hover:bg-accent transition-colors\">\n                    <RadioGroupItem value=\"friends\" id=\"friends\" />\n                    <Label htmlFor=\"friends\" className=\"flex-1 cursor-pointer\">\n                      <div className=\"font-bold text-base\">Make New Local Christian Friends</div>\n                      <div className=\"text-xs text-muted-foreground font-normal\">Build meaningful friendships with fellow believers</div>\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2 p-4 rounded-lg border hover:bg-accent transition-colors\">\n                    <RadioGroupItem value=\"community\" id=\"community\" />\n                    <Label htmlFor=\"community\" className=\"flex-1 cursor-pointer\">\n                      <div className=\"font-bold text-base\">Find a Christian Community/Church</div>\n                      <div className=\"text-xs text-muted-foreground font-normal\">Connect with local churches and faith communities</div>\n                    </Label>\n                  </div>\n                </RadioGroup>\n              </div>\n            )}\n\n            {/* Step 3: Reasoning */}\n            {currentStep === 2 && (\n              <div className=\"space-y-4\">\n                <div className=\"text-center mb-6\">\n                  <h2 className=\"text-xl font-semibold mb-2\">Why do you want to {getGoalText()}?</h2>\n                  <p className=\"text-muted-foreground\">Help us understand your motivation so we can make better matches. (1-3 sentences)</p>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"reasoning\">Your reason</Label>\n                  <Textarea\n                    id=\"reasoning\"\n                    placeholder=\"Share what's driving you to connect with other Christians in your area...\"\n                    value={surveyData.reasoning}\n                    onChange={(e) => setSurveyData({ ...surveyData, reasoning: e.target.value })}\n                    className=\"min-h-[100px]\"\n                  />\n                  <div className=\"text-sm text-muted-foreground text-right\">\n                    {surveyData.reasoning.length}/500\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Step 4: City Selection */}\n            {currentStep === 3 && (\n              <div className=\"space-y-4\">\n                <div className=\"text-center mb-6\">\n                  <h2 className=\"text-xl font-semibold mb-2\">What is your home city?</h2>\n                  <p className=\"text-muted-foreground\">We'll match you with Christians in your local area.</p>\n                </div>\n                <div className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"city\">Select your city</Label>\n                    <Select value={surveyData.city} onValueChange={(value) => setSurveyData({ ...surveyData, city: value })}>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Choose your city\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {US_CITIES.map((city) => (\n                          <SelectItem key={city} value={city}>\n                            {city}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  {surveyData.city === \"Other\" && (\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"customCity\">Enter your city</Label>\n                      <Input\n                        id=\"customCity\"\n                        placeholder=\"City, State\"\n                        value={surveyData.customCity}\n                        onChange={(e) => setSurveyData({ ...surveyData, customCity: e.target.value })}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Step 5: Age Range & Gender */}\n            {currentStep === 4 && (\n              <div className=\"space-y-6\">\n                <div className=\"text-center mb-6\">\n                  <h2 className=\"text-xl font-semibold mb-2\">Tell us about yourself</h2>\n                  <p className=\"text-muted-foreground\">\n                    This helps us connect you with Christians in similar life stages.\n                  </p>\n                </div>\n                \n                {/* Age Range Selection */}\n                <div className=\"space-y-4\">\n                  <Label className=\"text-base font-medium\">What's your age range?</Label>\n                  <RadioGroup\n                    value={surveyData.ageRange}\n                    onValueChange={(value) => setSurveyData({ ...surveyData, ageRange: value })}\n                    className=\"space-y-3\"\n                  >\n                    {AGE_RANGES.map((range) => (\n                      <div key={range} className=\"flex items-center space-x-2 p-3 rounded-lg border hover:bg-accent transition-colors\">\n                        <RadioGroupItem value={range} id={range} />\n                        <Label htmlFor={range} className=\"flex-1 cursor-pointer\">\n                          <div className=\"font-medium\">{range}</div>\n                        </Label>\n                      </div>\n                    ))}\n                  </RadioGroup>\n                </div>\n\n                {/* Gender Selection */}\n                <div className=\"space-y-4\">\n                  <Label className=\"text-base font-medium\">Gender</Label>\n                  <RadioGroup\n                    value={surveyData.gender}\n                    onValueChange={(value) => setSurveyData({ ...surveyData, gender: value })}\n                    className=\"space-y-3\"\n                  >\n                    <div className=\"flex items-center space-x-2 p-3 rounded-lg border hover:bg-accent transition-colors\">\n                      <RadioGroupItem value=\"male\" id=\"male\" />\n                      <Label htmlFor=\"male\" className=\"flex-1 cursor-pointer\">\n                        <div className=\"font-medium\">Male</div>\n                      </Label>\n                    </div>\n                    <div className=\"flex items-center space-x-2 p-3 rounded-lg border hover:bg-accent transition-colors\">\n                      <RadioGroupItem value=\"female\" id=\"female\" />\n                      <Label htmlFor=\"female\" className=\"flex-1 cursor-pointer\">\n                        <div className=\"font-medium\">Female</div>\n                      </Label>\n                    </div>\n                  </RadioGroup>\n                </div>\n              </div>\n            )}\n\n            {/* Step 6: Hobbies & Sports */}\n            {currentStep === 5 && (surveyData.goal === \"entrepreneurs\" || surveyData.goal === \"friends\") && (\n              <div className=\"space-y-4\">\n                <div className=\"text-center mb-6\">\n                  <h2 className=\"text-xl font-semibold mb-2\">What are your favorite hobbies & sports?</h2>\n                  <p className=\"text-muted-foreground\">\n                    Select activities you enjoy. This helps us match you with like-minded Christians who share your interests.\n                  </p>\n                </div>\n                <div className=\"space-y-4\">\n                  <Label>Select your interests (choose multiple)</Label>\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 max-h-64 overflow-y-auto\">\n                    {HOBBIES_SPORTS.map((hobby) => (\n                      <div key={hobby} className=\"flex items-center space-x-2\">\n                        <Checkbox\n                          id={hobby}\n                          checked={surveyData.hobbies.includes(hobby)}\n                          onCheckedChange={(checked) => {\n                            if (checked) {\n                              setSurveyData({\n                                ...surveyData,\n                                hobbies: [...surveyData.hobbies, hobby]\n                              });\n                            } else {\n                              setSurveyData({\n                                ...surveyData,\n                                hobbies: surveyData.hobbies.filter(h => h !== hobby)\n                              });\n                            }\n                          }}\n                        />\n                        <Label htmlFor={hobby} className=\"text-sm font-normal cursor-pointer\">\n                          {hobby}\n                        </Label>\n                      </div>\n                    ))}\n                  </div>\n                  {surveyData.hobbies.length > 0 && (\n                    <div className=\"text-sm text-muted-foreground\">\n                      Selected: {surveyData.hobbies.join(\", \")}\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Step 7: Time Commitment */}\n            {currentStep === 6 && (\n              <div className=\"space-y-4\">\n                <div className=\"text-center mb-6\">\n                  <h2 className=\"text-xl font-semibold mb-2\">Time Commitment</h2>\n                  <p className=\"text-muted-foreground\">\n                    Are you willing to commit at least 2 hours a month to {getGoalText()} in {surveyData.city === \"Other\" ? surveyData.customCity : surveyData.city}?\n                  </p>\n                </div>\n                <RadioGroup\n                  value={surveyData.commitment === null ? \"\" : surveyData.commitment ? \"yes\" : \"no\"}\n                  onValueChange={(value) => setSurveyData({ ...surveyData, commitment: value === \"yes\" })}\n                  className=\"space-y-3\"\n                >\n                  <div className=\"flex items-center space-x-2 p-4 rounded-lg border hover:bg-accent transition-colors\">\n                    <RadioGroupItem value=\"yes\" id=\"commit-yes\" />\n                    <Label htmlFor=\"commit-yes\" className=\"flex-1 cursor-pointer\">\n                      <div className=\"font-medium\">Yes, I can commit 2+ hours per month</div>\n                      <div className=\"text-sm text-muted-foreground\">I'm ready to actively participate in meetups and events</div>\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2 p-4 rounded-lg border hover:bg-accent transition-colors\">\n                    <RadioGroupItem value=\"no\" id=\"commit-no\" />\n                    <Label htmlFor=\"commit-no\" className=\"flex-1 cursor-pointer\">\n                      <div className=\"font-medium\">No, I can't commit that much time right now</div>\n                      <div className=\"text-sm text-muted-foreground\">I'd prefer occasional or flexible participation</div>\n                    </Label>\n                  </div>\n                </RadioGroup>\n              </div>\n            )}\n\n            {/* Step 8: Payment Willingness */}\n            {currentStep === 7 && (\n              <div className=\"space-y-4\">\n                <div className=\"text-center mb-6\">\n                  <h2 className=\"text-xl font-semibold mb-2\">Program Investment</h2>\n                  <p className=\"text-muted-foreground\">\n                    If accepted, are you willing to pay a $15/month fee to cover our admin costs for organizing events and maintaining the community?\n                  </p>\n                </div>\n                <div className=\"bg-primary/5 rounded-lg p-4 mb-4\">\n                  <h3 className=\"font-semibold mb-2\">What your $15/month covers:</h3>\n                  <ul className=\"space-y-1 text-sm text-muted-foreground\">\n                    <li>• Event coordination and venue arrangements</li>\n                    <li>• Community management and moderation</li>\n                    <li>• Matching algorithm and platform maintenance</li>\n                    <li>• Monthly meetup organization</li>\n                    <li>• Prayer and support group facilitation</li>\n                  </ul>\n                </div>\n                <RadioGroup\n                  value={surveyData.paymentWilling === null ? \"\" : surveyData.paymentWilling ? \"yes\" : \"no\"}\n                  onValueChange={(value) => setSurveyData({ ...surveyData, paymentWilling: value === \"yes\" })}\n                  className=\"space-y-3\"\n                >\n                  <div className=\"flex items-center space-x-2 p-4 rounded-lg border hover:bg-accent transition-colors\">\n                    <RadioGroupItem value=\"yes\" id=\"pay-yes\" />\n                    <Label htmlFor=\"pay-yes\" className=\"flex-1 cursor-pointer\">\n                      <div className=\"font-medium\">Yes, I'm willing to invest $15/month</div>\n                      <div className=\"text-sm text-muted-foreground\">I understand this helps support the community</div>\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2 p-4 rounded-lg border hover:bg-accent transition-colors\">\n                    <RadioGroupItem value=\"no\" id=\"pay-no\" />\n                    <Label htmlFor=\"pay-no\" className=\"flex-1 cursor-pointer\">\n                      <div className=\"font-medium\">No, I can't afford $15/month right now.</div>\n                      <div className=\"text-sm text-muted-foreground\">I'd prefer a free or lower-cost option</div>\n                    </Label>\n                  </div>\n                </RadioGroup>\n              </div>\n            )}\n\n            {/* Navigation */}\n            <div className=\"flex justify-between pt-6\">\n              <Button\n                variant=\"outline\"\n                onClick={handleBack}\n                disabled={currentStep === 0}\n                className=\"flex items-center gap-2\"\n              >\n                <ChevronLeft className=\"h-4 w-4\" />\n                Back\n              </Button>\n              \n              {currentStep < steps.length - 1 ? (\n                <Button\n                  onClick={handleNext}\n                  disabled={!canProceed()}\n                  className=\"flex items-center gap-2\"\n                >\n                  Continue\n                  <ChevronRight className=\"h-4 w-4\" />\n                </Button>\n              ) : (\n                <Button\n                  onClick={handleSubmit}\n                  disabled={!canProceed()}\n                  className=\"flex items-center gap-2\"\n                >\n                  Submit Application\n                  <CheckCircle className=\"h-4 w-4\" />\n                </Button>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":25164},"client/src/pages/CreateCampaignPage.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Form, \n  FormControl, \n  FormDescription, \n  FormField, \n  FormItem, \n  FormLabel, \n  FormMessage \n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ImageIcon, Upload, X } from \"lucide-react\";\nimport { Helmet } from \"react-helmet\";\n\nconst formSchema = z.object({\n  title: z.string().min(5, \"Title must be at least 5 characters\"),\n  description: z.string().min(20, \"Description must be at least 20 characters\"),\n  goal: z.string().refine(\n    (val) => !isNaN(parseFloat(val)) && parseFloat(val) > 0,\n    \"Goal must be a positive number\"\n  ),\n  image: z.string().optional(),\n  additionalImages: z.array(z.string()).optional(),\n  video: z.string().optional(),\n  endDate: z.string().optional(),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport default function CreateCampaignPage() {\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const { user, isLoading } = useAuth();\n  const isAuthenticated = !!user;\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  // Main image\n  const [selectedImage, setSelectedImage] = useState<File | null>(null);\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  // Additional images\n  const [additionalImages, setAdditionalImages] = useState<File[]>([]);\n  const [additionalImagePreviews, setAdditionalImagePreviews] = useState<string[]>([]);\n  const additionalImagesInputRef = useRef<HTMLInputElement>(null);\n  \n  // Video\n  const [selectedVideo, setSelectedVideo] = useState<File | null>(null);\n  const [videoUrl, setVideoUrl] = useState<string>(\"\");\n  const videoInputRef = useRef<HTMLInputElement>(null);\n\n  // Check if user is authenticated\n  if (!isLoading && !isAuthenticated) {\n    return (\n      <div className=\"container mx-auto px-4 py-16\">\n        <div className=\"max-w-md mx-auto text-center\">\n          <h2 className=\"text-2xl font-bold mb-4\">Authentication Required</h2>\n          <p className=\"text-gray-600 mb-6\">\n            You need to be logged in to create a campaign.\n          </p>\n          <a \n            href=\"/api/login\"\n            className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\"\n          >\n            Sign In to Continue\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      goal: \"\",\n      image: \"\",\n      endDate: \"\",\n    },\n  });\n\n  // Handle main image selection\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setSelectedImage(file);\n      \n      // Create a preview\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n      \n      // Update the form field with a placeholder - will replace with URL later\n      form.setValue(\"image\", \"uploading...\");\n    }\n  };\n  \n  // Handle additional images selection\n  const handleAdditionalImagesChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      const newFiles = Array.from(files);\n      setAdditionalImages(prev => [...prev, ...newFiles]);\n      \n      // Create previews for each file\n      const newPreviews: string[] = [];\n      \n      newFiles.forEach(file => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          newPreviews.push(reader.result as string);\n          if (newPreviews.length === newFiles.length) {\n            setAdditionalImagePreviews(prev => [...prev, ...newPreviews]);\n          }\n        };\n        reader.readAsDataURL(file);\n      });\n      \n      // Update form value\n      form.setValue(\"additionalImages\", Array(newFiles.length).fill(\"uploading...\"));\n    }\n  };\n  \n  // Handle video selection\n  const handleVideoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setSelectedVideo(file);\n      form.setValue(\"video\", \"uploading...\");\n    }\n  };\n  \n  // Handle video URL input\n  const handleVideoUrlChange = (url: string) => {\n    setVideoUrl(url);\n    setSelectedVideo(null);\n    form.setValue(\"video\", url);\n  };\n  \n  // Handle main image drop\n  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      const file = e.dataTransfer.files[0];\n      setSelectedImage(file);\n      \n      // Create a preview\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n      \n      // Update the form field with a placeholder - will replace with URL later\n      form.setValue(\"image\", \"uploading...\");\n    }\n  };\n  \n  // Handle drop for additional images\n  const handleAdditionalImagesDrop = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      const newFiles = Array.from(e.dataTransfer.files);\n      setAdditionalImages(prev => [...prev, ...newFiles]);\n      \n      // Create previews for each file\n      const newPreviews: string[] = [];\n      \n      newFiles.forEach(file => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          newPreviews.push(reader.result as string);\n          if (newPreviews.length === newFiles.length) {\n            setAdditionalImagePreviews(prev => [...prev, ...newPreviews]);\n          }\n        };\n        reader.readAsDataURL(file);\n      });\n      \n      // Update form value\n      form.setValue(\"additionalImages\", Array(newFiles.length).fill(\"uploading...\"));\n    }\n  };\n  \n  // Handle drag events\n  const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  \n  // Remove main image\n  const handleRemoveImage = () => {\n    setSelectedImage(null);\n    setImagePreview(null);\n    form.setValue(\"image\", \"\");\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n  \n  // Remove an additional image\n  const handleRemoveAdditionalImage = (index: number) => {\n    const newFiles = [...additionalImages];\n    newFiles.splice(index, 1);\n    setAdditionalImages(newFiles);\n    \n    const newPreviews = [...additionalImagePreviews];\n    newPreviews.splice(index, 1);\n    setAdditionalImagePreviews(newPreviews);\n    \n    // Update form value\n    form.setValue(\"additionalImages\", form.getValues().additionalImages?.filter((_, i) => i !== index) || []);\n  };\n  \n  // Remove video\n  const handleRemoveVideo = () => {\n    setSelectedVideo(null);\n    setVideoUrl(\"\");\n    form.setValue(\"video\", \"\");\n    if (videoInputRef.current) {\n      videoInputRef.current.value = \"\";\n    }\n  };\n\n  const onSubmit = async (values: FormValues) => {\n    try {\n      setIsSubmitting(true);\n      \n      // Upload main image if selected\n      let imageUrl = values.image;\n      if (selectedImage) {\n        const formData = new FormData();\n        formData.append(\"image\", selectedImage);\n        \n        const uploadResponse = await fetch(\"/api/upload\", {\n          method: \"POST\",\n          body: formData,\n        });\n        \n        if (!uploadResponse.ok) {\n          const error = await uploadResponse.json();\n          throw new Error(error.message || \"Failed to upload main image\");\n        }\n        \n        const { url } = await uploadResponse.json();\n        imageUrl = url;\n      }\n      \n      // Upload additional images if any\n      let additionalImageUrls: string[] = [];\n      if (additionalImages.length > 0) {\n        // Upload each additional image\n        for (const file of additionalImages) {\n          const formData = new FormData();\n          formData.append(\"image\", file);\n          \n          const uploadResponse = await fetch(\"/api/upload\", {\n            method: \"POST\",\n            body: formData,\n          });\n          \n          if (!uploadResponse.ok) {\n            const error = await uploadResponse.json();\n            throw new Error(error.message || \"Failed to upload additional image\");\n          }\n          \n          const { url } = await uploadResponse.json();\n          additionalImageUrls.push(url);\n        }\n      }\n      \n      // Upload video if selected, or use the provided URL\n      let videoUrl = values.video;\n      if (selectedVideo) {\n        const formData = new FormData();\n        formData.append(\"image\", selectedVideo);\n        \n        const uploadResponse = await fetch(\"/api/upload\", {\n          method: \"POST\",\n          body: formData,\n        });\n        \n        if (!uploadResponse.ok) {\n          const error = await uploadResponse.json();\n          throw new Error(error.message || \"Failed to upload video\");\n        }\n        \n        const { url } = await uploadResponse.json();\n        videoUrl = url;\n      }\n      \n      // Create campaign with all media\n      const response = await apiRequest(\"POST\", \"/api/campaigns\", {\n        title: values.title,\n        description: values.description,\n        goal: values.goal, // Keep as string\n        image: imageUrl,\n        additionalImages: additionalImageUrls,\n        video: videoUrl,\n        endDate: values.endDate ? new Date(values.endDate).toISOString() : undefined,\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Failed to create campaign\");\n      }\n      \n      const campaign = await response.json();\n      \n      toast({\n        title: \"Campaign Created!\",\n        description: \"Your campaign has been created successfully.\",\n      });\n      \n      // Redirect to the campaign page\n      navigate(`/donate/${campaign.slug}`);\n    } catch (error: any) {\n      toast({\n        title: \"Error creating campaign\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>Create a Campaign - Christ Collective</title>\n        <meta name=\"description\" content=\"Create a fundraising campaign and share your story with our community. Set a goal and start receiving support.\" />\n        <meta property=\"og:title\" content=\"Create a Campaign - Christ Collective\" />\n        <meta property=\"og:description\" content=\"Create a fundraising campaign and share your story with our community.\" />\n      </Helmet>\n      \n      <section className=\"container mx-auto px-4 py-16\">\n        <div className=\"max-w-3xl mx-auto\">\n          <h1 className=\"text-3xl font-bold mb-2\">Create a Campaign</h1>\n          <p className=\"text-gray-600 mb-8\">\n            Share your story, set a goal, and let our community support your cause.\n          </p>\n          \n          <Card>\n            <CardHeader>\n              <CardTitle>Campaign Details</CardTitle>\n              <CardDescription>\n                Provide information about your campaign to inspire others to donate.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"title\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-black dark:text-white\">Campaign Title</FormLabel>\n                        <FormControl>\n                          <Input \n                            placeholder=\"Give your campaign a clear title\" \n                            {...field} \n                          />\n                        </FormControl>\n                        <FormDescription>\n                          Keep it concise and compelling.\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"goal\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-black dark:text-white\">Fundraising Goal</FormLabel>\n                        <FormControl>\n                          <div className=\"relative\">\n                            <span className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-500\">\n                              $\n                            </span>\n                            <Input \n                              type=\"number\"\n                              min=\"1\"\n                              step=\"0.01\"\n                              placeholder=\"Enter amount needed\"\n                              className=\"pl-8\"\n                              {...field}\n                            />\n                          </div>\n                        </FormControl>\n                        <FormDescription>\n                          Set a realistic goal for your campaign.\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"endDate\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-black dark:text-white\">End Date (Optional)</FormLabel>\n                        <FormControl>\n                          <Input \n                            type=\"date\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormDescription>\n                          When will your campaign end? Leave blank for no end date.\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-black dark:text-white\">Campaign Description</FormLabel>\n                        <FormControl>\n                          <Textarea \n                            placeholder=\"Tell your story and explain the impact of donations\"\n                            rows={8}\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormDescription>\n                          Share why this cause matters and how donations will help.\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"image\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-black dark:text-white\">Main Campaign Image</FormLabel>\n                        <FormControl>\n                          <div \n                            className={`border-2 border-dashed ${imagePreview ? 'border-primary' : 'border-gray-300'} rounded-md p-6 text-center relative`}\n                            onDrop={handleDrop}\n                            onDragOver={handleDragOver}\n                          >\n                            {imagePreview ? (\n                              <div className=\"relative\">\n                                <img \n                                  src={imagePreview} \n                                  alt=\"Campaign preview\" \n                                  className=\"mx-auto h-40 object-contain mb-2\"\n                                />\n                                <button \n                                  type=\"button\"\n                                  onClick={handleRemoveImage}\n                                  className=\"absolute top-0 right-0 bg-red-500 text-white p-1 rounded-full shadow-md hover:bg-red-600 transition-colors\"\n                                >\n                                  <X size={16} />\n                                </button>\n                                <p className=\"text-sm text-gray-300 mt-2\">Main image selected</p>\n                              </div>\n                            ) : (\n                              <>\n                                <ImageIcon className=\"mx-auto text-gray-400 text-3xl mb-3\" size={32} />\n                                <p className=\"text-gray-500 mb-2\">\n                                  Drag and drop your main image here, or select a file\n                                </p>\n                                <p className=\"text-xs text-gray-400 mb-4\">Recommended size: 1200 x 675 pixels</p>\n                                <input\n                                  type=\"file\"\n                                  accept=\"image/*\"\n                                  ref={fileInputRef}\n                                  onChange={handleImageChange}\n                                  className=\"hidden\"\n                                  id=\"campaign-image\"\n                                />\n                                <div className=\"flex space-x-2 justify-center\">\n                                  <Button \n                                    type=\"button\" \n                                    variant=\"outline\"\n                                    onClick={() => fileInputRef.current?.click()}\n                                  >\n                                    <Upload className=\"mr-2\" size={16} />\n                                    Select Image\n                                  </Button>\n                                  <div className=\"text-gray-400 flex items-center\">or</div>\n                                  <Input \n                                    placeholder=\"Enter image URL\"\n                                    {...field}\n                                    className=\"max-w-[250px]\"\n                                    onChange={(e) => {\n                                      field.onChange(e);\n                                      if (e.target.value) {\n                                        setImagePreview(e.target.value);\n                                        setSelectedImage(null);\n                                      } else {\n                                        setImagePreview(null);\n                                      }\n                                    }}\n                                  />\n                                </div>\n                              </>\n                            )}\n                          </div>\n                        </FormControl>\n                        <FormDescription>\n                          This will be the main image displayed for your campaign.\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"additionalImages\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-black dark:text-white\">Additional Images (Optional)</FormLabel>\n                        <FormControl>\n                          <div>\n                            {/* Display uploaded images */}\n                            {additionalImagePreviews.length > 0 && (\n                              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4\">\n                                {additionalImagePreviews.map((preview, index) => (\n                                  <div key={index} className=\"relative\">\n                                    <img \n                                      src={preview} \n                                      alt={`Additional image ${index + 1}`} \n                                      className=\"w-full h-24 object-cover rounded-md\"\n                                    />\n                                    <button \n                                      type=\"button\"\n                                      onClick={() => handleRemoveAdditionalImage(index)}\n                                      className=\"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full shadow-md hover:bg-red-600 transition-colors\"\n                                    >\n                                      <X size={14} />\n                                    </button>\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                            \n                            {/* Add more images area */}\n                            <div \n                              className=\"border-2 border-dashed border-gray-300 rounded-md p-4 text-center\"\n                              onDrop={handleAdditionalImagesDrop}\n                              onDragOver={handleDragOver}\n                            >\n                              <ImageIcon className=\"mx-auto text-gray-400 text-2xl mb-2\" size={24} />\n                              <p className=\"text-gray-500 text-sm mb-2\">\n                                Add more images to your campaign\n                              </p>\n                              <input\n                                type=\"file\"\n                                accept=\"image/*\"\n                                multiple\n                                ref={additionalImagesInputRef}\n                                onChange={handleAdditionalImagesChange}\n                                className=\"hidden\"\n                                id=\"additional-images\"\n                              />\n                              <Button \n                                type=\"button\" \n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => additionalImagesInputRef.current?.click()}\n                              >\n                                <Upload className=\"mr-2\" size={14} />\n                                Add Images\n                              </Button>\n                            </div>\n                          </div>\n                        </FormControl>\n                        <FormDescription>\n                          Upload multiple images to better showcase your campaign.\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"video\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-black dark:text-white\">Campaign Video (Optional)</FormLabel>\n                        <FormControl>\n                          <div className=\"border-2 border-dashed border-gray-300 rounded-md p-6 text-center\">\n                            {selectedVideo ? (\n                              <div className=\"relative\">\n                                <div className=\"mx-auto p-4 bg-gray-800 rounded-md mb-2 text-white\">\n                                  <p className=\"font-medium\">Video Selected: {selectedVideo.name}</p>\n                                  <p className=\"text-xs text-gray-400 mt-1\">\n                                    {(selectedVideo.size / (1024 * 1024)).toFixed(2)} MB\n                                  </p>\n                                </div>\n                                <button \n                                  type=\"button\"\n                                  onClick={handleRemoveVideo}\n                                  className=\"mt-2 text-red-500 underline text-sm\"\n                                >\n                                  Remove video\n                                </button>\n                              </div>\n                            ) : videoUrl ? (\n                              <div className=\"relative\">\n                                <div className=\"mx-auto p-4 bg-gray-800 rounded-md mb-2 text-white\">\n                                  <p className=\"font-medium\">Video URL:</p>\n                                  <p className=\"text-xs text-gray-400 mt-1 break-all\">{videoUrl}</p>\n                                </div>\n                                <button \n                                  type=\"button\"\n                                  onClick={handleRemoveVideo}\n                                  className=\"mt-2 text-red-500 underline text-sm\"\n                                >\n                                  Remove video\n                                </button>\n                              </div>\n                            ) : (\n                              <>\n                                <div className=\"flex flex-col items-center mb-4\">\n                                  <p className=\"text-gray-500 mb-2\">\n                                    Upload a video or enter a video URL (YouTube, Vimeo, etc.)\n                                  </p>\n                                  <input\n                                    type=\"file\"\n                                    accept=\"video/*\"\n                                    ref={videoInputRef}\n                                    onChange={handleVideoChange}\n                                    className=\"hidden\"\n                                    id=\"campaign-video\"\n                                  />\n                                  <Button \n                                    type=\"button\" \n                                    variant=\"outline\"\n                                    onClick={() => videoInputRef.current?.click()}\n                                    className=\"mb-4\"\n                                  >\n                                    <Upload className=\"mr-2\" size={16} />\n                                    Upload Video\n                                  </Button>\n                                  \n                                  <div className=\"text-gray-400 mb-2\">or</div>\n                                  \n                                  <Input \n                                    placeholder=\"Enter video URL (YouTube, Vimeo, etc.)\"\n                                    value={videoUrl}\n                                    onChange={(e) => handleVideoUrlChange(e.target.value)}\n                                    className=\"max-w-md\"\n                                  />\n                                </div>\n                              </>\n                            )}\n                          </div>\n                        </FormControl>\n                        <FormDescription>\n                          A video can help tell your story more effectively and increase engagement.\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <div className=\"flex justify-end space-x-4 pt-4\">\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={() => navigate(\"/donate\")}\n                    >\n                      Cancel\n                    </Button>\n                    <Button \n                      type=\"submit\" \n                      disabled={isSubmitting}\n                      className=\"min-w-[120px]\"\n                    >\n                      {isSubmitting ? (\n                        <div className=\"flex items-center gap-2\">\n                          <div className=\"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent\" />\n                          <span>Creating...</span>\n                        </div>\n                      ) : (\n                        \"Create Campaign\"\n                      )}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n    </>\n  );\n}\n","size_bytes":29585},"client/src/pages/CreatePage.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useLocation } from \"wouter\";\nimport { useEffect } from \"react\";\nimport { \n  Heart, \n  Users, \n  Briefcase, \n  Video, \n  Camera, \n  PenTool, \n  Megaphone,\n  Building,\n  DollarSign,\n  Sparkles,\n  Share2\n} from \"lucide-react\";\nimport { Helmet } from \"react-helmet\";\n\nexport default function CreatePage() {\n  const { user, isLoading } = useAuth();\n  const [, navigate] = useLocation();\n\n  // Get user's profile data to determine capabilities\n  const { data: creatorStatus } = useQuery({\n    queryKey: [\"/api/user/creator-status\"],\n    enabled: !!user,\n  });\n\n  const { data: businessProfiles } = useQuery({\n    queryKey: [\"/api/business-profiles\"],\n    enabled: !!user,\n  });\n\n  const { data: ministryProfile } = useQuery({\n    queryKey: [\"/api/user/ministry-profile\"],\n    enabled: !!user,\n  });\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!isLoading && !user) {\n      navigate(\"/auth\");\n    }\n  }, [isLoading, user, navigate]);\n\n  if (isLoading || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-[#D4AF37] border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  // Base options available to all regular users\n  const baseCreateOptions = [\n    {\n      id: \"campaign\",\n      title: \"Create Campaign\",\n      description: \"Start a fundraising campaign for a cause you care about\",\n      icon: Heart,\n      color: \"text-white\",\n      bgColor: \"bg-red-500\",\n      href: \"/donate/create\",\n      badge: \"Popular\",\n      userType: \"all\"\n    },\n    {\n      id: \"creator\",\n      title: \"Creator Profile\",\n      description: \"Set up your content creator profile and get sponsored\",\n      icon: Video,\n      color: \"text-white\",\n      bgColor: \"bg-purple-500\",\n      href: \"/creators/profile/manage\",\n      badge: null,\n      userType: \"all\"\n    },\n    {\n      id: \"business\",\n      title: \"Business Profile\",\n      description: \"Create or update your business profile for networking\",\n      icon: Briefcase,\n      color: \"text-white\",\n      bgColor: \"bg-blue-500\",\n      href: \"/business/create\",\n      badge: null,\n      userType: \"all\"\n    },\n    {\n      id: \"ministry\",\n      title: \"Ministry Profile\",\n      description: \"Create a profile for your ministry or church organization\",\n      icon: Building,\n      color: \"text-white\",\n      bgColor: \"bg-green-500\",\n      href: \"/ministry/create\",\n      badge: null,\n      userType: \"all\"\n    },\n    {\n      id: \"post\",\n      title: \"Create Post\",\n      description: \"Share inspirational content, testimonies, or updates with the community\",\n      icon: PenTool,\n      color: \"text-white\",\n      bgColor: \"bg-indigo-500\",\n      href: \"/feed\",\n      badge: null,\n      userType: \"all\",\n      action: \"create-post\"\n    }\n  ];\n\n  // Additional options for creator profiles\n  const creatorOnlyOptions = [\n    {\n      id: \"share-social\",\n      title: \"Share Social Media Content\",\n      description: \"Import and share content from YouTube, TikTok, and Instagram\",\n      icon: Share2,\n      color: \"text-white\",\n      bgColor: \"bg-[#D4AF37]\",\n      href: \"/creators/share\",\n      badge: \"Creator Only\",\n      userType: \"creator\",\n      action: \"social-share\"\n    }\n  ];\n\n  // Additional options for ministry profiles\n  const ministryOnlyOptions = [\n    {\n      id: \"create-event\",\n      title: \"Create Event\",\n      description: \"Organize community events, church services, and gatherings\",\n      icon: Users,\n      color: \"text-white\",\n      bgColor: \"bg-green-600\",\n      href: \"/events/create\",\n      badge: \"Ministry Only\",\n      userType: \"ministry\"\n    }\n  ];\n\n  // Check what profiles user already has\n  const hasCreatorProfile = (creatorStatus as any)?.isCreator;\n  const hasBusinessProfile = businessProfiles && (businessProfiles as any[])?.length > 0;\n  const hasMinistryProfile = ministryProfile && !(ministryProfile as any)?.message;\n\n  // Filter base options based on existing profiles\n  const filteredBaseOptions = baseCreateOptions.filter(option => {\n    if (option.id === \"creator\" && hasCreatorProfile) return false;\n    if (option.id === \"business\" && hasBusinessProfile) return false;\n    if (option.id === \"ministry\" && hasMinistryProfile) return false;\n    return true;\n  });\n\n  // Build final create options based on user profiles\n  let createOptions = [...filteredBaseOptions];\n  \n  // Add creator-specific options\n  if (hasCreatorProfile) {\n    createOptions = [...createOptions, ...creatorOnlyOptions];\n  }\n  \n  // Add ministry-specific options\n  if (hasMinistryProfile) {\n    createOptions = [...createOptions, ...ministryOnlyOptions];\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Create - Christ Collective</title>\n        <meta name=\"description\" content=\"Create campaigns, business profiles, content, and more to share with the Christ Collective community.\" />\n      </Helmet>\n      <div className=\"min-h-screen bg-background pb-20\">\n        {/* Header */}\n        <div className=\"bg-black border-b border-border sticky top-0 z-10\">\n          <div className=\"container mx-auto px-4 py-4 max-w-2xl\">\n            <div className=\"flex items-center justify-between\">\n              <h1 className=\"text-xl font-bold text-white\">Create</h1>\n              <Sparkles className=\"h-6 w-6 text-[#D4AF37]\" />\n            </div>\n            <p className=\"text-gray-300 text-sm mt-1\">\n              What would you like to create today?\n              {hasCreatorProfile && (\n                <span className=\"block text-[#D4AF37] text-xs mt-1\">\n                  ✨ Creator features unlocked! Share content from your platforms.\n                </span>\n              )}\n              {hasMinistryProfile && (\n                <span className=\"block text-green-400 text-xs mt-1\">\n                  ⛪ Ministry features unlocked! Create events and organize gatherings.\n                </span>\n              )}\n            </p>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"container mx-auto px-4 py-6 max-w-2xl\">\n          <div className=\"grid grid-cols-1 gap-4\">\n            {createOptions.map((option) => {\n              const IconComponent = option.icon;\n              const isComingSoon = option.badge === \"Coming Soon\";\n              \n              return (\n                <Card \n                  key={option.id} \n                  className={`hover:shadow-md transition-all duration-200 bg-black border-gray-600 ${\n                    !isComingSoon ? 'cursor-pointer hover:scale-[1.02]' : 'opacity-60'\n                  }`}\n                  onClick={() => {\n                    if (!isComingSoon) {\n                      if (option.action === \"create-post\") {\n                        // Handle create post action - this would trigger the CreatePostModal\n                        // For now, navigate to feed where they can use the post creation\n                        navigate(option.href);\n                      } else if (option.action === \"social-share\") {\n                        // Handle social share - show platform selection\n                        navigate(\"/creators/share/youtube\"); // Default to YouTube for now\n                      } else {\n                        navigate(option.href);\n                      }\n                    }\n                  }}\n                >\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start space-x-4\">\n                      {/* Icon */}\n                      <div className={`p-3 rounded-lg ${option.bgColor} flex-shrink-0`}>\n                        <IconComponent className={`h-6 w-6 ${option.color}`} />\n                      </div>\n                      \n                      {/* Content */}\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-start justify-between mb-2\">\n                          <h3 className=\"font-semibold text-white text-lg\">{option.title}</h3>\n                          {option.badge && (\n                            <Badge \n                              variant={option.badge === \"Popular\" ? \"default\" : \"secondary\"}\n                              className={`ml-2 text-xs ${\n                                option.badge === \"Popular\" \n                                  ? \"bg-[#D4AF37] text-black hover:bg-[#B8941F]\" \n                                  : \"bg-gray-700 text-gray-300\"\n                              }`}\n                            >\n                              {option.badge}\n                            </Badge>\n                          )}\n                        </div>\n                        <p className=\"text-gray-300 text-sm leading-relaxed\">\n                          {option.description}\n                        </p>\n                        \n                        {!isComingSoon && (\n                          <div className=\"mt-3\">\n                            <Button \n                              variant=\"outline\" \n                              size=\"sm\"\n                              className=\"text-[#D4AF37] border-[#D4AF37] hover:bg-[#D4AF37] hover:text-black transition-colors\"\n                            >\n                              Get Started\n                            </Button>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n\n          {/* Quick Stats */}\n          <Card className=\"mt-8 bg-black border-gray-600\">\n            <CardHeader>\n              <CardTitle className=\"text-white\">Your Creative Impact</CardTitle>\n              <CardDescription className=\"text-gray-400\">\n                Track what you've created and shared with the community\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-3 gap-4 text-center\">\n                <div>\n                  <div className=\"text-2xl font-bold text-[#D4AF37]\">0</div>\n                  <div className=\"text-xs text-gray-400\">Campaigns</div>\n                </div>\n                <div>\n                  <div className=\"text-2xl font-bold text-[#D4AF37]\">1</div>\n                  <div className=\"text-xs text-gray-400\">Profiles</div>\n                </div>\n                <div>\n                  <div className=\"text-2xl font-bold text-[#D4AF37]\">0</div>\n                  <div className=\"text-xs text-gray-400\">Events</div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":10959},"client/src/pages/CreatorProfileManagePage.tsx":{"content":"import React from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useCreatorStatus } from \"@/hooks/useCreatorStatus\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { useForm, useFieldArray } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { ArrowLeft, Plus, Trash2, User, Edit, Save, Calendar, Globe, Users, Play } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nconst platformOptions = [\n  \"YouTube\", \"Instagram\", \"TikTok\", \"Twitter\", \"Facebook\", \"LinkedIn\", \"Twitch\", \"Podcast\"\n];\n\nconst platformSchema = z.object({\n  platform: z.string().min(1, \"Platform is required\"),\n  profileUrl: z.string().url(\"Please enter a valid URL\"),\n  subscriberCount: z.number().optional(),\n});\n\nconst creatorProfileSchema = z.object({\n  name: z.string().min(1, \"Name is required\"),\n  content: z.string().min(1, \"Content description is required\"),\n  audience: z.string().optional(),\n  bio: z.string().optional(),\n  platforms: z.array(platformSchema).min(1, \"Please add at least one platform\"),\n});\n\ntype CreatorProfileFormData = z.infer<typeof creatorProfileSchema>;\n\nexport default function CreatorProfileManagePage() {\n  const { user, isLoading: authLoading } = useAuth();\n  const { data: creatorStatus, isLoading: creatorLoading } = useCreatorStatus();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const form = useForm<CreatorProfileFormData>({\n    resolver: zodResolver(creatorProfileSchema),\n    defaultValues: {\n      name: creatorStatus?.creatorProfile?.name || \"\",\n      content: creatorStatus?.creatorProfile?.content || \"\",\n      audience: creatorStatus?.creatorProfile?.audience || \"\",\n      bio: creatorStatus?.creatorProfile?.bio || \"\",\n      platforms: creatorStatus?.creatorProfile?.platforms || [{ platform: \"\", profileUrl: \"\", subscriberCount: undefined }],\n    },\n  });\n\n  const { fields, append, remove } = useFieldArray({\n    control: form.control,\n    name: \"platforms\",\n  });\n\n  // Update form when creator data loads\n  React.useEffect(() => {\n    if (creatorStatus?.creatorProfile) {\n      const profile = creatorStatus.creatorProfile;\n      form.reset({\n        name: profile.name,\n        content: profile.content,\n        audience: profile.audience || \"\",\n        bio: profile.bio || \"\",\n        platforms: profile.platforms.length > 0 ? profile.platforms : [{ platform: \"\", profileUrl: \"\", subscriberCount: undefined }],\n      });\n    }\n  }, [creatorStatus, form]);\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: CreatorProfileFormData) => {\n      if (!creatorStatus?.creatorProfile?.id) {\n        throw new Error(\"Creator profile not found\");\n      }\n      return apiRequest(\"PUT\", `/api/content-creators/${creatorStatus.creatorProfile.id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/user/creator-status'] });\n      toast({\n        title: \"Profile Updated\",\n        description: \"Your creator profile has been updated successfully.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: CreatorProfileFormData) => {\n    updateProfileMutation.mutate(data);\n  };\n\n  // Redirect if not authenticated or not a creator\n  if (!authLoading && !user) {\n    navigate(\"/auth\");\n    return null;\n  }\n\n  if (!creatorLoading && !creatorStatus?.isCreator) {\n    navigate(\"/\");\n    return null;\n  }\n\n  if (authLoading || creatorLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-white to-amber-50 flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-amber-600 border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  const creatorProfile = creatorStatus?.creatorProfile;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-white to-amber-50\">\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <Link href=\"/creators\">\n            <Button variant=\"ghost\" className=\"mb-4 bg-black text-white hover:bg-gray-800\">\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Back to Creators\n            </Button>\n          </Link>\n          \n          <div className=\"flex items-center gap-6 mb-6\">\n            <Avatar className=\"w-20 h-20\">\n              <AvatarImage src={creatorProfile?.profileImage || \"\"} alt={creatorProfile?.name || \"Creator\"} />\n              <AvatarFallback className=\"bg-amber-100 text-amber-800 text-2xl font-bold\">\n                {creatorProfile?.name?.split(' ').map(n => n[0]).join('') || 'U'}\n              </AvatarFallback>\n            </Avatar>\n            \n            <div>\n              <h1 className=\"text-3xl font-bold text-black\">{creatorProfile?.name}</h1>\n              <div className=\"flex items-center gap-2 mt-2\">\n                <Badge className=\"bg-amber-100 text-amber-800 hover:bg-amber-200\">\n                  {creatorProfile?.isSponsored ? 'Sponsored Creator' : 'Creator'}\n                </Badge>\n                {creatorProfile?.isSponsored && (\n                  <div className=\"flex items-center gap-1 text-sm text-gray-600\">\n                    <Calendar className=\"w-4 h-4\" />\n                    <span>Since {new Date().toLocaleDateString()}</span>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Profile Management Form */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Profile Stats */}\n          <div className=\"lg:col-span-1\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Users className=\"w-5 h-5\" />\n                  Profile Overview\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center gap-2\">\n                  <Play className=\"w-4 h-4 text-amber-600\" />\n                  <span className=\"text-sm text-white\">Content: {creatorProfile?.content}</span>\n                </div>\n                {creatorProfile?.audience && (\n                  <div className=\"flex items-center gap-2\">\n                    <Users className=\"w-4 h-4 text-amber-600\" />\n                    <span className=\"text-sm text-white\">Audience: {creatorProfile.audience}</span>\n                  </div>\n                )}\n                <div className=\"space-y-2\">\n                  <p className=\"text-sm font-medium text-white\">Platforms:</p>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {(creatorProfile?.platforms as any[])?.map((platform, index) => (\n                      <div key={index} className=\"flex items-center gap-1 bg-gray-50 rounded-lg px-3 py-1\">\n                        <Globe className=\"w-3 h-3\" />\n                        <span className=\"text-xs font-medium text-gray-700 capitalize\">\n                          {platform.platform}\n                        </span>\n                        {platform.subscriberCount && (\n                          <Badge variant=\"outline\" className=\"text-xs ml-1 bg-yellow-400 text-black border-yellow-500\">\n                            {platform.subscriberCount >= 1000000 \n                              ? `${(platform.subscriberCount / 1000000).toFixed(1)}M`\n                              : platform.subscriberCount >= 1000 \n                              ? `${(platform.subscriberCount / 1000).toFixed(1)}K`\n                              : platform.subscriberCount}\n                          </Badge>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Edit Form */}\n          <div className=\"lg:col-span-2\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Edit className=\"w-5 h-5\" />\n                  Edit Profile\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Form {...form}>\n                  <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                    {/* Basic Information */}\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"name\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Creator Name</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"Your creator name\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={form.control}\n                        name=\"audience\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Target Audience</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"e.g., Young adults, Families\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <FormField\n                      control={form.control}\n                      name=\"content\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Content Description</FormLabel>\n                          <FormControl>\n                            <Textarea {...field} placeholder=\"Describe the type of content you create\" rows={3} />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"bio\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Bio</FormLabel>\n                          <FormControl>\n                            <Textarea {...field} placeholder=\"Tell us about yourself and your mission\" rows={4} />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    {/* Platforms */}\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center justify-between\">\n                        <Label className=\"text-base font-medium\">Social Media Platforms</Label>\n                        <Button\n                          type=\"button\"\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => append({ platform: \"\", profileUrl: \"\", subscriberCount: undefined })}\n                        >\n                          <Plus className=\"w-4 h-4 mr-2\" />\n                          Add Platform\n                        </Button>\n                      </div>\n\n                      {fields.map((field, index) => (\n                        <div key={field.id} className=\"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg\">\n                          <FormField\n                            control={form.control}\n                            name={`platforms.${index}.platform`}\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Platform</FormLabel>\n                                <Select onValueChange={field.onChange} value={field.value}>\n                                  <FormControl>\n                                    <SelectTrigger>\n                                      <SelectValue placeholder=\"Select platform\" />\n                                    </SelectTrigger>\n                                  </FormControl>\n                                  <SelectContent>\n                                    {platformOptions.map((platform) => (\n                                      <SelectItem key={platform} value={platform}>\n                                        {platform}\n                                      </SelectItem>\n                                    ))}\n                                  </SelectContent>\n                                </Select>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={form.control}\n                            name={`platforms.${index}.profileUrl`}\n                            render={({ field }) => (\n                              <FormItem className=\"md:col-span-2\">\n                                <FormLabel>Profile URL</FormLabel>\n                                <FormControl>\n                                  <Input {...field} placeholder=\"https://...\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <div className=\"flex items-end gap-2\">\n                            <FormField\n                              control={form.control}\n                              name={`platforms.${index}.subscriberCount`}\n                              render={({ field }) => (\n                                <FormItem className=\"flex-1\">\n                                  <FormLabel>Followers</FormLabel>\n                                  <FormControl>\n                                    <Input\n                                      {...field}\n                                      type=\"number\"\n                                      placeholder=\"0\"\n                                      onChange={(e) => field.onChange(e.target.value ? parseInt(e.target.value) : undefined)}\n                                    />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n                            \n                            {fields.length > 1 && (\n                              <Button\n                                type=\"button\"\n                                variant=\"outline\"\n                                size=\"icon\"\n                                onClick={() => remove(index)}\n                                className=\"text-red-600 hover:text-red-700\"\n                              >\n                                <Trash2 className=\"w-4 h-4\" />\n                              </Button>\n                            )}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n\n                    {/* Submit Button */}\n                    <div className=\"flex justify-end\">\n                      <Button\n                        type=\"submit\"\n                        disabled={updateProfileMutation.isPending}\n                        className=\"bg-amber-600 hover:bg-amber-700 text-white\"\n                      >\n                        {updateProfileMutation.isPending ? (\n                          <>\n                            <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2\" />\n                            Saving...\n                          </>\n                        ) : (\n                          <>\n                            <Save className=\"w-4 h-4 mr-2\" />\n                            Save Changes\n                          </>\n                        )}\n                      </Button>\n                    </div>\n                  </form>\n                </Form>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":17279},"client/src/pages/CreatorProfilePage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useParams } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { ExternalLink, Users, Play, Eye, Heart, Calendar, ArrowLeft } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { ContentCreator, SocialMediaPost } from \"@shared/schema\";\nimport instagramLogo from \"@/assets/instagram-icon-new.png\";\nimport tiktokLogo from \"@assets/9e020c743d8609911095831c2a867c84-32bits-32_1753981722521.png\";\nimport youtubeIconPath from \"@assets/6ed49f7596c2f434dba2edeb8fb15b54-32bits-32_1753981720269.png\";\n\ninterface CreatorWithPosts extends ContentCreator {\n  posts?: SocialMediaPost[];\n  totalFollowers?: number;\n}\n\nexport default function CreatorProfilePage() {\n  const { id } = useParams();\n\n  const { data: creator, isLoading, error } = useQuery<CreatorWithPosts>({\n    queryKey: ['/api/content-creators', id],\n    queryFn: async () => {\n      const response = await fetch(`/api/content-creators/${id}`);\n      if (!response.ok) throw new Error('Failed to fetch creator');\n      return response.json();\n    }\n  });\n\n  // Fetch user stats (followers/following counts) \n  const { data: userStats } = useQuery({\n    queryKey: ['/api/users', creator?.userId, 'stats'],\n    queryFn: async () => {\n      if (!creator?.userId) return null;\n      const response = await fetch(`/api/users/${creator.userId}/stats`);\n      if (!response.ok) return null;\n      return response.json();\n    },\n    enabled: !!creator?.userId\n  });\n\n  const getPlatformIcon = (platform: string) => {\n    switch (platform.toLowerCase()) {\n      case 'youtube': return <img src={youtubeIconPath} alt=\"YouTube\" className=\"w-6 h-6\" />;\n      case 'instagram': return <img src={instagramLogo} alt=\"Instagram\" className=\"w-6 h-6\" />;\n      case 'tiktok': return <img src={tiktokLogo} alt=\"TikTok\" className=\"w-6 h-6\" />;\n      case 'twitter': return <span className=\"text-2xl\">🐦</span>;\n      case 'facebook': return <span className=\"text-2xl\">👥</span>;\n      case 'linkedin': return <span className=\"text-2xl\">💼</span>;\n      case 'twitch': return <span className=\"text-2xl\">🎮</span>;\n      default: return <span className=\"text-2xl\">🌐</span>;\n    }\n  };\n\n  const formatSubscriberCount = (count?: number) => {\n    if (!count) return 'N/A';\n    if (count >= 1000000) return `${(count / 1000000).toFixed(1)}M`;\n    if (count >= 1000) return `${(count / 1000).toFixed(1)}K`;\n    return count.toString();\n  };\n\n  const formatDate = (date: string | Date) => {\n    return new Date(date).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-white to-amber-50\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center py-12\">\n            <div className=\"animate-spin w-8 h-8 border-4 border-amber-600 border-t-transparent rounded-full mx-auto\"></div>\n            <p className=\"mt-4 text-gray-600\">Loading creator profile...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !creator) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-white to-amber-50\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center py-12\">\n            <div className=\"bg-white rounded-lg shadow-lg p-8 max-w-md mx-auto\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">Creator Not Found</h3>\n              <p className=\"text-gray-600 mb-4\">The creator profile you're looking for doesn't exist.</p>\n              <Link href=\"/creators\">\n                <Button className=\"bg-amber-600 hover:bg-amber-700\">\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                  Back to Creators\n                </Button>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      {/* Modern Header with Navigation */}\n      <div className=\"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800\">\n        <div className=\"max-w-4xl mx-auto px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            <Link href=\"/creators\">\n              <Button variant=\"ghost\" className=\"text-white hover:bg-white/10 p-2\">\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Button>\n            </Link>\n            <h1 className=\"text-lg font-semibold text-center flex-1\">{creator.name}</h1>\n            <Button variant=\"ghost\" className=\"text-white hover:bg-white/10 p-2\">\n              <ExternalLink className=\"w-5 h-5\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Profile Header */}\n      <div className=\"max-w-4xl mx-auto px-4 py-6\">\n        <div className=\"flex items-start gap-6 mb-4\">\n          <Avatar className=\"w-32 h-32 ring-2 ring-gray-700\">\n            <AvatarImage src={creator.profileImage || ''} alt={creator.name} />\n            <AvatarFallback className=\"bg-gray-800 text-white text-3xl font-bold\">\n              {creator.name.split(' ').map(n => n[0]).join('')}\n            </AvatarFallback>\n          </Avatar>\n          \n          <div className=\"flex-1\">\n            <div className=\"flex flex-col gap-1 mb-2\">\n              <h2 className=\"text-xl font-semibold text-left\">{creator.name}</h2>\n              <Badge className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F] text-xs px-3 py-1 w-fit rounded-full font-medium\">\n                ✨ Sponsored Creator\n              </Badge>\n            </div>\n            \n            {/* Stats Row - Moved higher */}\n            <div className=\"flex gap-6 mb-3\">\n              <div className=\"text-left\">\n                <div className=\"text-lg font-semibold\">\n                  {creator.posts?.length || 0}\n                </div>\n                <div className=\"text-xs text-gray-400\">posts</div>\n              </div>\n              <div className=\"text-left\">\n                <div className=\"text-lg font-semibold\">\n                  {formatSubscriberCount(creator.totalFollowers || 0)}\n                </div>\n                <div className=\"text-xs text-gray-400\">followers</div>\n              </div>\n              <div className=\"text-left\">\n                <div className=\"text-lg font-semibold\">\n                  {userStats?.followingCount || 0}\n                </div>\n                <div className=\"text-xs text-gray-400\">following</div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Bio - Left aligned */}\n        {creator.bio && (\n          <div className=\"mb-4\">\n            <p className=\"text-sm leading-relaxed text-left\">{creator.bio}</p>\n          </div>\n        )}\n        \n        {/* Content Type and Audience - Single line */}\n        <div className=\"text-sm text-gray-400 mb-6 text-left\">\n          <div>\n            Content: {creator.content}\n            {creator.audience && ` • Audience: ${creator.audience}`}\n            {creator.sponsorshipStartDate && ` • Sponsored since ${formatDate(creator.sponsorshipStartDate)}`}\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex gap-3 mb-6\">\n          <Button className=\"flex-1 bg-[#D4AF37] text-black hover:bg-[#B8941F] font-medium\">\n            Follow\n          </Button>\n          <Button variant=\"outline\" className=\"flex-1 border-gray-600 text-white hover:bg-gray-800\">\n            Message\n          </Button>\n        </div>\n\n        {/* Platform Links */}\n        <div className=\"flex gap-3 overflow-x-auto pb-2 mb-6\">\n          {(creator.platforms as any[])?.map((platform, index) => (\n            <button\n              key={index}\n              onClick={() => window.open(platform.profileUrl, '_blank')}\n              className=\"flex flex-col items-center gap-2 min-w-[80px] p-3 bg-gray-900 rounded-xl hover:bg-gray-800 transition-colors\"\n            >\n              <div className=\"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center\">\n                {getPlatformIcon(platform.platform)}\n              </div>\n              <div className=\"text-xs text-center\">\n                <div className=\"font-medium capitalize\">{platform.platform}</div>\n                {platform.subscriberCount && (\n                  <div className=\"text-gray-400 text-[10px]\">\n                    {formatSubscriberCount(platform.subscriberCount)}\n                  </div>\n                )}\n              </div>\n            </button>\n          ))}\n        </div>\n\n        {/* Content Grid */}\n        <div className=\"border-t border-gray-800 mt-6 pt-6\">\n          {!creator.posts || creator.posts.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <div className=\"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Play className=\"w-8 h-8 text-gray-400\" />\n              </div>\n              <h3 className=\"text-lg font-semibold mb-2\">No posts yet</h3>\n              <p className=\"text-gray-400 text-sm\">\n                When {creator.name} shares content, it will appear here.\n              </p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-3 gap-1\">\n              {creator.posts.map((post) => (\n                <button\n                  key={post.id}\n                  onClick={() => window.open(post.postUrl, '_blank')}\n                  className=\"aspect-square bg-gray-900 rounded-lg overflow-hidden group relative hover:opacity-75 transition-opacity\"\n                >\n                  {post.thumbnailUrl ? (\n                    <img \n                      src={post.thumbnailUrl} \n                      alt={post.postTitle || 'Post'}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center bg-gray-800\">\n                      <Play className=\"w-8 h-8 text-gray-400\" />\n                    </div>\n                  )}\n                  \n                  {/* Overlay with stats */}\n                  <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                    <div className=\"flex items-center gap-4 text-white text-sm\">\n                      {post.likeCount && (\n                        <div className=\"flex items-center gap-1\">\n                          <Heart className=\"w-4 h-4 fill-white\" />\n                          <span>{post.likeCount.toLocaleString()}</span>\n                        </div>\n                      )}\n                      {post.viewCount && (\n                        <div className=\"flex items-center gap-1\">\n                          <Eye className=\"w-4 h-4\" />\n                          <span>{post.viewCount.toLocaleString()}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {/* Platform indicator */}\n                  <div className=\"absolute top-2 right-2 w-6 h-6 bg-black/70 rounded-full flex items-center justify-center\">\n                    <div className=\"scale-75\">\n                      {getPlatformIcon(post.platform)}\n                    </div>\n                  </div>\n                  \n                  {/* Sponsored indicator */}\n                  {post.isSponsored && (\n                    <div className=\"absolute top-2 left-2 bg-[#D4AF37] text-black text-xs px-1.5 py-0.5 rounded-full font-medium\">\n                      Ad\n                    </div>\n                  )}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":12070},"client/src/pages/CreatorSharePage.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useLocation, useParams } from \"wouter\";\nimport { useEffect } from \"react\";\nimport { \n  ArrowLeft,\n  Video, \n  Camera, \n  ExternalLink,\n  Import,\n  Share2,\n  AlertCircle,\n  CheckCircle,\n  Loader2\n} from \"lucide-react\";\nimport { Helmet } from \"react-helmet\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport default function CreatorSharePage() {\n  const { user, isLoading } = useAuth();\n  const [, navigate] = useLocation();\n  const params = useParams();\n  const platform = params.platform; // youtube, tiktok, instagram\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const [contentUrl, setContentUrl] = useState(\"\");\n  const [customMessage, setCustomMessage] = useState(\"\");\n  const [isImporting, setIsImporting] = useState(false);\n  const [importedContent, setImportedContent] = useState<any>(null);\n\n  // Check if user has creator profile\n  const { data: creatorStatus } = useQuery({\n    queryKey: [\"/api/user/creator-status\"],\n    enabled: !!user,\n  });\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!isLoading && !user) {\n      navigate(\"/auth\");\n    }\n  }, [isLoading, user, navigate]);\n\n  // Redirect if not a creator\n  useEffect(() => {\n    if (user && creatorStatus && !creatorStatus.isCreator) {\n      toast({\n        title: \"Creator Profile Required\",\n        description: \"You need a creator profile to share content from other platforms.\",\n        variant: \"destructive\",\n      });\n      navigate(\"/creators/profile/manage\");\n    }\n  }, [user, creatorStatus, navigate, toast]);\n\n  const importContentMutation = useMutation({\n    mutationFn: async (url: string) => {\n      setIsImporting(true);\n      return await apiRequest(`/api/creators/import/${platform}`, {\n        method: \"POST\",\n        data: { url, platform },\n      });\n    },\n    onSuccess: (data) => {\n      setImportedContent(data);\n      setIsImporting(false);\n      toast({\n        title: \"Content imported successfully!\",\n        description: \"Review and customize your post before sharing.\",\n      });\n    },\n    onError: (error: any) => {\n      setIsImporting(false);\n      toast({\n        title: \"Import failed\",\n        description: error.message || \"Failed to import content from this URL.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const shareContentMutation = useMutation({\n    mutationFn: async (postData: any) => {\n      return await apiRequest(\"/api/platform-posts\", {\n        method: \"POST\",\n        data: postData,\n      });\n    },\n    onSuccess: () => {\n      toast({ title: \"Content shared successfully!\" });\n      navigate(\"/feed\");\n      queryClient.invalidateQueries({ queryKey: [\"/api/platform-posts\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Failed to share content\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleImport = () => {\n    if (!contentUrl.trim()) {\n      toast({\n        title: \"URL required\",\n        description: \"Please enter a valid URL to import content.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    importContentMutation.mutate(contentUrl.trim());\n  };\n\n  const handleShare = () => {\n    if (!importedContent) return;\n\n    const postData = {\n      title: importedContent.title,\n      content: customMessage || importedContent.description || `Check out my latest ${platform} content!`,\n      authorType: \"creator\",\n      authorId: creatorStatus?.creatorProfile?.id,\n      mediaType: platform === \"youtube\" ? \"video\" : \"image\",\n      mediaUrls: [importedContent.thumbnailUrl || importedContent.imageUrl],\n      tags: [`#${platform}`, \"#creator\", \"#faith\"],\n      externalUrl: contentUrl, // Store original URL for linking back\n      platform: platform,\n    };\n\n    shareContentMutation.mutate(postData);\n  };\n\n  const getPlatformInfo = () => {\n    switch (platform) {\n      case \"youtube\":\n        return {\n          name: \"YouTube\",\n          icon: Video,\n          color: \"text-red-600\",\n          bgColor: \"bg-red-50\",\n          placeholder: \"https://youtube.com/watch?v=...\",\n          description: \"Import videos from your YouTube channel\"\n        };\n      case \"tiktok\":\n        return {\n          name: \"TikTok\", \n          icon: Camera,\n          color: \"text-pink-600\",\n          bgColor: \"bg-pink-50\",\n          placeholder: \"https://tiktok.com/@username/video/...\",\n          description: \"Import videos from your TikTok profile\"\n        };\n      case \"instagram\":\n        return {\n          name: \"Instagram\",\n          icon: Camera, \n          color: \"text-purple-600\",\n          bgColor: \"bg-purple-50\",\n          placeholder: \"https://instagram.com/p/...\",\n          description: \"Import posts from your Instagram account\"\n        };\n      default:\n        return {\n          name: \"Platform\",\n          icon: Share2,\n          color: \"text-gray-600\",\n          bgColor: \"bg-gray-50\",\n          placeholder: \"Enter content URL...\",\n          description: \"Import content from external platform\"\n        };\n    }\n  };\n\n  if (isLoading || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-[#D4AF37] border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  const platformInfo = getPlatformInfo();\n  const IconComponent = platformInfo.icon;\n\n  return (\n    <>\n      <Helmet>\n        <title>Share {platformInfo.name} Content - Christ Collective</title>\n        <meta name=\"description\" content={`Import and share your ${platformInfo.name} content with the Christ Collective community.`} />\n      </Helmet>\n      <div className=\"min-h-screen bg-black text-white pb-20\">\n        {/* Header */}\n        <div className=\"bg-black border-b border-gray-800 p-4 sticky top-0 z-10\">\n          <div className=\"flex items-center gap-4\">\n            <Button \n              variant=\"ghost\" \n              onClick={() => navigate(\"/create\")}\n              className=\"text-white hover:bg-white/10 p-2\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Button>\n            <div className=\"flex items-center gap-3\">\n              <div className={`p-2 rounded-lg ${platformInfo.bgColor}`}>\n                <IconComponent className={`h-6 w-6 ${platformInfo.color}`} />\n              </div>\n              <div>\n                <h1 className=\"text-xl font-bold text-white\">Share {platformInfo.name} Content</h1>\n                <p className=\"text-gray-300 text-sm\">{platformInfo.description}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"container mx-auto px-4 py-6 max-w-2xl\">\n          <div className=\"space-y-6\">\n            {/* Import Section */}\n            <Card className=\"bg-gray-900 border-gray-700\">\n              <CardHeader>\n                <CardTitle className=\"text-white flex items-center gap-2\">\n                  <Import className=\"w-5 h-5 text-[#D4AF37]\" />\n                  Import Content\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-300\">\n                    {platformInfo.name} URL\n                  </label>\n                  <div className=\"flex gap-2\">\n                    <Input\n                      value={contentUrl}\n                      onChange={(e) => setContentUrl(e.target.value)}\n                      placeholder={platformInfo.placeholder}\n                      className=\"bg-gray-800 border-gray-600 text-white placeholder-gray-400\"\n                      disabled={isImporting}\n                    />\n                    <Button\n                      onClick={handleImport}\n                      disabled={isImporting || !contentUrl.trim()}\n                      className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F]\"\n                    >\n                      {isImporting ? (\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\n                      ) : (\n                        \"Import\"\n                      )}\n                    </Button>\n                  </div>\n                  <p className=\"text-xs text-gray-500\">\n                    Paste the URL of your {platformInfo.name} content to import it\n                  </p>\n                </div>\n\n                {/* Import Status */}\n                {isImporting && (\n                  <div className=\"flex items-center gap-2 text-blue-400\">\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    <span className=\"text-sm\">Importing content from {platformInfo.name}...</span>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Preview Section */}\n            {importedContent && (\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white flex items-center gap-2\">\n                    <CheckCircle className=\"w-5 h-5 text-green-500\" />\n                    Content Preview\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {/* Content Preview */}\n                  <div className=\"bg-gray-800 rounded-lg p-4\">\n                    {importedContent.thumbnailUrl && (\n                      <img \n                        src={importedContent.thumbnailUrl} \n                        alt={importedContent.title}\n                        className=\"w-full h-48 object-cover rounded-lg mb-3\"\n                      />\n                    )}\n                    <h3 className=\"font-medium text-white mb-2\">{importedContent.title}</h3>\n                    <p className=\"text-sm text-gray-400 mb-2\">{importedContent.description}</p>\n                    <div className=\"flex items-center gap-2\">\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        {platformInfo.name}\n                      </Badge>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\"\n                        onClick={() => window.open(contentUrl, '_blank')}\n                        className=\"text-[#D4AF37] hover:bg-[#D4AF37]/10\"\n                      >\n                        <ExternalLink className=\"w-3 h-3 mr-1\" />\n                        View Original\n                      </Button>\n                    </div>\n                  </div>\n\n                  {/* Custom Message */}\n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm font-medium text-gray-300\">\n                      Add Your Message (Optional)\n                    </label>\n                    <Textarea\n                      value={customMessage}\n                      onChange={(e) => setCustomMessage(e.target.value)}\n                      placeholder={`Share your thoughts about this ${platformInfo.name} content...`}\n                      rows={3}\n                      className=\"bg-gray-800 border-gray-600 text-white placeholder-gray-400\"\n                    />\n                  </div>\n\n                  {/* Share Button */}\n                  <Button\n                    onClick={handleShare}\n                    disabled={shareContentMutation.isPending}\n                    className=\"w-full bg-[#D4AF37] text-black hover:bg-[#B8941F]\"\n                  >\n                    {shareContentMutation.isPending ? (\n                      <div className=\"flex items-center gap-2\">\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\n                        Sharing...\n                      </div>\n                    ) : (\n                      <div className=\"flex items-center gap-2\">\n                        <Share2 className=\"w-4 h-4\" />\n                        Share with Community\n                      </div>\n                    )}\n                  </Button>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Info Card */}\n            <Card className=\"bg-gray-900 border-gray-700\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-start gap-3\">\n                  <AlertCircle className=\"w-5 h-5 text-blue-400 mt-0.5\" />\n                  <div>\n                    <h4 className=\"font-medium text-white mb-1\">How it works</h4>\n                    <ul className=\"text-sm text-gray-400 space-y-1\">\n                      <li>• Paste your {platformInfo.name} content URL above</li>\n                      <li>• We'll import the title, description, and thumbnail</li>\n                      <li>• Add your personal message to share with the community</li>\n                      <li>• Your original content link will be preserved for viewers</li>\n                    </ul>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":13528},"client/src/pages/CreatorSocialSharePage.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useLocation } from \"wouter\";\nimport { useEffect } from \"react\";\nimport { \n  ArrowLeft,\n  Video, \n  Camera, \n  Share2,\n  ExternalLink\n} from \"lucide-react\";\nimport { Helmet } from \"react-helmet\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function CreatorSocialSharePage() {\n  const { user, isLoading } = useAuth();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n\n  // Check if user has creator profile\n  const { data: creatorStatus } = useQuery({\n    queryKey: [\"/api/user/creator-status\"],\n    enabled: !!user,\n  });\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!isLoading && !user) {\n      navigate(\"/auth\");\n    }\n  }, [isLoading, user, navigate]);\n\n  // Redirect if not a creator\n  useEffect(() => {\n    if (user && creatorStatus && !(creatorStatus as any)?.isCreator) {\n      toast({\n        title: \"Creator Profile Required\",\n        description: \"You need a creator profile to share content from other platforms.\",\n        variant: \"destructive\",\n      });\n      navigate(\"/creators/profile/manage\");\n    }\n  }, [user, creatorStatus, navigate, toast]);\n\n  const platforms = [\n    {\n      id: \"youtube\",\n      name: \"YouTube\",\n      description: \"Import and share your YouTube videos with the community\",\n      icon: Video,\n      color: \"text-red-600\",\n      bgColor: \"bg-red-50\",\n      href: \"/creators/share/youtube\"\n    },\n    {\n      id: \"tiktok\", \n      name: \"TikTok\",\n      description: \"Import and share your TikTok videos with the community\",\n      icon: Camera,\n      color: \"text-pink-600\",\n      bgColor: \"bg-pink-50\",\n      href: \"/creators/share/tiktok\"\n    },\n    {\n      id: \"instagram\",\n      name: \"Instagram\", \n      description: \"Import and share your Instagram posts with the community\",\n      icon: Camera,\n      color: \"text-purple-600\",\n      bgColor: \"bg-purple-50\",\n      href: \"/creators/share/instagram\"\n    }\n  ];\n\n  if (isLoading || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-[#D4AF37] border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Share Social Media Content - Christ Collective</title>\n        <meta name=\"description\" content=\"Import and share content from your social media platforms with the Christ Collective community.\" />\n      </Helmet>\n      <div className=\"min-h-screen bg-black text-white pb-20\">\n        {/* Header */}\n        <div className=\"bg-black border-b border-gray-800 p-4 sticky top-0 z-10\">\n          <div className=\"flex items-center gap-4\">\n            <Button \n              variant=\"ghost\" \n              onClick={() => navigate(\"/create\")}\n              className=\"text-white hover:bg-white/10 p-2\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Button>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 rounded-lg bg-yellow-50\">\n                <Share2 className=\"h-6 w-6 text-[#D4AF37]\" />\n              </div>\n              <div>\n                <h1 className=\"text-xl font-bold text-white\">Share Social Media Content</h1>\n                <p className=\"text-gray-300 text-sm\">Choose a platform to import content from</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"container mx-auto px-4 py-6 max-w-2xl\">\n          <div className=\"space-y-4\">\n            {platforms.map((platform) => {\n              const IconComponent = platform.icon;\n              \n              return (\n                <Card \n                  key={platform.id} \n                  className=\"hover:shadow-md transition-all duration-200 bg-black border-gray-600 cursor-pointer hover:scale-[1.02]\"\n                  onClick={() => navigate(platform.href)}\n                >\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start space-x-4\">\n                      {/* Icon */}\n                      <div className={`p-3 rounded-lg ${platform.bgColor} flex-shrink-0`}>\n                        <IconComponent className={`h-6 w-6 ${platform.color}`} />\n                      </div>\n                      \n                      {/* Content */}\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-start justify-between mb-2\">\n                          <h3 className=\"font-semibold text-white text-lg\">Share {platform.name} Content</h3>\n                          <div className=\"bg-[#D4AF37] text-black text-xs px-2 py-1 rounded-full font-medium\">\n                            Creator Only\n                          </div>\n                        </div>\n                        <p className=\"text-gray-300 text-sm mb-3\">{platform.description}</p>\n                        \n                        <div className=\"mt-3\">\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\"\n                            className=\"border-gray-600 text-gray-300 hover:bg-gray-800 flex items-center gap-2\"\n                          >\n                            <ExternalLink className=\"w-3 h-3\" />\n                            Get Started\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n\n          {/* Info Section */}\n          <Card className=\"bg-gray-900 border-gray-700 mt-6\">\n            <CardContent className=\"p-4\">\n              <h4 className=\"font-medium text-white mb-2\">How Social Media Sharing Works</h4>\n              <ul className=\"text-sm text-gray-400 space-y-1\">\n                <li>• Choose the platform you want to import content from</li>\n                <li>• Paste the URL of your video or post</li>\n                <li>• We'll import the title, description, and thumbnail</li>\n                <li>• Add your personal message and share with the community</li>\n                <li>• Your original content link will be preserved for viewers</li>\n              </ul>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":6593},"client/src/pages/CreatorsPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { ExternalLink, Users, Play, Eye, Heart, Star, Globe, Calendar } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { ContentCreator } from \"@shared/schema\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport instagramIconPath from \"@assets/db059a4689b94fbb9a3d0a81e9ae8f52-32bits-32_1750620933253.png\";\nimport tiktokIconPath from \"@assets/9e020c743d8609911095831c2a867c84-32bits-32_1753981722521.png\";\nimport youtubeIconPath from \"@assets/6ed49f7596c2f434dba2edeb8fb15b54-32bits-32_1753981720269.png\";\nimport tiktokLogo from \"@/assets/tiktok-logo.png\";\nimport instagramLogo from \"@/assets/instagram-logo.png\";\n\nexport default function CreatorsPage() {\n  const { user } = useAuth();\n  const { data: creators, isLoading } = useQuery<ContentCreator[]>({\n    queryKey: ['/api/content-creators'],\n    queryFn: async () => {\n      const response = await fetch('/api/content-creators?sponsored=true');\n      if (!response.ok) throw new Error('Failed to fetch creators');\n      return response.json();\n    }\n  });\n\n  // Fetch featured YouTube video\n  const { data: youtubeVideo, isLoading: isYouTubeLoading } = useQuery({\n    queryKey: [\"/api/youtube/video\", \"https://youtu.be/ixGHJQXm5kY?si=w00d7O5BiesO0BBt\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/youtube/video?url=\" + encodeURIComponent(\"https://youtu.be/ixGHJQXm5kY?si=w00d7O5BiesO0BBt\"));\n      if (!response.ok) throw new Error(\"Failed to fetch video data\");\n      return response.json();\n    },\n    enabled: true,\n  });\n\n  const getPlatformIcon = (platform: string) => {\n    switch (platform.toLowerCase()) {\n      case 'youtube': return <img src={youtubeIconPath} alt=\"YouTube\" className=\"w-6 h-6 object-contain\" />;\n      case 'instagram': return <img src={instagramIconPath} alt=\"Instagram\" className=\"w-6 h-6 object-contain\" />;\n      case 'tiktok': return <img src={tiktokIconPath} alt=\"TikTok\" className=\"w-6 h-6 object-contain\" />;\n      case 'twitter': return '🐦';\n      case 'facebook': return '👥';\n      case 'linkedin': return '💼';\n      case 'twitch': return '🎮';\n      default: return '🌐';\n    }\n  };\n\n  const formatSubscriberCount = (count?: number) => {\n    if (!count) return 'N/A';\n    if (count >= 1000000) return `${(count / 1000000).toFixed(1)}M`;\n    if (count >= 1000) return `${(count / 1000).toFixed(1)}K`;\n    return count.toString();\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center py-12\">\n            <div className=\"animate-spin w-8 h-8 border-4 border-amber-600 border-t-transparent rounded-full mx-auto\"></div>\n            <p className=\"mt-4 text-gray-600\">Loading creators...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <div className=\"bg-black text-white py-16\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h1 className=\"text-4xl md:text-5xl font-bold mb-4\">\n            Creators for <span className=\"text-yellow-400\">Christ</span>\n          </h1>\n          <p className=\"text-xl text-gray-300 max-w-2xl mx-auto mb-8\">\n            Discover our sponsored content creators spreading faith-based messages \n            across multiple platforms and watch featured content\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\n            <Link href=\"/sponsorship-application\">\n              <Button className=\"bg-yellow-400 hover:bg-yellow-500 text-black font-semibold px-8 py-3 text-lg\">\n                Apply for Sponsorship\n              </Button>\n            </Link>\n            <Button variant=\"outline\" className=\"border-white text-white hover:bg-white hover:text-black font-semibold px-8 py-3 text-lg\">\n              Learn more\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Featured Content Section */}\n      <div className=\"bg-white py-16\">\n        <div className=\"container mx-auto px-4\">\n          {/* Content Grid */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12\">\n            {/* Featured Video */}\n            {!isYouTubeLoading && youtubeVideo && (\n              <div className=\"lg:col-span-2 space-y-6\">\n                <Card className=\"bg-white shadow-2xl overflow-hidden\">\n                  <div className=\"aspect-video\">\n                    <iframe\n                      width=\"100%\"\n                      height=\"100%\"\n                      src={`https://www.youtube.com/embed/${youtubeVideo.id}`}\n                      title={youtubeVideo.title}\n                      frameBorder=\"0\"\n                      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                      allowFullScreen\n                      className=\"w-full h-full rounded-t-lg\"\n                    ></iframe>\n                  </div>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-start justify-between mb-4\">\n                      <div className=\"flex-1\">\n                        <h3 className=\"text-xl font-bold text-black mb-2\">{youtubeVideo.title}</h3>\n                        <p className=\"text-gray-600 mb-4 line-clamp-2\">{youtubeVideo.description}</p>\n                        <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n                          <div className=\"flex items-center gap-1\">\n                            <Eye className=\"w-4 h-4\" />\n                            <span>{youtubeVideo.viewCount ? parseInt(youtubeVideo.viewCount).toLocaleString() : 'N/A'} views</span>\n                          </div>\n                          <div className=\"flex items-center gap-1\">\n                            <Calendar className=\"w-4 h-4\" />\n                            <span>{youtubeVideo.publishedAt ? new Date(youtubeVideo.publishedAt).toLocaleDateString() : 'N/A'}</span>\n                          </div>\n                        </div>\n                      </div>\n                      <Badge className=\"bg-red-100 text-red-800 hover:bg-red-200 ml-4\">\n                        Featured Video\n                      </Badge>\n                    </div>\n                  </CardContent>\n                </Card>\n\n\n              </div>\n            )}\n            \n            {/* Content Highlights Sidebar */}\n            <div className=\"lg:col-span-1 space-y-6\">\n              {/* Quick Stats */}\n              <Card className=\"bg-card shadow-lg\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2 text-foreground\">\n                    <Eye className=\"w-5 h-5 text-primary\" />\n                    Content Impact\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-primary\">50K+</div>\n                      <div className=\"text-xs text-muted-foreground\">Total Views</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-primary\">1.2K</div>\n                      <div className=\"text-xs text-muted-foreground\">Engagements</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-primary\">25+</div>\n                      <div className=\"text-xs text-muted-foreground\">Active Creators</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-primary\">95%</div>\n                      <div className=\"text-xs text-muted-foreground\">Satisfaction</div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Featured Creators Section */}\n      <div className=\"bg-background\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold mb-4 text-foreground\">Featured Creators</h2>\n          <p className=\"text-muted-foreground max-w-2xl mx-auto\">\n            Meet our sponsored content creators sharing faith-based content with the community.\n          </p>\n        </div>\n\n        {!creators || creators.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"bg-card rounded-lg shadow-lg p-8 max-w-md mx-auto\">\n              <Users className=\"w-16 h-16 text-muted-foreground mx-auto mb-4\" />\n              <h3 className=\"text-xl font-semibold text-foreground mb-2\">No Creators Yet</h3>\n              <p className=\"text-muted-foreground\">\n                We're currently reviewing applications. Check back soon!\n              </p>\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {creators.map((creator) => (\n              <Card key={creator.id} className=\"bg-black shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden\">\n                <CardHeader className=\"pb-4\">\n                  <div className=\"flex items-center space-x-4\">\n                    <Avatar className=\"w-16 h-16\">\n                      <AvatarImage src={creator.profileImage || ''} alt={creator.name} />\n                      <AvatarFallback className=\"bg-yellow-100 text-yellow-800 text-lg font-semibold\">\n                        {creator.name.split(' ').map(n => n[0]).join('')}\n                      </AvatarFallback>\n                    </Avatar>\n                    <div className=\"flex-1\">\n                      <CardTitle className=\"text-xl text-foreground\">{creator.name}</CardTitle>\n                      <Badge className=\"bg-primary text-primary-foreground hover:bg-primary/90 mt-1\">\n                        Sponsored Creator\n                      </Badge>\n                    </div>\n                  </div>\n                </CardHeader>\n                \n                <CardContent className=\"space-y-4\">\n                  {/* Bio */}\n                  {creator.bio && (\n                    <p className=\"text-muted-foreground text-sm line-clamp-2\">{creator.bio}</p>\n                  )}\n\n                  {/* Content & Audience */}\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <Play className=\"w-4 h-4 text-yellow-600\" />\n                      <span className=\"text-sm text-white font-medium\">Content:</span>\n                      <span className=\"text-sm text-white\">{creator.content}</span>\n                    </div>\n                    {creator.audience && (\n                      <div className=\"flex items-center gap-2\">\n                        <Users className=\"w-4 h-4 text-yellow-600\" />\n                        <span className=\"text-sm text-white font-medium\">Audience:</span>\n                        <span className=\"text-sm text-white\">{creator.audience}</span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Platforms */}\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm font-medium text-white\">Platforms:</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {(creator.platforms as any[])?.map((platform, index) => (\n                        <div key={index} className=\"flex items-center gap-1 bg-gray-50 rounded-lg px-3 py-1\">\n                          <div className=\"flex items-center justify-center w-6 h-6 flex-shrink-0\">\n                            {typeof getPlatformIcon(platform.platform) === 'string' ? (\n                              <span className=\"text-sm\">{getPlatformIcon(platform.platform)}</span>\n                            ) : (\n                              getPlatformIcon(platform.platform)\n                            )}\n                          </div>\n                          <span className=\"text-xs font-medium text-gray-700 capitalize\">\n                            {platform.platform}\n                          </span>\n                          {platform.subscriberCount && (\n                            <Badge className=\"text-xs ml-1 bg-yellow-400 text-black hover:bg-yellow-500\">\n                              {formatSubscriberCount(platform.subscriberCount)}\n                            </Badge>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Action Button */}\n                  <div className=\"pt-4\">\n                    <Link href={`/creators/${creator.id}`}>\n                      <Button className=\"w-full bg-primary hover:bg-primary/90 text-black\">\n                        <Eye className=\"w-4 h-4 mr-2\" />\n                        View Profile\n                      </Button>\n                    </Link>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":13629},"client/src/pages/DirectChatPage.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useParams, useLocation, Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Avatar, AvatarImage, AvatarFallback } from \"@/components/ui/avatar\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  ArrowLeft, \n  Send, \n  MoreVertical,\n  Phone,\n  Video,\n  Settings,\n  Users\n} from \"lucide-react\";\nimport { Helmet } from \"react-helmet\";\n\ninterface DirectMessage {\n  id: number;\n  chatId: number;\n  senderId: string;\n  message: string;\n  readAt: Date | null;\n  createdAt: Date;\n  sender: {\n    id: string;\n    displayName: string | null;\n    firstName: string | null;\n    username: string;\n    profileImageUrl: string | null;\n  };\n}\n\ninterface DirectChat {\n  id: number;\n  user1Id: string;\n  user2Id: string;\n  lastMessageAt: Date;\n  createdAt: Date;\n  otherUser: {\n    id: string;\n    displayName: string | null;\n    firstName: string | null;\n    username: string;\n    profileImageUrl: string | null;\n  };\n}\n\nexport default function DirectChatPage() {\n  const { user } = useAuth();\n  const { chatId } = useParams<{ chatId: string }>();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [message, setMessage] = useState(\"\");\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  // Fetch chat details\n  const { data: chat } = useQuery<DirectChat>({\n    queryKey: ['/api/direct-chats', chatId],\n    enabled: !!chatId,\n  });\n\n  // Fetch messages\n  const { data: messages = [], error, isLoading } = useQuery<DirectMessage[]>({\n    queryKey: ['/api/direct-chats', chatId, 'messages'],\n    enabled: !!chatId,\n    refetchInterval: 3000, // Refresh every 3 seconds\n  });\n\n\n\n  // Send message mutation\n  const sendMessageMutation = useMutation({\n    mutationFn: async (messageText: string) => {\n      const response = await apiRequest(`/api/direct-chats/${chatId}/messages`, {\n        method: \"POST\",\n        data: { message: messageText },\n      });\n      return await response.json();\n    },\n    onSuccess: () => {\n      setMessage(\"\");\n      // Force refetch of messages\n      queryClient.invalidateQueries({ queryKey: ['/api/direct-chats', chatId, 'messages'] });\n      queryClient.refetchQueries({ queryKey: ['/api/direct-chats', chatId, 'messages'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/direct-chats'] });\n      scrollToBottom();\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to send message\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSendMessage = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!message.trim() || sendMessageMutation.isPending) return;\n    sendMessageMutation.mutate(message.trim());\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  useEffect(() => {\n    inputRef.current?.focus();\n  }, []);\n\n  if (!user || !chatId) {\n    navigate(\"/connect\");\n    return null;\n  }\n\n  const formatTime = (date: Date | string) => {\n    const d = new Date(date);\n    return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const formatDate = (date: Date | string) => {\n    const d = new Date(date);\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    if (d.toDateString() === today.toDateString()) {\n      return \"Today\";\n    } else if (d.toDateString() === yesterday.toDateString()) {\n      return \"Yesterday\";\n    } else {\n      return d.toLocaleDateString();\n    }\n  };\n\n  const otherUser = chat?.otherUser;\n  const otherUserName = otherUser?.displayName || otherUser?.firstName || otherUser?.username || \"User\";\n\n  return (\n    <div className=\"h-screen bg-black text-white flex flex-col\">\n      <Helmet>\n        <title>Direct Message - {otherUserName} | Christ Collective</title>\n      </Helmet>\n\n      {/* Header */}\n      <div className=\"sticky top-0 z-10 bg-black border-b border-gray-800 px-4 py-2\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"flex items-center space-x-1\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => navigate(\"/connect\")}\n              className=\"text-white hover:bg-gray-800\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Button>\n            \n            {otherUser && (\n              <>\n                <Avatar className=\"w-8 h-8\">\n                  <AvatarImage src={otherUser.profileImageUrl || \"\"} />\n                  <AvatarFallback className=\"bg-[#D4AF37] text-black\">\n                    {otherUserName.charAt(0).toUpperCase()}\n                  </AvatarFallback>\n                </Avatar>\n                <div className=\"flex-1\">\n                  <h1 className=\"text-base font-semibold\">{otherUserName}</h1>\n                  <p className=\"text-xs text-gray-400\">@{otherUser.username}</p>\n                </div>\n              </>\n            )}\n            \n            <Button variant=\"ghost\" size=\"sm\" className=\"text-white hover:bg-gray-800\">\n              <MoreVertical className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto px-4 py-6\">\n        <div className=\"max-w-2xl mx-auto space-y-4\">\n          {messages.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <div className=\"text-gray-400 mb-2\">No messages yet</div>\n              <p className=\"text-sm text-gray-500\">Start the conversation with {otherUserName}!</p>\n            </div>\n          ) : (\n            messages.map((msg, index) => {\n              const isOwn = msg.senderId === user.id;\n              const showDate = index === 0 || \n                formatDate(messages[index - 1].createdAt) !== formatDate(msg.createdAt);\n              \n              return (\n                <div key={msg.id}>\n                  {showDate && (\n                    <div className=\"text-center text-xs text-gray-500 my-4\">\n                      {formatDate(msg.createdAt)}\n                    </div>\n                  )}\n                  \n                  <div className={`flex ${isOwn ? \"justify-end\" : \"justify-start\"} mb-3`}>\n                    <div className={`flex items-start space-x-2 max-w-xs lg:max-w-md ${isOwn ? \"flex-row-reverse space-x-reverse\" : \"\"}`}>\n                      {!isOwn && (\n                        <Avatar className=\"w-8 h-8 flex-shrink-0\">\n                          <AvatarImage src={msg.sender.profileImageUrl || \"\"} />\n                          <AvatarFallback className=\"bg-[#D4AF37] text-black text-xs\">\n                            {(msg.sender.displayName || msg.sender.firstName || msg.sender.username).charAt(0).toUpperCase()}\n                          </AvatarFallback>\n                        </Avatar>\n                      )}\n                      \n                      <div className={`${isOwn ? \"bg-[#D4AF37] text-black\" : \"bg-gray-800 text-white\"} rounded-lg px-4 py-2`}>\n                        <p className=\"text-sm break-words\">{msg.message}</p>\n                        <p className={`text-xs mt-1 ${isOwn ? \"text-black/70\" : \"text-gray-400\"}`}>\n                          {formatTime(msg.createdAt)}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n      </div>\n\n      {/* Message Input */}\n      <div className=\"flex-shrink-0 bg-black border-t border-gray-800 px-4 py-4\">\n        <div className=\"max-w-2xl mx-auto\">\n          <form onSubmit={handleSendMessage} className=\"flex space-x-3\">\n            <Input\n              ref={inputRef}\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              placeholder={`Message ${otherUserName}...`}\n              className=\"flex-1 bg-gray-900 border-gray-700 text-white placeholder-gray-400\"\n              disabled={sendMessageMutation.isPending}\n            />\n            <Button\n              type=\"submit\"\n              disabled={!message.trim() || sendMessageMutation.isPending}\n              className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F] px-6\"\n            >\n              {sendMessageMutation.isPending ? (\n                <div className=\"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin\" />\n              ) : (\n                <Send className=\"w-4 h-4\" />\n              )}\n            </Button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":9143},"client/src/pages/DonationCheckoutPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useParams, Link } from 'wouter';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { Elements, PaymentElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Separator } from '@/components/ui/separator';\nimport { useToast } from '@/hooks/use-toast';\nimport { useAuth } from '@/hooks/useAuth';\nimport { apiRequest } from '@/lib/queryClient';\nimport { ArrowLeft, Heart, Users, Lock } from 'lucide-react';\nimport { Campaign } from '@shared/schema';\n\n// Load Stripe\nconst stripePromise = loadStripe(import.meta.env.VITE_STRIPE_PUBLIC_KEY || '');\n\nconst PRESET_AMOUNTS = [10, 20, 30, 50, 100, 150];\n\nfunction CheckoutForm({ campaign, amount, tip }: { campaign: Campaign; amount: number; tip: number }) {\n  const stripe = useStripe();\n  const elements = useElements();\n  const { toast } = useToast();\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    }\n\n    setIsProcessing(true);\n\n    try {\n      const { error } = await stripe.confirmPayment({\n        elements,\n        confirmParams: {\n          return_url: `${window.location.origin}/donate/${campaign.slug}?success=true&campaignId=${campaign.id}`,\n        },\n      });\n\n      if (error) {\n        toast({\n          title: \"Payment Failed\",\n          description: error.message,\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Payment Error\",\n        description: \"An unexpected error occurred. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const totalAmount = amount + tip;\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      <div className=\"bg-gray-50 p-4 rounded-lg\">\n        <div className=\"flex justify-between items-center mb-2\">\n          <span className=\"text-sm text-gray-600\">Your donation</span>\n          <span className=\"font-semibold text-black\">${amount.toFixed(2)}</span>\n        </div>\n        {tip > 0 && (\n          <div className=\"flex justify-between items-center mb-2\">\n            <span className=\"text-sm text-gray-600\">Tip Christ Collective</span>\n            <span className=\"font-semibold text-black\">${tip.toFixed(2)}</span>\n          </div>\n        )}\n        <Separator className=\"my-2\" />\n        <div className=\"flex justify-between items-center\">\n          <span className=\"font-semibold text-black\">Total</span>\n          <span className=\"font-bold text-lg text-black\">${totalAmount.toFixed(2)}</span>\n        </div>\n      </div>\n\n      <div className=\"space-y-4\">\n        <h3 className=\"font-semibold text-lg\">Payment method</h3>\n        <PaymentElement />\n      </div>\n\n      <Button \n        type=\"submit\" \n        disabled={!stripe || isProcessing}\n        className=\"w-full bg-primary hover:bg-primary/90 text-white font-semibold py-3 text-lg\"\n      >\n        {isProcessing ? 'Processing...' : `Donate $${totalAmount.toFixed(2)}`}\n      </Button>\n\n      <div className=\"flex items-center justify-center text-sm text-gray-500\">\n        <Lock className=\"w-4 h-4 mr-1\" />\n        Your payment information is secure and encrypted\n      </div>\n    </form>\n  );\n}\n\nexport default function DonationCheckoutPage() {\n  const { campaignId } = useParams();\n  const [amount, setAmount] = useState(30);\n  const [customAmount, setCustomAmount] = useState('');\n  const [tip, setTip] = useState(0);\n  const [clientSecret, setClientSecret] = useState('');\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [email, setEmail] = useState('');\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const isAuthenticated = !!user;\n\n  const { data: campaign, isLoading: isLoadingCampaign } = useQuery<Campaign>({\n    queryKey: [`/api/campaigns/${campaignId}`],\n  });\n\n  const createPaymentIntentMutation = useMutation({\n    mutationFn: async (donationAmount: number) => {\n      const response = await apiRequest('/api/donations/create-payment-intent', {\n        method: 'POST',\n        data: {\n          campaignId,\n          amount: donationAmount + tip,\n          guestInfo: {\n            firstName,\n            lastName,\n            email\n          }\n        }\n      });\n      return response.json();\n    },\n    onSuccess: (data) => {\n      setClientSecret(data.clientSecret);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to initialize payment. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Only create payment intent when user initiates payment\n  const initializePayment = () => {\n    // Validate guest information if user is not authenticated\n    if (!isAuthenticated) {\n      if (!firstName.trim() || !lastName.trim() || !email.trim()) {\n        toast({\n          title: \"Missing Information\",\n          description: \"Please fill in your name and email address to continue.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      // Basic email validation\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailRegex.test(email)) {\n        toast({\n          title: \"Invalid Email\",\n          description: \"Please enter a valid email address.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n    }\n    \n    if (campaignId && amount > 0) {\n      createPaymentIntentMutation.mutate(amount);\n    }\n  };\n\n  const handleAmountSelect = (selectedAmount: number) => {\n    console.log('Amount selected:', selectedAmount);\n    setAmount(selectedAmount);\n    setCustomAmount('');\n  };\n\n  const handleCustomAmountChange = (value: string) => {\n    setCustomAmount(value);\n    const numValue = parseFloat(value);\n    if (!isNaN(numValue) && numValue > 0) {\n      setAmount(numValue);\n    }\n  };\n\n  const calculateTip = (percentage: number) => {\n    setTip(amount * (percentage / 100));\n  };\n\n  function formatCurrency(amount: string | number): string {\n    const value = typeof amount === 'string' ? parseFloat(amount) : amount;\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n    }).format(value || 0);\n  }\n\n  if (isLoadingCampaign) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-2xl mx-auto\">\n            <div className=\"animate-pulse\">\n              <div className=\"h-8 bg-gray-200 rounded mb-4 w-1/3\" />\n              <div className=\"bg-white rounded-lg shadow-sm p-6\">\n                <div className=\"h-6 bg-gray-200 rounded mb-4 w-2/3\" />\n                <div className=\"h-4 bg-gray-100 rounded mb-2 w-full\" />\n                <div className=\"h-4 bg-gray-100 rounded mb-4 w-3/4\" />\n                <div className=\"grid grid-cols-3 gap-2 mb-4\">\n                  {[1, 2, 3, 4, 5, 6].map(i => (\n                    <div key={i} className=\"h-12 bg-gray-200 rounded\" />\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!campaign) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-2xl mx-auto text-center\">\n            <h1 className=\"text-2xl font-bold mb-4\">Campaign Not Found</h1>\n            <p className=\"text-gray-600 mb-6\">The campaign you're trying to donate to doesn't exist.</p>\n            <Link href=\"/donate\" className=\"text-primary hover:text-primary/80 font-medium\">\n              ← Back to All Campaigns\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"max-w-2xl mx-auto\">\n          {/* Header */}\n          <div className=\"mb-6\">\n            <Link href={`/donate/${campaign.slug}`} className=\"inline-flex items-center text-primary hover:text-primary/80 font-medium mb-4\">\n              <ArrowLeft className=\"w-4 h-4 mr-1\" />\n              Fundraiser\n            </Link>\n          </div>\n\n          {/* Main Content */}\n          <Card className=\"shadow-sm\">\n            <CardHeader className=\"pb-4\">\n              <div className=\"flex items-center space-x-4\">\n                {campaign.image ? (\n                  <img \n                    src={campaign.image} \n                    alt={campaign.title}\n                    className=\"w-16 h-16 object-cover rounded-lg\"\n                  />\n                ) : (\n                  <div className=\"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center\">\n                    <Heart className=\"w-8 h-8 text-gray-400\" />\n                  </div>\n                )}\n                <div>\n                  <p className=\"text-sm text-[#D4AF37] mb-1\">You're supporting</p>\n                  <CardTitle className=\"text-xl\">{campaign.title}</CardTitle>\n                  <p className=\"text-sm text-[#D4AF37]\">Your donation will benefit Christ Collective</p>\n                </div>\n              </div>\n            </CardHeader>\n\n            <CardContent className=\"space-y-6\">\n              {/* Amount Selection */}\n              <div>\n                <Label className=\"text-base font-semibold mb-4 block\">Enter your donation</Label>\n                \n                {/* Preset amounts */}\n                <div className=\"grid grid-cols-3 gap-2 mb-4\">\n                  {PRESET_AMOUNTS.map((presetAmount) => (\n                    <Button\n                      key={presetAmount}\n                      variant={amount === presetAmount && !customAmount ? \"default\" : \"outline\"}\n                      className={`h-12 relative ${\n                        amount === presetAmount && !customAmount \n                          ? \"bg-primary text-white border-primary\" \n                          : \"bg-white border-gray-200 text-gray-700 hover:border-gray-300\"\n                      }`}\n                      onClick={() => handleAmountSelect(presetAmount)}\n                    >\n                      ${presetAmount}\n                      {presetAmount === 30 && (\n                        <span className=\"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full\">\n                          SUGGESTED\n                        </span>\n                      )}\n                    </Button>\n                  ))}\n                </div>\n\n                {/* Custom amount */}\n                <div className=\"relative\">\n                  <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-2xl font-bold text-[#D4AF37]\">\n                    $\n                  </span>\n                  <Input\n                    type=\"number\"\n                    placeholder=\"0.00\"\n                    value={customAmount || (amount > 0 ? amount.toString() : '')}\n                    onChange={(e) => handleCustomAmountChange(e.target.value)}\n                    className=\"pl-8 text-2xl font-bold h-14 text-right pr-16\"\n                    min=\"1\"\n                    step=\"0.01\"\n                  />\n                  <span className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-lg text-[#D4AF37]\">\n                    USD\n                  </span>\n                </div>\n              </div>\n\n              {/* Tip Section */}\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"flex justify-between items-center mb-3\">\n                  <div>\n                    <h4 className=\"font-semibold text-black\">Tip Christ Collective services</h4>\n                    <p className=\"text-sm text-gray-600\">\n                      Christ Collective has a 0% platform fee for organizers. Christ Collective will continue offering its \n                      services thanks to donors who will leave an optional amount here:\n                    </p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2 mb-4\">\n                  <span className=\"text-2xl font-bold text-black\">{amount > 0 ? ((tip / amount) * 100).toFixed(1) : '0.0'}%</span>\n                </div>\n                \n                <div className=\"flex space-x-2 mb-4\">\n                  <Button\n                    variant={Math.abs(tip - amount * 0.05) < 0.01 ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => calculateTip(5)}\n                    className=\"text-xs\"\n                  >\n                    5%\n                  </Button>\n                  <Button\n                    variant={Math.abs(tip - amount * 0.15) < 0.01 ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => calculateTip(15)}\n                    className=\"text-xs\"\n                  >\n                    15%\n                  </Button>\n                  <Button\n                    variant={Math.abs(tip - amount * 0.25) < 0.01 ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => calculateTip(25)}\n                    className=\"text-xs\"\n                  >\n                    25%\n                  </Button>\n                  <Button\n                    variant={tip === 0 ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => setTip(0)}\n                    className=\"text-xs\"\n                  >\n                    No Tip\n                  </Button>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"custom-tip\" className=\"text-sm font-medium text-[#D4AF37]\">Enter custom tip amount</Label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500\">$</span>\n                    <Input\n                      id=\"custom-tip\"\n                      type=\"number\"\n                      placeholder=\"0.00\"\n                      value={tip > 0 ? tip.toFixed(2) : ''}\n                      onChange={(e) => {\n                        const value = parseFloat(e.target.value);\n                        if (!isNaN(value) && value >= 0) {\n                          setTip(value);\n                        } else if (e.target.value === '') {\n                          setTip(0);\n                        }\n                      }}\n                      className=\"pl-8 pr-4\"\n                      min=\"0\"\n                      step=\"0.01\"\n                    />\n                  </div>\n                </div>\n              </div>\n\n              {/* Guest Information - Only show if not authenticated */}\n              {!isAuthenticated && (\n                <div className=\"bg-blue-50 p-4 rounded-lg\">\n                  <h4 className=\"font-semibold text-black mb-3\">Donor Information</h4>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    Please provide your information to receive a donation receipt.\n                  </p>\n                  \n                  <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                    <div>\n                      <Label htmlFor=\"firstName\" className=\"text-sm font-medium\">First Name *</Label>\n                      <Input\n                        id=\"firstName\"\n                        type=\"text\"\n                        placeholder=\"Enter first name\"\n                        value={firstName}\n                        onChange={(e) => setFirstName(e.target.value)}\n                        className=\"mt-1\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"lastName\" className=\"text-sm font-medium\">Last Name *</Label>\n                      <Input\n                        id=\"lastName\"\n                        type=\"text\"\n                        placeholder=\"Enter last name\"\n                        value={lastName}\n                        onChange={(e) => setLastName(e.target.value)}\n                        className=\"mt-1\"\n                        required\n                      />\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"email\" className=\"text-sm font-medium\">Email Address *</Label>\n                    <Input\n                      id=\"email\"\n                      type=\"email\"\n                      placeholder=\"Enter email address\"\n                      value={email}\n                      onChange={(e) => setEmail(e.target.value)}\n                      className=\"mt-1\"\n                      required\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      Your receipt will be sent to this email address.\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              {/* Payment Form */}\n              {clientSecret ? (\n                <Elements \n                  key={clientSecret} // Force remount when clientSecret changes\n                  stripe={stripePromise} \n                  options={{ \n                    clientSecret,\n                    appearance: {\n                      theme: 'stripe',\n                    }\n                  }}\n                >\n                  <CheckoutForm campaign={campaign} amount={amount} tip={tip} />\n                </Elements>\n              ) : createPaymentIntentMutation.isPending ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto\" />\n                  <p className=\"text-gray-600 mt-2\">Initializing payment...</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\n                    <div className=\"flex justify-between items-center mb-2\">\n                      <span className=\"text-sm text-gray-600\">Your donation</span>\n                      <span className=\"font-semibold text-black\">${amount.toFixed(2)}</span>\n                    </div>\n                    {tip > 0 && (\n                      <div className=\"flex justify-between items-center mb-2\">\n                        <span className=\"text-sm text-gray-600\">Tip</span>\n                        <span className=\"text-sm text-gray-600\">${tip.toFixed(2)}</span>\n                      </div>\n                    )}\n                    <hr className=\"my-2\" />\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"font-semibold text-black\">Total</span>\n                      <span className=\"font-bold text-black\">${(amount + tip).toFixed(2)}</span>\n                    </div>\n                  </div>\n                  \n                  <Button \n                    onClick={initializePayment}\n                    disabled={amount <= 0 || createPaymentIntentMutation.isPending}\n                    className=\"w-full bg-primary hover:bg-primary/90 text-white py-6 text-lg font-semibold\"\n                  >\n                    Proceed to Payment\n                  </Button>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Footer Info */}\n          <div className=\"mt-6 text-center text-sm text-gray-600\">\n            <p>\n              By continuing, you agree with Christ Collective's{' '}\n              <Link href=\"/terms\" className=\"text-primary hover:underline\">terms</Link> and{' '}\n              <Link href=\"/privacy\" className=\"text-primary hover:underline\">privacy policy</Link>.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":20145},"client/src/pages/DonationSuccessPage.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useLocation, useParams } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { CheckCircle, Download, Heart, Home } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface DonationRecord {\n  id: string;\n  amount: number;\n  tip: number;\n  campaignTitle: string;\n  donorName?: string;\n  isAnonymous: boolean;\n  message?: string;\n  createdAt: string;\n  stripePaymentId: string;\n}\n\nexport default function DonationSuccessPage() {\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const [donation, setDonation] = useState<DonationRecord | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const paymentIntentId = urlParams.get('payment_intent');\n    const campaignId = urlParams.get('campaignId');\n\n    if (!paymentIntentId || !campaignId) {\n      toast({\n        title: \"Invalid donation link\",\n        description: \"Unable to process donation confirmation.\",\n        variant: \"destructive\",\n      });\n      navigate('/donate');\n      return;\n    }\n\n    // Complete the donation recording\n    const completeDonation = async () => {\n      try {\n        const response = await apiRequest('POST', '/api/donations/complete', {\n          paymentIntentId,\n          campaignId,\n        });\n\n        if (response.ok) {\n          const donationData = await response.json();\n          setDonation(donationData);\n        } else {\n          throw new Error('Failed to complete donation');\n        }\n      } catch (error) {\n        console.error('Error completing donation:', error);\n        toast({\n          title: \"Processing Error\",\n          description: \"Your payment was successful, but we encountered an issue recording your donation. Please contact support.\",\n          variant: \"destructive\",\n        });\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    completeDonation();\n  }, [navigate, toast]);\n\n  const downloadReceipt = () => {\n    console.log('Download receipt clicked');\n    if (!donation) {\n      console.log('No donation data available');\n      return;\n    }\n\n    try {\n      // Generate PDF receipt content\n      const receiptContent = `DONATION RECEIPT\n\nThank you for your generous donation to Christ Collective!\n\nDonation Details:\n- Campaign: ${donation.campaignTitle}\n- Amount: $${donation.amount.toFixed(2)}\n- Tip: $${donation.tip.toFixed(2)}\n- Total: $${(donation.amount + donation.tip).toFixed(2)}\n- Date: ${new Date(donation.createdAt).toLocaleDateString()}\n- Transaction ID: ${donation.stripePaymentId}\n${donation.message ? `- Message: ${donation.message}` : ''}\n\nThis serves as your official receipt for tax purposes.\n\nChrist Collective\nTax ID: [Tax ID Number]\n\nFor questions about your donation, please contact us at support@christcollective.org`;\n\n      console.log('Creating download for receipt content');\n      \n      // Create downloadable text file with better browser compatibility\n      const blob = new Blob([receiptContent], { type: 'text/plain;charset=utf-8' });\n      const url = window.URL.createObjectURL(blob);\n      \n      // Create and trigger download\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = `donation-receipt-${donation.id || 'unknown'}.txt`;\n      \n      document.body.appendChild(a);\n      console.log('Triggering download');\n      a.click();\n      \n      // Clean up\n      setTimeout(() => {\n        document.body.removeChild(a);\n        window.URL.revokeObjectURL(url);\n      }, 100);\n      \n      toast({\n        title: \"Receipt Downloaded\",\n        description: \"Your donation receipt has been downloaded successfully.\",\n      });\n      \n    } catch (error) {\n      console.error('Error downloading receipt:', error);\n      toast({\n        title: \"Download Failed\",\n        description: \"Unable to download receipt. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500 mx-auto mb-4\"></div>\n          <p className=\"text-white\">Processing your donation...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!donation) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <Card className=\"w-full max-w-md mx-4 bg-gray-900 border-gray-700\">\n          <CardContent className=\"text-center p-8\">\n            <div className=\"text-red-500 mb-4\">\n              <Heart size={48} className=\"mx-auto\" />\n            </div>\n            <h1 className=\"text-xl font-semibold text-white mb-2\">Processing Error</h1>\n            <p className=\"text-gray-300 mb-6\">\n              We encountered an issue processing your donation confirmation.\n            </p>\n            <Button onClick={() => navigate('/donate')} className=\"w-full\">\n              Return to Donations\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black py-12\">\n      <div className=\"max-w-2xl mx-auto px-4\">\n        <Card className=\"bg-gray-900 border-gray-700\">\n          <CardHeader className=\"text-center pb-6\">\n            <div className=\"text-green-500 mb-4\">\n              <CheckCircle size={64} className=\"mx-auto\" />\n            </div>\n            <CardTitle className=\"text-3xl text-white mb-2\">\n              Thank You for Your Donation!\n            </CardTitle>\n            <p className=\"text-gray-300\">\n              Your generous contribution helps make a difference in our community.\n            </p>\n          </CardHeader>\n\n          <CardContent className=\"space-y-6\">\n            {/* Donation Summary */}\n            <div className=\"bg-gray-800 p-6 rounded-lg\">\n              <h3 className=\"text-xl font-semibold text-white mb-4\">Donation Summary</h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-300\">Campaign:</span>\n                  <span className=\"text-white font-medium\">{donation.campaignTitle}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-300\">Donation Amount:</span>\n                  <span className=\"text-white font-medium\">${donation.amount.toFixed(2)}</span>\n                </div>\n                {donation.tip > 0 && (\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-300\">Tip to Christ Collective:</span>\n                    <span className=\"text-white font-medium\">${donation.tip.toFixed(2)}</span>\n                  </div>\n                )}\n                <div className=\"border-t border-gray-600 pt-3\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white font-semibold\">Total:</span>\n                    <span className=\"text-white font-semibold\">${(donation.amount + donation.tip).toFixed(2)}</span>\n                  </div>\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-400\">Transaction Date:</span>\n                  <span className=\"text-gray-400\">{new Date(donation.createdAt).toLocaleDateString()}</span>\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-400\">Transaction ID:</span>\n                  <span className=\"text-gray-400 font-mono text-xs\">{donation.stripePaymentId}</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Message */}\n            {donation.message && (\n              <div className=\"bg-gray-800 p-6 rounded-lg\">\n                <h4 className=\"text-lg font-medium text-white mb-2\">Your Message</h4>\n                <p className=\"text-gray-300 italic\">\"{donation.message}\"</p>\n              </div>\n            )}\n\n            {/* Actions */}\n            <div className=\"flex flex-col sm:flex-row gap-4\">\n              <Button \n                onClick={downloadReceipt}\n                className=\"flex-1 bg-yellow-500 text-black hover:bg-yellow-600\"\n              >\n                <Download className=\"mr-2\" size={16} />\n                Download Receipt\n              </Button>\n              <Button \n                onClick={() => navigate('/')}\n                variant=\"outline\"\n                className=\"flex-1 border-gray-600 text-white hover:bg-gray-800\"\n              >\n                <Home className=\"mr-2\" size={16} />\n                Return Home\n              </Button>\n            </div>\n\n            {/* Tax Information */}\n            <div className=\"bg-blue-900/20 border border-blue-700 p-4 rounded-lg\">\n              <h4 className=\"text-sm font-medium text-blue-300 mb-2\">Tax Receipt Information</h4>\n              <p className=\"text-xs text-blue-200\">\n                This donation may be tax-deductible. Please consult with your tax advisor and retain this receipt for your records. \n                Christ Collective is a registered 501(c)(3) nonprofit organization.\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":9588},"client/src/pages/DonationsPage.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Search, ImageIcon, Plus } from \"lucide-react\";\nimport { Helmet } from \"react-helmet\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport CTASection from \"@/components/home/CTASection\";\n\ntype Campaign = {\n  id: string;\n  title: string;\n  description: string;\n  image?: string;\n  goal: string;\n  currentAmount: string;\n  slug: string;\n};\n\nexport default function DonationsPage() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const { user } = useAuth();\n  const isAuthenticated = !!user;\n  const [, navigate] = useLocation();\n  \n  const { data: campaigns = [], isLoading } = useQuery({\n    queryKey: [\"/api/campaigns\", searchQuery],\n    queryFn: async () => {\n      const url = searchQuery \n        ? `/api/campaigns?search=${encodeURIComponent(searchQuery)}` \n        : \"/api/campaigns\";\n      const res = await fetch(url, { credentials: \"include\" });\n      // Don't throw error for 401, just return empty array\n      if (res.status === 401) {\n        return [];\n      }\n      if (!res.ok) throw new Error(\"Failed to fetch campaigns\");\n      return res.json();\n    }\n  });\n\n  function calculateProgress(current: string, goal: string): number {\n    const currentAmount = parseFloat(current) || 0;\n    const goalAmount = parseFloat(goal) || 1;\n    const percentage = (currentAmount / goalAmount) * 100;\n    return Math.min(percentage, 100);\n  }\n\n  function formatCurrency(amount: string): string {\n    const value = parseFloat(amount) || 0;\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n    }).format(value);\n  }\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    // Search is handled by the search state and query dependency\n  };\n\n  const handleCreateCampaign = () => {\n    if (isAuthenticated) {\n      navigate(\"/donate/create\");\n    } else {\n      window.location.href = \"/api/login\";\n    }\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>Donate & Support - Christ Collective</title>\n        <meta name=\"description\" content=\"Support meaningful charitable initiatives or create your own campaign to help those in need. Join our community of giving.\" />\n        <meta property=\"og:title\" content=\"Donate & Support - Christ Collective\" />\n        <meta property=\"og:description\" content=\"Support meaningful charitable initiatives that reflect Christian values. Make a difference today.\" />\n      </Helmet>\n      \n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-6xl mx-auto text-center mb-12\">\n            <h1 className=\"text-4xl font-bold mb-4 text-black\">Support Our Causes</h1>\n            <p className=\"text-lg text-black\">\n              Browse our collection of charitable campaigns and support the causes that align with your values.\n            </p>\n          </div>\n          \n          <div className=\"flex flex-col md:flex-row justify-between items-center mb-8 gap-4\">\n            <form onSubmit={handleSearch} className=\"relative w-full md:w-auto\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={18} />\n              <Input\n                type=\"text\"\n                placeholder=\"Search campaigns...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-10 w-full md:w-80\"\n              />\n            </form>\n            \n            <Button \n              onClick={handleCreateCampaign}\n              className=\"w-full md:w-auto\"\n            >\n              <Plus className=\"mr-2\" size={16} />\n              Create New Campaign\n            </Button>\n          </div>\n          \n          {isLoading ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[1, 2, 3, 4, 5, 6].map((i) => (\n                <Card key={i} className=\"animate-pulse\">\n                  <div className=\"w-full h-48 bg-gray-200\" />\n                  <CardContent className=\"p-6\">\n                    <div className=\"h-6 bg-gray-200 rounded mb-2 w-3/4\" />\n                    <div className=\"h-4 bg-gray-100 rounded mb-4 w-full\" />\n                    <div className=\"w-full bg-gray-200 rounded-full h-2.5 mb-4\" />\n                    <div className=\"h-10 bg-gray-200 rounded w-full\" />\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : campaigns.length > 0 ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {campaigns.map((campaign: Campaign) => (\n                <Card key={campaign.id} className=\"overflow-hidden hover:shadow-md transition-shadow bg-black border-gray-700\">\n                  {campaign.image ? (\n                    <img \n                      src={campaign.image} \n                      alt={campaign.title} \n                      className=\"w-full h-48 object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-48 bg-gray-200 flex items-center justify-center\">\n                      <ImageIcon size={48} className=\"text-gray-400\" />\n                    </div>\n                  )}\n                  <CardContent className=\"p-6\">\n                    <h3 className=\"text-xl font-semibold mb-2 text-white\">\n                      <Link href={`/donate/${campaign.slug}`}>\n                        <span className=\"hover:text-primary transition-colors cursor-pointer\">\n                          {campaign.title}\n                        </span>\n                      </Link>\n                    </h3>\n                    <p className=\"text-muted-foreground mb-4\">\n                      {campaign.description.length > 100\n                        ? campaign.description.substring(0, 100) + '...'\n                        : campaign.description}\n                    </p>\n                    <div className=\"mb-4\">\n                      <Progress value={calculateProgress(campaign.currentAmount, campaign.goal)} className=\"h-2.5\" />\n                      <div className=\"flex justify-between mt-2 text-sm text-muted-foreground\">\n                        <span>{formatCurrency(campaign.currentAmount)} raised</span>\n                        <span>{formatCurrency(campaign.goal)} goal</span>\n                      </div>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <Link href={`/donate/checkout/${campaign.id}`} className=\"flex-1\">\n                        <button className=\"w-full inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\n                          Donate Now\n                        </button>\n                      </Link>\n                      <Link href={`/donate/${campaign.slug}`} className=\"flex-1\">\n                        <button className=\"w-full inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2\">\n                          View Details\n                        </button>\n                      </Link>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-12\">\n              <h3 className=\"text-xl font-medium mb-2\">No campaigns found</h3>\n              <p className=\"text-gray-500 mb-6\">\n                {searchQuery ? `No results for \"${searchQuery}\"` : \"There are no active campaigns at the moment.\"}\n              </p>\n              {isAuthenticated ? (\n                <Link href=\"/campaigns/create\">\n                  <button className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\n                    Create a Campaign\n                  </button>\n                </Link>\n              ) : (\n                <a href=\"/api/login\" className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\n                  Sign in to Create a Campaign\n                </a>\n              )}\n            </div>\n          )}\n        </div>\n      </section>\n      \n      <CTASection />\n    </>\n  );\n}\n","size_bytes":9581},"client/src/pages/EditCampaignPage.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useParams, useLocation, Link } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { \n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Helmet } from \"react-helmet\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Loader2, ImageIcon, X } from \"lucide-react\";\n\n// Form validation schema\nconst formSchema = z.object({\n  title: z.string().min(5, \"Title must be at least 5 characters\"),\n  description: z.string().min(20, \"Description must be at least 20 characters\"),\n  goal: z.string().refine(\n    (val) => !isNaN(Number(val)) && Number(val) > 0, \n    { message: \"Goal must be a positive number\" }\n  ),\n  isActive: z.boolean().default(true),\n  image: z.string().optional(),\n  additionalImages: z.array(z.string()).optional(),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport default function EditCampaignPage() {\n  const { id } = useParams();\n  const [, navigate] = useLocation();\n  const { user, isLoading: authLoading } = useAuth();\n  const isAuthenticated = !!user;\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [imageFile, setImageFile] = useState<File | null>(null);\n  const [previewImage, setPreviewImage] = useState<string | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  \n  // Fetch campaign data\n  const { data: campaign, isLoading: campaignLoading, error: campaignError } = useQuery({\n    queryKey: [\"/api/user/campaigns\", id],\n    queryFn: async () => {\n      try {\n        // Get user's campaigns and find the specific one\n        const res = await apiRequest(\"GET\", `/api/user/campaigns`);\n        \n        if (!res.ok) {\n          if (res.status === 401) {\n            throw new Error(\"Authentication required\");\n          }\n          throw new Error(\"Failed to fetch campaigns\");\n        }\n        \n        const campaigns = await res.json();\n        const thisCampaign = campaigns.find((c: any) => c.id === id);\n        \n        if (!thisCampaign) {\n          throw new Error(\"Campaign not found or you don't have permission to edit it\");\n        }\n        \n        return thisCampaign;\n      } catch (error) {\n        console.error(\"Error fetching campaign:\", error);\n        throw error;\n      }\n    },\n    enabled: !!id && isAuthenticated,\n    retry: false,\n  });\n  \n  // Set up form with validation\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      goal: \"\",\n      isActive: true,\n      image: \"\",\n      additionalImages: [],\n    },\n  });\n  \n  // Update form values when campaign data is loaded\n  useEffect(() => {\n    if (campaign) {\n      form.reset({\n        title: campaign.title,\n        description: campaign.description,\n        goal: campaign.goal,\n        isActive: campaign.isActive,\n        image: campaign.image || \"\",\n        additionalImages: campaign.additionalImages || [],\n      });\n      \n      if (campaign.image) {\n        setPreviewImage(campaign.image);\n      }\n      \n      console.log(\"Campaign loaded successfully:\", campaign);\n    }\n  }, [campaign, form]);\n  \n  // Handle image selection\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      setImageFile(file);\n      setPreviewImage(URL.createObjectURL(file));\n    }\n  };\n  \n  // Remove selected image\n  const removeImage = () => {\n    setImageFile(null);\n    setPreviewImage(null);\n    form.setValue(\"image\", \"\");\n  };\n  \n  // Upload image to server\n  const uploadImage = async (): Promise<string | null> => {\n    if (!imageFile) {\n      const currentImage = form.getValues(\"image\");\n      return currentImage || null;\n    }\n    \n    try {\n      setIsUploading(true);\n      const formData = new FormData();\n      formData.append(\"image\", imageFile);\n      \n      const response = await fetch(\"/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n      \n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.message || \"Failed to upload image\");\n      }\n      \n      return data.url;\n    } catch (error: any) {\n      toast({\n        title: \"Image Upload Failed\",\n        description: error.message || \"Could not upload image\",\n        variant: \"destructive\",\n      });\n      return null;\n    } finally {\n      setIsUploading(false);\n    }\n  };\n  \n  // Update campaign mutation\n  const updateMutation = useMutation({\n    mutationFn: async (data: FormValues) => {\n      const response = await apiRequest(\"PUT\", `/api/campaigns/${id}`, data);\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || \"Failed to update campaign\");\n      }\n      return response;\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Campaign Updated\",\n        description: \"Your campaign has been updated successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/campaigns\", id] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/campaigns\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/campaigns\"] });\n      navigate(\"/manage-campaigns\");\n    },\n    onError: (error: any) => {\n      console.error(\"Update error:\", error);\n      toast({\n        title: \"Update Failed\",\n        description: error.message || \"Could not update campaign\",\n        variant: \"destructive\",\n      });\n    },\n  });\n  \n  // Form submission handler\n  const onSubmit = async (data: FormValues) => {\n    try {\n      // Upload image if a new one was selected\n      if (imageFile) {\n        const imageUrl = await uploadImage();\n        if (imageUrl) {\n          data.image = imageUrl;\n        }\n      }\n      \n      // If no image was selected and none existed before, use a default image\n      if (!data.image) {\n        data.image = \"\";\n      }\n      \n      updateMutation.mutate(data);\n    } catch (error: any) {\n      toast({\n        title: \"Submission Error\",\n        description: error.message || \"An error occurred while submitting the form\",\n        variant: \"destructive\",\n      });\n    }\n  };\n  \n  // Show loading state\n  if (authLoading || campaignLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n  \n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return (\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold mb-4\">Please Log In</h2>\n          <p className=\"mb-6\">You need to be logged in to edit a campaign.</p>\n          <Button asChild>\n            <a href=\"/api/login\">Log In</a>\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  // Show error state if campaign failed to load\n  if (campaignError) {\n    return (\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold mb-4\">Campaign Not Found</h2>\n          <p className=\"mb-6\">\n            {campaignError.message === \"Authentication required\" \n              ? \"You need to be logged in to edit this campaign.\"\n              : \"This campaign was not found or you don't have permission to edit it.\"\n            }\n          </p>\n          <div className=\"space-x-4\">\n            <Button asChild variant=\"outline\">\n              <Link to=\"/manage-campaigns\">Back to My Campaigns</Link>\n            </Button>\n            {campaignError.message === \"Authentication required\" && (\n              <Button asChild>\n                <a href=\"/api/login\">Log In</a>\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Don't render form until campaign data is loaded\n  if (!campaign) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n  \n  return (\n    <>\n      <Helmet>\n        <title>Edit Campaign | Christ Collective</title>\n        <meta name=\"description\" content=\"Edit your fundraising campaign details, images, and goals\" />\n      </Helmet>\n      \n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"max-w-3xl mx-auto\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-2xl\">Edit Campaign</CardTitle>\n              <CardDescription>\n                Update your campaign information below\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"title\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Campaign Title</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"Give your campaign a clear title\" {...field} />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Description</FormLabel>\n                        <FormControl>\n                          <Textarea \n                            placeholder=\"Tell your story and explain the impact of donations\" \n                            className=\"min-h-[120px]\"\n                            {...field} \n                          />\n                        </FormControl>\n                        <FormDescription>\n                          Explain the purpose of your campaign and how the funds will be used.\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"goal\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Fundraising Goal</FormLabel>\n                        <FormControl>\n                          <div className=\"relative\">\n                            <span className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400\">\n                              $\n                            </span>\n                            <Input className=\"pl-8\" type=\"number\" {...field} />\n                          </div>\n                        </FormControl>\n                        <FormDescription>\n                          Set the amount you aim to raise for this campaign.\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"isActive\"\n                    render={({ field }) => (\n                      <FormItem className=\"flex flex-row items-start space-x-3 space-y-0\">\n                        <FormControl>\n                          <Checkbox\n                            checked={field.value}\n                            onCheckedChange={field.onChange}\n                          />\n                        </FormControl>\n                        <div className=\"space-y-1 leading-none\">\n                          <FormLabel>Active Campaign</FormLabel>\n                          <FormDescription>\n                            Active campaigns are visible to everyone and can receive donations.\n                          </FormDescription>\n                        </div>\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <div className=\"space-y-2\">\n                    <FormLabel>Campaign Image</FormLabel>\n                    <div className=\"flex flex-col space-y-2\">\n                      {previewImage ? (\n                        <div className=\"relative\">\n                          <img \n                            src={previewImage} \n                            alt=\"Campaign Preview\" \n                            className=\"w-full h-48 object-cover rounded-md\"\n                          />\n                          <Button\n                            type=\"button\"\n                            variant=\"destructive\"\n                            size=\"icon\"\n                            className=\"absolute top-2 right-2 h-8 w-8\"\n                            onClick={removeImage}\n                          >\n                            <X className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      ) : (\n                        <div className=\"border-2 border-dashed border-gray-300 rounded-md p-6 text-center\">\n                          <ImageIcon className=\"mx-auto text-gray-400 text-3xl mb-3\" size={32} />\n                          <p className=\"text-gray-500 mb-2\">\n                            Drag and drop an image here, or click to select a file\n                          </p>\n                          <p className=\"text-xs text-gray-400\">Recommended size: 1200 x 675 pixels</p>\n                          <Button type=\"button\" variant=\"outline\" className=\"mt-4\" onClick={() => document.getElementById('image-upload')?.click()}>\n                            Select Image\n                          </Button>\n                        </div>\n                      )}\n                      <Input\n                        id=\"image-upload\"\n                        type=\"file\"\n                        className=\"hidden\"\n                        accept=\"image/*\"\n                        onChange={handleImageChange}\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex justify-end space-x-4 pt-4\">\n                    <Button \n                      type=\"button\" \n                      variant=\"outline\" \n                      onClick={() => navigate(\"/manage-campaigns\")}\n                    >\n                      Cancel\n                    </Button>\n                    <Button \n                      type=\"submit\" \n                      disabled={updateMutation.isPending || isUploading}\n                    >\n                      {(updateMutation.isPending || isUploading) && (\n                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                      )}\n                      Save Changes\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":15757},"client/src/pages/EditMinistryProfilePage.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useLocation } from \"wouter\";\nimport { Helmet } from \"react-helmet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { ArrowLeft, Upload, Save, Building, MapPin, Mail, Phone, Globe, FileText } from \"lucide-react\";\nimport { insertMinistryProfileSchema, type InsertMinistryProfile, type MinistryProfile } from \"@shared/schema\";\n\ntype EditMinistryFormData = InsertMinistryProfile;\n\nconst denominations = [\n  \"Anglican\",\n  \"Baptist\", \n  \"Catholic\",\n  \"Episcopal\",\n  \"Lutheran\",\n  \"Methodist\",\n  \"Non-denominational\",\n  \"Orthodox\",\n  \"Pentecostal\",\n  \"Presbyterian\",\n  \"Reformed\",\n  \"Other\"\n];\n\nexport default function EditMinistryProfilePage() {\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const [isUploading, setIsUploading] = useState(false);\n\n  // Get user's ministry profile\n  const { data: ministryProfile, isLoading } = useQuery<MinistryProfile>({\n    queryKey: [\"/api/user/ministry-profile\"],\n  });\n\n  const form = useForm<EditMinistryFormData>({\n    resolver: zodResolver(insertMinistryProfileSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      denomination: \"\",\n      website: \"\",\n      logo: \"\",\n      location: \"\",\n      address: \"\",\n      phone: \"\",\n      email: \"\",\n      socialLinks: {},\n    },\n  });\n\n  // Update form when ministry profile loads\n  useEffect(() => {\n    if (ministryProfile) {\n      console.log(\"Loading ministry profile data:\", ministryProfile);\n      const formData = {\n        name: ministryProfile.name || \"\",\n        description: ministryProfile.description || \"\",\n        denomination: ministryProfile.denomination || \"\",\n        website: ministryProfile.website || \"\",\n        logo: ministryProfile.logo || \"\",\n        location: ministryProfile.location || \"\",\n        address: ministryProfile.address || \"\",\n        phone: ministryProfile.phone || \"\",\n        email: ministryProfile.email || \"\",\n        socialLinks: ministryProfile.socialLinks || {},\n      } as EditMinistryFormData;\n      console.log(\"Form data being set:\", formData);\n      form.reset(formData);\n    }\n  }, [ministryProfile, form]);\n\n  const updateMinistryMutation = useMutation({\n    mutationFn: async (data: EditMinistryFormData) => {\n      if (!ministryProfile?.id) throw new Error(\"No ministry profile found\");\n      return apiRequest(`/api/ministries/${ministryProfile.id}`, {\n        method: \"PUT\",\n        data: data,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Ministry Profile Updated\",\n        description: \"Your ministry profile has been successfully updated.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/ministry-profile\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/ministries\"] });\n      navigate(\"/profile\");\n    },\n    onError: (error: any) => {\n      console.error(\"Ministry update error:\", error);\n      toast({\n        title: \"Update Failed\",\n        description: error.message || \"Failed to update ministry profile. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleLogoUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    if (!file.type.startsWith(\"image/\")) {\n      toast({\n        title: \"Invalid File\",\n        description: \"Please select an image file.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsUploading(true);\n    try {\n      const formData = new FormData();\n      formData.append(\"image\", file);\n      \n      const response = await fetch(\"/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n      \n      if (!response.ok) throw new Error(\"Upload failed\");\n      \n      const data = await response.json();\n      form.setValue(\"logo\", data.url as string);\n      \n      toast({\n        title: \"Logo Uploaded\",\n        description: \"Ministry logo uploaded successfully.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Upload Failed\",\n        description: \"Failed to upload logo. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const onSubmit = (data: EditMinistryFormData) => {\n    console.log(\"Form submission data:\", data);\n    console.log(\"Ministry profile ID:\", ministryProfile?.id);\n    console.log(\"Form errors:\", form.formState.errors);\n    updateMinistryMutation.mutate(data);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full border-b-2 border-primary h-8 w-8 mx-auto mb-4\"></div>\n          <p className=\"text-gray-400\">Loading ministry profile...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!ministryProfile) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <Building className=\"h-16 w-16 text-gray-600 mx-auto mb-4\" />\n          <h2 className=\"text-xl font-semibold text-gray-400 mb-2\">No Ministry Profile Found</h2>\n          <p className=\"text-gray-500 mb-6\">You don't have a ministry profile yet.</p>\n          <Button onClick={() => navigate(\"/ministry/create\")} className=\"bg-primary hover:bg-primary/90\">\n            Create Ministry Profile\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Edit Ministry Profile - Christ Collective</title>\n        <meta name=\"description\" content=\"Edit your ministry profile on Christ Collective.\" />\n      </Helmet>\n      \n      <div className=\"min-h-screen bg-black text-white\">\n        {/* Header */}\n        <div className=\"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800\">\n          <div className=\"max-w-4xl mx-auto px-4 py-3\">\n            <div className=\"flex items-center justify-between\">\n              <Button \n                variant=\"ghost\" \n                onClick={() => navigate(\"/profile\")}\n                className=\"text-white hover:bg-white/10 p-2\"\n              >\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Button>\n              <h1 className=\"text-lg font-semibold\">Edit Ministry Profile</h1>\n              <div className=\"w-9 h-9\"></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"max-w-4xl mx-auto px-4 py-8\">\n          <Card className=\"bg-gray-900 border-gray-700\">\n            <CardHeader>\n              <CardTitle className=\"text-white flex items-center gap-2\">\n                <Building className=\"h-5 w-5 text-primary\" />\n                Ministry Information\n              </CardTitle>\n              <CardDescription className=\"text-gray-400\">\n                Update your ministry profile information. Changes will require admin approval if the ministry was previously approved.\n              </CardDescription>\n            </CardHeader>\n            \n            <CardContent>\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                  {/* Logo Upload */}\n                  <div className=\"space-y-4\">\n                    <FormLabel className=\"text-white\">Ministry Logo</FormLabel>\n                    <div className=\"flex items-center gap-4\">\n                      {form.watch(\"logo\") && (\n                        <div className=\"w-20 h-20 rounded-lg overflow-hidden border border-gray-600\">\n                          <img \n                            src={form.watch(\"logo\") || \"\"} \n                            alt=\"Ministry logo\" \n                            className=\"w-full h-full object-cover\"\n                          />\n                        </div>\n                      )}\n                      <div>\n                        <input\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={handleLogoUpload}\n                          className=\"hidden\"\n                          id=\"logo-upload\"\n                          disabled={isUploading}\n                        />\n                        <label htmlFor=\"logo-upload\">\n                          <Button \n                            type=\"button\" \n                            variant=\"outline\" \n                            disabled={isUploading}\n                            className=\"cursor-pointer\"\n                            asChild\n                          >\n                            <span>\n                              <Upload className=\"h-4 w-4 mr-2\" />\n                              {isUploading ? \"Uploading...\" : \"Upload Logo\"}\n                            </span>\n                          </Button>\n                        </label>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    {/* Basic Information */}\n                    <div className=\"space-y-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"name\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-white\">Ministry Name *</FormLabel>\n                            <FormControl>\n                              <Input \n                                {...field} \n                                value={field.value || \"\"}\n                                className=\"bg-gray-800 border-gray-600 text-white\"\n                                placeholder=\"Enter ministry name\"\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"denomination\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-white\">Denomination</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value || \"\"}>\n                              <FormControl>\n                                <SelectTrigger className=\"bg-gray-800 border-gray-600 text-white\">\n                                  <SelectValue placeholder=\"Select denomination\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                {denominations.map((denomination) => (\n                                  <SelectItem key={denomination} value={denomination}>\n                                    {denomination}\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"location\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-white\">Location</FormLabel>\n                            <FormControl>\n                              <Input \n                                {...field} \n                                value={field.value || \"\"}\n                                className=\"bg-gray-800 border-gray-600 text-white\"\n                                placeholder=\"City, State\"\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"website\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-white\">Website</FormLabel>\n                            <FormControl>\n                              <Input \n                                {...field} \n                                value={field.value || \"\"}\n                                className=\"bg-gray-800 border-gray-600 text-white\"\n                                placeholder=\"https://yourministry.com\"\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    {/* Contact Information */}\n                    <div className=\"space-y-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"email\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-white\">Contact Email *</FormLabel>\n                            <FormControl>\n                              <Input \n                                {...field} \n                                value={field.value || \"\"}\n                                type=\"email\"\n                                className=\"bg-gray-800 border-gray-600 text-white\"\n                                placeholder=\"contact@ministry.com\"\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"phone\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-white\">Phone Number *</FormLabel>\n                            <FormControl>\n                              <Input \n                                {...field} \n                                value={field.value || \"\"}\n                                className=\"bg-gray-800 border-gray-600 text-white\"\n                                placeholder=\"(555) 123-4567\"\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"address\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-white\">Address *</FormLabel>\n                            <FormControl>\n                              <Textarea \n                                {...field} \n                                value={field.value || \"\"}\n                                className=\"bg-gray-800 border-gray-600 text-white min-h-[80px]\"\n                                placeholder=\"Full address including street, city, state, and ZIP\"\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                  </div>\n\n                  {/* Description */}\n                  <FormField\n                    control={form.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-white\">Ministry Description *</FormLabel>\n                        <FormControl>\n                          <Textarea \n                            {...field} \n                            value={field.value || \"\"}\n                            className=\"bg-gray-800 border-gray-600 text-white min-h-[120px]\"\n                            placeholder=\"Describe your ministry, mission, and activities...\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  {/* Submit */}\n                  <div className=\"flex gap-4\">\n                    <Button\n                      type=\"submit\"\n                      disabled={updateMinistryMutation.isPending}\n                      className=\"bg-primary hover:bg-primary/90 flex-1\"\n                    >\n                      <Save className=\"h-4 w-4 mr-2\" />\n                      {updateMinistryMutation.isPending ? \"Updating...\" : \"Update Ministry Profile\"}\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={() => navigate(\"/profile\")}\n                      className=\"border-gray-600 hover:bg-gray-800\"\n                    >\n                      Cancel\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":18148},"client/src/pages/EditProfilePage.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { ArrowLeft, User, Briefcase, Church, Edit, Save, Plus, Eye, EyeOff, ExternalLink, Play, Upload, X } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useEffect, useState } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\n// Post Management Component\nfunction PostManagementSection({ creatorProfile, queryClient, toast }: any) {\n  const { data: allPosts, refetch } = useQuery({\n    queryKey: [`/api/social-media-posts/creator/${creatorProfile.id}`],\n    enabled: !!creatorProfile.id,\n  });\n\n  const updatePostVisibility = useMutation({\n    mutationFn: async ({ postId, isVisible }: { postId: number; isVisible: boolean }) => {\n      const response = await fetch(`/api/social-media-posts/${postId}/visibility`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ isVisibleOnProfile: isVisible }),\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to update post visibility: ${response.statusText}`);\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Post visibility updated successfully!\" });\n      refetch();\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/creator-status\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error updating post visibility\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleToggleVisibility = (postId: number, currentVisibility: boolean) => {\n    updatePostVisibility.mutate({ \n      postId, \n      isVisible: !currentVisibility \n    });\n  };\n\n  const posts = allPosts || creatorProfile.posts || [];\n\n  return (\n    <Card className=\"bg-gray-900 border-gray-700\">\n      <CardHeader>\n        <CardTitle className=\"text-white flex items-center gap-2\">\n          <Edit className=\"w-5 h-5\" />\n          Manage Your Posts\n        </CardTitle>\n        <p className=\"text-gray-400 text-sm\">\n          Control which posts from your linked social media accounts appear on your profile.\n        </p>\n      </CardHeader>\n      <CardContent>\n        {posts.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <Play className=\"w-12 h-12 text-gray-500 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-white mb-2\">No Posts Found</h3>\n            <p className=\"text-gray-400\">\n              Posts from your linked social media accounts will appear here.\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {posts.map((post: any) => (\n              <div \n                key={post.id} \n                className={`flex items-center gap-4 p-4 rounded-lg border transition-colors ${\n                  post.isVisibleOnProfile !== false\n                    ? 'bg-gray-800 border-gray-600' \n                    : 'bg-gray-800/50 border-gray-700 opacity-60'\n                }`}\n              >\n                {/* Post Thumbnail */}\n                <div className=\"flex-shrink-0\">\n                  {post.thumbnailUrl ? (\n                    <img \n                      src={post.thumbnailUrl} \n                      alt={post.postTitle || 'Post thumbnail'}\n                      className=\"w-16 h-16 object-cover rounded-lg\"\n                    />\n                  ) : (\n                    <div className=\"w-16 h-16 bg-gray-700 rounded-lg flex items-center justify-center\">\n                      <Play className=\"w-6 h-6 text-gray-400\" />\n                    </div>\n                  )}\n                </div>\n\n                {/* Post Info */}\n                <div className=\"flex-1 min-w-0\">\n                  <h4 className=\"font-medium text-white truncate\">\n                    {post.postTitle || 'Untitled Post'}\n                  </h4>\n                  <p className=\"text-sm text-gray-400 line-clamp-2\">\n                    {post.postDescription || 'No description available'}\n                  </p>\n                  <div className=\"flex items-center gap-4 mt-2 text-xs text-gray-500\">\n                    <span className=\"capitalize\">{post.platform}</span>\n                    {post.viewCount && <span>{post.viewCount.toLocaleString()} views</span>}\n                    {post.likeCount && <span>{post.likeCount.toLocaleString()} likes</span>}\n                    {post.postedAt && (\n                      <span>{new Date(post.postedAt).toLocaleDateString()}</span>\n                    )}\n                  </div>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex items-center gap-2\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => window.open(post.postUrl, '_blank')}\n                    className=\"text-gray-400 hover:text-white\"\n                  >\n                    <ExternalLink className=\"w-4 h-4\" />\n                  </Button>\n                  \n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => handleToggleVisibility(post.id, post.isVisibleOnProfile !== false)}\n                    disabled={updatePostVisibility.isPending}\n                    className={`${\n                      post.isVisibleOnProfile !== false\n                        ? 'text-green-400 hover:text-green-300' \n                        : 'text-gray-400 hover:text-gray-300'\n                    }`}\n                  >\n                    {post.isVisibleOnProfile !== false ? (\n                      <Eye className=\"w-4 h-4\" />\n                    ) : (\n                      <EyeOff className=\"w-4 h-4\" />\n                    )}\n                  </Button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\n// Import form components\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\n\n// Form schemas\nconst creatorProfileSchema = z.object({\n  content: z.string().optional(),\n  audience: z.string().optional(),\n  youtubeUrl: z.string().optional(),\n  instagramUrl: z.string().optional(),\n  tiktokUrl: z.string().optional(),\n  twitterUrl: z.string().optional(),\n  facebookUrl: z.string().optional(),\n  linkedinUrl: z.string().optional(),\n  profileImage: z.string().optional(),\n});\n\nconst businessProfileSchema = z.object({\n  companyName: z.string().min(1, \"Company name is required\"),\n  industry: z.string().min(1, \"Industry is required\"),\n  description: z.string().optional(),\n  website: z.string().optional(),\n  location: z.string().optional(),\n  employeeCount: z.string().optional(),\n  foundedYear: z.string().optional(),\n  profileImage: z.string().optional(),\n});\n\nconst basicProfileSchema = z.object({\n  username: z.string().min(1, \"Username is required\"),\n  bio: z.string().optional(),\n  profileImageUrl: z.string().optional(),\n});\n\nexport default function EditProfilePage() {\n  const { user, isLoading } = useAuth();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [activeTab, setActiveTab] = useState(\"profile\");\n  const [selectedProfileImage, setSelectedProfileImage] = useState<File | null>(null);\n  const [profileImagePreview, setProfileImagePreview] = useState<string>(\"\");\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!isLoading && !user) {\n      navigate(\"/auth\");\n    }\n  }, [isLoading, user, navigate]);\n\n  // Fetch user profiles\n  const { data: creatorStatus } = useQuery({\n    queryKey: [\"/api/user/creator-status\"],\n    enabled: !!user,\n  });\n\n  const { data: businessProfiles } = useQuery({\n    queryKey: [\"/api/business-profiles\"],\n    enabled: !!user,\n  });\n\n  const userBusinessProfile = Array.isArray(businessProfiles) ? \n    businessProfiles.find((profile: any) => profile.userId === user?.id) : null;\n\n  // Creator form\n  const creatorForm = useForm({\n    resolver: zodResolver(creatorProfileSchema),\n    defaultValues: {\n      content: creatorStatus?.creatorProfile?.content || \"\",\n      audience: creatorStatus?.creatorProfile?.audience || \"\",\n      youtubeUrl: \"\",\n      instagramUrl: \"\",\n      tiktokUrl: \"\",\n      twitterUrl: \"\",\n      facebookUrl: \"\",\n      linkedinUrl: \"\",\n      profileImage: creatorStatus?.creatorProfile?.profileImage || \"\",\n    },\n  });\n\n  // Business form\n  const businessForm = useForm({\n    resolver: zodResolver(businessProfileSchema),\n    defaultValues: {\n      companyName: userBusinessProfile?.companyName || \"\",\n      industry: userBusinessProfile?.industry || \"\",\n      description: userBusinessProfile?.description || \"\",\n      website: userBusinessProfile?.website || \"\",\n      location: userBusinessProfile?.location || \"\",\n      employeeCount: userBusinessProfile?.employeeCount || \"\",\n      foundedYear: userBusinessProfile?.foundedYear || \"\",\n      profileImage: userBusinessProfile?.profileImage || \"\",\n    },\n  });\n\n  // Basic profile form for all users\n  const basicProfileForm = useForm({\n    resolver: zodResolver(basicProfileSchema),\n    defaultValues: {\n      username: user?.username || \"\",\n      bio: user?.bio || \"\",\n      profileImageUrl: user?.profileImageUrl || \"\",\n    },\n  });\n\n  // Update form defaults when data loads\n  useEffect(() => {\n    if (creatorStatus?.creatorProfile) {\n      const creator = creatorStatus.creatorProfile;\n      const platforms = creator.platforms || [];\n      \n      // Extract platform URLs\n      const youtubeUrl = platforms.find((p: any) => p.platform === 'youtube')?.profileUrl || \"\";\n      const instagramUrl = platforms.find((p: any) => p.platform === 'instagram')?.profileUrl || \"\";\n      const tiktokUrl = platforms.find((p: any) => p.platform === 'tiktok')?.profileUrl || \"\";\n      const twitterUrl = platforms.find((p: any) => p.platform === 'twitter')?.profileUrl || \"\";\n      const facebookUrl = platforms.find((p: any) => p.platform === 'facebook')?.profileUrl || \"\";\n      const linkedinUrl = platforms.find((p: any) => p.platform === 'linkedin')?.profileUrl || \"\";\n      \n      creatorForm.reset({\n        content: creator.content || \"\",\n        audience: creator.audience || \"\",\n        youtubeUrl,\n        instagramUrl,\n        tiktokUrl,\n        twitterUrl,\n        facebookUrl,\n        linkedinUrl,\n        profileImage: creator.profileImage || \"\",\n      });\n    }\n  }, [creatorStatus, creatorForm]);\n\n  useEffect(() => {\n    if (userBusinessProfile) {\n      businessForm.reset({\n        companyName: userBusinessProfile.companyName || \"\",\n        industry: userBusinessProfile.industry || \"\",\n        description: userBusinessProfile.description || \"\",\n        website: userBusinessProfile.website || \"\",\n        location: userBusinessProfile.location || \"\",\n        employeeCount: userBusinessProfile.employeeCount || \"\",\n        foundedYear: userBusinessProfile.foundedYear || \"\",\n        profileImage: userBusinessProfile.profileImage || \"\",\n      });\n    }\n  }, [userBusinessProfile, businessForm]);\n\n  useEffect(() => {\n    if (user) {\n      basicProfileForm.reset({\n        username: user.username || \"\",\n        bio: user.bio || \"\",\n        profileImageUrl: user.profileImageUrl || \"\",\n      });\n    }\n  }, [user, basicProfileForm]);\n\n  // Mutations\n  const updateCreatorMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const platforms = [];\n      if (data.youtubeUrl) platforms.push({ platform: \"youtube\", profileUrl: data.youtubeUrl });\n      if (data.instagramUrl) platforms.push({ platform: \"instagram\", profileUrl: data.instagramUrl });\n      if (data.tiktokUrl) platforms.push({ platform: \"tiktok\", profileUrl: data.tiktokUrl });\n      if (data.twitterUrl) platforms.push({ platform: \"twitter\", profileUrl: data.twitterUrl });\n      if (data.facebookUrl) platforms.push({ platform: \"facebook\", profileUrl: data.facebookUrl });\n      if (data.linkedinUrl) platforms.push({ platform: \"linkedin\", profileUrl: data.linkedinUrl });\n\n      const { youtubeUrl, instagramUrl, tiktokUrl, twitterUrl, facebookUrl, linkedinUrl, ...profileData } = data;\n      \n      if (creatorStatus?.creatorProfile?.id) {\n        const response = await fetch(`/api/content-creators/${creatorStatus.creatorProfile.id}`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ ...profileData, platforms }),\n        });\n        \n        if (!response.ok) {\n          throw new Error(`Failed to update creator profile: ${response.statusText}`);\n        }\n        \n        return response.json();\n      } else {\n        const response = await fetch(\"/api/content-creators\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ ...profileData, platforms }),\n        });\n        \n        if (!response.ok) {\n          throw new Error(`Failed to create creator profile: ${response.statusText}`);\n        }\n        \n        return response.json();\n      }\n    },\n    onSuccess: () => {\n      toast({ title: \"Creator profile updated successfully!\" });\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/creator-status\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error updating creator profile\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateBusinessMutation = useMutation({\n    mutationFn: async (data: any) => {\n      if (userBusinessProfile?.id) {\n        const response = await fetch(`/api/business-profiles/${userBusinessProfile.id}`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(data),\n        });\n        \n        if (!response.ok) {\n          throw new Error(`Failed to update business profile: ${response.statusText}`);\n        }\n        \n        return response.json();\n      } else {\n        const response = await fetch(\"/api/business-profiles\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(data),\n        });\n        \n        if (!response.ok) {\n          throw new Error(`Failed to create business profile: ${response.statusText}`);\n        }\n        \n        return response.json();\n      }\n    },\n    onSuccess: () => {\n      toast({ title: \"Business profile updated successfully!\" });\n      queryClient.invalidateQueries({ queryKey: [\"/api/business-profiles\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error updating business profile\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteBusinessMutation = useMutation({\n    mutationFn: async () => {\n      if (!userBusinessProfile?.id) {\n        throw new Error(\"No business profile to delete\");\n      }\n      \n      const response = await fetch(`/api/business-profiles/${userBusinessProfile.id}`, {\n        method: \"DELETE\",\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to delete business profile: ${response.statusText}`);\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Business profile deleted successfully!\" });\n      queryClient.invalidateQueries({ queryKey: [\"/api/business-profiles\"] });\n      // Reset the business form\n      businessForm.reset({\n        companyName: \"\",\n        industry: \"\",\n        description: \"\",\n        website: \"\",\n        location: \"\",\n        employeeCount: \"\",\n        foundedYear: \"\",\n        profileImage: \"\",\n      });\n      // Switch back to overview tab\n      setActiveTab(\"overview\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error deleting business profile\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onCreatorSubmit = (data: any) => {\n    updateCreatorMutation.mutate(data);\n  };\n\n  const onBusinessSubmit = (data: any) => {\n    updateBusinessMutation.mutate(data);\n  };\n\n  const updateBasicProfileMutation = useMutation({\n    mutationFn: async (data: any) => {\n      // If there's a selected profile image, upload it first\n      let profileImageUrl = data.profileImageUrl;\n      \n      if (selectedProfileImage) {\n        const formData = new FormData();\n        formData.append('profileImage', selectedProfileImage);\n        \n        const uploadResponse = await fetch('/api/upload/profile-image', {\n          method: 'POST',\n          body: formData,\n        });\n        \n        if (!uploadResponse.ok) {\n          throw new Error('Failed to upload profile image');\n        }\n        \n        const uploadResult = await uploadResponse.json();\n        profileImageUrl = uploadResult.url;\n      }\n      \n      const response = await fetch('/api/user/profile', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ ...data, profileImageUrl }),\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        if (errorData.field === 'username') {\n          throw new Error('Username already taken. Please choose a different username.');\n        }\n        throw new Error(errorData.message || 'Failed to update profile');\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Profile updated successfully!\" });\n      queryClient.invalidateQueries({ queryKey: [\"/api/user\"] });\n      // Clear the selected profile image after successful update\n      setSelectedProfileImage(null);\n      setProfileImagePreview(\"\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error updating profile\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onBasicProfileSubmit = (data: any) => {\n    updateBasicProfileMutation.mutate(data);\n  };\n\n  // Handle profile image selection\n  const handleProfileImageSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      // Validate file type\n      if (!file.type.startsWith('image/')) {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please select an image file\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      // Validate file size (5MB limit)\n      if (file.size > 5 * 1024 * 1024) {\n        toast({\n          title: \"File too large\",\n          description: \"Please select an image smaller than 5MB\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      setSelectedProfileImage(file);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setProfileImagePreview(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const removeProfileImage = () => {\n    setSelectedProfileImage(null);\n    setProfileImagePreview(\"\");\n  };\n\n  if (isLoading || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-[#D4AF37] border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  const hasCreatorProfile = creatorStatus?.isCreator || false;\n  const hasBusinessProfile = !!userBusinessProfile;\n  \n\n\n  return (\n    <>\n      <Helmet>\n        <title>Edit Profile - Christ Collective</title>\n        <meta name=\"description\" content=\"Edit your profile settings and manage your creator, business, and ministry profiles.\" />\n      </Helmet>\n      <div className=\"min-h-screen bg-black text-white pb-20\">\n        {/* Header */}\n        <div className=\"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800\">\n          <div className=\"max-w-4xl mx-auto px-4 py-3\">\n            <div className=\"flex items-center justify-between\">\n              <Button \n                variant=\"ghost\" \n                onClick={() => navigate(\"/profile\")}\n                className=\"text-white hover:bg-white/10 p-2\"\n              >\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Button>\n              <h1 className=\"text-lg font-semibold\">Edit Profile</h1>\n              <div className=\"w-9\" /> {/* Spacer */}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"max-w-4xl mx-auto px-4 py-6\">\n          {/* Profile Overview */}\n          <div className=\"mb-6\">\n            <div className=\"flex items-center gap-4 mb-4\">\n              <Avatar className=\"w-16 h-16 ring-2 ring-gray-700\">\n                <AvatarImage src={user.profileImageUrl || ''} alt={user.firstName || user.username || ''} />\n                <AvatarFallback className=\"bg-gray-800 text-white text-lg font-bold\">\n                  {(user.firstName?.[0] || user.username?.[0] || 'U').toUpperCase()}\n                </AvatarFallback>\n              </Avatar>\n              <div>\n                <h2 className=\"text-xl font-semibold\">\n                  {user.firstName && user.lastName \n                    ? `${user.firstName} ${user.lastName}`\n                    : user.username}\n                </h2>\n                <p className=\"text-gray-400 text-sm\">@{user.username}</p>\n                <div className=\"flex gap-2 mt-1\">\n                  {hasCreatorProfile && (\n                    <Badge className=\"bg-[#D4AF37] text-black text-xs\">Creator</Badge>\n                  )}\n                  {hasBusinessProfile && (\n                    <Badge className=\"bg-blue-600 text-white text-xs\">Business</Badge>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Profile Tabs */}\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-5 bg-gray-900\">\n              <TabsTrigger value=\"overview\" className=\"flex items-center gap-2\">\n                <User className=\"w-4 h-4\" />\n                Overview\n              </TabsTrigger>\n              <TabsTrigger value=\"profile\" className=\"flex items-center gap-2\">\n                <Edit className=\"w-4 h-4\" />\n                Profile\n              </TabsTrigger>\n              <TabsTrigger value=\"creator\" className=\"flex items-center gap-2\">\n                <Edit className=\"w-4 h-4\" />\n                Creator\n              </TabsTrigger>\n              <TabsTrigger value=\"posts\" className=\"flex items-center gap-2\">\n                <Edit className=\"w-4 h-4\" />\n                Posts\n              </TabsTrigger>\n              <TabsTrigger value=\"business\" className=\"flex items-center gap-2\">\n                <Briefcase className=\"w-4 h-4\" />\n                Business\n              </TabsTrigger>\n            </TabsList>\n\n            {/* Overview Tab */}\n            <TabsContent value=\"overview\" className=\"space-y-4\">\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white\">Account Information</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-300\">Username</label>\n                    <p className=\"text-white\">{user.username}</p>\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-300\">Email</label>\n                    <p className=\"text-white\">{user.email}</p>\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-300\">Bio</label>\n                    <p className=\"text-white\">{user.bio || \"Not set\"}</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white\">Profile Types</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid gap-4\">\n                    <div className=\"flex items-center justify-between p-4 bg-gray-800 rounded-lg\">\n                      <div className=\"flex items-center gap-3\">\n                        <Edit className=\"w-5 h-5 text-[#D4AF37]\" />\n                        <div>\n                          <h3 className=\"font-medium text-white\">Content Creator</h3>\n                          <p className=\"text-sm text-gray-400\">Share your faith-based content</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        {hasCreatorProfile ? (\n                          <>\n                            <Button \n                              onClick={() => setActiveTab(\"creator\")}\n                              variant=\"outline\" \n                              size=\"sm\"\n                              className=\"border-[#D4AF37] text-[#D4AF37] hover:bg-[#D4AF37] hover:text-black\"\n                            >\n                              <Edit className=\"w-4 h-4 mr-1\" />\n                              Update Creator Profile\n                            </Button>\n                            <Button \n                              onClick={() => {\n                                // TODO: Add delete creator profile functionality\n                                toast({\n                                  title: \"Delete Creator Profile\",\n                                  description: \"This feature will be available soon\",\n                                });\n                              }}\n                              variant=\"outline\" \n                              size=\"sm\"\n                              className=\"border-red-500 text-red-500 hover:bg-red-500 hover:text-white\"\n                            >\n                              <X className=\"w-4 h-4 mr-1\" />\n                              Delete\n                            </Button>\n                          </>\n                        ) : (\n                          <Button \n                            onClick={() => setActiveTab(\"creator\")}\n                            variant=\"outline\" \n                            size=\"sm\"\n                            className=\"border-[#D4AF37] text-[#D4AF37] hover:bg-[#D4AF37] hover:text-black\"\n                          >\n                            <Plus className=\"w-4 h-4 mr-1\" />\n                            Create Creator Profile\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center justify-between p-4 bg-gray-800 rounded-lg\">\n                      <div className=\"flex items-center gap-3\">\n                        <Briefcase className=\"w-5 h-5 text-blue-500\" />\n                        <div>\n                          <h3 className=\"font-medium text-white\">Business Profile</h3>\n                          <p className=\"text-sm text-gray-400\">Connect with Christian professionals</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        {hasBusinessProfile ? (\n                          <>\n                            <Button \n                              onClick={() => setActiveTab(\"business\")}\n                              variant=\"outline\" \n                              size=\"sm\"\n                              className=\"border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white\"\n                            >\n                              <Edit className=\"w-4 h-4 mr-1\" />\n                              Update Business Profile\n                            </Button>\n                            <Button \n                              onClick={() => {\n                                if (confirm(\"Are you sure you want to delete your business profile? This action cannot be undone.\")) {\n                                  deleteBusinessMutation.mutate();\n                                }\n                              }}\n                              variant=\"outline\" \n                              size=\"sm\"\n                              className=\"border-red-500 text-red-500 hover:bg-red-500 hover:text-white\"\n                              disabled={deleteBusinessMutation.isPending}\n                            >\n                              {deleteBusinessMutation.isPending ? (\n                                <div className=\"animate-spin w-4 h-4 border-2 border-red-500 border-t-transparent rounded-full\" />\n                              ) : (\n                                <>\n                                  <X className=\"w-4 h-4 mr-1\" />\n                                  Delete\n                                </>\n                              )}\n                            </Button>\n                          </>\n                        ) : (\n                          <Button \n                            onClick={() => setActiveTab(\"business\")}\n                            variant=\"outline\" \n                            size=\"sm\"\n                            className=\"border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white\"\n                          >\n                            <Plus className=\"w-4 h-4 mr-1\" />\n                            Create Business Profile\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Basic Profile Tab */}\n            <TabsContent value=\"profile\" className=\"space-y-4\">\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white flex items-center gap-2\">\n                    <Edit className=\"w-5 h-5\" />\n                    Edit Basic Profile\n                  </CardTitle>\n                  <p className=\"text-gray-400 text-sm\">\n                    Update your display name, bio, and profile picture that everyone can see.\n                  </p>\n                </CardHeader>\n                <CardContent>\n                  <Form {...basicProfileForm}>\n                    <form onSubmit={basicProfileForm.handleSubmit(onBasicProfileSubmit)} className=\"space-y-4\">\n                      <FormField\n                        control={basicProfileForm.control}\n                        name=\"username\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-gray-300\">Username</FormLabel>\n                            <FormControl>\n                              <Input \n                                {...field} \n                                className=\"bg-gray-800 border-gray-600 text-white\"\n                                placeholder=\"Enter your username\"\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={basicProfileForm.control}\n                        name=\"bio\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-gray-300\">Bio</FormLabel>\n                            <FormControl>\n                              <Textarea \n                                {...field} \n                                className=\"bg-gray-800 border-gray-600 text-white\"\n                                placeholder=\"Tell others about yourself...\"\n                                rows={3}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      {/* Profile Picture Upload */}\n                      <div className=\"space-y-2\">\n                        <label className=\"text-sm font-medium text-gray-300\">Profile Picture</label>\n                        \n                        {/* Current/Preview Image */}\n                        <div className=\"flex items-center gap-4\">\n                          <Avatar className=\"w-16 h-16 ring-2 ring-gray-700\">\n                            <AvatarImage \n                              src={profileImagePreview || user?.profileImageUrl || ''} \n                              alt=\"Profile preview\" \n                            />\n                            <AvatarFallback className=\"bg-gray-800 text-white text-lg font-bold\">\n                              {user?.firstName?.[0] || user?.username?.[0] || 'U'}\n                            </AvatarFallback>\n                          </Avatar>\n                          \n                          <div className=\"flex-1\">\n                            {selectedProfileImage ? (\n                              <div className=\"flex items-center gap-2\">\n                                <span className=\"text-sm text-gray-300\">{selectedProfileImage.name}</span>\n                                <Button\n                                  type=\"button\"\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  onClick={removeProfileImage}\n                                  className=\"text-red-400 hover:text-red-300 hover:bg-red-400/10\"\n                                >\n                                  <X className=\"w-4 h-4\" />\n                                </Button>\n                              </div>\n                            ) : (\n                              <p className=\"text-sm text-gray-400\">\n                                {user?.profileImageUrl ? \"Current profile picture\" : \"No profile picture set\"}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                        \n                        {/* Upload Button */}\n                        <div className=\"border-2 border-dashed border-gray-600 rounded-lg p-4 text-center hover:border-gray-500 transition-colors\">\n                          <Upload className=\"w-6 h-6 text-gray-400 mx-auto mb-2\" />\n                          <p className=\"text-gray-400 mb-2\">\n                            Click to upload a new profile picture\n                          </p>\n                          <p className=\"text-xs text-gray-500 mb-3\">\n                            PNG, JPG up to 5MB\n                          </p>\n                          <input\n                            type=\"file\"\n                            accept=\"image/*\"\n                            onChange={handleProfileImageSelect}\n                            className=\"hidden\"\n                            id=\"profile-image-upload\"\n                          />\n                          <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            className=\"border-gray-600 text-gray-300 hover:bg-gray-800\"\n                            onClick={() => document.getElementById('profile-image-upload')?.click()}\n                          >\n                            Choose File\n                          </Button>\n                        </div>\n                      </div>\n\n                      <Button \n                        type=\"submit\" \n                        className=\"w-full bg-[#D4AF37] text-black hover:bg-[#B8941F]\"\n                        disabled={updateBasicProfileMutation.isPending}\n                      >\n                        {updateBasicProfileMutation.isPending ? (\n                          <>\n                            <div className=\"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2\" />\n                            Updating...\n                          </>\n                        ) : (\n                          <>\n                            <Save className=\"w-4 h-4 mr-2\" />\n                            Save Profile\n                          </>\n                        )}\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Creator Profile Tab */}\n            <TabsContent value=\"creator\" className=\"space-y-4\">\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white flex items-center gap-2\">\n                    <Edit className=\"w-5 h-5\" />\n                    {hasCreatorProfile ? \"Edit Creator Profile\" : \"Create Creator Profile\"}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <Form {...creatorForm}>\n                    <form onSubmit={creatorForm.handleSubmit(onCreatorSubmit)} className=\"space-y-4\">\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        <FormField\n                          control={creatorForm.control}\n                          name=\"content\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel className=\"text-gray-300\">Content Type</FormLabel>\n                              <FormControl>\n                                <Input \n                                  {...field} \n                                  className=\"bg-gray-800 border-gray-600 text-white\"\n                                  placeholder=\"e.g., Biblical Education\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={creatorForm.control}\n                          name=\"audience\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel className=\"text-gray-300\">Target Audience</FormLabel>\n                              <FormControl>\n                                <Input \n                                  {...field} \n                                  className=\"bg-gray-800 border-gray-600 text-white\"\n                                  placeholder=\"e.g., Young Adults\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n\n                      {/* Social Media URLs */}\n                      <div className=\"space-y-3\">\n                        <h4 className=\"font-medium text-white\">Social Media Links</h4>\n                        <div className=\"grid gap-3\">\n                          <FormField\n                            control={creatorForm.control}\n                            name=\"youtubeUrl\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel className=\"text-gray-300\">YouTube</FormLabel>\n                                <FormControl>\n                                  <Input \n                                    {...field} \n                                    className=\"bg-gray-800 border-gray-600 text-white\"\n                                    placeholder=\"https://youtube.com/@username\"\n                                  />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={creatorForm.control}\n                            name=\"instagramUrl\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel className=\"text-gray-300\">Instagram</FormLabel>\n                                <FormControl>\n                                  <Input \n                                    {...field} \n                                    className=\"bg-gray-800 border-gray-600 text-white\"\n                                    placeholder=\"https://instagram.com/username\"\n                                  />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={creatorForm.control}\n                            name=\"tiktokUrl\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel className=\"text-gray-300\">TikTok</FormLabel>\n                                <FormControl>\n                                  <Input \n                                    {...field} \n                                    className=\"bg-gray-800 border-gray-600 text-white\"\n                                    placeholder=\"https://tiktok.com/@username\"\n                                  />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n                        </div>\n                      </div>\n\n                      <Button \n                        type=\"submit\" \n                        className=\"w-full bg-[#D4AF37] text-black hover:bg-[#B8941F]\"\n                        disabled={updateCreatorMutation.isPending}\n                      >\n                        {updateCreatorMutation.isPending ? (\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"animate-spin w-4 h-4 border-2 border-black border-t-transparent rounded-full\" />\n                            Saving...\n                          </div>\n                        ) : (\n                          <>\n                            <Save className=\"w-4 h-4 mr-2\" />\n                            {hasCreatorProfile ? \"Update Creator Profile\" : \"Create Creator Profile\"}\n                          </>\n                        )}\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Post Management Tab */}\n            <TabsContent value=\"posts\" className=\"space-y-4\">\n              {hasCreatorProfile && creatorStatus?.creatorProfile ? (\n                <PostManagementSection \n                  creatorProfile={creatorStatus.creatorProfile} \n                  queryClient={queryClient}\n                  toast={toast}\n                />\n              ) : (\n                <Card className=\"bg-gray-900 border-gray-700\">\n                  <CardContent className=\"text-center py-8\">\n                    <Edit className=\"w-12 h-12 text-gray-500 mx-auto mb-4\" />\n                    <h3 className=\"text-lg font-semibold text-white mb-2\">No Creator Profile</h3>\n                    <p className=\"text-gray-400 mb-4\">\n                      Create a creator profile first to manage your posts.\n                    </p>\n                    <Button \n                      onClick={() => setActiveTab(\"creator\")}\n                      className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F]\"\n                    >\n                      Create Creator Profile\n                    </Button>\n                  </CardContent>\n                </Card>\n              )}\n            </TabsContent>\n\n            {/* Business Profile Tab */}\n            <TabsContent value=\"business\" className=\"space-y-4\">\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white flex items-center gap-2\">\n                    <Briefcase className=\"w-5 h-5\" />\n                    {hasBusinessProfile ? \"Edit Business Profile\" : \"Create Business Profile\"}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <Form {...businessForm}>\n                    <form onSubmit={businessForm.handleSubmit(onBusinessSubmit)} className=\"space-y-4\">\n                      <FormField\n                        control={businessForm.control}\n                        name=\"companyName\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-gray-300\">Company Name</FormLabel>\n                            <FormControl>\n                              <Input \n                                {...field} \n                                className=\"bg-gray-800 border-gray-600 text-white\"\n                                placeholder=\"Your company name\"\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={businessForm.control}\n                        name=\"industry\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-gray-300\">Industry</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger className=\"bg-gray-800 border-gray-600 text-white\">\n                                  <SelectValue placeholder=\"Select industry\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent className=\"bg-gray-800 border-gray-600\">\n                                <SelectItem value=\"technology\">Technology</SelectItem>\n                                <SelectItem value=\"healthcare\">Healthcare</SelectItem>\n                                <SelectItem value=\"education\">Education</SelectItem>\n                                <SelectItem value=\"finance\">Finance</SelectItem>\n                                <SelectItem value=\"retail\">Retail</SelectItem>\n                                <SelectItem value=\"consulting\">Consulting</SelectItem>\n                                <SelectItem value=\"ministry\">Ministry</SelectItem>\n                                <SelectItem value=\"nonprofit\">Non-Profit</SelectItem>\n                                <SelectItem value=\"other\">Other</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={businessForm.control}\n                        name=\"description\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"text-gray-300\">Company Description</FormLabel>\n                            <FormControl>\n                              <Textarea \n                                {...field} \n                                className=\"bg-gray-800 border-gray-600 text-white\"\n                                placeholder=\"Describe your company and mission...\"\n                                rows={3}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        <FormField\n                          control={businessForm.control}\n                          name=\"website\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel className=\"text-gray-300\">Website</FormLabel>\n                              <FormControl>\n                                <Input \n                                  {...field} \n                                  className=\"bg-gray-800 border-gray-600 text-white\"\n                                  placeholder=\"https://yourcompany.com\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={businessForm.control}\n                          name=\"location\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel className=\"text-gray-300\">Location</FormLabel>\n                              <FormControl>\n                                <Input \n                                  {...field} \n                                  className=\"bg-gray-800 border-gray-600 text-white\"\n                                  placeholder=\"City, State\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        <FormField\n                          control={businessForm.control}\n                          name=\"employeeCount\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel className=\"text-gray-300\">Employee Count</FormLabel>\n                              <Select onValueChange={field.onChange} defaultValue={field.value}>\n                                <FormControl>\n                                  <SelectTrigger className=\"bg-gray-800 border-gray-600 text-white\">\n                                    <SelectValue placeholder=\"Select size\" />\n                                  </SelectTrigger>\n                                </FormControl>\n                                <SelectContent className=\"bg-gray-800 border-gray-600\">\n                                  <SelectItem value=\"1\">Just me</SelectItem>\n                                  <SelectItem value=\"2-10\">2-10 employees</SelectItem>\n                                  <SelectItem value=\"11-50\">11-50 employees</SelectItem>\n                                  <SelectItem value=\"51-200\">51-200 employees</SelectItem>\n                                  <SelectItem value=\"201-500\">201-500 employees</SelectItem>\n                                  <SelectItem value=\"500+\">500+ employees</SelectItem>\n                                </SelectContent>\n                              </Select>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={businessForm.control}\n                          name=\"foundedYear\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel className=\"text-gray-300\">Founded Year</FormLabel>\n                              <FormControl>\n                                <Input \n                                  {...field} \n                                  className=\"bg-gray-800 border-gray-600 text-white\"\n                                  placeholder=\"2020\"\n                                  type=\"number\"\n                                  min=\"1900\"\n                                  max={new Date().getFullYear()}\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n\n                      <div className=\"flex gap-3\">\n                        <Button \n                          type=\"submit\" \n                          className=\"flex-1 bg-blue-600 text-white hover:bg-blue-700\"\n                          disabled={updateBusinessMutation.isPending}\n                        >\n                          {updateBusinessMutation.isPending ? (\n                            <div className=\"flex items-center gap-2\">\n                              <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\" />\n                              Saving...\n                            </div>\n                          ) : (\n                            <>\n                              <Save className=\"w-4 h-4 mr-2\" />\n                              {hasBusinessProfile ? \"Update Business Profile\" : \"Create Business Profile\"}\n                            </>\n                          )}\n                        </Button>\n                        \n                        {hasBusinessProfile && (\n                          <Button \n                            type=\"button\"\n                            variant=\"outline\"\n                            className=\"border-red-500 text-red-500 hover:bg-red-500 hover:text-white\"\n                            disabled={deleteBusinessMutation.isPending}\n                            onClick={() => {\n                              if (confirm(\"Are you sure you want to delete your business profile? This action cannot be undone.\")) {\n                                deleteBusinessMutation.mutate();\n                              }\n                            }}\n                          >\n                            {deleteBusinessMutation.isPending ? (\n                              <div className=\"flex items-center gap-2\">\n                                <div className=\"animate-spin w-4 h-4 border-2 border-red-500 border-t-transparent rounded-full\" />\n                                Deleting...\n                              </div>\n                            ) : (\n                              <>\n                                <X className=\"w-4 h-4 mr-2\" />\n                                Delete Profile\n                              </>\n                            )}\n                          </Button>\n                        )}\n                      </div>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":55904},"client/src/pages/EventCreatePage.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useLocation } from \"wouter\";\nimport { Helmet } from \"react-helmet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { ArrowLeft, Calendar, MapPin, Clock, Users, Save, Upload, X, Image } from \"lucide-react\";\nimport { insertMinistryEventSchema, type InsertMinistryEvent } from \"@shared/schema\";\nimport { z } from \"zod\";\n\n// Form schema that uses strings for dates (datetime-local inputs)\nconst eventFormSchema = insertMinistryEventSchema.extend({\n  startDate: z.string().min(1, \"Start date is required\"),\n  endDate: z.string().optional(),\n  type: z.string().min(1, \"Event type is required\"),\n  flyerImage: z.string().optional(),\n});\n\ntype EventFormData = z.infer<typeof eventFormSchema>;\n\nexport default function EventCreatePage() {\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const [isUploadingImage, setIsUploadingImage] = useState(false);\n  const [imagePreview, setImagePreview] = useState<string>(\"\");\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Get user's ministry profile to ensure they can create events\n  const { data: ministryProfile, isLoading: isLoadingProfile } = useQuery({\n    queryKey: [\"/api/user/ministry-profile\"],\n  });\n\n  const form = useForm<EventFormData>({\n    resolver: zodResolver(eventFormSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      type: \"\",\n      startDate: \"\",\n      endDate: \"\",\n      location: \"\",\n      address: \"\",\n      maxAttendees: undefined,\n      isOnline: false,\n      onlineLink: \"\",\n      requiresRegistration: false,\n      isPublished: true,\n      flyerImage: \"\",\n    },\n  });\n\n  const createEventMutation = useMutation({\n    mutationFn: async (data: EventFormData) => {\n      if (!ministryProfile?.id) throw new Error(\"No ministry profile found\");\n      \n      // Convert string dates to Date objects for the API\n      const eventData = {\n        ...data,\n        startDate: new Date(data.startDate),\n        endDate: data.endDate ? new Date(data.endDate) : undefined,\n        maxAttendees: data.maxAttendees ? Number(data.maxAttendees) : undefined,\n        flyerImage: data.flyerImage || undefined,\n      };\n      \n      return apiRequest(`/api/ministries/${ministryProfile.id}/events`, {\n        method: \"POST\",\n        data: eventData,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Event Created\",\n        description: \"Your ministry event has been created successfully.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/ministries\"] });\n      navigate(\"/profile\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Creation Failed\",\n        description: error.message || \"Failed to create event. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleImageUpload = async (file: File) => {\n    if (!file.type.startsWith('image/')) {\n      toast({\n        title: \"Invalid file type\",\n        description: \"Please select an image file\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (file.size > 5 * 1024 * 1024) {\n      toast({\n        title: \"File too large\",\n        description: \"Please select an image smaller than 5MB\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      setIsUploadingImage(true);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setImagePreview(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n\n      // Upload file\n      const formData = new FormData();\n      formData.append('image', file);\n\n      const response = await fetch('/api/upload', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error('Upload failed');\n      }\n\n      const result = await response.json();\n      \n      // Update form with uploaded image URL\n      form.setValue('flyerImage', result.url);\n      \n      toast({\n        title: \"Image uploaded\",\n        description: \"Your event flyer has been uploaded successfully\",\n      });\n    } catch (error) {\n      console.error('Upload error:', error);\n      toast({\n        title: \"Upload failed\",\n        description: \"Failed to upload image. Please try again.\",\n        variant: \"destructive\",\n      });\n      setImagePreview(\"\");\n    } finally {\n      setIsUploadingImage(false);\n    }\n  };\n\n  const removeImage = () => {\n    setImagePreview(\"\");\n    form.setValue('flyerImage', '');\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const onSubmit = (data: EventFormData) => {\n    createEventMutation.mutate(data);\n  };\n\n  if (isLoadingProfile) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full border-b-2 border-primary h-8 w-8 mx-auto mb-4\"></div>\n          <p className=\"text-gray-400\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!ministryProfile) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <Calendar className=\"h-16 w-16 text-gray-600 mx-auto mb-4\" />\n          <h2 className=\"text-xl font-semibold text-gray-400 mb-2\">Ministry Profile Required</h2>\n          <p className=\"text-gray-500 mb-6\">You need a ministry profile to create events.</p>\n          <Button onClick={() => navigate(\"/ministry/create\")} className=\"bg-primary hover:bg-primary/90\">\n            Create Ministry Profile\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Create Event - Christ Collective</title>\n        <meta name=\"description\" content=\"Create a new ministry event for your community.\" />\n      </Helmet>\n      \n      <div className=\"min-h-screen bg-black text-white\">\n        {/* Header */}\n        <div className=\"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800\">\n          <div className=\"max-w-4xl mx-auto px-4 py-3\">\n            <div className=\"flex items-center justify-between\">\n              <Button \n                variant=\"ghost\" \n                onClick={() => navigate(\"/create\")}\n                className=\"text-white hover:bg-white/10 p-2\"\n              >\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Button>\n              <h1 className=\"text-lg font-semibold\">Create Event</h1>\n              <div className=\"w-9 h-9\"></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"max-w-4xl mx-auto px-4 py-8\">\n          <Card className=\"bg-gray-900 border-gray-700\">\n            <CardHeader>\n              <CardTitle className=\"text-white flex items-center gap-2\">\n                <Calendar className=\"h-5 w-5 text-primary\" />\n                Event Details\n              </CardTitle>\n              <CardDescription className=\"text-gray-400\">\n                Create a new event for your ministry community. Events will be visible to your followers and the broader community.\n              </CardDescription>\n            </CardHeader>\n            \n            <CardContent>\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                  {/* Basic Information */}\n                  <div className=\"space-y-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"title\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">Event Title *</FormLabel>\n                          <FormControl>\n                            <Input \n                              {...field} \n                              className=\"bg-gray-800 border-gray-600 text-white\"\n                              placeholder=\"Sunday Morning Service, Bible Study, etc.\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"type\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">Event Type *</FormLabel>\n                          <FormControl>\n                            <select \n                              {...field} \n                              className=\"w-full bg-gray-800 border border-gray-600 text-white rounded-md px-3 py-2\"\n                            >\n                              <option value=\"\">Select event type</option>\n                              <option value=\"service\">Service</option>\n                              <option value=\"bible_study\">Bible Study</option>\n                              <option value=\"prayer\">Prayer Meeting</option>\n                              <option value=\"worship\">Worship</option>\n                              <option value=\"mission\">Mission</option>\n                              <option value=\"community_event\">Community Event</option>\n                            </select>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"description\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">Description *</FormLabel>\n                          <FormControl>\n                            <Textarea \n                              {...field} \n                              className=\"bg-gray-800 border-gray-600 text-white min-h-[100px]\"\n                              placeholder=\"Describe your event, what to expect, and any special instructions...\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  {/* Event Flyer Upload */}\n                  <div className=\"space-y-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"flyerImage\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">Event Flyer (Optional)</FormLabel>\n                          <FormControl>\n                            <div className=\"space-y-4\">\n                              {/* Image Preview */}\n                              {imagePreview && (\n                                <div className=\"relative inline-block\">\n                                  <img\n                                    src={imagePreview}\n                                    alt=\"Event flyer preview\"\n                                    className=\"max-w-full h-48 object-cover rounded-lg border border-gray-600\"\n                                  />\n                                  <Button\n                                    type=\"button\"\n                                    variant=\"destructive\"\n                                    size=\"sm\"\n                                    className=\"absolute top-2 right-2\"\n                                    onClick={removeImage}\n                                  >\n                                    <X className=\"h-4 w-4\" />\n                                  </Button>\n                                </div>\n                              )}\n                              \n                              {/* Upload Area */}\n                              {!imagePreview && (\n                                <div className=\"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-gray-500 transition-colors\">\n                                  <Upload className=\"w-8 h-8 text-gray-400 mx-auto mb-2\" />\n                                  <p className=\"text-gray-400 mb-2\">\n                                    Click to upload or drag and drop your event flyer\n                                  </p>\n                                  <p className=\"text-xs text-gray-500\">\n                                    PNG, JPG, GIF up to 5MB\n                                  </p>\n                                  <Button\n                                    type=\"button\"\n                                    variant=\"outline\"\n                                    className=\"mt-3 border-gray-600 hover:bg-gray-800\"\n                                    onClick={() => fileInputRef.current?.click()}\n                                    disabled={isUploadingImage}\n                                  >\n                                    <Image className=\"h-4 w-4 mr-2\" />\n                                    {isUploadingImage ? \"Uploading...\" : \"Choose Image\"}\n                                  </Button>\n                                </div>\n                              )}\n                              \n                              {/* Hidden File Input */}\n                              <input\n                                ref={fileInputRef}\n                                type=\"file\"\n                                accept=\"image/*\"\n                                className=\"hidden\"\n                                onChange={(e) => {\n                                  const file = e.target.files?.[0];\n                                  if (file) handleImageUpload(file);\n                                }}\n                              />\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  {/* Date and Time */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"startDate\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">Start Date & Time *</FormLabel>\n                          <FormControl>\n                            <Input \n                              {...field} \n                              type=\"datetime-local\"\n                              className=\"bg-gray-800 border-gray-600 text-white\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"endDate\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">End Date & Time</FormLabel>\n                          <FormControl>\n                            <Input \n                              {...field} \n                              type=\"datetime-local\"\n                              className=\"bg-gray-800 border-gray-600 text-white\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  {/* Location */}\n                  <FormField\n                    control={form.control}\n                    name=\"location\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-white\">Location</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            className=\"bg-gray-800 border-gray-600 text-white\"\n                            placeholder=\"Event venue or online meeting link\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  {/* Additional Settings */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"maxAttendees\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">Max Attendees</FormLabel>\n                          <FormControl>\n                            <Input \n                              {...field} \n                              type=\"number\"\n                              className=\"bg-gray-800 border-gray-600 text-white\"\n                              placeholder=\"Leave blank for unlimited\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  {/* Submit */}\n                  <div className=\"flex gap-4\">\n                    <Button\n                      type=\"submit\"\n                      disabled={createEventMutation.isPending}\n                      className=\"bg-primary hover:bg-primary/90 flex-1\"\n                    >\n                      <Save className=\"h-4 w-4 mr-2\" />\n                      {createEventMutation.isPending ? \"Creating...\" : \"Create Event\"}\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={() => navigate(\"/create\")}\n                      className=\"border-gray-600 hover:bg-gray-800\"\n                    >\n                      Cancel\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":18879},"client/src/pages/ExplorePage.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Search, TrendingUp, Users, DollarSign, Star } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useEffect, useState } from \"react\";\n\nexport default function ExplorePage() {\n  const { user, isLoading } = useAuth();\n  const [, navigate] = useLocation();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState(\"all\");\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!isLoading && !user) {\n      navigate(\"/auth\");\n    }\n  }, [isLoading, user, navigate]);\n\n  const { data: campaigns, isLoading: campaignsLoading } = useQuery({\n    queryKey: [\"/api/campaigns\"],\n    enabled: !!user,\n  });\n\n  const { data: creators, isLoading: creatorsLoading } = useQuery({\n    queryKey: [\"/api/content-creators\"],\n    enabled: !!user,\n  });\n\n  const { data: businesses, isLoading: businessesLoading } = useQuery({\n    queryKey: [\"/api/business-profiles\"],\n    enabled: !!user,\n  });\n\n  const { data: ministries, isLoading: ministriesLoading } = useQuery({\n    queryKey: [\"/api/ministries\"],\n    enabled: !!user,\n  });\n\n  const { data: allUsers, isLoading: usersLoading } = useQuery({\n    queryKey: [\"/api/users\"],\n    enabled: !!user,\n  });\n\n  // Get current user's following list to prioritize unfollowed users\n  const { data: userFollowing } = useQuery({\n    queryKey: [`/api/users/${user?.id}/following`],\n    enabled: !!user?.id,\n  });\n\n  if (isLoading || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-[#D4AF37] border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  const categories = [\n    { id: \"all\", label: \"All\", icon: TrendingUp },\n    { id: \"campaigns\", label: \"Campaigns\", icon: DollarSign },\n    { id: \"creators\", label: \"Creators\", icon: Star },\n    { id: \"businesses\", label: \"Businesses\", icon: Users },\n    { id: \"ministries\", label: \"Ministries\", icon: Star },\n    { id: \"users\", label: \"Members\", icon: Users },\n  ];\n\n  const filteredCampaigns = campaigns && Array.isArray(campaigns) ? campaigns.filter((campaign: any) =>\n    campaign.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    campaign.description?.toLowerCase().includes(searchTerm.toLowerCase())\n  ) : [];\n\n  const filteredCreators = creators && Array.isArray(creators) ? creators.filter((creator: any) =>\n    creator.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    creator.bio?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    creator.content?.toLowerCase().includes(searchTerm.toLowerCase())\n  ) : [];\n\n  const filteredBusinesses = businesses && Array.isArray(businesses) ? businesses.filter((business: any) =>\n    business.companyName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    business.description?.toLowerCase().includes(searchTerm.toLowerCase())\n  ) : [];\n\n  const filteredMinistries = ministries && Array.isArray(ministries) ? ministries.filter((ministry: any) =>\n    ministry.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    ministry.description?.toLowerCase().includes(searchTerm.toLowerCase())\n  ) : [];\n\n  // Filter users but exclude those who should be in other categories\n  const filteredUsers = allUsers && Array.isArray(allUsers) ? allUsers.filter((targetUser: any) => {\n    // Don't show current user in the list\n    if (targetUser.id === user?.id) return false;\n    \n    // Check if user has ministry profile, creator profile, or business profile\n    const hasMinistryProfile = ministries && ministries.some((ministry: any) => ministry.userId === targetUser.id);\n    const hasCreatorProfile = creators && creators.some((creator: any) => creator.userId === targetUser.id);\n    const hasBusinessProfile = businesses && businesses.some((business: any) => business.userId === targetUser.id);\n    \n    // Only show regular users (those without special profiles)\n    const isRegularUser = !hasMinistryProfile && !hasCreatorProfile && !hasBusinessProfile;\n    \n    // Apply search filter\n    const matchesSearch = targetUser.firstName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      targetUser.lastName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      targetUser.username?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      targetUser.bio?.toLowerCase().includes(searchTerm.toLowerCase());\n      \n    return isRegularUser && matchesSearch;\n  }) : [];\n\n  // Randomize and prioritize unfollowed users\n  const randomizedUsers = filteredUsers.length > 0 ? (() => {\n    const followingIds = userFollowing ? userFollowing.map((follow: any) => follow.id) : [];\n    \n    // Separate followed and unfollowed users\n    const unfollowedUsers = filteredUsers.filter((targetUser: any) => !followingIds.includes(targetUser.id));\n    const followedUsers = filteredUsers.filter((targetUser: any) => followingIds.includes(targetUser.id));\n    \n    // Shuffle both arrays\n    const shuffleArray = (array: any[]) => {\n      const shuffled = [...array];\n      for (let i = shuffled.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n      }\n      return shuffled;\n    };\n    \n    const shuffledUnfollowed = shuffleArray(unfollowedUsers);\n    const shuffledFollowed = shuffleArray(followedUsers);\n    \n    // Prioritize unfollowed users, then followed users\n    return [...shuffledUnfollowed, ...shuffledFollowed];\n  })() : [];\n\n  return (\n    <div className=\"min-h-screen bg-background pb-20\">\n      {/* Header */}\n      <div className=\"bg-background border-b border-border\">\n        <div className=\"container mx-auto px-4 py-4 max-w-4xl\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h1 className=\"text-xl font-bold text-foreground\">Explore</h1>\n          </div>\n          \n          {/* Search Bar */}\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"Search campaigns, creators, businesses, members...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10\"\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"container mx-auto px-4 py-6 max-w-4xl\">\n        {/* Category Tabs */}\n        <div className=\"flex space-x-2 mb-6 overflow-x-auto pb-2 scrollbar-hide\">\n          {categories.map((category) => {\n            const Icon = category.icon;\n            return (\n              <Button\n                key={category.id}\n                variant={selectedCategory === category.id ? \"default\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => setSelectedCategory(category.id)}\n                className=\"flex items-center space-x-2 whitespace-nowrap\"\n              >\n                <Icon className=\"h-4 w-4\" />\n                <span>{category.label}</span>\n              </Button>\n            );\n          })}\n        </div>\n\n\n\n        {/* Campaigns Section */}\n        {(selectedCategory === \"all\" || selectedCategory === \"campaigns\") && (\n          <div className=\"mb-8\">\n            <h3 className=\"text-lg font-semibold mb-4\">Featured Campaigns</h3>\n            {campaignsLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {Array.from({ length: 4 }).map((_, i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                      <div className=\"h-3 bg-gray-200 rounded w-2/3\"></div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {filteredCampaigns?.slice(0, 6).map((campaign: any) => (\n                  <Card key={campaign.id} className=\"hover:shadow-md transition-shadow border-gray-600 overflow-hidden cursor-pointer\"\n                        onClick={() => navigate(`/donate/${campaign.slug}`)}>\n                    {/* Black Header Section */}\n                    <div className=\"bg-black px-3 py-2 border-b border-gray-600\">\n                      <div className=\"flex items-center\">\n                        <span className=\"text-[#D4AF37] font-semibold text-xs tracking-wide\">CHRIST COLLECTIVE</span>\n                      </div>\n                    </div>\n                    \n                    {/* Black Content Section */}\n                    <div className=\"bg-black px-3 py-3\">\n                      <div className=\"flex gap-3\">\n                        {/* Left side - Campaign cover image */}\n                        <div className=\"flex-shrink-0\">\n                          <div className=\"w-20 h-20 bg-gray-800 border border-gray-600 rounded-lg flex items-center justify-center overflow-hidden\">\n                            {campaign.imageUrl || campaign.image ? (\n                              <img \n                                src={campaign.imageUrl || campaign.image} \n                                alt={campaign.title}\n                                className=\"w-full h-full object-cover\"\n                              />\n                            ) : (\n                              <div className=\"text-gray-500 text-xs text-center\">\n                                <div className=\"w-8 h-8 mx-auto mb-1\">📷</div>\n                                <div className=\"text-[10px]\">Cover</div>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n\n                        {/* Right side - Campaign content */}\n                        <div className=\"flex-1 min-w-0\">\n                          <h4 className=\"font-semibold text-white text-sm mb-2\">{campaign.title}</h4>\n                          <p className=\"text-gray-300 text-xs mb-2 leading-relaxed\">\n                            {campaign.description?.substring(0, 50)}...\n                          </p>\n                          \n                          {/* Stats Row */}\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <div className=\"flex items-center space-x-1\">\n                              <div className=\"w-1.5 h-1.5 rounded-full bg-[#D4AF37]\"></div>\n                              <span className=\"text-[#D4AF37] font-semibold text-xs\">\n                                ${(campaign.currentAmount || campaign.raised || 401).toLocaleString()} raised\n                              </span>\n                            </div>\n                            <span className=\"text-gray-400 text-xs\">\n                              ${(campaign.goal || 10000).toLocaleString()} goal\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {/* Donate Button - Full width below */}\n                      <button className=\"w-full bg-[#D4AF37] text-black font-semibold py-2 rounded-md text-xs hover:bg-[#B8941F] transition-colors mt-3\">\n                        Donate Now\n                      </button>\n                    </div>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Creators Section */}\n        {(selectedCategory === \"all\" || selectedCategory === \"creators\") && (\n          <div className=\"mb-8\">\n            <h3 className=\"text-lg font-semibold mb-4\">Popular Creators</h3>\n            {creatorsLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {Array.from({ length: 4 }).map((_, i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                      <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {filteredCreators?.slice(0, 6).map((creator: any) => (\n                  <Card key={creator.id} className=\"hover:shadow-md transition-shadow cursor-pointer bg-black border-gray-600\"\n                        onClick={() => navigate(`/creators/${creator.id}`)}>\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-center space-x-3\">\n                        <Avatar className=\"h-12 w-12\">\n                          <AvatarImage src={creator.profileImage} />\n                          <AvatarFallback>{creator.name?.[0]}</AvatarFallback>\n                        </Avatar>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-yellow-400\">{creator.name}</h4>\n                          <p className=\"text-sm text-white\">{creator.bio?.substring(0, 60)}...</p>\n                          <div className=\"flex items-center mt-2\">\n                            <Badge variant=\"outline\" className=\"text-[10px] px-1.5 py-0.5 leading-none\">{creator.content}</Badge>\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Businesses Section */}\n        {(selectedCategory === \"all\" || selectedCategory === \"businesses\") && (\n          <div className=\"mb-8\">\n            <h3 className=\"text-lg font-semibold mb-4\">Featured Businesses</h3>\n            {businessesLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {Array.from({ length: 6 }).map((_, i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-center mb-4\">\n                        <div className=\"w-12 h-12 bg-gray-200 rounded-full mr-4\" />\n                        <div className=\"flex-1\">\n                          <div className=\"h-5 bg-gray-200 rounded w-3/4 mb-2\" />\n                          <div className=\"h-4 bg-gray-100 rounded w-1/2\" />\n                        </div>\n                      </div>\n                      <div className=\"h-4 bg-gray-100 rounded mb-3 w-full\" />\n                      <div className=\"h-4 bg-gray-100 rounded mb-3 w-full\" />\n                      <div className=\"h-4 bg-gray-100 rounded mb-4 w-3/4\" />\n                      <div className=\"flex justify-between\">\n                        <div className=\"h-6 bg-gray-200 rounded w-1/3\" />\n                        <div className=\"h-6 bg-gray-200 rounded w-1/4\" />\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {filteredBusinesses?.slice(0, 6).map((business: any) => (\n                  <Card key={business.id} className=\"hover:shadow-md transition-shadow cursor-pointer bg-black border-gray-600\"\n                        onClick={() => navigate(`/business/profile/${business.id}`)}>\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-center mb-4\">\n                        {business.logo ? (\n                          <Avatar className=\"h-12 w-12 mr-4\">\n                            <AvatarImage src={business.logo} alt={business.companyName} />\n                            <AvatarFallback>{business.companyName?.charAt(0)}</AvatarFallback>\n                          </Avatar>\n                        ) : (\n                          <Avatar className=\"h-12 w-12 mr-4\">\n                            <AvatarFallback>{business.companyName?.charAt(0)}</AvatarFallback>\n                          </Avatar>\n                        )}\n                        <div>\n                          <h3 className=\"font-semibold text-yellow-400\">{business.companyName}</h3>\n                          <div className=\"inline-flex items-center justify-center w-auto min-w-[60px] h-6 px-3 bg-white rounded-full\">\n                            <p className=\"text-xs text-black font-medium\">{business.industry}</p>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <p className=\"text-white mb-4 line-clamp-3\">\n                        {business.description}\n                      </p>\n                      \n                      <div className=\"flex justify-between items-center text-sm\">\n                        {business.location && (\n                          <span className=\"text-gray-300\">\n                            📍 {business.location}\n                          </span>\n                        )}\n                        <Button variant=\"ghost\" size=\"sm\" className=\"text-yellow-400 hover:text-yellow-500\">\n                          View Profile\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Ministries Section */}\n        {(selectedCategory === \"all\" || selectedCategory === \"ministries\") && (\n          <div className=\"mb-8\">\n            <h3 className=\"text-lg font-semibold mb-4\">Featured Ministries</h3>\n            {ministriesLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {Array.from({ length: 4 }).map((_, i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                      <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {filteredMinistries?.slice(0, 6).map((ministry: any) => (\n                  <Card key={ministry.id} className=\"hover:shadow-md transition-shadow cursor-pointer bg-black border-gray-600\"\n                        onClick={() => navigate(`/ministry/${ministry.id}`)}>\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-start space-x-3\">\n                        <Avatar className=\"h-10 w-10\">\n                          <AvatarImage src={ministry.logo} />\n                          <AvatarFallback>{ministry.name?.[0]}</AvatarFallback>\n                        </Avatar>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-yellow-400\">{ministry.name}</h4>\n                          <p className=\"text-sm text-white mt-1\">{ministry.description?.substring(0, 80)}...</p>\n                          <div className=\"flex items-center mt-3\">\n                            <Badge variant=\"outline\">{ministry.denomination}</Badge>\n                            <span className=\"text-sm text-gray-300 ml-2\">\n                              {ministry.location}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Users/Members Section */}\n        {(selectedCategory === \"all\" || selectedCategory === \"users\") && (\n          <div className=\"mb-8\">\n            <h3 className=\"text-lg font-semibold mb-4\">Community Members</h3>\n            {usersLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {Array.from({ length: 6 }).map((_, i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"h-12 w-12 bg-gray-200 rounded-full\"></div>\n                        <div className=\"flex-1\">\n                          <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                          <div className=\"h-3 bg-gray-200 rounded w-2/3\"></div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {randomizedUsers?.slice(0, 9).map((member: any) => (\n                  <Card key={member.id} className=\"hover:shadow-md transition-shadow cursor-pointer bg-black border-gray-600\"\n                        onClick={() => navigate(`/profile/${member.username}`)}>\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-center space-x-3\">\n                        <Avatar className=\"h-12 w-12\">\n                          <AvatarImage src={member.profileImageUrl} />\n                          <AvatarFallback>{member.firstName?.[0] || member.username?.[0]}</AvatarFallback>\n                        </Avatar>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-yellow-400\">\n                            {member.firstName && member.lastName \n                              ? `${member.firstName} ${member.lastName}`\n                              : member.username}\n                          </h4>\n                          <p className=\"text-xs text-gray-400\">@{member.username}</p>\n                          {member.bio && (\n                            <p className=\"text-sm text-white mt-1\">{member.bio.substring(0, 50)}...</p>\n                          )}\n                          <div className=\"flex items-center mt-2\">\n                            {member.userType && member.userType !== \"ministry\" && (\n                              <Badge variant=\"outline\" className=\"text-[10px] px-1.5 py-0.5 leading-none capitalize\">\n                                {member.userType === \"business_owner\" ? \"Business\" : member.userType}\n                              </Badge>\n                            )}\n                            {member.location && member.showLocation && (\n                              <span className=\"text-xs text-gray-400 ml-2\">{member.location}</span>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":23485},"client/src/pages/FeedPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { CreatePostModal } from \"@/components/CreatePostModal\";\nimport { PlatformPostCard } from \"@/components/PlatformPostCard\";\nimport { MinistryPostCard } from \"@/components/MinistryPostCard\";\nimport { FollowSuggestions } from \"@/components/FollowSuggestions\";\nimport { Helmet } from \"react-helmet\";\nimport { Plus, Sparkles } from \"lucide-react\";\nimport { useMemo, ReactNode } from \"react\";\n\nexport default function FeedPage() {\n  const { data: posts, isLoading } = useQuery({\n    queryKey: [\"/api/platform-posts\"],\n  });\n\n  const { data: user } = useQuery<any>({\n    queryKey: [\"/api/user\"],\n  });\n\n  // Get posts from followed users when user is logged in\n  const { data: followingPosts = [] } = useQuery<any[]>({\n    queryKey: [\"/api/feed/following\"],\n    enabled: !!user?.id,\n  });\n\n  // Get ministry posts from followed ministries\n  const { data: ministryPosts = [] } = useQuery<any[]>({\n    queryKey: [\"/api/feed/ministry-posts\"],\n    enabled: !!user?.id,\n  });\n\n  // Combine and sort all posts by creation date\n  const allPosts = useMemo(() => {\n    const userPosts = (user && followingPosts && followingPosts.length > 0) ? followingPosts : (posts || []);\n    const ministry = ministryPosts || [];\n    \n    // Combine posts and add type identifier\n    const combined = [\n      ...((userPosts as any[]) || []).map((post: any) => ({ ...post, postType: 'user' })),\n      ...((ministry as any[]) || []).map((post: any) => ({ ...post, postType: 'ministry' }))\n    ];\n    \n    // Sort by creation date (newest first)\n    return combined.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }, [posts, followingPosts, ministryPosts, user]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#D4AF37] mx-auto mb-4\"></div>\n          <p className=\"text-gray-400\">Loading your feed...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white pb-20\">\n      <Helmet>\n        <title>Feed - Christ Collective</title>\n        <meta name=\"description\" content=\"Discover and share inspiring content from the Christ Collective community\" />\n      </Helmet>\n\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"max-w-4xl mx-auto\">\n          {/* Header with Create Post Button */}\n          <div className=\"flex justify-between items-center mb-8\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-white\">Community Feed</h1>\n              <p className=\"text-gray-400\">Share your faith journey and inspire others</p>\n            </div>\n            {user && (\n              <div>\n                <Button \n                  onClick={() => {\n                    console.log(\"Create Post button clicked!\");\n                    // Test if this works at all\n                    alert(\"Button clicked - checking modal...\");\n                  }}\n                  className=\"bg-red-500 text-white hover:bg-red-600 mr-2\"\n                >\n                  Debug Click Test\n                </Button>\n                <CreatePostModal \n                  trigger={\n                    <Button className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F]\" data-testid=\"button-create-post\">\n                      <Plus className=\"w-4 h-4 mr-2\" />\n                      Create Post\n                    </Button>\n                  }\n                />\n              </div>\n            )}\n          </div>\n\n          {/* Posts Grid - Now appears first */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\">\n            {allPosts.length === 0 ? (\n              <div className=\"col-span-full text-center py-12\">\n                <div className=\"text-gray-400 mb-4\">\n                  <Sparkles className=\"w-16 h-16 mx-auto mb-4 opacity-50\" />\n                  <h3 className=\"text-xl font-semibold mb-2\">No Posts Yet</h3>\n                  <p>Start following members and ministries to see their inspiring content in your feed!</p>\n                </div>\n              </div>\n            ) : (\n              allPosts.map((post: any) => {\n                if (post.postType === 'ministry') {\n                  return (\n                    <MinistryPostCard\n                      key={`ministry-${post.id}`}\n                      post={post}\n                    />\n                  );\n                } else {\n                  return (\n                    <PlatformPostCard\n                      key={`user-${post.id}`}\n                      post={post}\n                      currentUserId={user?.id}\n                      showActions={true}\n                    />\n                  );\n                }\n              }) as React.ReactNode[]\n            )}\n          </div>\n\n          {/* Load More Button */}\n          {posts && (posts as any[]).length >= 50 && (\n            <div className=\"text-center mb-8\">\n              <Button \n                variant=\"outline\" \n                className=\"border-gray-600 text-gray-300 hover:bg-gray-800\"\n              >\n                Load More Posts\n              </Button>\n            </div>\n          )}\n\n          {/* Follow Suggestions - Now appears after posts */}\n          <FollowSuggestions />\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":5478},"client/src/pages/HomePage.tsx":{"content":"import HeroSection from \"@/components/home/HeroSection\";\nimport MissionSection from \"@/components/home/MissionSection\";\nimport DonationSection from \"@/components/home/DonationSection\";\nimport BusinessSection from \"@/components/home/BusinessSection\";\nimport TestimonialsSection from \"@/components/home/TestimonialsSection\";\nimport CTASection from \"@/components/home/CTASection\";\nimport { Helmet } from \"react-helmet\";\n\nexport default function HomePage() {\n  return (\n    <>\n      <Helmet>\n        <title>Christ Collective - Uniting Christians Worldwide</title>\n        <meta name=\"description\" content=\"Christ Collective is a global community uniting Christians from all denominations through faith, service, and fellowship. Join us today!\" />\n        <meta property=\"og:title\" content=\"Christ Collective - Uniting Christians Worldwide\" />\n        <meta property=\"og:description\" content=\"Join our global community dedicated to faith, service, and fellowship across all denominations.\" />\n        <meta property=\"og:type\" content=\"website\" />\n      </Helmet>\n      \n      <HeroSection />\n      <MissionSection />\n      <DonationSection />\n      <BusinessSection />\n      <TestimonialsSection />\n      <CTASection />\n    </>\n  );\n}\n","size_bytes":1230},"client/src/pages/ManageCampaignsPage.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Link } from \"wouter\";\nimport { \n  Card, \n  CardContent,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n  CardDescription \n} from \"@/components/ui/card\";\nimport { \n  Tabs, \n  TabsContent, \n  TabsList, \n  TabsTrigger \n} from \"@/components/ui/tabs\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport { \n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger \n} from \"@/components/ui/dropdown-menu\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Helmet } from \"react-helmet\";\nimport { MoreHorizontal, Edit, Trash, Eye, Loader2, ImageIcon } from \"lucide-react\";\n\ntype Campaign = {\n  id: string;\n  title: string;\n  description: string;\n  goal: string;\n  currentAmount: string;\n  image?: string;\n  additionalImages?: string[];\n  slug: string;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n};\n\nexport default function ManageCampaignsPage() {\n  const { user, isLoading: authLoading } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [campaignToDelete, setCampaignToDelete] = useState<string | null>(null);\n  \n  const { data: campaigns = [], isLoading } = useQuery({\n    queryKey: [\"/api/user/campaigns\"],\n    enabled: !!user,\n  });\n  \n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/campaigns/${id}`);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Campaign Deleted\",\n        description: \"Your campaign has been deleted successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/campaigns\"] });\n      setCampaignToDelete(null);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to delete campaign\",\n        variant: \"destructive\",\n      });\n    },\n  });\n  \n  const updateCampaignStatus = useMutation({\n    mutationFn: async ({ id, isActive }: { id: string; isActive: boolean }) => {\n      return await apiRequest(\"PUT\", `/api/campaigns/${id}`, { isActive });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Status Updated\",\n        description: \"Campaign status updated successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/campaigns\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update campaign status\",\n        variant: \"destructive\",\n      });\n    },\n  });\n  \n  const handleDelete = (id: string) => {\n    setCampaignToDelete(id);\n  };\n  \n  const confirmDelete = () => {\n    if (campaignToDelete) {\n      deleteMutation.mutate(campaignToDelete);\n    }\n  };\n  \n  const toggleCampaignStatus = (id: string, currentStatus: boolean) => {\n    updateCampaignStatus.mutate({ id, isActive: !currentStatus });\n  };\n  \n  function calculateProgress(current: string, goal: string): number {\n    const currentValue = parseFloat(current) || 0;\n    const goalValue = parseFloat(goal) || 1; // Prevent division by zero\n    \n    return Math.min(Math.round((currentValue / goalValue) * 100), 100);\n  }\n  \n  function formatCurrency(amount: string): string {\n    const value = parseFloat(amount) || 0;\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n    }).format(value);\n  }\n  \n  function formatDate(dateString: string): string {\n    const date = new Date(dateString);\n    return new Intl.DateTimeFormat('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    }).format(date);\n  }\n  \n  if (authLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n  \n  if (!user) {\n    return (\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold mb-4\">Please Log In</h2>\n          <p className=\"mb-6\">You need to be logged in to manage your campaigns.</p>\n          <Link href=\"/auth\" className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\n            Log In\n          </Link>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <>\n      <Helmet>\n        <title>Manage Campaigns | Christ Collective</title>\n        <meta name=\"description\" content=\"Manage your fundraising campaigns, track donations, and update campaign information.\" />\n      </Helmet>\n      \n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold\">Manage Your Campaigns</h1>\n            <p className=\"text-gray-600 mt-2\">\n              Create, edit and track your fundraising campaigns\n            </p>\n          </div>\n          <Link href=\"/donate/create\">\n            <button className=\"mt-4 md:mt-0 inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\n              Create New Campaign\n            </button>\n          </Link>\n        </div>\n        \n        <Tabs defaultValue=\"active\" className=\"w-full\">\n          <TabsList className=\"mb-8\">\n            <TabsTrigger value=\"active\">Active Campaigns</TabsTrigger>\n            <TabsTrigger value=\"inactive\">Inactive Campaigns</TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value=\"active\">\n            {isLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {[1, 2, 3].map((i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <div className=\"h-48 bg-gray-200\" />\n                    <CardContent className=\"p-6\">\n                      <div className=\"h-6 bg-gray-200 rounded mb-2 w-3/4\" />\n                      <div className=\"h-4 bg-gray-100 rounded mb-4 w-full\" />\n                      <div className=\"w-full bg-gray-200 rounded-full h-2.5 mb-4\" />\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : campaigns.filter((c: Campaign) => c.isActive).length > 0 ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {campaigns\n                  .filter((campaign: Campaign) => campaign.isActive)\n                  .map((campaign: Campaign) => (\n                    <CampaignCard \n                      key={campaign.id} \n                      campaign={campaign}\n                      onToggleStatus={toggleCampaignStatus}\n                      onDelete={handleDelete}\n                    />\n                  ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-16 bg-gray-50 rounded-lg\">\n                <h3 className=\"text-xl font-semibold mb-2\">No Active Campaigns</h3>\n                <p className=\"text-gray-500 mb-6\">You don't have any active campaigns at the moment.</p>\n                <Link href=\"/donate/create\">\n                  <button className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\n                    Create Your First Campaign\n                  </button>\n                </Link>\n              </div>\n            )}\n          </TabsContent>\n          \n          <TabsContent value=\"inactive\">\n            {isLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {[1, 2, 3].map((i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <div className=\"h-48 bg-gray-200\" />\n                    <CardContent className=\"p-6\">\n                      <div className=\"h-6 bg-gray-200 rounded mb-2 w-3/4\" />\n                      <div className=\"h-4 bg-gray-100 rounded mb-4 w-full\" />\n                      <div className=\"w-full bg-gray-200 rounded-full h-2.5 mb-4\" />\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : campaigns.filter((c: Campaign) => !c.isActive).length > 0 ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {campaigns\n                  .filter((campaign: Campaign) => !campaign.isActive)\n                  .map((campaign: Campaign) => (\n                    <CampaignCard \n                      key={campaign.id} \n                      campaign={campaign}\n                      onToggleStatus={toggleCampaignStatus}\n                      onDelete={handleDelete}\n                    />\n                  ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-16 bg-gray-50 rounded-lg\">\n                <p className=\"text-gray-500\">No inactive campaigns found.</p>\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n      </div>\n      \n      <AlertDialog open={!!campaignToDelete} onOpenChange={() => setCampaignToDelete(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Are you sure?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This action cannot be undone. This will permanently delete your campaign and remove all associated data.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={confirmDelete} className=\"bg-red-500 hover:bg-red-600\">\n              {deleteMutation.isPending ? (\n                <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n              ) : (\n                <Trash className=\"h-4 w-4 mr-2\" />\n              )}\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n}\n\nfunction CampaignCard({ \n  campaign, \n  onToggleStatus,\n  onDelete \n}: { \n  campaign: Campaign;\n  onToggleStatus: (id: string, currentStatus: boolean) => void;\n  onDelete: (id: string) => void;\n}) {\n  const progress = calculateProgress(campaign.currentAmount, campaign.goal);\n  \n  return (\n    <Card className=\"overflow-hidden\">\n      {campaign.image ? (\n        <div className=\"relative h-48\">\n          <img\n            src={campaign.image}\n            alt={campaign.title}\n            className=\"w-full h-full object-cover\"\n          />\n          {!campaign.isActive && (\n            <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center\">\n              <span className=\"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium\">\n                Inactive\n              </span>\n            </div>\n          )}\n        </div>\n      ) : (\n        <div className=\"relative h-48 bg-gray-100 flex items-center justify-center\">\n          <ImageIcon size={48} className=\"text-gray-400\" />\n          {!campaign.isActive && (\n            <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center\">\n              <span className=\"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium\">\n                Inactive\n              </span>\n            </div>\n          )}\n        </div>\n      )}\n      \n      <CardHeader className=\"pb-2\">\n        <div className=\"flex justify-between items-start\">\n          <CardTitle className=\"text-xl\">{campaign.title}</CardTitle>\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\n                <MoreHorizontal className=\"h-4 w-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              <DropdownMenuItem asChild>\n                <Link href={`/donate/${campaign.slug}`}>\n                  <Eye className=\"mr-2 h-4 w-4\" />\n                  <span>View</span>\n                </Link>\n              </DropdownMenuItem>\n              <DropdownMenuItem asChild>\n                <Link href={`/donate/edit/${campaign.id}`}>\n                  <Edit className=\"mr-2 h-4 w-4\" />\n                  <span>Edit</span>\n                </Link>\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => onToggleStatus(campaign.id, campaign.isActive)}>\n                {campaign.isActive ? (\n                  <>\n                    <span className=\"mr-2\">🔴</span>\n                    <span>Deactivate</span>\n                  </>\n                ) : (\n                  <>\n                    <span className=\"mr-2\">🟢</span>\n                    <span>Activate</span>\n                  </>\n                )}\n              </DropdownMenuItem>\n              <DropdownMenuItem \n                onClick={() => onDelete(campaign.id)}\n                className=\"text-red-600 focus:text-red-600\"\n              >\n                <Trash className=\"mr-2 h-4 w-4\" />\n                <span>Delete</span>\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n        <CardDescription>Created {formatDate(campaign.createdAt)}</CardDescription>\n      </CardHeader>\n      \n      <CardContent>\n        <div className=\"mb-4\">\n          <div className=\"flex justify-between text-sm mb-1\">\n            <span>Progress</span>\n            <span>{progress}%</span>\n          </div>\n          <Progress value={progress} className=\"h-2\" />\n        </div>\n        \n        <div className=\"flex justify-between text-sm font-medium\">\n          <span>{formatCurrency(campaign.currentAmount)}</span>\n          <span>of {formatCurrency(campaign.goal)}</span>\n        </div>\n      </CardContent>\n      \n      <CardFooter className=\"border-t pt-4 flex justify-between\">\n        <Button variant=\"outline\" asChild>\n          <Link href={`/donate/checkout/${campaign.id}`}>\n            Donate\n          </Link>\n        </Button>\n        <Button variant=\"outline\" asChild>\n          <Link href={`/donate/edit/${campaign.id}`}>\n            Edit Campaign\n          </Link>\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n\nfunction calculateProgress(current: string, goal: string): number {\n  const currentValue = parseFloat(current) || 0;\n  const goalValue = parseFloat(goal) || 1; // Prevent division by zero\n  \n  return Math.min(Math.round((currentValue / goalValue) * 100), 100);\n}\n\nfunction formatCurrency(amount: string): string {\n  const value = parseFloat(amount) || 0;\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n  }).format(value);\n}\n\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return new Intl.DateTimeFormat('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  }).format(date);\n}","size_bytes":16030},"client/src/pages/MembershipCheckoutPage.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useParams, useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Elements, PaymentElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { ArrowLeft, Check, Loader2 } from \"lucide-react\";\nimport { Helmet } from \"react-helmet\";\n\n// Make sure to call loadStripe outside of a component's render\nif (!import.meta.env.VITE_STRIPE_PUBLIC_KEY) {\n  console.warn('Missing Stripe public key. Payment functionality will be limited.');\n}\n\nconst stripePromise = import.meta.env.VITE_STRIPE_PUBLIC_KEY \n  ? loadStripe(import.meta.env.VITE_STRIPE_PUBLIC_KEY)\n  : null;\n\nfunction CheckoutForm({ tier }: { tier: any }) {\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const stripe = useStripe();\n  const elements = useElements();\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [errorMessage, setErrorMessage] = useState<string | undefined>();\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    }\n\n    setIsProcessing(true);\n    setErrorMessage(undefined);\n\n    try {\n      const { error } = await stripe.confirmPayment({\n        elements,\n        confirmParams: {\n          return_url: window.location.origin + \"/profile\",\n        },\n      });\n\n      if (error) {\n        setErrorMessage(error.message);\n        toast({\n          title: \"Payment failed\",\n          description: error.message,\n          variant: \"destructive\",\n        });\n      }\n    } catch (error: any) {\n      setErrorMessage(error.message);\n      toast({\n        title: \"Unexpected error\",\n        description: \"An unexpected error occurred. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"mb-6\">\n        <h3 className=\"text-lg font-medium mb-2\">Billing Summary</h3>\n        <div className=\"bg-gray-50 p-4 rounded-md\">\n          <div className=\"flex justify-between mb-2\">\n            <span className=\"text-gray-600\">{tier.name}</span>\n            <span>${tier.price}/month</span>\n          </div>\n          <div className=\"flex justify-between pt-2 border-t border-gray-200\">\n            <span className=\"font-medium\">Total</span>\n            <span className=\"font-medium\">${tier.price}/month</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"mb-6\">\n        <h3 className=\"text-lg font-medium mb-2\">Payment Details</h3>\n        <div className=\"bg-white border border-gray-200 rounded-md p-4\">\n          <PaymentElement />\n        </div>\n      </div>\n\n      {errorMessage && (\n        <div className=\"mb-4 p-3 bg-red-50 text-red-600 rounded-md text-sm\">\n          {errorMessage}\n        </div>\n      )}\n\n      <div className=\"flex justify-between\">\n        <Button \n          type=\"button\" \n          variant=\"outline\" \n          onClick={() => navigate(\"/business\")}\n          disabled={isProcessing}\n        >\n          <ArrowLeft className=\"mr-2 h-4 w-4\" />\n          Back\n        </Button>\n        \n        <Button \n          type=\"submit\" \n          disabled={!stripe || !elements || isProcessing}\n          className=\"min-w-[150px]\"\n        >\n          {isProcessing ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Processing...\n            </>\n          ) : (\n            'Subscribe Now'\n          )}\n        </Button>\n      </div>\n    </form>\n  );\n}\n\nexport default function MembershipCheckoutPage() {\n  const { tierId } = useParams();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const { isAuthenticated, isLoading: isAuthLoading } = useAuth();\n  const [clientSecret, setClientSecret] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Redirect if not authenticated\n  useEffect(() => {\n    if (!isAuthLoading && !isAuthenticated) {\n      window.location.href = \"/api/login\";\n    }\n  }, [isAuthLoading, isAuthenticated]);\n\n  // Fetch membership tier\n  const { data: tier, isLoading: isTierLoading } = useQuery({\n    queryKey: [`/api/membership-tiers/${tierId}`],\n    enabled: !!tierId && isAuthenticated,\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Unable to load membership tier information. Please try again.\",\n        variant: \"destructive\",\n      });\n      navigate(\"/business\");\n    }\n  });\n\n  // If tier not found in the API, use a default tier object based on the ID\n  const defaultTiers = [\n    {\n      id: 1,\n      name: \"Basic Membership\",\n      price: \"9\",\n      description: \"Perfect for startups and small businesses\",\n      features: [\n        \"Basic profile in our business directory\",\n        \"Access to monthly virtual networking events\",\n        \"Join industry-specific groups\",\n        \"Email support\"\n      ]\n    },\n    {\n      id: 2,\n      name: \"Professional Membership\",\n      price: \"29\",\n      description: \"For established businesses and professionals\",\n      features: [\n        \"Enhanced profile with portfolio showcase\",\n        \"Priority access to all networking events\",\n        \"1:1 business matchmaking service\",\n        \"Access to exclusive resources and training\",\n        \"Priority support\"\n      ]\n    },\n    {\n      id: 3,\n      name: \"Executive Membership\",\n      price: \"99\",\n      description: \"For industry leaders and executives\",\n      features: [\n        \"Premium featured profile with brand spotlight\",\n        \"VIP access to all events including exclusive executive roundtables\",\n        \"Dedicated business advisor\",\n        \"Opportunity to host and speak at events\",\n        \"All Professional benefits plus executive coaching sessions\"\n      ]\n    }\n  ];\n\n  const currentTier = tier || defaultTiers.find(t => t.id === parseInt(tierId || \"0\"));\n\n  // Create subscription when component mounts\n  useEffect(() => {\n    if (!isAuthenticated || !currentTier) return;\n\n    setIsLoading(true);\n    \n    apiRequest(\"POST\", \"/api/create-subscription\", { tierID: tierId })\n      .then(res => res.json())\n      .then(data => {\n        if (data.clientSecret) {\n          setClientSecret(data.clientSecret);\n        } else {\n          throw new Error(\"No client secret returned\");\n        }\n      })\n      .catch(error => {\n        toast({\n          title: \"Error\",\n          description: \"Unable to create subscription. Please try again later.\",\n          variant: \"destructive\",\n        });\n        console.error(\"Subscription error:\", error);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }, [isAuthenticated, tierId, currentTier, toast]);\n\n  if (isAuthLoading || !isAuthenticated) {\n    return (\n      <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  if (!currentTier) {\n    return (\n      <div className=\"container mx-auto px-4 py-16\">\n        <div className=\"max-w-md mx-auto text-center\">\n          <h1 className=\"text-2xl font-bold mb-4\">Membership tier not found</h1>\n          <p className=\"text-gray-600 mb-6\">The membership tier you're looking for doesn't exist.</p>\n          <Button asChild>\n            <Link href=\"/business\">\n              <a>View Available Memberships</a>\n            </Link>\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Subscribe to {currentTier.name} - Christ Collective</title>\n        <meta name=\"description\" content={`Join our ${currentTier.name} and connect with other Christian business owners and professionals.`} />\n      </Helmet>\n      \n      <div className=\"container mx-auto px-4 py-16\">\n        <div className=\"max-w-3xl mx-auto\">\n          <div className=\"mb-8\">\n            <Button \n              asChild\n              variant=\"ghost\"\n              className=\"mb-4\"\n            >\n              <Link href=\"/business\">\n                <a className=\"flex items-center\">\n                  <ArrowLeft className=\"mr-2\" size={16} />\n                  Back to Membership Options\n                </a>\n              </Link>\n            </Button>\n            \n            <h1 className=\"text-3xl font-bold mb-2\">Subscribe to {currentTier.name}</h1>\n            <p className=\"text-gray-600\">Complete your subscription to start connecting with Christian business professionals.</p>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-12 gap-8\">\n            <div className=\"md:col-span-7\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Checkout</CardTitle>\n                  <CardDescription>\n                    Secure payment processing powered by Stripe\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {isLoading || !stripePromise ? (\n                    <div className=\"py-8 flex flex-col items-center justify-center\">\n                      <Loader2 className=\"h-8 w-8 animate-spin text-primary mb-4\" />\n                      <p className=\"text-gray-500\">Preparing your subscription...</p>\n                    </div>\n                  ) : clientSecret ? (\n                    <Elements \n                      stripe={stripePromise} \n                      options={{ clientSecret, appearance: { theme: 'stripe' } }}\n                    >\n                      <CheckoutForm tier={currentTier} />\n                    </Elements>\n                  ) : (\n                    <div className=\"py-8 text-center text-gray-500\">\n                      <p>Unable to initialize payment. Please try again later.</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n            \n            <div className=\"md:col-span-5\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>{currentTier.name}</CardTitle>\n                  <CardDescription>{currentTier.description}</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-3xl font-bold mb-4\">\n                    ${currentTier.price}<span className=\"text-lg font-normal text-gray-400\">/month</span>\n                  </div>\n                  \n                  <h3 className=\"font-medium mb-2\">Includes:</h3>\n                  <ul className=\"space-y-2\">\n                    {currentTier.features.map((feature: string, i: number) => (\n                      <li key={i} className=\"flex items-start\">\n                        <Check className=\"text-primary mt-1 mr-2 flex-shrink-0\" size={16} />\n                        <span className=\"text-gray-600\">{feature}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </CardContent>\n                <CardFooter className=\"bg-gray-50 border-t\">\n                  <p className=\"text-sm text-gray-500\">\n                    Your subscription will renew automatically each month. You can cancel anytime from your profile.\n                  </p>\n                </CardFooter>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":11634},"client/src/pages/MinistriesPage.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Helmet } from \"react-helmet\";\nimport { Link } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Input } from \"@/components/ui/input\";\nimport { \n  Building, \n  MapPin, \n  Phone, \n  Mail, \n  ExternalLink, \n  Search,\n  Eye,\n  Calendar,\n  Filter\n} from \"lucide-react\";\nimport { MinistryProfile } from \"@shared/schema\";\n\nexport default function MinistriesPage() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [denominationFilter, setDenominationFilter] = useState(\"\");\n\n  const { data: ministries = [], isLoading } = useQuery({\n    queryKey: [\"/api/ministries\"],\n  });\n\n  // Filter ministries based on search and denomination\n  const filteredMinistries = Array.isArray(ministries) \n    ? ministries.filter((ministry: MinistryProfile) => {\n        const matchesSearch = !searchQuery || \n          ministry.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          ministry.description?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          ministry.location?.toLowerCase().includes(searchQuery.toLowerCase());\n        \n        const matchesDenomination = !denominationFilter || \n          ministry.denomination?.toLowerCase().includes(denominationFilter.toLowerCase());\n        \n        return matchesSearch && matchesDenomination;\n      })\n    : [];\n\n  // Get unique denominations for filter\n  const denominations = Array.from(new Set(\n    Array.isArray(ministries) \n      ? ministries.map((m: MinistryProfile) => m.denomination).filter(Boolean)\n      : []\n  ));\n\n  return (\n    <>\n      <Helmet>\n        <title>Ministries - Christ Collective</title>\n        <meta name=\"description\" content=\"Connect with Christian ministries and churches in your community through Christ Collective.\" />\n      </Helmet>\n      \n      <div className=\"min-h-screen bg-black text-white\">\n        {/* Header */}\n        <div className=\"bg-black py-16\">\n          <div className=\"max-w-6xl mx-auto px-4 text-center\">\n            <h1 className=\"text-4xl md:text-5xl font-bold text-white mb-4\">\n              Christian Ministries\n            </h1>\n            <p className=\"text-xl text-gray-300 mb-8 max-w-3xl mx-auto\">\n              Discover and connect with ministries, churches, and Christian organizations making a difference in communities worldwide\n            </p>\n            \n            {/* Search and Filter */}\n            <div className=\"max-w-2xl mx-auto space-y-4\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                <Input\n                  placeholder=\"Search ministries by name, location, or description...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 bg-gray-800 border-gray-700 text-white placeholder-gray-400\"\n                />\n              </div>\n              \n              <div className=\"flex flex-wrap gap-2 justify-center\">\n                <Button\n                  variant={denominationFilter === \"\" ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => setDenominationFilter(\"\")}\n                  className=\"text-xs\"\n                >\n                  All Denominations\n                </Button>\n                {denominations.slice(0, 6).map((denomination) => (\n                  <Button\n                    key={denomination}\n                    variant={denominationFilter === denomination ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => setDenominationFilter(denomination === denominationFilter ? \"\" : denomination)}\n                    className=\"text-xs\"\n                  >\n                    {denomination}\n                  </Button>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Ministries Grid */}\n        <div className=\"bg-white\">\n          <div className=\"max-w-6xl mx-auto px-4 py-12\">\n            {isLoading ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[...Array(9)].map((_, i) => (\n                <Card key={i} className=\"bg-black border-gray-800\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"animate-pulse\">\n                      <div className=\"h-16 w-16 bg-gray-700 rounded-full mb-4 mx-auto\"></div>\n                      <div className=\"h-4 bg-gray-700 rounded w-3/4 mb-2 mx-auto\"></div>\n                      <div className=\"h-3 bg-gray-700 rounded w-1/2 mb-4 mx-auto\"></div>\n                      <div className=\"space-y-2\">\n                        <div className=\"h-3 bg-gray-700 rounded\"></div>\n                        <div className=\"h-3 bg-gray-700 rounded w-5/6\"></div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : filteredMinistries.length === 0 ? (\n            <div className=\"text-center py-16\">\n              <Building className=\"h-16 w-16 text-gray-600 mx-auto mb-4\" />\n              <h3 className=\"text-xl font-semibold text-black mb-2\">\n                {searchQuery || denominationFilter ? \"No ministries found\" : \"No ministries yet\"}\n              </h3>\n              <p className=\"text-gray-600 mb-6\">\n                {searchQuery || denominationFilter \n                  ? \"Try adjusting your search or filter criteria\" \n                  : \"Be the first to add your ministry to our community\"\n                }\n              </p>\n              {!searchQuery && !denominationFilter && (\n                <Button className=\"bg-primary hover:bg-primary/90\">\n                  Add Your Ministry\n                </Button>\n              )}\n            </div>\n          ) : (\n            <>\n\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {filteredMinistries.map((ministry: MinistryProfile) => (\n                  <Card key={ministry.id} className=\"bg-black border-gray-800 hover:bg-gray-900 transition-all duration-300\">\n                    <CardHeader className=\"text-center pb-4\">\n                      <Avatar className=\"h-20 w-20 mx-auto mb-4\">\n                        <AvatarImage src={ministry.logo} alt={ministry.name} />\n                        <AvatarFallback className=\"bg-primary text-black text-2xl font-bold\">\n                          {ministry.name?.charAt(0) || 'M'}\n                        </AvatarFallback>\n                      </Avatar>\n                      \n                      <CardTitle className=\"text-white text-lg\">{ministry.name}</CardTitle>\n                      <CardDescription className=\"text-gray-400\">\n                        <div className=\"flex flex-wrap gap-2 justify-center mt-2\">\n                          {ministry.denomination && (\n                            <Badge variant=\"outline\" className=\"text-xs bg-blue-900/30 border-blue-600 text-blue-300\">\n                              {ministry.denomination}\n                            </Badge>\n                          )}\n                          {ministry.isVerified && (\n                            <Badge className=\"text-xs bg-green-900/30 border-green-600 text-green-300\">\n                              Verified\n                            </Badge>\n                          )}\n                        </div>\n                      </CardDescription>\n                    </CardHeader>\n                    \n                    <CardContent className=\"pt-0\">\n                      <p className=\"text-gray-300 text-sm mb-4 line-clamp-3 leading-relaxed\">\n                        {ministry.description}\n                      </p>\n                      \n                      <div className=\"space-y-2 mb-4\">\n                        {ministry.location && (\n                          <div className=\"flex items-center text-xs text-gray-400\">\n                            <MapPin className=\"h-3 w-3 mr-2 text-primary\" />\n                            <span className=\"truncate\">{ministry.location}</span>\n                          </div>\n                        )}\n                        {ministry.email && (\n                          <div className=\"flex items-center text-xs text-gray-400\">\n                            <Mail className=\"h-3 w-3 mr-2 text-primary\" />\n                            <span className=\"truncate\">{ministry.email}</span>\n                          </div>\n                        )}\n                        {ministry.website && (\n                          <div className=\"flex items-center text-xs text-gray-400\">\n                            <ExternalLink className=\"h-3 w-3 mr-2 text-primary\" />\n                            <a \n                              href={ministry.website} \n                              target=\"_blank\" \n                              rel=\"noopener noreferrer\"\n                              className=\"text-primary hover:underline truncate\"\n                            >\n                              Visit Website\n                            </a>\n                          </div>\n                        )}\n                      </div>\n                      \n                      <div className=\"flex gap-2\">\n                        <Link href={`/ministry/${ministry.id}`} className=\"flex-1\">\n                          <Button \n                            size=\"sm\" \n                            className=\"w-full bg-primary hover:bg-primary/90\"\n                          >\n                            <Eye className=\"h-4 w-4 mr-1\" />\n                            View\n                          </Button>\n                        </Link>\n                        <Button \n                          size=\"sm\" \n                          variant=\"outline\" \n                          className=\"flex-1 border-gray-600 hover:bg-gray-800\"\n                        >\n                          <Calendar className=\"h-4 w-4 mr-1\" />\n                          Events\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </>\n          )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":10578},"client/src/pages/MinistryCreatePage.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { ArrowLeft, Church, Upload, Camera } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { insertMinistryProfileSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\n\nconst formSchema = z.object({\n  name: z.string().min(1, \"Ministry name is required\"),\n  description: z.string().min(1, \"Description is required\"),\n  denomination: z.string().optional(),\n  location: z.string().optional(),\n  address: z.string().min(1, \"Address is required\"),\n  email: z.string().email(\"Valid email is required\").min(1, \"Email is required\"),\n  phone: z.string().min(1, \"Phone number is required\"),\n  website: z.string().url(\"Please enter a valid URL\").optional().or(z.literal(\"\")),\n  logo: z.string().optional(),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport default function MinistryCreatePage() {\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [logoPreview, setLogoPreview] = useState<string>(\"\");\n  \n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      denomination: \"\",\n      location: \"\",\n      address: \"\",\n      website: \"\",\n      email: \"\",\n      phone: \"\",\n      logo: \"\",\n    },\n  });\n\n  const createMinistryMutation = useMutation({\n    mutationFn: async (data: FormValues) => {\n      return apiRequest(\"/api/ministries\", {\n        method: \"POST\",\n        data: data,\n      });\n    },\n    onSuccess: (data) => {\n      toast({\n        title: \"Success\",\n        description: \"Ministry profile submitted for admin approval! You'll be notified once it's reviewed.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/ministries\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/ministry-profile\"] });\n      navigate(\"/ministry-profile\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to create ministry profile\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      toast({\n        title: \"Error\",\n        description: \"Please select a valid image file\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Validate file size (5MB max)\n    if (file.size > 5 * 1024 * 1024) {\n      toast({\n        title: \"Error\",\n        description: \"Image file must be less than 5MB\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const response = await fetch('/api/upload', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error('Upload failed');\n      }\n\n      const result = await response.json();\n      form.setValue('logo', result.url);\n      setLogoPreview(result.url);\n      \n      toast({\n        title: \"Success\",\n        description: \"Logo uploaded successfully\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to upload logo\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const onSubmit = (data: FormValues) => {\n    createMinistryMutation.mutate(data);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black\">\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        {/* Header */}\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => navigate(\"/ministry-profile\")}\n            className=\"text-gray-400 hover:text-white\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back\n          </Button>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-[#D4AF37] rounded-lg flex items-center justify-center\">\n              <Church className=\"w-6 h-6 text-black\" />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold text-white\">Create Ministry Profile</h1>\n              <p className=\"text-gray-400\">Share your ministry's mission with the community</p>\n              <p className=\"text-yellow-400 text-sm mt-1\">⚠️ Profile requires admin approval before going live</p>\n            </div>\n          </div>\n        </div>\n\n        <Card className=\"bg-gray-900 border-gray-700\">\n          <CardHeader>\n            <CardTitle className=\"text-white\">Ministry Information</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                {/* Logo Upload Section */}\n                <div className=\"space-y-4\">\n                  <Label className=\"text-gray-300\">Ministry Logo</Label>\n                  <div className=\"flex items-center gap-4\">\n                    <Avatar className=\"h-20 w-20\">\n                      <AvatarImage src={logoPreview} />\n                      <AvatarFallback className=\"bg-gray-700 text-gray-300\">\n                        <Church className=\"w-8 h-8\" />\n                      </AvatarFallback>\n                    </Avatar>\n                    <div className=\"space-y-2\">\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"border-gray-600 text-gray-300 hover:bg-gray-800\"\n                      >\n                        <Camera className=\"w-4 h-4 mr-2\" />\n                        Upload Logo\n                      </Button>\n                      <p className=\"text-sm text-gray-400\">JPG, PNG up to 5MB</p>\n                      <input\n                        ref={fileInputRef}\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleFileUpload}\n                        className=\"hidden\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-gray-300\">Ministry Name *</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            className=\"bg-gray-800 border-gray-600 text-white\"\n                            placeholder=\"e.g., Grace Community Church\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"denomination\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-gray-300\">Denomination</FormLabel>\n                        <Select onValueChange={field.onChange} defaultValue={field.value || \"\"}>\n                          <FormControl>\n                            <SelectTrigger className=\"bg-gray-800 border-gray-600 text-white\">\n                              <SelectValue placeholder=\"Select denomination\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            <SelectItem value=\"baptist\">Baptist</SelectItem>\n                            <SelectItem value=\"methodist\">Methodist</SelectItem>\n                            <SelectItem value=\"presbyterian\">Presbyterian</SelectItem>\n                            <SelectItem value=\"pentecostal\">Pentecostal</SelectItem>\n                            <SelectItem value=\"episcopal\">Episcopal</SelectItem>\n                            <SelectItem value=\"lutheran\">Lutheran</SelectItem>\n                            <SelectItem value=\"catholic\">Catholic</SelectItem>\n                            <SelectItem value=\"orthodox\">Orthodox</SelectItem>\n                            <SelectItem value=\"non-denominational\">Non-denominational</SelectItem>\n                            <SelectItem value=\"other\">Other</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <FormField\n                  control={form.control}\n                  name=\"description\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-gray-300\">Ministry Description *</FormLabel>\n                      <FormControl>\n                        <Textarea \n                          {...field}\n                          value={field.value || \"\"} \n                          className=\"bg-gray-800 border-gray-600 text-white min-h-[120px]\"\n                          placeholder=\"Describe your ministry's mission, values, and what makes it unique...\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"address\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-gray-300\">Full Address *</FormLabel>\n                      <FormControl>\n                        <Textarea \n                          {...field}\n                          value={field.value || \"\"} \n                          className=\"bg-gray-800 border-gray-600 text-white\"\n                          placeholder=\"123 Main Street, Dallas, TX 75201\"\n                          rows={2}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"location\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-gray-300\">City, State</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field}\n                            value={field.value || \"\"} \n                            className=\"bg-gray-800 border-gray-600 text-white\"\n                            placeholder=\"e.g., Dallas, TX\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"website\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-gray-300\">Website</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            value={field.value || \"\"}\n                            className=\"bg-gray-800 border-gray-600 text-white\"\n                            placeholder=\"https://yourministry.com\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"email\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-gray-300\">Contact Email *</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field}\n                            value={field.value || \"\"} \n                            type=\"email\"\n                            className=\"bg-gray-800 border-gray-600 text-white\"\n                            placeholder=\"contact@yourministry.com\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"phone\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-gray-300\">Contact Phone *</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field}\n                            value={field.value || \"\"} \n                            className=\"bg-gray-800 border-gray-600 text-white\"\n                            placeholder=\"(555) 123-4567\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-end gap-4 pt-6 border-t border-gray-700\">\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => navigate(\"/ministry-profile\")}\n                    className=\"border-gray-600 text-gray-300 hover:bg-gray-800\"\n                  >\n                    Cancel\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={createMinistryMutation.isPending}\n                    className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F]\"\n                  >\n                    {createMinistryMutation.isPending ? \"Submitting...\" : \"Submit for Approval\"}\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":15470},"client/src/pages/MinistryProfilePage.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport { Helmet } from \"react-helmet\";\nimport { Church, MapPin, Phone, Mail, Globe, Users, ArrowLeft, Save } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface MinistryFormData {\n  name: string;\n  description: string;\n  denomination: string;\n  website: string;\n  location: string;\n  address: string;\n  phone: string;\n  email: string;\n}\n\nexport default function MinistryProfilePage() {\n  const { user, isLoading: authLoading } = useAuth();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const [formData, setFormData] = useState<MinistryFormData>({\n    name: \"\",\n    description: \"\",\n    denomination: \"\",\n    website: \"\",\n    location: \"\",\n    address: \"\",\n    phone: \"\",\n    email: \"\",\n  });\n\n  // Check if user already has a ministry profile\n  const { data: existingProfile, isLoading: profileLoading } = useQuery({\n    queryKey: [\"/api/user/ministry-profile\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/user/ministry-profile\");\n      if (response.status === 404) return null;\n      if (!response.ok) throw new Error(\"Failed to fetch ministry profile\");\n      return response.json();\n    },\n    enabled: !!user,\n  });\n\n  const createMinistryMutation = useMutation({\n    mutationFn: async (data: MinistryFormData) => {\n      const response = await fetch(\"/api/ministries\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Failed to create ministry profile\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Ministry Profile Created!\",\n        description: \"Your ministry profile has been successfully created.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/ministries\"] });\n      navigate(\"/explore\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Creation Failed\",\n        description: error.message || \"Failed to create ministry profile\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.name || !formData.description) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Ministry name and description are required\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    createMinistryMutation.mutate(formData);\n  };\n\n  const handleInputChange = (field: keyof MinistryFormData, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  if (authLoading || profileLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  if (!user) {\n    navigate(\"/auth\");\n    return null;\n  }\n\n  if (existingProfile) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8\">\n        <div className=\"container mx-auto px-4\">\n          <Card className=\"max-w-2xl mx-auto\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Church className=\"w-6 h-6 text-primary\" />\n                Ministry Profile Already Exists\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-gray-600 mb-4\">\n                You already have a ministry profile set up. You can view and manage it from the Explore page.\n              </p>\n              <div className=\"flex gap-4\">\n                <Button onClick={() => navigate(\"/explore\")} className=\"flex-1\">\n                  <Church className=\"w-4 h-4 mr-2\" />\n                  View Ministry Profiles\n                </Button>\n                <Button variant=\"outline\" onClick={() => navigate(\"/\")} className=\"flex-1\">\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                  Back to Home\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Create Ministry Profile - Christ Collective</title>\n        <meta name=\"description\" content=\"Create your ministry profile to connect with and serve the Christian community.\" />\n      </Helmet>\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-2xl mx-auto\">\n            {/* Header */}\n            <div className=\"text-center mb-8\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4\">\n                <Church className=\"w-8 h-8 text-primary\" />\n              </div>\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Create Your Ministry Profile</h1>\n              <p className=\"text-gray-600\">\n                Share your ministry's mission and connect with the community you serve\n              </p>\n            </div>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Church className=\"w-5 h-5\" />\n                  Ministry Information\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                  {/* Basic Information */}\n                  <div className=\"space-y-4\">\n                    <div>\n                      <Label htmlFor=\"name\">Ministry Name *</Label>\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => handleInputChange(\"name\", e.target.value)}\n                        placeholder=\"Grace Community Church\"\n                        required\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"description\">Description *</Label>\n                      <Textarea\n                        id=\"description\"\n                        value={formData.description}\n                        onChange={(e) => handleInputChange(\"description\", e.target.value)}\n                        placeholder=\"Describe your ministry's mission and vision...\"\n                        rows={4}\n                        required\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"denomination\">Denomination</Label>\n                      <Select value={formData.denomination} onValueChange={(value) => handleInputChange(\"denomination\", value)}>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select denomination (optional)\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"baptist\">Baptist</SelectItem>\n                          <SelectItem value=\"methodist\">Methodist</SelectItem>\n                          <SelectItem value=\"presbyterian\">Presbyterian</SelectItem>\n                          <SelectItem value=\"pentecostal\">Pentecostal</SelectItem>\n                          <SelectItem value=\"catholic\">Catholic</SelectItem>\n                          <SelectItem value=\"episcopal\">Episcopal</SelectItem>\n                          <SelectItem value=\"lutheran\">Lutheran</SelectItem>\n                          <SelectItem value=\"nondenominational\">Non-denominational</SelectItem>\n                          <SelectItem value=\"other\">Other</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n\n                  {/* Contact Information */}\n                  <div className=\"space-y-4\">\n                    <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                      <MapPin className=\"w-5 h-5\" />\n                      Contact & Location\n                    </h3>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <Label htmlFor=\"phone\">Phone Number</Label>\n                        <Input\n                          id=\"phone\"\n                          type=\"tel\"\n                          value={formData.phone}\n                          onChange={(e) => handleInputChange(\"phone\", e.target.value)}\n                          placeholder=\"(555) 123-4567\"\n                        />\n                      </div>\n\n                      <div>\n                        <Label htmlFor=\"email\">Email</Label>\n                        <Input\n                          id=\"email\"\n                          type=\"email\"\n                          value={formData.email}\n                          onChange={(e) => handleInputChange(\"email\", e.target.value)}\n                          placeholder=\"contact@ministry.org\"\n                        />\n                      </div>\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"website\">Website</Label>\n                      <Input\n                        id=\"website\"\n                        type=\"url\"\n                        value={formData.website}\n                        onChange={(e) => handleInputChange(\"website\", e.target.value)}\n                        placeholder=\"https://www.ministry.org\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"location\">City, State</Label>\n                      <Input\n                        id=\"location\"\n                        value={formData.location}\n                        onChange={(e) => handleInputChange(\"location\", e.target.value)}\n                        placeholder=\"Dallas, TX\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"address\">Full Address (Optional)</Label>\n                      <Textarea\n                        id=\"address\"\n                        value={formData.address}\n                        onChange={(e) => handleInputChange(\"address\", e.target.value)}\n                        placeholder=\"123 Faith Street, Dallas, TX 75201\"\n                        rows={2}\n                      />\n                    </div>\n                  </div>\n\n                  {/* Action Buttons */}\n                  <div className=\"flex gap-4 pt-6\">\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={() => navigate(\"/\")}\n                      className=\"flex-1\"\n                    >\n                      <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                      Cancel\n                    </Button>\n                    <Button\n                      type=\"submit\"\n                      disabled={createMinistryMutation.isPending}\n                      className=\"flex-1\"\n                    >\n                      <Save className=\"w-4 h-4 mr-2\" />\n                      {createMinistryMutation.isPending ? \"Creating...\" : \"Create Ministry Profile\"}\n                    </Button>\n                  </div>\n                </form>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":12199},"client/src/pages/MinistryProfileViewPage.tsx":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useRoute } from \"wouter\";\nimport { Helmet } from \"react-helmet\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Building, \n  MapPin, \n  Phone, \n  Mail, \n  ExternalLink, \n  Users,\n  Calendar,\n  Heart,\n  Share2,\n  ArrowLeft,\n  Clock,\n  Globe,\n  UserPlus,\n  UserMinus\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { MinistryProfile, MinistryEvent } from \"@shared/schema\";\n\nexport default function MinistryProfileViewPage() {\n  const [match, params] = useRoute(\"/ministry/:id\");\n  const ministryId = params?.id;\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: ministry, isLoading } = useQuery({\n    queryKey: [\"/api/ministries\", ministryId],\n    queryFn: async () => {\n      const response = await fetch(`/api/ministries/${ministryId}`);\n      if (!response.ok) throw new Error(\"Ministry not found\");\n      return response.json();\n    },\n    enabled: !!ministryId,\n  });\n\n  // Fetch ministry events\n  const { data: events = [], isLoading: isLoadingEvents } = useQuery({\n    queryKey: [\"/api/ministries\", ministryId, \"events\"],\n    queryFn: async () => {\n      const response = await fetch(`/api/ministries/${ministryId}/events?t=${Date.now()}`);\n      if (!response.ok) throw new Error(\"Failed to fetch events\");\n      return response.json();\n    },\n    enabled: !!ministryId,\n    staleTime: 0,\n    gcTime: 0\n  });\n\n  // Check if user is authenticated\n  const { data: currentUser } = useQuery({\n    queryKey: [\"/api/user\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/user\");\n      if (!response.ok) return null;\n      return response.json();\n    },\n  });\n\n  // Check if user is following this ministry\n  const { data: isFollowing = false } = useQuery({\n    queryKey: [\"/api/ministries\", ministryId, \"following\"],\n    queryFn: async () => {\n      if (!currentUser || !ministryId) return false;\n      const response = await fetch(`/api/ministries/${ministryId}/following`);\n      if (!response.ok) return false;\n      const data = await response.json();\n      return data.isFollowing;\n    },\n    enabled: !!currentUser && !!ministryId,\n  });\n\n  // Follow/unfollow mutations\n  const followMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch(`/api/ministries/${ministryId}/follow`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n      });\n      if (!response.ok) throw new Error('Failed to follow ministry');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/ministries\", ministryId, \"following\"] });\n      toast({\n        title: \"Success\",\n        description: \"You are now following this ministry!\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to follow ministry. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const unfollowMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch(`/api/ministries/${ministryId}/follow`, {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n      });\n      if (!response.ok) throw new Error('Failed to unfollow ministry');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/ministries\", ministryId, \"following\"] });\n      toast({\n        title: \"Success\",\n        description: \"You have unfollowed this ministry.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to unfollow ministry. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFollowToggle = () => {\n    if (isFollowing) {\n      unfollowMutation.mutate();\n    } else {\n      followMutation.mutate();\n    }\n  };\n\n  // Don't show follow button if user owns this ministry\n  const isOwnMinistry = currentUser && ministry && ministry.userId === currentUser.id;\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-black text-white\">\n        <div className=\"max-w-4xl mx-auto px-4 py-8\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-700 rounded w-1/4 mb-8\"></div>\n            <div className=\"bg-gray-900 rounded-lg p-8\">\n              <div className=\"flex items-center space-x-6 mb-6\">\n                <div className=\"h-24 w-24 bg-gray-700 rounded-full\"></div>\n                <div className=\"flex-1\">\n                  <div className=\"h-8 bg-gray-700 rounded w-1/2 mb-2\"></div>\n                  <div className=\"h-4 bg-gray-700 rounded w-1/3 mb-4\"></div>\n                  <div className=\"flex gap-2\">\n                    <div className=\"h-6 bg-gray-700 rounded w-16\"></div>\n                    <div className=\"h-6 bg-gray-700 rounded w-16\"></div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"space-y-4\">\n                <div className=\"h-4 bg-gray-700 rounded\"></div>\n                <div className=\"h-4 bg-gray-700 rounded w-5/6\"></div>\n                <div className=\"h-4 bg-gray-700 rounded w-4/6\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!ministry) {\n    return (\n      <div className=\"min-h-screen bg-black text-white\">\n        <div className=\"max-w-4xl mx-auto px-4 py-8\">\n          <Link href=\"/ministries\">\n            <Button variant=\"ghost\" className=\"mb-6 text-gray-300 hover:text-white\">\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Ministries\n            </Button>\n          </Link>\n          <Card className=\"bg-gray-900 border-gray-700\">\n            <CardContent className=\"p-8 text-center\">\n              <Building className=\"h-16 w-16 text-gray-600 mx-auto mb-4\" />\n              <h3 className=\"text-xl font-semibold text-gray-400 mb-2\">Ministry Not Found</h3>\n              <p className=\"text-gray-500\">The ministry you're looking for doesn't exist or has been removed.</p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>{ministry.name} - Ministry Profile | Christ Collective</title>\n        <meta name=\"description\" content={`Learn more about ${ministry.name}, a ${ministry.denomination} ministry serving the community.`} />\n      </Helmet>\n      \n      <div className=\"min-h-screen bg-black text-white\">\n        <div className=\"max-w-4xl mx-auto px-4 py-8\">\n          {/* Back Button */}\n          <Link href=\"/ministries\">\n            <Button variant=\"ghost\" className=\"mb-6 text-gray-300 hover:text-white\">\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Ministries\n            </Button>\n          </Link>\n\n          {/* Ministry Header */}\n          <Card className=\"bg-gray-900 border-gray-700 mb-6\">\n            <CardContent className=\"p-8\">\n              <div className=\"flex flex-col md:flex-row items-start md:items-center space-y-6 md:space-y-0 md:space-x-6\">\n                <Avatar className=\"h-24 w-24 mx-auto md:mx-0\">\n                  <AvatarImage src={ministry.logo} alt={ministry.name} />\n                  <AvatarFallback className=\"bg-primary text-black text-3xl font-bold\">\n                    {ministry.name?.charAt(0) || 'M'}\n                  </AvatarFallback>\n                </Avatar>\n                \n                <div className=\"flex-1 text-center md:text-left\">\n                  <h1 className=\"text-3xl font-bold text-white mb-2\">{ministry.name}</h1>\n                  <div className=\"flex flex-wrap gap-2 justify-center md:justify-start mb-4\">\n                    {ministry.denomination && (\n                      <Badge variant=\"outline\" className=\"bg-blue-900/30 border-blue-600 text-blue-300\">\n                        {ministry.denomination}\n                      </Badge>\n                    )}\n                    {ministry.isVerified && (\n                      <Badge className=\"bg-green-900/30 border-green-600 text-green-300\">\n                        ✓ Verified Ministry\n                      </Badge>\n                    )}\n                  </div>\n                  \n                  <div className=\"flex flex-wrap gap-3 justify-center md:justify-start\">\n                    {currentUser && !isOwnMinistry && (\n                      <Button \n                        onClick={handleFollowToggle}\n                        disabled={followMutation.isPending || unfollowMutation.isPending}\n                        className={isFollowing ? \"bg-gray-600 hover:bg-gray-700\" : \"bg-primary hover:bg-primary/90\"}\n                      >\n                        {followMutation.isPending || unfollowMutation.isPending ? (\n                          <div className=\"animate-spin rounded-full border-b-2 border-white h-4 w-4 mr-2\"></div>\n                        ) : isFollowing ? (\n                          <UserMinus className=\"h-4 w-4 mr-2\" />\n                        ) : (\n                          <UserPlus className=\"h-4 w-4 mr-2\" />\n                        )}\n                        {isFollowing ? \"Unfollow\" : \"Follow Ministry\"}\n                      </Button>\n                    )}\n                    <Button variant=\"outline\" className=\"border-gray-600 hover:bg-gray-800\">\n                      <Heart className=\"h-4 w-4 mr-2\" />\n                      Support\n                    </Button>\n                    <Button variant=\"outline\" className=\"border-gray-600 hover:bg-gray-800\">\n                      <Share2 className=\"h-4 w-4 mr-2\" />\n                      Share\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Ministry Details */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            {/* Main Content */}\n            <div className=\"lg:col-span-2 space-y-6\">\n              {/* About Section */}\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white\">About {ministry.name}</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-gray-300 leading-relaxed\">{ministry.description}</p>\n                </CardContent>\n              </Card>\n\n              {/* Recent Posts Section */}\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white\">Recent Updates</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-center py-8\">\n                    <Calendar className=\"h-12 w-12 text-gray-600 mx-auto mb-3\" />\n                    <p className=\"text-gray-400\">No recent posts yet</p>\n                    <p className=\"text-gray-500 text-sm\">Check back later for updates from this ministry</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Upcoming Events Section */}\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white\">Upcoming Events</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {isLoadingEvents ? (\n                    <div className=\"text-center py-8\">\n                      <div className=\"animate-spin rounded-full border-b-2 border-primary h-8 w-8 mx-auto mb-4\"></div>\n                      <p className=\"text-gray-400\">Loading events...</p>\n                    </div>\n                  ) : events.length === 0 ? (\n                    <div className=\"text-center py-8\">\n                      <Calendar className=\"h-12 w-12 text-gray-600 mx-auto mb-3\" />\n                      <p className=\"text-gray-400\">No upcoming events</p>\n                      <p className=\"text-gray-500 text-sm\">Stay tuned for announcements</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {events.map((event: MinistryEvent) => (\n                        <div \n                          key={event.id} \n                          className=\"border border-gray-700 rounded-lg p-4 hover:border-gray-600 transition-colors cursor-pointer\"\n                          onClick={() => {\n                            // Navigate to the ministry post page for this event\n                            // Events automatically create ministry posts, so we need to find the corresponding post\n                            window.location.href = `/ministry-post/${event.id}`;\n                          }}\n                        >\n                          <div className=\"flex gap-4\">\n                            {/* Event Flyer */}\n                            {event.flyerImage && (\n                              <div className=\"flex-shrink-0\">\n                                <img\n                                  src={event.flyerImage}\n                                  alt={`${event.title} flyer`}\n                                  className=\"w-16 h-16 object-cover rounded-lg border border-gray-600\"\n                                />\n                              </div>\n                            )}\n                            \n                            <div className=\"flex-1 min-w-0\">\n                              <h4 className=\"text-white font-semibold text-lg mb-2\">{event.title}</h4>\n                              <p className=\"text-gray-300 text-sm mb-3 line-clamp-2\">{event.description}</p>\n                              \n                              <div className=\"flex flex-wrap gap-4 text-sm text-gray-400\">\n                                <div className=\"flex items-center\">\n                                  <Calendar className=\"h-4 w-4 mr-1\" />\n                                  {new Date(event.startDate).toLocaleDateString()}\n                                </div>\n                                <div className=\"flex items-center\">\n                                  <Clock className=\"h-4 w-4 mr-1\" />\n                                  6:00 PM - 10:00 PM\n                                </div>\n                                {event.location && (\n                                  <div className=\"flex items-center\">\n                                    <MapPin className=\"h-4 w-4 mr-1\" />\n                                    {event.location}\n                                  </div>\n                                )}\n                                {event.isOnline && (\n                                  <div className=\"flex items-center\">\n                                    <Globe className=\"h-4 w-4 mr-1\" />\n                                    Online Event\n                                  </div>\n                                )}\n                              </div>\n                              \n                              <div className=\"flex items-center justify-between mt-3\">\n                                <Badge variant=\"outline\" className=\"border-gray-600 text-gray-300\">\n                                  {event.type.replace('_', ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase())}\n                                </Badge>\n                                {event.maxAttendees && (\n                                  <span className=\"text-xs text-gray-500\">\n                                    {event.currentAttendees || 0}/{event.maxAttendees} attending\n                                  </span>\n                                )}\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Sidebar */}\n            <div className=\"space-y-6\">\n              {/* Contact Information */}\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white\">Contact Information</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {ministry.location && (\n                    <div className=\"flex items-start\">\n                      <MapPin className=\"h-5 w-5 text-primary mr-3 mt-0.5\" />\n                      <div>\n                        <p className=\"text-gray-300 font-medium\">Location</p>\n                        <p className=\"text-gray-400 text-sm\">{ministry.location}</p>\n                        {ministry.address && (\n                          <p className=\"text-gray-500 text-xs mt-1\">{ministry.address}</p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {ministry.email && (\n                    <div className=\"flex items-start\">\n                      <Mail className=\"h-5 w-5 text-primary mr-3 mt-0.5\" />\n                      <div>\n                        <p className=\"text-gray-300 font-medium\">Email</p>\n                        <a \n                          href={`mailto:${ministry.email}`} \n                          className=\"text-primary hover:underline text-sm\"\n                        >\n                          {ministry.email}\n                        </a>\n                      </div>\n                    </div>\n                  )}\n\n                  {ministry.phone && (\n                    <div className=\"flex items-start\">\n                      <Phone className=\"h-5 w-5 text-primary mr-3 mt-0.5\" />\n                      <div>\n                        <p className=\"text-gray-300 font-medium\">Phone</p>\n                        <a \n                          href={`tel:${ministry.phone}`} \n                          className=\"text-primary hover:underline text-sm\"\n                        >\n                          {ministry.phone}\n                        </a>\n                      </div>\n                    </div>\n                  )}\n\n                  {ministry.website && (\n                    <div className=\"flex items-start\">\n                      <ExternalLink className=\"h-5 w-5 text-primary mr-3 mt-0.5\" />\n                      <div>\n                        <p className=\"text-gray-300 font-medium\">Website</p>\n                        <a \n                          href={ministry.website} \n                          target=\"_blank\" \n                          rel=\"noopener noreferrer\"\n                          className=\"text-primary hover:underline text-sm break-all\"\n                        >\n                          Visit Website\n                        </a>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Ministry Stats */}\n              <Card className=\"bg-gray-900 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white\">Ministry Stats</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-400\">Followers</span>\n                    <span className=\"text-white font-semibold\">{ministry.followersCount || 0}</span>\n                  </div>\n                  <Separator className=\"bg-gray-700\" />\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-400\">Events Hosted</span>\n                    <span className=\"text-white font-semibold\">{events.length}</span>\n                  </div>\n                  <Separator className=\"bg-gray-700\" />\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-400\">Posts</span>\n                    <span className=\"text-white font-semibold\">0</span>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":20486},"client/src/pages/NotificationsPage.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { NotificationsList } from \"@/components/NotificationsList\";\nimport { Bell, TestTube } from \"lucide-react\";\nimport { Helmet } from \"react-helmet\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function NotificationsPage() {\n  const { user } = useAuth();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: unreadCount = { count: 0 } } = useQuery<{ count: number }>({\n    queryKey: [\"/api/notifications/unread-count\"],\n    enabled: !!user,\n  });\n\n  // Test mutation to create sample notifications\n  const createTestNotification = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"/api/notifications/test\", {\n        method: \"POST\",\n        body: { \n          message: `Test notification created at ${new Date().toLocaleTimeString()}`,\n          type: \"info\"\n        }\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications/unread-count\"] });\n      toast({\n        title: \"Test notification created!\",\n        description: \"Check the bell icon for the animation\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Failed to create test notification\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center px-4\">\n        <Helmet>\n          <title>Notifications - Christ Collective</title>\n          <meta name=\"description\" content=\"View your notifications from the Christ Collective community\" />\n        </Helmet>\n        <Card className=\"w-full max-w-md bg-black border-gray-600\">\n          <CardContent className=\"p-6 text-center\">\n            <h2 className=\"text-xl font-semibold mb-4 text-white\">Authentication Required</h2>\n            <p className=\"text-gray-400 mb-6\">Please log in to view your notifications.</p>\n            <Button onClick={() => navigate(\"/auth\")} className=\"w-full bg-[#D4AF37] hover:bg-[#B8941F] text-black\">\n              Log In\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white pb-20\">\n      <Helmet>\n        <title>Notifications - Christ Collective</title>\n        <meta name=\"description\" content=\"Stay updated with notifications from the Christ Collective community\" />\n      </Helmet>\n\n      <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-3\">\n            <Bell className=\"h-6 w-6 text-[#D4AF37]\" />\n            <h1 className=\"text-2xl font-bold text-white\">Notifications</h1>\n            {unreadCount.count > 0 && (\n              <span className=\"bg-red-500 text-white text-xs px-2 py-1 rounded-full\">\n                {unreadCount.count}\n              </span>\n            )}\n          </div>\n          \n          {/* Test Button for Animation */}\n          <Button\n            onClick={() => createTestNotification.mutate()}\n            disabled={createTestNotification.isPending}\n            variant=\"outline\" \n            size=\"sm\"\n            className=\"border-[#D4AF37] text-[#D4AF37] hover:bg-[#D4AF37] hover:text-black\"\n          >\n            <TestTube className=\"h-4 w-4 mr-2\" />\n            {createTestNotification.isPending ? \"Creating...\" : \"Test Animation\"}\n          </Button>\n        </div>\n        \n        <NotificationsList />\n      </div>\n    </div>\n  );\n}","size_bytes":3921},"client/src/pages/PostPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useParams, Link, useLocation } from \"wouter\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowLeft } from \"lucide-react\";\nimport { PlatformPostCard } from \"@/components/PlatformPostCard\";\nimport { MinistryPostCard } from \"@/components/MinistryPostCard\";\n\nexport default function PostPage() {\n  const { id } = useParams();\n  const [location] = useLocation();\n  const postId = parseInt(id || '0');\n  \n  // Determine if this is a ministry post based on the URL\n  const isMinistryPost = location.startsWith('/ministry-post/');\n  \n  const { data: post, isLoading, error } = useQuery({\n    queryKey: isMinistryPost ? [`/api/ministry-posts/${postId}`] : [`/api/platform-posts/${postId}`],\n    enabled: !!postId && !isNaN(postId),\n  });\n\n  const { data: currentUser } = useQuery({\n    queryKey: [\"/api/user\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-black text-white\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-4 bg-gray-700 rounded w-1/4 mb-6\"></div>\n            <Card className=\"bg-black border-gray-800\">\n              <CardContent className=\"p-6\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-10 h-10 bg-gray-700 rounded-full\"></div>\n                    <div className=\"space-y-2\">\n                      <div className=\"h-4 bg-gray-700 rounded w-32\"></div>\n                      <div className=\"h-3 bg-gray-700 rounded w-24\"></div>\n                    </div>\n                  </div>\n                  <div className=\"h-4 bg-gray-700 rounded w-3/4\"></div>\n                  <div className=\"h-32 bg-gray-700 rounded\"></div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !post) {\n    return (\n      <div className=\"min-h-screen bg-black text-white\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <Link href=\"/feed\">\n            <Button variant=\"ghost\" className=\"text-[#D4AF37] hover:text-white hover:bg-gray-800 mb-6\">\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Back to Feed\n            </Button>\n          </Link>\n          \n          <Card className=\"bg-black border-gray-800\">\n            <CardContent className=\"p-6 text-center\">\n              <h2 className=\"text-xl font-semibold text-white mb-2\">Post Not Found</h2>\n              <p className=\"text-gray-400\">The post you're looking for doesn't exist or has been removed.</p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <Link href=\"/feed\">\n          <Button variant=\"ghost\" className=\"text-[#D4AF37] hover:text-white hover:bg-gray-800 mb-6\">\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back to Feed\n          </Button>\n        </Link>\n        \n        <div className=\"max-w-2xl mx-auto\">\n          {isMinistryPost ? (\n            <MinistryPostCard \n              post={post} \n              disableClick={true}\n              flatLayout={true}\n            />\n          ) : (\n            <PlatformPostCard \n              post={post} \n              currentUserId={currentUser?.id}\n              showActions={true}\n              expandComments={true}\n              disablePostClick={true}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":3684},"client/src/pages/PrivacySettingsPage.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { ArrowLeft, Shield, Eye, EyeOff, Mail, Phone, MapPin } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { Helmet } from \"react-helmet\";\n\nexport default function PrivacySettingsPage() {\n  const { user, isLoading } = useAuth();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Local state for privacy settings\n  const [showEmail, setShowEmail] = useState(false);\n  const [showPhone, setShowPhone] = useState(false);\n  const [showLocation, setShowLocation] = useState(false);\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!isLoading && !user) {\n      navigate(\"/auth\");\n    }\n  }, [isLoading, user, navigate]);\n\n  // Initialize settings from user data\n  useEffect(() => {\n    if (user) {\n      setShowEmail(user.showEmail || false);\n      setShowPhone(user.showPhone || false);\n      setShowLocation(user.showLocation || false);\n    }\n  }, [user]);\n\n  // Mutation to update privacy settings\n  const updatePrivacyMutation = useMutation({\n    mutationFn: async (settings: { showEmail: boolean; showPhone: boolean; showLocation: boolean }) => {\n      const response = await apiRequest(\"PUT\", \"/api/user/privacy-settings\", settings);\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || \"Failed to update privacy settings\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/user\"] });\n      toast({\n        title: \"Privacy Settings Updated\",\n        description: \"Your privacy preferences have been saved successfully.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSaveSettings = () => {\n    updatePrivacyMutation.mutate({\n      showEmail,\n      showPhone,\n      showLocation,\n    });\n  };\n\n  if (isLoading || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-[#D4AF37] border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Privacy Settings - Christ Collective</title>\n        <meta name=\"description\" content=\"Manage your privacy settings and control what information is visible on your profile.\" />\n      </Helmet>\n      <div className=\"min-h-screen bg-background pb-20\">\n        {/* Header */}\n        <div className=\"bg-black border-b border-border p-4 sticky top-0 z-10\">\n          <div className=\"flex items-center space-x-3\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              onClick={() => navigate(\"/profile\")}\n              className=\"text-white hover:bg-gray-800\"\n            >\n              <ArrowLeft className=\"h-4 w-4\" />\n            </Button>\n            <div className=\"flex items-center space-x-2\">\n              <Shield className=\"h-5 w-5 text-[#D4AF37]\" />\n              <h1 className=\"text-xl font-bold text-white\">Privacy Settings</h1>\n            </div>\n          </div>\n          <p className=\"text-gray-300 text-sm mt-1 ml-11\">Control what others can see on your profile</p>\n        </div>\n\n        {/* Content */}\n        <div className=\"container mx-auto px-4 py-6 max-w-2xl\">\n          {/* Profile Visibility Card */}\n          <Card className=\"mb-6 bg-black border-gray-600\">\n            <CardHeader>\n              <CardTitle className=\"text-white flex items-center space-x-2\">\n                <Eye className=\"h-5 w-5 text-[#D4AF37]\" />\n                <span>Profile Visibility</span>\n              </CardTitle>\n              <CardDescription className=\"text-gray-400\">\n                Choose what contact information to display on your public profile\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              {/* Email Setting */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <Mail className=\"h-5 w-5 text-gray-400\" />\n                  <div>\n                    <Label htmlFor=\"show-email\" className=\"text-white font-medium\">\n                      Email Address\n                    </Label>\n                    <p className=\"text-sm text-gray-400\">\n                      {user.email || \"No email address set\"}\n                    </p>\n                  </div>\n                </div>\n                <Switch\n                  id=\"show-email\"\n                  checked={showEmail}\n                  onCheckedChange={setShowEmail}\n                  disabled={!user.email}\n                />\n              </div>\n\n              <Separator className=\"bg-gray-700\" />\n\n              {/* Phone Setting */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <Phone className=\"h-5 w-5 text-gray-400\" />\n                  <div>\n                    <Label htmlFor=\"show-phone\" className=\"text-white font-medium\">\n                      Phone Number\n                    </Label>\n                    <p className=\"text-sm text-gray-400\">\n                      {user.phone || \"No phone number set\"}\n                    </p>\n                  </div>\n                </div>\n                <Switch\n                  id=\"show-phone\"\n                  checked={showPhone}\n                  onCheckedChange={setShowPhone}\n                  disabled={!user.phone}\n                />\n              </div>\n\n              <Separator className=\"bg-gray-700\" />\n\n              {/* Location Setting */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <MapPin className=\"h-5 w-5 text-gray-400\" />\n                  <div>\n                    <Label htmlFor=\"show-location\" className=\"text-white font-medium\">\n                      Location\n                    </Label>\n                    <p className=\"text-sm text-gray-400\">\n                      {user.location || \"No location set\"}\n                    </p>\n                  </div>\n                </div>\n                <Switch\n                  id=\"show-location\"\n                  checked={showLocation}\n                  onCheckedChange={setShowLocation}\n                  disabled={!user.location}\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Privacy Info Card */}\n          <Card className=\"mb-6 bg-black border-gray-600\">\n            <CardHeader>\n              <CardTitle className=\"text-white flex items-center space-x-2\">\n                <EyeOff className=\"h-5 w-5 text-[#D4AF37]\" />\n                <span>Privacy Information</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3 text-sm text-gray-300\">\n                <p>• When visibility is turned off, your contact information will be hidden from other users</p>\n                <p>• You can always change these settings later</p>\n                <p>• Your profile name and photo are always visible to other community members</p>\n                <p>• Admins may have access to contact information for platform security purposes</p>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Save Button */}\n          <Button\n            onClick={handleSaveSettings}\n            disabled={updatePrivacyMutation.isPending}\n            className=\"w-full bg-[#D4AF37] text-black hover:bg-[#B8941F] font-medium\"\n          >\n            {updatePrivacyMutation.isPending ? \"Saving...\" : \"Save Privacy Settings\"}\n          </Button>\n\n          {/* Navigation hint */}\n          <div className=\"text-center mt-6\">\n            <p className=\"text-gray-400 text-sm\">\n              To update your contact information, go to{\" \"}\n              <Button \n                variant=\"link\" \n                className=\"p-0 h-auto text-[#D4AF37] hover:text-[#B8941F]\"\n                onClick={() => navigate(\"/profile\")}\n              >\n                Edit Profile\n              </Button>\n            </p>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":8930},"client/src/pages/ProfilePage.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Settings, Edit, ArrowLeft, MessageCircle, User, ExternalLink, Play, Heart, Eye } from \"lucide-react\";\nimport { useLocation, useParams } from \"wouter\";\nimport { useEffect } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport instagramLogo from \"@/assets/instagram-icon-new.png\";\nimport tiktokLogo from \"@assets/9e020c743d8609911095831c2a867c84-32bits-32_1753981722521.png\";\nimport youtubeIconPath from \"@assets/6ed49f7596c2f434dba2edeb8fb15b54-32bits-32_1753981720269.png\";\n\nexport default function ProfilePage() {\n  const { user, isLoading, logoutMutation } = useAuth();\n  const [, navigate] = useLocation();\n  const params = useParams();\n  const username = params.username;\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  \n  // If no username in URL, viewing current user's profile\n  const isOwnProfile = !username;\n  const profileUser = isOwnProfile ? user : null;\n\n  // Redirect to login if not authenticated and trying to view own profile\n  useEffect(() => {\n    if (!isLoading && !user && isOwnProfile) {\n      navigate(\"/auth\");\n    }\n  }, [isLoading, user, navigate, isOwnProfile]);\n\n  // Fetch profile user data by username if viewing someone else's profile\n  const { data: fetchedUser, isLoading: userLoading, error: userError } = useQuery({\n    queryKey: [\"/api/users/by-username\", username],\n    queryFn: async () => {\n      if (!username || username === 'null' || username === null) {\n        throw new Error('Invalid username');\n      }\n      const response = await fetch(`/api/users/by-username?username=${encodeURIComponent(username)}`);\n      if (!response.ok) {\n        throw new Error('User not found');\n      }\n      return response.json();\n    },\n    enabled: !!username && username !== 'null',\n    retry: false, // Don't retry on 404s\n  });\n\n  // Determine which user data to use\n  const displayUser = isOwnProfile ? user : fetchedUser;\n\n  const { data: creatorProfile = {}, isLoading: creatorLoading } = useQuery({\n    queryKey: isOwnProfile ? [\"/api/user/creator-status\"] : [\"/api/users/creator-status\", displayUser?.id],\n    enabled: !!displayUser,\n  });\n\n  // Get user's following count and follower stats\n  const { data: followingData = [] } = useQuery({\n    queryKey: [`/api/users/${displayUser?.id}/following`],\n    enabled: !!displayUser?.id,\n  });\n\n  // Get user's stats (follower and following counts)\n  const { data: userStats = {} } = useQuery({\n    queryKey: [`/api/users/${displayUser?.id}/stats`],\n    enabled: !!displayUser?.id,\n  });\n\n  // Check if current user is following this profile user\n  const { data: isFollowingData } = useQuery({\n    queryKey: [`/api/users/${displayUser?.id}/is-following`],\n    queryFn: async () => {\n      if (!user || !displayUser?.id || isOwnProfile) return { isFollowing: false };\n      const response = await fetch(`/api/users/${displayUser.id}/is-following`);\n      if (!response.ok) return { isFollowing: false };\n      return response.json();\n    },\n    enabled: !!user && !!displayUser?.id && !isOwnProfile,\n  });\n\n  const isFollowing = isFollowingData?.isFollowing || false;\n\n  // Follow mutation\n  const followMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(`/api/users/${displayUser?.id}/follow`, {\n        method: 'POST',\n      });\n      if (!response.ok) throw new Error('Failed to follow user');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${displayUser?.id}/is-following`] });\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${displayUser?.id}/stats`] });\n      toast({\n        title: \"Success\",\n        description: `You are now following ${displayUser?.firstName || displayUser?.username}!`,\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to follow user. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Unfollow mutation\n  const unfollowMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(`/api/users/${displayUser?.id}/follow`, {\n        method: 'DELETE',\n      });\n      if (!response.ok) throw new Error('Failed to unfollow user');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${displayUser?.id}/is-following`] });\n      queryClient.invalidateQueries({ queryKey: [`/api/users/${displayUser?.id}/stats`] });\n      toast({\n        title: \"Success\",\n        description: `You have unfollowed ${displayUser?.firstName || displayUser?.username}.`,\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to unfollow user. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFollowToggle = () => {\n    if (isFollowing) {\n      unfollowMutation.mutate();\n    } else {\n      followMutation.mutate();\n    }\n  };\n\n  const getPlatformIcon = (platform: string) => {\n    switch (platform.toLowerCase()) {\n      case 'youtube': return <img src={youtubeIconPath} alt=\"YouTube\" className=\"w-6 h-6\" />;\n      case 'instagram': return <img src={instagramLogo} alt=\"Instagram\" className=\"w-6 h-6\" />;\n      case 'tiktok': return <img src={tiktokLogo} alt=\"TikTok\" className=\"w-6 h-6\" />;\n      case 'twitter': return <span className=\"text-2xl\">🐦</span>;\n      case 'facebook': return <span className=\"text-2xl\">👥</span>;\n      case 'linkedin': return <span className=\"text-2xl\">💼</span>;\n      case 'twitch': return <span className=\"text-2xl\">🎮</span>;\n      default: return <span className=\"text-2xl\">🌐</span>;\n    }\n  };\n\n  const formatSubscriberCount = (count?: number) => {\n    if (!count) return 'N/A';\n    if (count >= 1000000) return `${(count / 1000000).toFixed(1)}M`;\n    if (count >= 1000) return `${(count / 1000).toFixed(1)}K`;\n    return count.toString();\n  };\n\n  const formatDate = (date: string | Date) => {\n    return new Date(date).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  if (isLoading || (isOwnProfile && !user) || (username && userLoading)) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-[#D4AF37] border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  // If viewing someone else's profile and user not found or invalid username\n  if (username && (userError || !fetchedUser || username === 'null')) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-black\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-white mb-4\">User Not Found</h1>\n          <p className=\"text-gray-400 mb-6\">The profile you're looking for doesn't exist.</p>\n          <Button onClick={() => navigate(\"/\")} className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F]\">\n            Go Home\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  const creator = (creatorProfile as any)?.creatorProfile;\n\n  return (\n    <>\n      <Helmet>\n        <title>Profile - Christ Collective</title>\n        <meta name=\"description\" content=\"Your profile on Christ Collective - connect with the Christian community.\" />\n      </Helmet>\n      <div className=\"min-h-screen bg-black text-white pb-20\">\n        {/* Modern Header with Navigation */}\n        <div className=\"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800\">\n          <div className=\"max-w-4xl mx-auto px-4 py-3\">\n            <div className=\"flex items-center justify-between\">\n              <Button \n                variant=\"ghost\" \n                onClick={() => navigate(\"/feed\")}\n                className=\"text-white hover:bg-white/10 p-2\"\n              >\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Button>\n              <h1 className=\"text-lg font-semibold text-center flex-1\">\n                {displayUser?.firstName && displayUser?.lastName \n                  ? `${displayUser.firstName} ${displayUser.lastName}`\n                  : displayUser?.username}\n              </h1>\n              {isOwnProfile ? (\n                <Button \n                  variant=\"ghost\" \n                  onClick={() => navigate(\"/edit-profile\")}\n                  className=\"text-white hover:bg-white/10 p-2\"\n                >\n                  <Edit className=\"w-5 h-5\" />\n                </Button>\n              ) : (\n                <div className=\"w-9 h-9\"></div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Profile Header */}\n        <div className=\"max-w-4xl mx-auto px-4 py-6\">\n          <div className=\"flex items-start gap-6 mb-4\">\n            <Avatar className=\"w-32 h-32 ring-2 ring-gray-700\">\n              <AvatarImage src={displayUser?.profileImageUrl || creator?.profileImage || ''} alt={displayUser?.firstName || displayUser?.username} />\n              <AvatarFallback className=\"bg-gray-800 text-white text-3xl font-bold\">\n                {displayUser?.firstName?.[0] || displayUser?.username?.[0]}\n              </AvatarFallback>\n            </Avatar>\n            \n            <div className=\"flex-1\">\n              <div className=\"flex flex-col gap-1 mb-2\">\n                <h2 className=\"text-xl font-semibold text-left\">\n                  {displayUser?.firstName && displayUser?.lastName \n                    ? `${displayUser.firstName} ${displayUser.lastName}`\n                    : displayUser?.username}\n                </h2>\n                <p className=\"text-gray-400 text-sm\">@{displayUser?.username}</p>\n                {(creatorProfile as any)?.isCreator && (\n                  <Badge className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F] text-xs px-3 py-1 w-fit rounded-full font-medium\">\n                    ✨ Sponsored Creator\n                  </Badge>\n                )}\n              </div>\n              \n              {/* Stats Row - Show for all users */}\n              <div className=\"flex gap-6 mb-3\">\n                <div className=\"text-left\">\n                  <div className=\"text-lg font-semibold\">\n                    {creator?.posts?.length || creator?.totalPosts || 0}\n                  </div>\n                  <div className=\"text-xs text-gray-400\">posts</div>\n                </div>\n                <div className=\"text-left\">\n                  <div className=\"text-lg font-semibold\">\n                    {(userStats as any)?.followersCount || creator?.totalFollowers || 0}\n                  </div>\n                  <div className=\"text-xs text-gray-400\">followers</div>\n                </div>\n                <div className=\"text-left\">\n                  <div className=\"text-lg font-semibold\">\n                    {(userStats as any)?.followingCount || (followingData as any)?.length || 0}\n                  </div>\n                  <div className=\"text-xs text-gray-400\">following</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Bio - Left aligned */}\n          {(creator?.bio || displayUser?.bio) && (\n            <div className=\"mb-4\">\n              <p className=\"text-sm leading-relaxed text-left\">\n                {creator?.bio || displayUser?.bio}\n              </p>\n            </div>\n          )}\n          \n          {/* Content Type and Audience - Single line */}\n          {(creatorProfile as any)?.isCreator && (\n            <div className=\"text-sm text-gray-400 mb-6 text-left\">\n              <div>\n                Content: {creator?.content || \"Biblical Education / Podcast\"}\n                {creator?.audience && ` • Audience: ${creator.audience}`}\n                {creator?.sponsorshipStartDate && ` • Sponsored since ${formatDate(creator.sponsorshipStartDate)}`}\n              </div>\n            </div>\n          )}\n\n          {/* Action Buttons - Different for own vs others' profiles */}\n          <div className=\"flex gap-3 mb-6\">\n            {isOwnProfile ? (\n              <>\n                <Button \n                  onClick={() => navigate(\"/edit-profile\")}\n                  className=\"flex-1 bg-[#D4AF37] text-black hover:bg-[#B8941F] font-medium\"\n                >\n                  <Edit className=\"w-4 h-4 mr-2\" />\n                  Edit Profile\n                </Button>\n                <Button \n                  onClick={() => navigate(\"/privacy-settings\")}\n                  variant=\"outline\" \n                  className=\"flex-1 border-gray-600 text-white hover:bg-gray-800\"\n                >\n                  <Settings className=\"w-4 h-4 mr-2\" />\n                  Settings\n                </Button>\n              </>\n            ) : (\n              <>\n                <Button \n                  variant=\"outline\"\n                  className=\"flex-1 border-gray-600 text-white hover:bg-gray-800\"\n                  onClick={() => {\n                    if (!displayUser?.id) {\n                      toast({\n                        title: \"Error\",\n                        description: \"Unable to start chat. Please try again.\",\n                        variant: \"destructive\",\n                      });\n                      return;\n                    }\n                    \n                    // Create or navigate to direct chat\n                    const createDirectChat = async () => {\n                      try {\n                        const response = await fetch('/api/direct-chats', {\n                          method: 'POST',\n                          headers: { 'Content-Type': 'application/json' },\n                          body: JSON.stringify({ recipientId: displayUser.id })\n                        });\n                        \n                        if (response.ok) {\n                          const chat = await response.json();\n                          navigate(`/direct-chat/${chat.id}`);\n                        } else {\n                          const errorData = await response.json();\n                          toast({\n                            title: \"Error\",\n                            description: errorData.message || \"Failed to start chat\",\n                            variant: \"destructive\",\n                          });\n                        }\n                      } catch (error) {\n                        console.error('Error creating direct chat:', error);\n                        toast({\n                          title: \"Error\",\n                          description: \"Failed to start chat. Please try again.\",\n                          variant: \"destructive\",\n                        });\n                      }\n                    };\n                    createDirectChat();\n                  }}\n                >\n                  <MessageCircle className=\"w-4 h-4 mr-2\" />\n                  Message\n                </Button>\n                <Button \n                  onClick={handleFollowToggle}\n                  disabled={followMutation.isPending || unfollowMutation.isPending}\n                  className={`flex-1 font-medium ${\n                    isFollowing \n                      ? 'bg-gray-600 text-white hover:bg-gray-700' \n                      : 'bg-[#D4AF37] text-black hover:bg-[#B8941F]'\n                  }`}\n                >\n                  <User className=\"w-4 h-4 mr-2\" />\n                  {followMutation.isPending || unfollowMutation.isPending \n                    ? '...' \n                    : isFollowing ? 'Unfollow' : 'Follow'\n                  }\n                </Button>\n              </>\n            )}\n          </div>\n\n          {/* Platform Links */}\n          {creator?.platforms && (creator.platforms as any[]).length > 0 && (\n            <div className=\"flex gap-3 overflow-x-auto pb-2 mb-6\">\n              {(creator.platforms as any[]).map((platform, index) => (\n                <button\n                  key={index}\n                  onClick={() => window.open(platform.profileUrl, '_blank')}\n                  className=\"flex flex-col items-center gap-2 min-w-[80px] p-3 bg-gray-900 rounded-xl hover:bg-gray-800 transition-colors\"\n                >\n                  <div className=\"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center\">\n                    {getPlatformIcon(platform.platform)}\n                  </div>\n                  <div className=\"text-xs text-center\">\n                    <div className=\"font-medium capitalize\">{platform.platform}</div>\n                    {platform.subscriberCount && (\n                      <div className=\"text-gray-400 text-[10px]\">\n                        {formatSubscriberCount(platform.subscriberCount)}\n                      </div>\n                    )}\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* Welcome message for new users without creator profile - only show for own profile */}\n          {isOwnProfile && !(creatorProfile as any)?.isCreator && (\n            <div className=\"text-center mb-6 p-6 bg-gray-900 rounded-xl border border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-white mb-2\">Welcome to Christ Collective!</h3>\n              <p className=\"text-gray-400 text-sm mb-4\">\n                Choose your path to connect with the Christian community and share your faith journey.\n              </p>\n              <div className=\"flex flex-col gap-3\">\n                <Button \n                  onClick={() => navigate(\"/edit-profile\")}\n                  className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F] font-medium\"\n                >\n                  Become a Content Creator\n                </Button>\n                <div className=\"flex gap-2\">\n                  <Button \n                    onClick={() => navigate(\"/business\")}\n                    variant=\"outline\"\n                    className=\"flex-1 border-gray-600 text-white hover:bg-gray-800\"\n                  >\n                    Business Networking\n                  </Button>\n                  <Button \n                    onClick={() => navigate(\"/ministry-profile\")}\n                    variant=\"outline\"\n                    className=\"flex-1 border-gray-600 text-white hover:bg-gray-800\"\n                  >\n                    Start a Ministry\n                  </Button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Empty state for creators without platforms - only show for own profile */}\n          {isOwnProfile && (creatorProfile as any)?.isCreator && (!creator?.platforms || (creator.platforms as any[]).length === 0) && (\n            <div className=\"text-center mb-6 p-6 bg-gray-900 rounded-xl border border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-white mb-2\">Connect Your Platforms</h3>\n              <p className=\"text-gray-400 text-sm mb-4\">\n                Link your social media accounts to showcase your content and connect with sponsors.\n              </p>\n              <Button \n                onClick={() => navigate(\"/edit-profile\")}\n                className=\"bg-[#D4AF37] text-black hover:bg-[#B8941F] font-medium\"\n              >\n                Add Platforms\n              </Button>\n            </div>\n          )}\n\n\n\n          {/* Content Grid */}\n          <div className=\"border-t border-gray-800 mt-6 pt-6\">\n            {!creator?.posts || creator.posts.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <div className=\"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <Play className=\"w-8 h-8 text-gray-400\" />\n                </div>\n                <h3 className=\"text-lg font-semibold mb-2\">No posts yet</h3>\n                {isOwnProfile ? (\n                  <>\n                    <p className=\"text-gray-400 text-sm\">\n                      Your content will appear here once you start sharing.\n                    </p>\n                    <Button \n                      onClick={() => navigate(\"/edit-profile\")}\n                      className=\"mt-4 bg-[#D4AF37] text-black hover:bg-[#B8941F]\"\n                    >\n                      <Edit className=\"w-4 h-4 mr-2\" />\n                      Add Content\n                    </Button>\n                  </>\n                ) : (\n                  <p className=\"text-gray-400 text-sm\">\n                    No content has been shared yet.\n                  </p>\n                )}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-3 gap-1\">\n                {creator.posts.map((post: any) => (\n                  <button\n                    key={post.id}\n                    onClick={() => window.open(post.postUrl, '_blank')}\n                    className=\"aspect-square bg-gray-900 rounded-lg overflow-hidden group relative hover:opacity-75 transition-opacity\"\n                  >\n                    {post.thumbnailUrl ? (\n                      <img \n                        src={post.thumbnailUrl} \n                        alt={post.postTitle || 'Post'}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center bg-gray-800\">\n                        <Play className=\"w-8 h-8 text-gray-400\" />\n                      </div>\n                    )}\n                    \n                    {/* Overlay with stats */}\n                    <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                      <div className=\"flex items-center gap-4 text-white text-sm\">\n                        {post.likeCount && (\n                          <div className=\"flex items-center gap-1\">\n                            <Heart className=\"w-4 h-4 fill-white\" />\n                            <span>{post.likeCount.toLocaleString()}</span>\n                          </div>\n                        )}\n                        {post.viewCount && (\n                          <div className=\"flex items-center gap-1\">\n                            <Eye className=\"w-4 h-4\" />\n                            <span>{post.viewCount.toLocaleString()}</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":22947},"client/src/pages/SponsoredCreatorsPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Heart, MessageCircle, Share2, Play, ExternalLink, Youtube, Instagram, Globe, Users, TrendingUp, DollarSign, Star, Eye, ThumbsUp } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLocation } from \"wouter\";\nimport { navigateToSponsorshipOrAuth } from \"@/utils/authCheck\";\nimport { Helmet } from \"react-helmet\";\n\ntype ContentCreator = {\n  id: number;\n  name: string;\n  platform: string;\n  profileUrl: string;\n  content: string;\n  audience?: string;\n  subscriberCount?: number;\n  bio?: string;\n  isSponsored: boolean;\n  sponsorshipStartDate?: Date;\n  sponsorshipEndDate?: Date;\n  sponsorshipAmount?: string;\n  userId: string;\n  user?: {\n    firstName?: string;\n    lastName?: string;\n    profileImageUrl?: string;\n  };\n};\n\nexport default function SponsoredCreatorsPage() {\n  const { user, isLoading: authLoading } = useAuth();\n  const [, navigate] = useLocation();\n  const [filter, setFilter] = useState(\"all\");\n\n  // Fetch sponsored content creators\n  const { data: creators = [], isLoading } = useQuery({\n    queryKey: [\"/api/content-creators\", { sponsored: true }],\n    select: (data) => data as ContentCreator[],\n  });\n\n  // Fetch featured YouTube videos from The Matrix Unlocked\n  const { data: youtubeVideo, isLoading: isYouTubeLoading } = useQuery({\n    queryKey: [\"/api/youtube/video\", \"https://youtu.be/ixGHJQXm5kY?si=w00d7O5BiesO0BBt\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/youtube/video?url=\" + encodeURIComponent(\"https://youtu.be/ixGHJQXm5kY?si=w00d7O5BiesO0BBt\"));\n      if (!response.ok) throw new Error(\"Failed to fetch video data\");\n      return response.json();\n    },\n    enabled: true,\n  });\n\n  // Fetch new featured video - XXXTentacion exposé\n  const { data: featuredVideo, isLoading: isFeaturedLoading } = useQuery({\n    queryKey: [\"/api/youtube/video\", \"https://youtu.be/PldxzQOwhC4?si=ew3-dxzsydPNLFlr\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/youtube/video?url=\" + encodeURIComponent(\"https://youtu.be/PldxzQOwhC4?si=ew3-dxzsydPNLFlr\"));\n      if (!response.ok) throw new Error(\"Failed to fetch featured video data\");\n      return response.json();\n    },\n    enabled: true,\n  });\n\n  // Fetch authentic channel data from The Matrix Unlocked\n  const { data: channelData, isLoading: isChannelLoading } = useQuery({\n    queryKey: [\"/api/youtube/channel\", \"The Matrix Unlocked\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/youtube/channel?handle=\" + encodeURIComponent(\"The Matrix Unlocked\"));\n      if (!response.ok) throw new Error(\"Failed to fetch channel data\");\n      return response.json();\n    },\n    enabled: true,\n  });\n\n  // Fetch authentic TikTok user data from Luis Lucero\n  const { data: tiktokData, isLoading: isTikTokLoading } = useQuery({\n    queryKey: [\"/api/tiktok/user\", \"luislucero369\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/tiktok/user?username=\" + encodeURIComponent(\"luislucero369\"));\n      if (!response.ok) throw new Error(\"Failed to fetch TikTok user data\");\n      return response.json();\n    },\n    enabled: true,\n  });\n\n  // Fetch authentic Instagram user data from Luis Lucero\n  const { data: instagramData, isLoading: isInstagramLoading } = useQuery({\n    queryKey: [\"/api/instagram/user\", \"luislucero.03\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/instagram/user?username=\" + encodeURIComponent(\"luislucero.03\"));\n      if (!response.ok) throw new Error(\"Failed to fetch Instagram user data\");\n      return response.json();\n    },\n    enabled: true,\n  });\n\n  // Fetch TikTok videos from Luis Lucero\n  const { data: tiktokVideos, isLoading: isTikTokVideosLoading } = useQuery({\n    queryKey: [\"/api/tiktok/videos\", \"luislucero369\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/tiktok/videos?username=\" + encodeURIComponent(\"luislucero369\") + \"&limit=2\");\n      if (!response.ok) throw new Error(\"Failed to fetch TikTok videos\");\n      return response.json();\n    },\n    enabled: true,\n  });\n\n  // Sample stats for the hero section\n  const stats = [\n    { icon: Users, label: \"Active Creators\", value: \"12+\" },\n    { icon: TrendingUp, label: \"Monthly Views\", value: \"50K+\" },\n    { icon: DollarSign, label: \"Sponsorship Fund\", value: \"$25K+\" },\n  ];\n\n  // Helper function to format numbers\n  const formatCount = (count: number | string) => {\n    const num = typeof count === 'string' ? parseInt(count) : count;\n    if (num >= 1000000) {\n      return (num / 1000000).toFixed(1) + 'M';\n    }\n    if (num >= 1000) {\n      return (num / 1000).toFixed(1) + 'K';\n    }\n    return num.toString();\n  };\n\n  // Helper function to navigate without nested links\n  const navigateToCreator = (id: number) => {\n    navigate(`/creator/${id}`);\n  };\n\n  const openExternalLink = (url: string) => {\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n\n  const handleApplyForSponsorship = async () => {\n    console.log('Apply for Sponsorship button clicked');\n    \n    try {\n      // Direct fetch without utility to isolate the issue\n      const response = await fetch('/api/user', {\n        method: 'GET',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'Cache-Control': 'no-cache, no-store, must-revalidate',\n        },\n      });\n      \n      console.log('Response status:', response.status);\n      \n      if (response.status === 200) {\n        const userData = await response.json();\n        console.log('User data:', userData);\n        \n        if (userData && userData.id) {\n          console.log('User is authenticated, navigating to application');\n          navigate('/sponsorship-application');\n        } else {\n          console.log('No user data, redirecting to auth');\n          navigate('/auth');\n        }\n      } else {\n        console.log('User not authenticated, redirecting to auth');\n        navigate('/auth');\n      }\n    } catch (error) {\n      console.error('Error checking authentication:', error);\n      navigate('/auth');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Helmet>\n        <title>Sponsored Content Feed | Christ Collective</title>\n        <meta name=\"description\" content=\"Discover sponsored faith-based content from our community of creators sharing their testimonies and Christian messages.\" />\n      </Helmet>\n      \n      {/* Hero Section */}\n      <div className=\"bg-black text-white py-16\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h1 className=\"text-4xl md:text-5xl font-bold mb-6\">\n            Sponsored <span className=\"text-[#D4AF37]\">Content</span> Hub\n          </h1>\n          <p className=\"text-xl text-gray-300 mb-8 max-w-3xl mx-auto\">\n            Discover inspiring faith-based content from our sponsored creators sharing testimonies, teachings, and uplifting messages with the community.\n          </p>\n          \n          {/* Action Buttons */}\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto\">\n            <Button \n              size=\"lg\" \n              className=\"bg-[#D4AF37] hover:bg-[#B8860B] text-black font-semibold px-8 py-3\"\n              onClick={handleApplyForSponsorship}\n            >\n              Apply for Sponsorship\n            </Button>\n            <Button \n              size=\"lg\" \n              variant=\"outline\"\n              className=\"border-[#D4AF37] text-[#D4AF37] hover:bg-[#D4AF37] hover:text-black font-semibold px-8 py-3\"\n              onClick={() => navigate('/about')}\n            >\n              Learn More\n            </Button>\n          </div>\n        </div>\n      </div>\n      \n      {/* Main Content */}\n      <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\n        \n        {/* Featured Creators Section */}\n        <div className=\"mb-16\">\n          <div className=\"text-center mb-8\">\n            <h2 className=\"text-3xl font-bold mb-4 text-black\">Featured Creators</h2>\n            <p className=\"text-gray-600 max-w-2xl mx-auto\">\n              Meet our sponsored content creators sharing faith-based content with the community.\n            </p>\n          </div>\n\n          {/* Creator Profiles Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            \n            {/* Real YouTube Creator from API data */}\n            {isYouTubeLoading ? (\n              <Card className=\"bg-white shadow-sm animate-pulse\">\n                <CardContent className=\"p-6\">\n                  <div className=\"text-center\">\n                    <div className=\"h-16 w-16 bg-gray-200 rounded-full mx-auto mb-4\"></div>\n                    <div className=\"h-4 bg-gray-200 rounded w-32 mx-auto mb-2\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-24 mx-auto mb-3\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-40 mx-auto mb-4\"></div>\n                    <div className=\"h-8 bg-gray-200 rounded w-20 mx-auto\"></div>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : channelData ? (\n              <Card className=\"bg-white shadow-sm hover:shadow-md transition-shadow border-2 border-[#D4AF37]/20\">\n                <CardContent className=\"p-6\">\n                  <div className=\"text-center\">\n                    <Avatar className=\"h-16 w-16 mx-auto mb-4 border-2 border-[#D4AF37]/30\">\n                      <AvatarImage src={channelData.thumbnail} />\n                      <AvatarFallback className=\"bg-red-100 text-red-700\">\n                        {channelData.title?.substring(0, 2) || \"TM\"}\n                      </AvatarFallback>\n                    </Avatar>\n                    <h3 className=\"font-semibold text-lg text-black mb-2\">{channelData.title}</h3>\n                    <p className=\"text-sm text-gray-600 mb-3 flex items-center justify-center gap-1\">\n                      <Youtube className=\"w-4 h-4 text-red-600\" />\n                      YouTube • {channelData.subscriberCount} subscribers\n                    </p>\n                    <p className=\"text-sm text-gray-700 mb-4 line-clamp-2\">\n                      {channelData.description?.substring(0, 100) || \"Spiritual teachings and biblical revelations\"}...\n                    </p>\n                    <div className=\"flex items-center justify-center space-x-4 text-sm text-gray-500 mb-4\">\n                      <div className=\"flex items-center space-x-1\">\n                        <Play className=\"w-4 h-4 text-blue-600\" />\n                        <span>{channelData.videoCount} videos</span>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        <Eye className=\"w-4 h-4 text-green-600\" />\n                        <span>{channelData.viewCount} views</span>\n                      </div>\n                      <Badge className=\"bg-[#D4AF37] text-black text-xs\">Sponsored</Badge>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Button \n                        size=\"sm\" \n                        className=\"bg-red-600 hover:bg-red-700 text-white w-full\"\n                        onClick={() => openExternalLink(\"https://www.youtube.com/@theMatrixunlocked369\")}\n                      >\n                        <Youtube className=\"w-4 h-4 mr-2\" />\n                        Visit Channel\n                      </Button>\n                      <Button \n                        size=\"sm\" \n                        variant=\"outline\"\n                        className=\"border-[#D4AF37] text-[#D4AF37] hover:bg-[#D4AF37] hover:text-black w-full\"\n                        onClick={() => navigateToCreator(1)}\n                      >\n                        View Profile\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card className=\"bg-white shadow-sm hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-6\">\n                  <div className=\"text-center text-gray-500\">\n                    <Youtube className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                    <p>Unable to load creator data</p>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Authentic Instagram Creator */}\n            {isInstagramLoading ? (\n              <Card className=\"bg-white shadow-sm animate-pulse\">\n                <CardContent className=\"p-6\">\n                  <div className=\"text-center\">\n                    <div className=\"h-16 w-16 bg-gray-200 rounded-full mx-auto mb-4\"></div>\n                    <div className=\"h-4 bg-gray-200 rounded w-32 mx-auto mb-2\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-24 mx-auto mb-3\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-40 mx-auto mb-4\"></div>\n                    <div className=\"h-8 bg-gray-200 rounded w-20 mx-auto\"></div>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : instagramData ? (\n              <Card className=\"bg-white shadow-sm hover:shadow-md transition-shadow border-2 border-pink-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"text-center\">\n                    <Avatar className=\"h-16 w-16 mx-auto mb-4 border-2 border-pink-300\">\n                      <AvatarImage \n                        src={instagramData.avatar !== '/placeholder-avatar.jpg' ? `/api/proxy-image?url=${encodeURIComponent(instagramData.avatar)}` : '/placeholder-avatar.jpg'}\n                        onError={(e) => {\n                          console.log('Instagram avatar failed to load, using fallback');\n                          e.currentTarget.style.display = 'none';\n                        }}\n                      />\n                      <AvatarFallback className=\"bg-pink-100 text-pink-700\">\n                        {instagramData.displayName?.substring(0, 2) || \"LL\"}\n                      </AvatarFallback>\n                    </Avatar>\n                    <h3 className=\"font-semibold text-lg text-black mb-2 flex items-center justify-center gap-1\">\n                      {instagramData.displayName}\n                      {instagramData.verified && <Star className=\"w-4 h-4 text-blue-500\" />}\n                    </h3>\n                    <p className=\"text-sm text-gray-600 mb-3 flex items-center justify-center gap-1\">\n                      <Instagram className=\"w-4 h-4 text-pink-600\" />\n                      Instagram • {instagramData.followerCount} followers\n                    </p>\n                    <p className=\"text-sm text-gray-700 mb-4 line-clamp-2\">\n                      {instagramData.description?.substring(0, 80) || \"Christian content creator\"}\n                      {instagramData.description && instagramData.description.length > 80 ? \"...\" : \"\"}\n                    </p>\n                    <div className=\"flex items-center justify-center space-x-4 text-sm text-gray-500 mb-4\">\n                      <div className=\"flex items-center space-x-1\">\n                        <Eye className=\"w-4 h-4\" />\n                        <span>{instagramData.postCount} posts</span>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        <Heart className=\"w-4 h-4 text-red-500\" />\n                        <span>{instagramData.followerCount}</span>\n                      </div>\n                      <Badge className=\"bg-[#D4AF37] text-black text-xs\">Sponsored</Badge>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Button \n                        size=\"sm\" \n                        className=\"bg-pink-600 hover:bg-pink-700 text-white w-full\"\n                        onClick={() => openExternalLink(`https://instagram.com/${instagramData.username}`)}\n                      >\n                        <Instagram className=\"w-4 h-4 mr-2\" />\n                        Visit Instagram\n                      </Button>\n                      <Button \n                        size=\"sm\" \n                        variant=\"outline\"\n                        className=\"border-[#D4AF37] text-[#D4AF37] hover:bg-[#D4AF37] hover:text-black w-full\"\n                        onClick={() => navigateToCreator(2)}\n                      >\n                        View Profile\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card className=\"bg-white shadow-sm hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-6\">\n                  <div className=\"text-center text-gray-500\">\n                    <Instagram className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                    <p>Unable to load creator data</p>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Authentic TikTok Creator */}\n            {isTikTokLoading ? (\n              <Card className=\"bg-white shadow-sm animate-pulse\">\n                <CardContent className=\"p-6\">\n                  <div className=\"text-center\">\n                    <div className=\"h-16 w-16 bg-gray-200 rounded-full mx-auto mb-4\"></div>\n                    <div className=\"h-4 bg-gray-200 rounded w-32 mx-auto mb-2\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-24 mx-auto mb-3\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-40 mx-auto mb-4\"></div>\n                    <div className=\"h-8 bg-gray-200 rounded w-20 mx-auto\"></div>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : tiktokData ? (\n              <Card className=\"bg-white shadow-sm hover:shadow-md transition-shadow border-2 border-purple-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"text-center\">\n                    <Avatar className=\"h-16 w-16 mx-auto mb-4 border-2 border-purple-300\">\n                      <AvatarImage \n                        src={`/api/proxy-image?url=${encodeURIComponent(tiktokData.avatar)}`}\n                        onError={(e) => {\n                          console.log('TikTok avatar failed to load, using fallback');\n                          e.currentTarget.style.display = 'none';\n                        }}\n                      />\n                      <AvatarFallback className=\"bg-purple-100 text-purple-700\">\n                        {tiktokData.displayName?.substring(0, 2) || \"YF\"}\n                      </AvatarFallback>\n                    </Avatar>\n                    <h3 className=\"font-semibold text-lg text-black mb-2 flex items-center justify-center gap-1\">\n                      {tiktokData.displayName}\n                      {tiktokData.verified && <Star className=\"w-4 h-4 text-blue-500\" />}\n                    </h3>\n                    <p className=\"text-sm text-gray-600 mb-3 flex items-center justify-center gap-1\">\n                      <Globe className=\"w-4 h-4 text-black\" />\n                      TikTok • {tiktokData.followerCount} followers\n                    </p>\n                    <p className=\"text-sm text-gray-700 mb-4 line-clamp-2\">\n                      {tiktokData.description?.substring(0, 100) || \"Faith-based content creator\"}...\n                    </p>\n                    <div className=\"flex items-center justify-center space-x-4 text-sm text-gray-500 mb-4\">\n                      <div className=\"flex items-center space-x-1\">\n                        <Play className=\"w-4 h-4 text-purple-600\" />\n                        <span>{tiktokData.videoCount} videos</span>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        <Heart className=\"w-4 h-4 text-red-500\" />\n                        <span>{tiktokData.likeCount}</span>\n                      </div>\n                      <Badge className=\"bg-[#D4AF37] text-black text-xs\">Sponsored</Badge>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Button \n                        size=\"sm\" \n                        className=\"bg-black hover:bg-gray-800 text-white w-full\"\n                        onClick={() => openExternalLink(`https://tiktok.com/@${tiktokData.username}`)}\n                      >\n                        <Globe className=\"w-4 h-4 mr-2\" />\n                        Visit TikTok\n                      </Button>\n                      <Button \n                        size=\"sm\" \n                        variant=\"outline\"\n                        className=\"border-[#D4AF37] text-[#D4AF37] hover:bg-[#D4AF37] hover:text-black w-full\"\n                        onClick={() => navigateToCreator(3)}\n                      >\n                        View Profile\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card className=\"bg-white shadow-sm hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-6\">\n                  <div className=\"text-center\">\n                    <Avatar className=\"h-16 w-16 mx-auto mb-4\">\n                      <AvatarImage src=\"/placeholder-avatar.jpg\" />\n                      <AvatarFallback className=\"bg-purple-100 text-purple-700\">YF</AvatarFallback>\n                    </Avatar>\n                    <h3 className=\"font-semibold text-lg text-black mb-2\">Young Faith</h3>\n                    <p className=\"text-sm text-gray-600 mb-3 flex items-center justify-center gap-1\">\n                      <Globe className=\"w-4 h-4 text-black\" />\n                      TikTok Creator\n                    </p>\n                    <p className=\"text-sm text-gray-700 mb-4 line-clamp-2\">\n                      Quick Bible verses and faith-based content for the younger generation.\n                    </p>\n                    <div className=\"flex items-center justify-center space-x-4 text-sm text-gray-500 mb-4\">\n                      <div className=\"flex items-center space-x-1\">\n                        <Play className=\"w-4 h-4\" />\n                        <span>Featured</span>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        <Star className=\"w-4 h-4 text-yellow-500\" />\n                        <span>Sponsored</span>\n                      </div>\n                    </div>\n                    <Button \n                      size=\"sm\" \n                      className=\"bg-[#D4AF37] hover:bg-[#B8860B] text-black w-full\"\n                      onClick={() => navigateToCreator(3)}\n                    >\n                      View Profile\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n\n        {/* Featured Content Section */}\n        <div className=\"mb-16\">\n          <div className=\"text-center mb-8\">\n            <h2 className=\"text-3xl font-bold mb-4 text-black\">Featured Content</h2>\n            <p className=\"text-gray-600 max-w-2xl mx-auto\">\n              Discover inspiring faith-based content from our community creators.\n            </p>\n          </div>\n\n          {/* Content Feed */}\n          <div className=\"max-w-2xl mx-auto space-y-6\">\n            \n            {/* Real YouTube Video Preview */}\n            {isYouTubeLoading ? (\n              <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden animate-pulse\">\n                <div className=\"flex items-center p-4\">\n                  <div className=\"h-10 w-10 bg-gray-200 rounded-full\"></div>\n                  <div className=\"ml-3 space-y-2\">\n                    <div className=\"h-4 bg-gray-200 rounded w-32\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-24\"></div>\n                  </div>\n                </div>\n                <div className=\"h-48 bg-gray-200\"></div>\n                <div className=\"p-4\">\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                  <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n                </div>\n              </div>\n            ) : youtubeVideo ? (\n              <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\n                <div className=\"flex items-center p-4\">\n                  <Avatar className=\"h-10 w-10\">\n                    <AvatarImage src={youtubeVideo.thumbnail} />\n                    <AvatarFallback className=\"bg-red-100 text-red-700\">YT</AvatarFallback>\n                  </Avatar>\n                  <div className=\"ml-3\">\n                    <p className=\"font-semibold text-black\">{youtubeVideo.channelTitle}</p>\n                    <div className=\"flex items-center space-x-2\">\n                      <Youtube className=\"h-4 w-4 text-red-600\" />\n                      <p className=\"text-sm text-gray-500\">YouTube • {formatCount(youtubeVideo.viewCount)} views</p>\n                    </div>\n                  </div>\n                  <Badge className=\"ml-auto bg-[#D4AF37] text-black\">Sponsored</Badge>\n                </div>\n                \n                <div className=\"px-4 pb-2\">\n                  <h3 className=\"font-semibold text-black mb-2 line-clamp-2\">{youtubeVideo.title}</h3>\n                  <p className=\"text-gray-700 text-sm mb-4 line-clamp-2\">\n                    {youtubeVideo.description?.substring(0, 150)}...\n                  </p>\n                </div>\n                \n                <div \n                  className=\"relative h-48 cursor-pointer group overflow-hidden\"\n                  style={{\n                    backgroundImage: `url(${youtubeVideo.thumbnail})`,\n                    backgroundSize: 'cover',\n                    backgroundPosition: 'center'\n                  }}\n                  onClick={() => openExternalLink(`https://youtu.be/${youtubeVideo.id}`)}\n                >\n                  <div className=\"absolute inset-0 bg-black/40 group-hover:bg-black/30 transition-colors\" />\n                  <div className=\"relative text-center text-white h-full flex items-center justify-center\">\n                    <div className=\"bg-red-600 rounded-full p-4 mb-2 mx-auto w-20 h-20 flex items-center justify-center group-hover:bg-red-500 transition-all duration-300 group-hover:scale-110\">\n                      <Play className=\"w-10 h-10 ml-1\" />\n                    </div>\n                  </div>\n                  <div className=\"absolute bottom-2 right-2 bg-black/80 px-2 py-1 rounded text-white text-xs\">\n                    {youtubeVideo.duration}\n                  </div>\n                  <div className=\"absolute top-2 right-2 opacity-70 group-hover:opacity-100 transition-opacity\">\n                    <ExternalLink className=\"w-4 h-4 text-white\" />\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center justify-between p-4 text-gray-500\">\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"flex items-center space-x-1 hover:text-red-500 transition-colors cursor-pointer\">\n                      <Heart className=\"w-5 h-5\" />\n                      <span>{formatCount(youtubeVideo.likeCount)}</span>\n                    </div>\n                    <div className=\"flex items-center space-x-1 hover:text-blue-500 transition-colors cursor-pointer\">\n                      <MessageCircle className=\"w-5 h-5\" />\n                      <span>{formatCount(youtubeVideo.commentCount)}</span>\n                    </div>\n                    <button className=\"flex items-center space-x-1 hover:text-green-500 transition-colors\">\n                      <Share2 className=\"w-5 h-5\" />\n                    </button>\n                  </div>\n                  <div className=\"text-sm text-gray-400\">\n                    {new Date(youtubeVideo.publishedAt).toLocaleDateString()}\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\n                <div className=\"p-4 text-center text-gray-500\">\n                  <Youtube className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                  <p>Unable to load video data</p>\n                </div>\n              </div>\n            )}\n\n            {/* Featured XXXTentacion Video */}\n            {isFeaturedLoading ? (\n              <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden animate-pulse\">\n                <div className=\"flex items-center p-4\">\n                  <div className=\"h-10 w-10 bg-gray-200 rounded-full\"></div>\n                  <div className=\"ml-3 space-y-2\">\n                    <div className=\"h-4 bg-gray-200 rounded w-32\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-24\"></div>\n                  </div>\n                </div>\n                <div className=\"h-48 bg-gray-200\"></div>\n                <div className=\"p-4\">\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                  <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n                </div>\n              </div>\n            ) : featuredVideo ? (\n              <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\n                <div className=\"flex items-center p-4\">\n                  <Avatar className=\"h-10 w-10\">\n                    <AvatarImage src={featuredVideo.thumbnail} />\n                    <AvatarFallback className=\"bg-red-100 text-red-700\">TM</AvatarFallback>\n                  </Avatar>\n                  <div className=\"ml-3\">\n                    <p className=\"font-semibold text-black\">{featuredVideo.channelTitle}</p>\n                    <div className=\"flex items-center space-x-2\">\n                      <Youtube className=\"h-4 w-4 text-red-600\" />\n                      <p className=\"text-sm text-gray-500\">YouTube • {formatCount(featuredVideo.viewCount)} views</p>\n                    </div>\n                  </div>\n                  <Badge className=\"ml-auto bg-red-600 text-white\">Featured</Badge>\n                </div>\n                \n                <div className=\"px-4 pb-2\">\n                  <h3 className=\"font-semibold text-black mb-2 line-clamp-2\">{featuredVideo.title}</h3>\n                  <p className=\"text-gray-700 text-sm mb-4 line-clamp-3\">\n                    {featuredVideo.description?.substring(0, 200)}...\n                  </p>\n                </div>\n                \n                <div \n                  className=\"relative h-48 cursor-pointer group overflow-hidden\"\n                  style={{\n                    backgroundImage: `url(${featuredVideo.thumbnail})`,\n                    backgroundSize: 'cover',\n                    backgroundPosition: 'center'\n                  }}\n                  onClick={() => openExternalLink(`https://youtu.be/${featuredVideo.id}`)}\n                >\n                  <div className=\"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors\"></div>\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className=\"bg-red-600 rounded-full p-3 group-hover:bg-red-700 transition-colors shadow-lg\">\n                      <Play className=\"w-6 h-6 text-white ml-0.5\" />\n                    </div>\n                  </div>\n                  <div className=\"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded\">\n                    {featuredVideo.duration}\n                  </div>\n                </div>\n                \n                <div className=\"p-4\">\n                  <div className=\"flex items-center justify-between text-gray-500\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"flex items-center space-x-1\">\n                        <ThumbsUp className=\"w-5 h-5\" />\n                        <span>{formatCount(featuredVideo.likeCount)}</span>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        <MessageCircle className=\"w-5 h-5\" />\n                        <span>{formatCount(featuredVideo.commentCount)}</span>\n                      </div>\n                      <button className=\"flex items-center space-x-1 hover:text-red-500 transition-colors\">\n                        <Share2 className=\"w-5 h-5\" />\n                      </button>\n                    </div>\n                    <div className=\"text-sm text-gray-400\">\n                      {new Date(featuredVideo.publishedAt).toLocaleDateString()}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : null}\n\n            {/* TikTok Videos from Luis Lucero */}\n            {isTikTokVideosLoading ? (\n              <div className=\"space-y-6\">\n                {[1, 2].map((i) => (\n                  <div key={i} className=\"bg-white rounded-lg shadow-sm border overflow-hidden animate-pulse\">\n                    <div className=\"flex items-center p-4\">\n                      <div className=\"h-10 w-10 bg-gray-200 rounded-full\"></div>\n                      <div className=\"ml-3 space-y-2\">\n                        <div className=\"h-4 bg-gray-200 rounded w-32\"></div>\n                        <div className=\"h-3 bg-gray-200 rounded w-24\"></div>\n                      </div>\n                    </div>\n                    <div className=\"h-80 bg-gray-200\"></div>\n                    <div className=\"p-4\">\n                      <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                      <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : tiktokVideos?.map((video: any) => (\n              <div key={video.id} className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\n                <div className=\"flex items-center p-4\">\n                  <Avatar className=\"h-10 w-10\">\n                    <AvatarImage src={tiktokData?.avatar} />\n                    <AvatarFallback className=\"bg-black text-[#D4AF37]\">LL</AvatarFallback>\n                  </Avatar>\n                  <div className=\"ml-3\">\n                    <p className=\"font-semibold text-black\">{video.displayName}</p>\n                    <div className=\"flex items-center space-x-2\">\n                      <Globe className=\"h-4 w-4 text-black\" />\n                      <p className=\"text-sm text-gray-500\">TikTok • {video.viewCount} views</p>\n                    </div>\n                  </div>\n                  <Badge className=\"ml-auto bg-black text-[#D4AF37]\">Featured</Badge>\n                </div>\n                \n                <div className=\"px-4 pb-2\">\n                  <h3 className=\"font-semibold text-black mb-2 line-clamp-2\">{video.title}</h3>\n                  <p className=\"text-gray-700 text-sm mb-4 line-clamp-2\">\n                    {video.description}\n                  </p>\n                </div>\n                \n                <div \n                  className=\"relative h-80 cursor-pointer group overflow-hidden bg-gradient-to-br from-purple-900 to-black\"\n                  style={{\n                    backgroundImage: `url(${video.thumbnail})`,\n                    backgroundSize: 'cover',\n                    backgroundPosition: 'center'\n                  }}\n                  onClick={() => window.open(`https://www.tiktok.com/@${video.username}`, '_blank')}\n                >\n                  <div className=\"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors\"></div>\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className=\"bg-white rounded-full p-3 group-hover:bg-gray-100 transition-colors shadow-lg\">\n                      <Play className=\"w-6 h-6 text-black ml-0.5\" />\n                    </div>\n                  </div>\n                  <div className=\"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded\">\n                    {video.duration}\n                  </div>\n                </div>\n                \n                <div className=\"p-4\">\n                  <div className=\"flex items-center justify-between text-gray-500\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"flex items-center space-x-1\">\n                        <Heart className=\"w-5 h-5\" />\n                        <span>{video.likeCount}</span>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        <MessageCircle className=\"w-5 h-5\" />\n                        <span>{video.commentCount}</span>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        <Share2 className=\"w-5 h-5\" />\n                        <span>{video.shareCount}</span>\n                      </div>\n                    </div>\n                    <div className=\"text-sm text-gray-400\">\n                      {new Date(video.publishedAt).toLocaleDateString()}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n      </div>\n    </div>\n  );\n}","size_bytes":37788},"client/src/pages/SponsorshipApplicationPage.tsx":{"content":"import React, { useEffect } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { useForm, useFieldArray } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLocation } from \"wouter\";\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { AlertCircle, Plus, Trash2 } from \"lucide-react\";\n\n// Form schema with support for multiple platforms\nconst platformSchema = z.object({\n  platform: z.string().min(1, \"Please select a platform\"),\n  profileUrl: z.string().url(\"Please provide a valid profile URL\"),\n  subscriberCount: z.coerce.number().min(0, \"Subscriber count must be 0 or greater\").optional(),\n});\n\nconst applicationSchema = z.object({\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\n  email: z.string().email(\"Please provide a valid email address\"),\n  platforms: z.array(platformSchema).min(1, \"Please add at least one platform\"),\n  content: z.string().min(10, \"Please describe your content in at least 10 characters\"),\n  audience: z.string().optional(),\n  message: z.string().min(20, \"Please tell us more about why you're applying (at least 20 characters)\"),\n});\n\ntype ApplicationValues = z.infer<typeof applicationSchema>;\n\nfunction SponsorshipApplicationPage() {\n  const { toast } = useToast();\n  const { user, isLoading } = useAuth();\n  const [, navigate] = useLocation();\n\n  // Create form\n  const form = useForm<ApplicationValues>({\n    resolver: zodResolver(applicationSchema),\n    defaultValues: {\n      name: user?.firstName && user?.lastName \n        ? `${user.firstName} ${user.lastName}` \n        : \"\",\n      email: user?.email || \"\",\n      platforms: [{ platform: \"\", profileUrl: \"\", subscriberCount: undefined }],\n      content: \"\",\n      audience: \"\",\n      message: \"\",\n    },\n  });\n\n  // Field array for platforms\n  const { fields, append, remove } = useFieldArray({\n    control: form.control,\n    name: \"platforms\",\n  });\n\n  // Mutation for submitting the application\n  const { mutate, isPending, isError, error } = useMutation({\n    mutationFn: async (data: ApplicationValues) => {\n      const response = await apiRequest(\"POST\", \"/api/sponsorship-applications\", data);\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || \"Failed to submit application\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Application Submitted\",\n        description: \"Your sponsorship application has been submitted successfully. We'll review it and get back to you soon.\",\n      });\n      navigate(\"/profile\");\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Submission Failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Handle form submission\n  const onSubmit = (data: ApplicationValues) => {\n    if (!user) {\n      toast({\n        title: \"Authentication Required\",\n        description: \"Please log in to submit a sponsorship application.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    mutate(data);\n  };\n\n  // Redirect to login if not authenticated using useEffect\n  useEffect(() => {\n    if (!isLoading && !user) {\n      console.log('SponsorshipApplicationPage: User not authenticated, redirecting to auth');\n      navigate(\"/auth\");\n    } else if (!isLoading && user) {\n      console.log('SponsorshipApplicationPage: User authenticated, showing form');\n    }\n  }, [isLoading, user, navigate]);\n\n  // Show loading while checking authentication\n  if (isLoading) {\n    console.log('SponsorshipApplicationPage: Loading authentication...');\n    return (\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"flex justify-center\">\n          <div className=\"w-16 h-16 border-4 border-[#D4AF37] border-t-transparent rounded-full animate-spin\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  // Don't render anything if not authenticated (redirect will happen)\n  if (!user) {\n    console.log('SponsorshipApplicationPage: No user, returning null');\n    return null;\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-12\">\n      <Helmet>\n        <title>Apply for Sponsorship | Christ Collective</title>\n        <meta name=\"description\" content=\"Apply to become a sponsored content creator with Christ Collective and share your faith-based content with our community.\" />\n      </Helmet>\n      \n      <div className=\"max-w-3xl mx-auto\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold mb-4\">Content Creator Sponsorship Application</h1>\n          <p className=\"text-lg\">\n            Join our network of sponsored content creators sharing faith-based messages across various platforms.\n          </p>\n        </div>\n        \n        <Card>\n          <CardHeader>\n            <CardTitle>Sponsorship Application</CardTitle>\n            <CardDescription>\n              Fill out this form to apply for content creator sponsorship with Christ Collective.\n              We review all applications carefully and will contact you if your content aligns with our mission.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {isError && (\n              <Alert variant=\"destructive\" className=\"mb-6\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>\n                  {error instanceof Error ? error.message : \"An error occurred while submitting your application.\"}\n                </AlertDescription>\n              </Alert>\n            )}\n            \n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Full Name *</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"John Doe\" {...field} />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"email\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Email *</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"john@example.com\" {...field} />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n                \n                {/* Social Media Platforms Section */}\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <FormLabel className=\"text-base font-semibold\">Social Media Platforms *</FormLabel>\n                      <FormDescription>Add all platforms where you create content</FormDescription>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => append({ platform: \"\", profileUrl: \"\", subscriberCount: undefined })}\n                      className=\"flex items-center gap-2\"\n                    >\n                      <Plus className=\"h-4 w-4\" />\n                      Add Platform\n                    </Button>\n                  </div>\n\n                  {fields.map((field, index) => (\n                    <div key={field.id} className=\"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg relative\">\n                      {fields.length > 1 && (\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => remove(index)}\n                          className=\"absolute top-2 right-2 h-8 w-8 p-0 text-red-500 hover:text-red-700\"\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      )}\n                      \n                      <FormField\n                        control={form.control}\n                        name={`platforms.${index}.platform`}\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Platform *</FormLabel>\n                            <Select onValueChange={field.onChange} value={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Select platform\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"YouTube\">YouTube</SelectItem>\n                                <SelectItem value=\"Instagram\">Instagram</SelectItem>\n                                <SelectItem value=\"TikTok\">TikTok</SelectItem>\n                                <SelectItem value=\"Twitter\">Twitter/X</SelectItem>\n                                <SelectItem value=\"Twitch\">Twitch</SelectItem>\n                                <SelectItem value=\"Facebook\">Facebook</SelectItem>\n                                <SelectItem value=\"Podcast\">Podcast</SelectItem>\n                                <SelectItem value=\"Blog\">Blog/Website</SelectItem>\n                                <SelectItem value=\"Other\">Other</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={form.control}\n                        name={`platforms.${index}.profileUrl`}\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Profile URL *</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"https://...\" {...field} />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={form.control}\n                        name={`platforms.${index}.subscriberCount`}\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Followers/Subscribers</FormLabel>\n                            <FormControl>\n                              <Input \n                                type=\"number\" \n                                placeholder=\"1000\" \n                                {...field}\n                                value={field.value || \"\"}\n                                onChange={(e) => field.onChange(e.target.value ? parseInt(e.target.value) : undefined)}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                  ))}\n                </div>\n                \n                <FormField\n                  control={form.control}\n                  name=\"content\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Content Description *</FormLabel>\n                      <FormControl>\n                        <Textarea \n                          placeholder=\"Describe the type of content you create...\"\n                          className=\"resize-none\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"audience\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Target Audience</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"Young adults, families, etc.\" {...field} />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"subscriberCount\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Follower/Subscriber Count</FormLabel>\n                        <FormControl>\n                          <Input \n                            type=\"number\" \n                            placeholder=\"1000\" \n                            {...field}\n                            value={field.value || \"\"}\n                            onChange={(e) => {\n                              const value = e.target.value === \"\" ? undefined : parseInt(e.target.value, 10);\n                              field.onChange(value);\n                            }}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n                \n                <FormField\n                  control={form.control}\n                  name=\"message\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Why do you want to be sponsored? *</FormLabel>\n                      <FormControl>\n                        <Textarea \n                          placeholder=\"Tell us about your mission, goals, and how sponsorship would help you...\"\n                          className=\"min-h-[120px]\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <div className=\"pt-4\">\n                  <Button \n                    type=\"submit\" \n                    className=\"w-full md:w-auto bg-[#D4AF37] hover:bg-[#B8860B] text-black\"\n                    disabled={isPending}\n                  >\n                    {isPending ? \"Submitting...\" : \"Submit Application\"}\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          </CardContent>\n          <CardFooter className=\"flex flex-col text-sm text-gray-500\">\n            <p>\n              * Required fields\n            </p>\n            <p className=\"mt-2\">\n              By submitting this application, you agree to our review process and understand that sponsorship decisions are made at the discretion of Christ Collective.\n            </p>\n          </CardFooter>\n        </Card>\n      </div>\n    </div>\n  );\n}\n\nexport default SponsorshipApplicationPage;","size_bytes":16350},"client/src/pages/SponsorshipApplicationPageNew.tsx":{"content":"import React, { useEffect } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { useForm, useFieldArray } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLocation } from \"wouter\";\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { AlertCircle, Plus, Trash2 } from \"lucide-react\";\n\n// Platform schema for individual platform entries\nconst platformSchema = z.object({\n  platform: z.string().min(1, \"Please select a platform\"),\n  profileUrl: z.string().url(\"Please provide a valid profile URL\"),\n  subscriberCount: z.coerce.number().min(0, \"Subscriber count must be 0 or greater\").optional(),\n});\n\n// Main application schema with multiple platforms\nconst applicationSchema = z.object({\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\n  email: z.string().email(\"Please provide a valid email address\"),\n  platforms: z.array(platformSchema).min(1, \"Please add at least one platform\"),\n  content: z.string().min(10, \"Please describe your content in at least 10 characters\"),\n  audience: z.string().optional(),\n  message: z.string().min(20, \"Please tell us more about why you're applying (at least 20 characters)\"),\n});\n\ntype ApplicationValues = z.infer<typeof applicationSchema>;\n\nfunction SponsorshipApplicationPage() {\n  const { toast } = useToast();\n  const { user, isLoading } = useAuth();\n  const [, navigate] = useLocation();\n\n  // Create form\n  const form = useForm<ApplicationValues>({\n    resolver: zodResolver(applicationSchema),\n    defaultValues: {\n      name: user?.firstName && user?.lastName \n        ? `${user.firstName} ${user.lastName}` \n        : \"\",\n      email: user?.email || \"\",\n      platforms: [{ platform: \"\", profileUrl: \"\", subscriberCount: undefined }],\n      content: \"\",\n      audience: \"\",\n      message: \"\",\n    },\n  });\n\n  // Field array for platforms\n  const { fields, append, remove } = useFieldArray({\n    control: form.control,\n    name: \"platforms\",\n  });\n\n  // Mutation for submitting the application\n  const { mutate, isPending, isError, error } = useMutation({\n    mutationFn: async (data: ApplicationValues) => {\n      console.log('Submitting application data:', data);\n      const response = await apiRequest(\"POST\", \"/api/sponsorship-applications\", data);\n      if (!response.ok) {\n        const errorData = await response.json();\n        console.error('Application submission error:', errorData);\n        \n        // Handle specific validation errors\n        if (errorData.errors && Array.isArray(errorData.errors)) {\n          const errorMessages = errorData.errors.map((err: any) => \n            `${err.path ? err.path.join('.') + ': ' : ''}${err.message}`\n          ).join(', ');\n          throw new Error(`Validation errors: ${errorMessages}`);\n        }\n        \n        throw new Error(errorData.message || \"Failed to submit application\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Application Submitted\",\n        description: \"Your sponsorship application has been submitted successfully. We'll review it and get back to you soon.\",\n      });\n      navigate(\"/profile\");\n    },\n    onError: (error: Error) => {\n      console.error('Application submission failed:', error);\n      \n      // Show more detailed error messages\n      let description = error.message;\n      \n      if (error.message.includes(\"You already have a pending sponsorship application\")) {\n        description = \"You already have a pending application. Please wait for review before submitting another.\";\n      } else if (error.message.includes(\"Invalid data\") || error.message.includes(\"Validation errors\")) {\n        description = \"Please check all fields are filled correctly. Ensure URLs are valid and all required fields are completed.\";\n      } else if (error.message.includes(\"Authentication\") || error.message.includes(\"Unauthorized\")) {\n        description = \"Please log in again and try submitting your application.\";\n      }\n      \n      toast({\n        title: \"Submission Failed\",\n        description,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Handle form submission\n  const onSubmit = (data: ApplicationValues) => {\n    if (!user) {\n      toast({\n        title: \"Authentication Required\", \n        description: \"Please log in to submit a sponsorship application.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Pre-submission validation\n    const validationErrors: string[] = [];\n    \n    // Check if all platforms have valid URLs\n    data.platforms.forEach((platform, index) => {\n      if (!platform.platform) {\n        validationErrors.push(`Platform ${index + 1}: Please select a platform`);\n      }\n      if (!platform.profileUrl) {\n        validationErrors.push(`Platform ${index + 1}: Profile URL is required`);\n      } else if (!platform.profileUrl.startsWith('http')) {\n        validationErrors.push(`Platform ${index + 1}: URL must start with http:// or https://`);\n      }\n    });\n\n    if (validationErrors.length > 0) {\n      toast({\n        title: \"Please Fix Form Errors\",\n        description: validationErrors.join('; '),\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    mutate(data);\n  };\n\n  // Redirect to login if not authenticated using useEffect\n  useEffect(() => {\n    if (!isLoading && !user) {\n      console.log('SponsorshipApplicationPage: User not authenticated, redirecting to auth');\n      navigate(\"/auth\");\n    } else if (!isLoading && user) {\n      console.log('SponsorshipApplicationPage: User authenticated, showing form');\n    }\n  }, [isLoading, user, navigate]);\n\n  // Show loading while checking authentication\n  if (isLoading) {\n    console.log('SponsorshipApplicationPage: Loading authentication...');\n    return (\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"flex justify-center\">\n          <div className=\"w-16 h-16 border-4 border-[#D4AF37] border-t-transparent rounded-full animate-spin\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  // Don't render anything if not authenticated (redirect will happen)\n  if (!user) {\n    console.log('SponsorshipApplicationPage: No user, returning null');\n    return null;\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-12\">\n      <Helmet>\n        <title>Apply for Sponsorship | Christ Collective</title>\n        <meta name=\"description\" content=\"Apply to become a sponsored content creator with Christ Collective and share your faith-based content with our community.\" />\n      </Helmet>\n      \n      <div className=\"max-w-2xl mx-auto\">\n        <Card className=\"shadow-lg border-[#D4AF37]/20\">\n          <CardHeader className=\"text-center bg-gradient-to-r from-black to-gray-800 text-white rounded-t-lg\">\n            <CardTitle className=\"text-2xl font-bold\">Sponsorship Application</CardTitle>\n            <CardDescription className=\"text-gray-200\">\n              Join our community of faith-based content creators\n            </CardDescription>\n          </CardHeader>\n          \n          <CardContent className=\"p-8\">\n            {isError && error && (\n              <Alert variant=\"destructive\" className=\"mb-6\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>\n                  {error.message}\n                </AlertDescription>\n              </Alert>\n            )}\n\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                {/* Personal Information */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Full Name *</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"John Doe\" {...field} />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"email\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Email *</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"john@example.com\" {...field} />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n                \n                {/* Social Media Platforms Section */}\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <FormLabel className=\"text-base font-semibold\">Social Media Platforms *</FormLabel>\n                      <FormDescription>Add all platforms where you create content</FormDescription>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => append({ platform: \"\", profileUrl: \"\", subscriberCount: undefined })}\n                      className=\"flex items-center gap-2\"\n                    >\n                      <Plus className=\"h-4 w-4\" />\n                      Add Platform\n                    </Button>\n                  </div>\n\n                  {fields.map((field, index) => (\n                    <div key={field.id} className=\"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg relative\">\n                      {fields.length > 1 && (\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => remove(index)}\n                          className=\"absolute top-2 right-2 h-8 w-8 p-0 text-red-500 hover:text-red-700\"\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      )}\n                      \n                      <FormField\n                        control={form.control}\n                        name={`platforms.${index}.platform` as const}\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Platform *</FormLabel>\n                            <Select onValueChange={field.onChange} value={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Select platform\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"YouTube\">YouTube</SelectItem>\n                                <SelectItem value=\"Instagram\">Instagram</SelectItem>\n                                <SelectItem value=\"TikTok\">TikTok</SelectItem>\n                                <SelectItem value=\"Twitter\">Twitter/X</SelectItem>\n                                <SelectItem value=\"Twitch\">Twitch</SelectItem>\n                                <SelectItem value=\"Facebook\">Facebook</SelectItem>\n                                <SelectItem value=\"Podcast\">Podcast</SelectItem>\n                                <SelectItem value=\"Blog\">Blog/Website</SelectItem>\n                                <SelectItem value=\"Other\">Other</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={form.control}\n                        name={`platforms.${index}.profileUrl` as const}\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Profile URL *</FormLabel>\n                            <FormControl>\n                              <Input \n                                placeholder=\"https://www.instagram.com/username\" \n                                {...field}\n                                onBlur={(e) => {\n                                  field.onBlur();\n                                  const value = e.target.value;\n                                  if (value && !value.startsWith('http')) {\n                                    form.setError(`platforms.${index}.profileUrl` as const, {\n                                      type: 'manual',\n                                      message: 'URL must start with http:// or https://'\n                                    });\n                                  }\n                                }}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                            <FormDescription className=\"text-xs text-gray-500\">\n                              Include the full URL (e.g., https://www.instagram.com/username)\n                            </FormDescription>\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={form.control}\n                        name={`platforms.${index}.subscriberCount` as const}\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Followers/Subscribers</FormLabel>\n                            <FormControl>\n                              <Input \n                                type=\"number\" \n                                placeholder=\"1000\" \n                                {...field}\n                                value={field.value || \"\"}\n                                onChange={(e) => field.onChange(e.target.value ? parseInt(e.target.value) : undefined)}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                  ))}\n                </div>\n                \n                <FormField\n                  control={form.control}\n                  name=\"content\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Content Description *</FormLabel>\n                      <FormControl>\n                        <Textarea \n                          placeholder=\"Describe the type of content you create...\"\n                          className=\"resize-none\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"audience\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Target Audience</FormLabel>\n                      <FormControl>\n                        <Input placeholder=\"Young adults, families, etc.\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"message\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Why do you want to join? *</FormLabel>\n                      <FormControl>\n                        <Textarea \n                          placeholder=\"Tell us about your faith journey and why you'd like to be sponsored...\"\n                          className=\"resize-none\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <Button \n                  type=\"submit\" \n                  className=\"w-full bg-[#D4AF37] hover:bg-[#B8860B] text-black font-semibold\"\n                  disabled={isPending}\n                >\n                  {isPending ? \"Submitting...\" : \"Submit Application\"}\n                </Button>\n              </form>\n            </Form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n\nexport default SponsorshipApplicationPage;","size_bytes":17568},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/utils/authCheck.ts":{"content":"// Simple authentication check utility that bypasses React Query\nexport async function checkUserAuthentication(): Promise<{ authenticated: boolean; user?: any }> {\n  console.log('Starting authentication check...');\n  try {\n    const response = await fetch('/api/user', {\n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n        'Cache-Control': 'no-cache, no-store, must-revalidate',\n        'Pragma': 'no-cache',\n        'Expires': '0'\n      },\n    });\n\n    console.log('Auth response status:', response.status);\n\n    if (response.ok) {\n      const userData = await response.json();\n      console.log('Auth response data:', userData);\n      if (userData && userData.id) {\n        console.log('User authenticated successfully');\n        return { authenticated: true, user: userData };\n      }\n    }\n    \n    console.log('User not authenticated');\n    return { authenticated: false };\n  } catch (error) {\n    console.error('Authentication check failed:', error);\n    return { authenticated: false };\n  }\n}\n\nexport async function navigateToSponsorshipOrAuth(navigate: (path: string) => void): Promise<void> {\n  console.log('Checking auth status for sponsorship navigation...');\n  const { authenticated } = await checkUserAuthentication();\n  \n  if (authenticated) {\n    console.log('Navigating to sponsorship application...');\n    navigate('/sponsorship-application');\n  } else {\n    console.log('Navigating to auth page...');\n    navigate('/auth');\n  }\n}","size_bytes":1515},"client/src/utils/fetchOverride.js":{"content":"// Create a wrapper around fetch to prevent error overlays\n(function() {\n  // Store the original fetch function\n  const originalFetch = window.fetch;\n  \n  // Create our own fetch function that suppresses errors\n  window.fetch = function(...args) {\n    // Check if we're likely to get an error (not logged in, etc)\n    const url = args[0]?.toString() || '';\n    \n    return originalFetch.apply(this, args)\n      .catch(error => {\n        console.warn('Fetch error intercepted:', url);\n        // Return an empty successful response to prevent errors\n        return new Response(JSON.stringify(null), {\n          status: 200,\n          headers: {'Content-Type': 'application/json'}\n        });\n      });\n  };\n  \n  console.log('Fetch has been overridden to handle errors gracefully');\n})();","size_bytes":787},"client/src/components/home/BusinessSection.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Check, Users, Calendar, Lightbulb, CheckCircle } from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface MembershipTier {\n  id: number;\n  name: string;\n  price: string;\n  description: string;\n  features: string[];\n}\n\nexport default function BusinessSection() {\n  const { user } = useAuth();\n  const isAuthenticated = !!user;\n  \n  // Fetch statistics to get current user count for founding members\n  const { data: statistics, isLoading } = useQuery({\n    queryKey: [\"/api/statistics\"],\n  });\n  \n  const totalUsers = (statistics as any)?.communityMembers || 0;\n\n  return (\n    <section id=\"business\" className=\"py-16 bg-black text-white\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl md:text-4xl font-bold mb-4\">Business Network</h2>\n          <div className=\"w-16 h-1 bg-primary mx-auto mb-6\"></div>\n          <p className=\"text-lg text-gray-300 max-w-3xl mx-auto\">\n            Connect with other Christian business owners and professionals to grow your network with those who share your values.\n          </p>\n        </div>\n        \n        {/* Progress Bar and Founding Member Program */}\n        <div className=\"max-w-4xl mx-auto mb-12\">\n          <div className=\"bg-white rounded-lg p-6 shadow-lg mb-8\">\n            <div className=\"flex justify-between items-center mb-3\">\n              <span className=\"text-sm font-medium text-gray-700\">Founding Members</span>\n              <span className=\"text-sm font-medium text-gray-700\">{totalUsers}/100</span>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-3\">\n              <div \n                className=\"bg-primary h-3 rounded-full transition-all duration-300 shadow-lg shadow-primary/50\" \n                style={{ width: `${Math.min((totalUsers / 100) * 100, 100)}%` }}\n              />\n            </div>\n            <p className=\"text-xs text-gray-500 mt-2 text-center\">\n              {100 - totalUsers > 0 \n                ? `${100 - totalUsers} spots remaining for free lifetime membership`\n                : \"Founding member program complete!\"}\n            </p>\n          </div>\n\n          <Card className=\"bg-white border-2 border-primary/20 rounded-xl shadow-lg\">\n            <CardContent className=\"p-8\">\n              <div className=\"text-center mb-8\">\n                <div className=\"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4\">\n                  <Users className=\"w-8 h-8 text-primary\" />\n                </div>\n                <h3 className=\"text-2xl font-bold mb-2 text-black\">Founding Member Benefits</h3>\n                <p className=\"text-gray-600\">Join the first 100 members and get lifetime access for FREE</p>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-start\">\n                    <CheckCircle className=\"w-5 h-5 text-primary mt-1 mr-3 flex-shrink-0\" />\n                    <div>\n                      <span className=\"font-medium text-black\">Business Directory Access</span>\n                      <p className=\"text-sm text-gray-600\">Connect with Christian business owners nationwide</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start\">\n                    <CheckCircle className=\"w-5 h-5 text-primary mt-1 mr-3 flex-shrink-0\" />\n                    <div>\n                      <span className=\"font-medium text-black\">Monthly Newsletter</span>\n                      <p className=\"text-sm text-gray-600\">Stay updated with industry insights and opportunities</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start\">\n                    <CheckCircle className=\"w-5 h-5 text-primary mt-1 mr-3 flex-shrink-0\" />\n                    <div>\n                      <span className=\"font-medium text-black\">Online Prayer Group</span>\n                      <p className=\"text-sm text-gray-600\">Join fellowship with like-minded professionals</p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-start\">\n                    <CheckCircle className=\"w-5 h-5 text-primary mt-1 mr-3 flex-shrink-0\" />\n                    <div>\n                      <span className=\"font-medium text-black\">Networking Events</span>\n                      <p className=\"text-sm text-gray-600\">Exclusive access to member-only events</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start\">\n                    <CheckCircle className=\"w-5 h-5 text-primary mt-1 mr-3 flex-shrink-0\" />\n                    <div>\n                      <span className=\"font-medium text-black\">Business Spotlight</span>\n                      <p className=\"text-sm text-gray-600\">Get featured in our community showcase</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start\">\n                    <CheckCircle className=\"w-5 h-5 text-primary mt-1 mr-3 flex-shrink-0\" />\n                    <div>\n                      <span className=\"font-medium text-black\">Lifetime Access</span>\n                      <p className=\"text-sm text-gray-600\">No recurring fees, ever</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"text-center\">\n                <Button \n                  size=\"lg\" \n                  className=\"bg-primary text-primary-foreground hover:bg-primary/90 px-8 shadow-lg shadow-primary/50 hover:shadow-primary/70 transition-all duration-300\"\n                  disabled={totalUsers >= 100}\n                  asChild\n                >\n                  {isAuthenticated ? (\n                    <Link href=\"/profile\">\n                      {totalUsers >= 100 ? \"Program Complete\" : \"Join as Founding Member - FREE\"}\n                    </Link>\n                  ) : (\n                    <Link href=\"/auth\">\n                      {totalUsers >= 100 ? \"Program Complete\" : \"Join as Founding Member - FREE\"}\n                    </Link>\n                  )}\n                </Button>\n                <p className=\"text-xs text-gray-500 mt-3\">\n                  {totalUsers < 100 \n                    ? \"Limited time offer - join now while spots are available\"\n                    : \"Thank you to all our founding members!\"}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n        \n        {/* Business Networking Features */}\n        <div className=\"mt-16 grid grid-cols-1 lg:grid-cols-2 gap-12\">\n          <div>\n            <h3 className=\"text-2xl font-semibold mb-6\">Business Community Features</h3>\n            <div className=\"space-y-8\">\n              <div className=\"flex\">\n                <div className=\"flex-shrink-0 mr-4\">\n                  <div className=\"w-12 h-12 bg-primary/80 rounded-full flex items-center justify-center\">\n                    <Users className=\"text-white\" size={24} />\n                  </div>\n                </div>\n                <div>\n                  <h4 className=\"text-xl font-medium mb-2\">Targeted Networking</h4>\n                  <p className=\"text-gray-400\">Connect with other business owners based on industry, location, and specific business needs.</p>\n                </div>\n              </div>\n              \n              <div className=\"flex\">\n                <div className=\"flex-shrink-0 mr-4\">\n                  <div className=\"w-12 h-12 bg-primary/80 rounded-full flex items-center justify-center\">\n                    <Calendar className=\"text-white\" size={24} />\n                  </div>\n                </div>\n                <div>\n                  <h4 className=\"text-xl font-medium mb-2\">Events & Webinars</h4>\n                  <p className=\"text-gray-400\">Participate in regular virtual and in-person events designed to help you grow your business.</p>\n                </div>\n              </div>\n              \n              <div className=\"flex\">\n                <div className=\"flex-shrink-0 mr-4\">\n                  <div className=\"w-12 h-12 bg-primary/80 rounded-full flex items-center justify-center\">\n                    <Lightbulb className=\"text-white\" size={24} />\n                  </div>\n                </div>\n                <div>\n                  <h4 className=\"text-xl font-medium mb-2\">Resource Library</h4>\n                  <p className=\"text-gray-400\">Access faith-based business resources, guides, and tools to help you run your business with integrity.</p>\n                </div>\n              </div>\n            </div>\n            \n            {/* Join Our Growing Network section moved below features */}\n            <div className=\"mt-12\">\n              <h3 className=\"text-2xl font-semibold mb-4\">Join Our Growing Network</h3>\n              <p className=\"text-gray-400 mb-6\">Connect with Christian business owners and professionals across multiple industries worldwide.</p>\n              \n              <Button \n                asChild\n                className=\"bg-primary hover:bg-primary/90 text-white\"\n              >\n                {isAuthenticated ? (\n                  <Link href=\"/profile\">\n                    Create Your Business Profile\n                  </Link>\n                ) : (\n                  <Link href=\"/auth\">\n                    Create Your Business Profile\n                  </Link>\n                )}\n              </Button>\n            </div>\n          </div>\n\n          <div>\n            <img \n              src=\"https://images.unsplash.com/photo-1519389950473-47ba0277781c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&h=600\" \n              alt=\"Business networking event\" \n              className=\"w-full h-auto rounded-xl\"\n            />\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":10287},"client/src/components/home/CTASection.tsx":{"content":"import { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport blueSkyBg from \"@assets/Beautiful_blue_sky_background_7b0e6fef20.jpg\";\nimport communityGroupImg from \"@assets/pexels-bertellifotografia-3752600.jpg\";\n\nexport default function CTASection() {\n  const { isAuthenticated } = useAuth();\n  \n  // Fetch live statistics\n  const { data: statistics, isLoading } = useQuery({\n    queryKey: [\"/api/statistics\"],\n  });\n\n  return (\n    <section \n      className=\"py-20 text-white relative\"\n      style={{\n        backgroundImage: `url(${communityGroupImg})`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundColor: '#121212', // Fallback color\n      }}\n    >\n      <div className=\"absolute inset-0 bg-black/30\"></div>\n      <div className=\"container mx-auto px-4 text-center relative z-10\">\n        <h2 className=\"text-3xl md:text-4xl font-bold mb-4\">Join Our Growing Community Today</h2>\n        <p className=\"text-lg text-white max-w-3xl mx-auto mb-8\">\n          Together, we can make a difference through faith, service, and fellowship.\n        </p>\n        <div className=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 justify-center\">\n          <Button \n            asChild\n            size=\"lg\"\n            className=\"bg-primary hover:bg-primary/90 text-white font-semibold py-3 px-8 rounded-md transition-colors text-lg\"\n          >\n            {isAuthenticated ? (\n              <Link href=\"/profile\">\n                <span>My Account</span>\n              </Link>\n            ) : (\n              <a href=\"/api/login\">Create Your Account</a>\n            )}\n          </Button>\n          <Button \n            asChild\n            size=\"lg\"\n            variant=\"outline\"\n            className=\"bg-transparent border border-white hover:border-primary hover:text-primary text-white font-semibold py-3 px-8 rounded-md transition-colors text-lg\"\n          >\n            <Link href=\"/#about\">\n              <span>Learn More</span>\n            </Link>\n          </Button>\n        </div>\n        \n        <div className=\"mt-12 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 text-center\">\n          <div>\n            <div className=\"text-4xl font-bold text-primary mb-2\">\n              {isLoading ? (\n                <div className=\"h-10 bg-gray-300 rounded animate-pulse\"></div>\n              ) : (\n                `${statistics?.communityMembers || 0}+`\n              )}\n            </div>\n            <p className=\"text-gray-300\">Community Members</p>\n          </div>\n          <div>\n            <div className=\"text-4xl font-bold text-primary mb-2\">\n              {isLoading ? (\n                <div className=\"h-10 bg-gray-300 rounded animate-pulse\"></div>\n              ) : (\n                `$${Math.round(statistics?.donationsRaised || 0).toLocaleString()}+`\n              )}\n            </div>\n            <p className=\"text-gray-300\">Donations Raised</p>\n          </div>\n          <div>\n            <div className=\"text-4xl font-bold text-primary mb-2\">\n              {isLoading ? (\n                <div className=\"h-10 bg-gray-300 rounded animate-pulse\"></div>\n              ) : (\n                `${statistics?.businessMembers || 0}+`\n              )}\n            </div>\n            <p className=\"text-gray-300\">Business Members</p>\n          </div>\n          <div>\n            <div className=\"text-4xl font-bold text-primary mb-2\">\n              {isLoading ? (\n                <div className=\"h-10 bg-gray-300 rounded animate-pulse\"></div>\n              ) : (\n                `${statistics?.industries || 0}+`\n              )}\n            </div>\n            <p className=\"text-gray-300\">Industries</p>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":3857},"client/src/components/home/DonationSection.tsx":{"content":"import { useState } from \"react\";\nimport { Link } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { ImageIcon } from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ntype Campaign = {\n  id: string;\n  title: string;\n  description: string;\n  image?: string;\n  goal: string;\n  currentAmount: string;\n  slug: string;\n};\n\nexport default function DonationSection() {\n  const { isAuthenticated } = useAuth();\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    goal: \"\",\n  });\n\n  // Fetch featured campaigns with error handling\n  const { data: campaigns = [], isLoading } = useQuery<Campaign[]>({\n    queryKey: [\"/api/campaigns\"],\n    queryFn: async ({ queryKey }) => {\n      try {\n        const res = await fetch(queryKey[0] as string, { credentials: \"include\" });\n        if (!res.ok) {\n          if (res.status === 401) {\n            // Return empty array for unauthorized users\n            return [];\n          }\n          throw new Error('Failed to fetch campaigns');\n        }\n        return res.json();\n      } catch (error) {\n        console.error(\"Error fetching campaigns:\", error);\n        return [];\n      }\n    },\n    select: (data: Campaign[]) => data.slice(0, 2), // Only take first 2 for featured section\n  });\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleCreateCampaign = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!isAuthenticated) {\n      toast({\n        title: \"Authentication Required\",\n        description: \"Please log in to create a campaign\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    // Redirect to full create campaign page\n    window.location.href = \"/campaigns/create\";\n  };\n\n  function calculateProgress(current: string, goal: string): number {\n    const currentAmount = parseFloat(current) || 0;\n    const goalAmount = parseFloat(goal) || 1;\n    const percentage = (currentAmount / goalAmount) * 100;\n    return Math.min(percentage, 100);\n  }\n\n  function formatCurrency(amount: string): string {\n    const value = parseFloat(amount) || 0;\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n    }).format(value);\n  }\n\n  return (\n    <section id=\"donate\" className=\"py-16 bg-white\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl md:text-4xl font-bold mb-4 text-black\">Make a Difference</h2>\n          <div className=\"w-16 h-1 bg-primary mx-auto mb-6\"></div>\n          <p className=\"text-lg text-gray-700 max-w-3xl mx-auto\">\n            Support our community initiatives or create your own charitable campaign to help those in need.\n          </p>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-12 mt-12\">\n          <div>\n            <h3 className=\"text-2xl font-semibold mb-6 text-black\">Featured Campaigns</h3>\n            \n            {isLoading ? (\n              <div className=\"space-y-6\">\n                {[1, 2].map((i) => (\n                  <Card key={i} className=\"animate-pulse\">\n                    <div className=\"w-full h-48 bg-gray-200\" />\n                    <CardContent className=\"p-6\">\n                      <div className=\"h-6 bg-gray-200 rounded mb-2 w-3/4\" />\n                      <div className=\"h-4 bg-gray-100 rounded mb-4 w-full\" />\n                      <div className=\"w-full bg-gray-200 rounded-full h-2.5 mb-4\" />\n                      <div className=\"h-10 bg-gray-200 rounded w-full\" />\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : campaigns.length > 0 ? (\n              <div className=\"space-y-6\">\n                {campaigns.map((campaign: Campaign) => (\n                  <Card key={campaign.id} className=\"overflow-hidden hover:shadow-md transition-shadow border border-gray-700 bg-black\">\n                    {campaign.image ? (\n                      <img \n                        src={campaign.image} \n                        alt={campaign.title} \n                        className=\"w-full h-48 object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-48 bg-black flex items-center justify-center\">\n                        <ImageIcon size={48} className=\"text-gray-600\" />\n                      </div>\n                    )}\n                    <CardContent className=\"p-6\">\n                      <h4 className=\"text-xl font-semibold mb-2 text-white\">{campaign.title}</h4>\n                      <p className=\"text-muted-foreground mb-4\">\n                        {campaign.description.length > 100\n                          ? campaign.description.substring(0, 100) + '...'\n                          : campaign.description}\n                      </p>\n                      <div className=\"mb-4\">\n                        <Progress value={calculateProgress(campaign.currentAmount, campaign.goal)} className=\"h-2.5\" />\n                        <div className=\"flex justify-between mt-2 text-sm text-muted-foreground\">\n                          <span>{formatCurrency(campaign.currentAmount)} raised</span>\n                          <span>{formatCurrency(campaign.goal)} goal</span>\n                        </div>\n                      </div>\n                      <Link href={`/donate/checkout/${campaign.id}`}>\n                        <button className=\"w-full inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\n                          <span>Donate Now</span>\n                        </button>\n                      </Link>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <Card className=\"p-6 text-center\">\n                <p className=\"text-gray-300\">No campaigns found.</p>\n              </Card>\n            )}\n            \n          </div>\n          \n          <div className=\"bg-black rounded-xl p-8 border border-gray-700 hover:border-primary transition-colors\">\n            <h3 className=\"text-2xl font-semibold mb-6 text-white\">Start Your Own Campaign</h3>\n            <p className=\"text-gray-400 mb-6\">\n              Creating a fundraising campaign is simple. Share your story, set a goal, and start receiving support from our community.\n            </p>\n            \n            <form onSubmit={handleCreateCampaign} className=\"space-y-6\">\n              <div>\n                <label htmlFor=\"title\" className=\"block text-white font-medium mb-2\">Campaign Title</label>\n                <Input\n                  id=\"title\"\n                  name=\"title\"\n                  value={formData.title}\n                  onChange={handleInputChange}\n                  placeholder=\"Give your campaign a clear title\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"goal\" className=\"block text-white font-medium mb-2\">Fundraising Goal</label>\n                <div className=\"relative\">\n                  <span className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400\">\n                    $\n                  </span>\n                  <Input\n                    id=\"goal\"\n                    name=\"goal\"\n                    type=\"number\"\n                    value={formData.goal}\n                    onChange={handleInputChange}\n                    className=\"pl-8\"\n                    placeholder=\"Amount needed\"\n                  />\n                </div>\n              </div>\n              \n              <div>\n                <label htmlFor=\"description\" className=\"block text-white font-medium mb-2\">Campaign Description</label>\n                <Textarea\n                  id=\"description\"\n                  name=\"description\"\n                  value={formData.description}\n                  onChange={handleInputChange}\n                  rows={4}\n                  placeholder=\"Tell your story and explain the impact of donations\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-white font-medium mb-2\">Campaign Image</label>\n                <div className=\"border-2 border-dashed border-gray-600 rounded-md p-6 text-center\">\n                  <ImageIcon className=\"mx-auto text-gray-400 text-3xl mb-3\" size={32} />\n                  <p className=\"text-gray-400 mb-2\">\n                    Drag and drop an image here, or click to select a file\n                  </p>\n                  <p className=\"text-xs text-gray-500\">Recommended size: 1200 x 675 pixels</p>\n                  <input type=\"file\" className=\"hidden\" />\n                  <Button type=\"button\" variant=\"outline\" className=\"mt-4\">\n                    Select Image\n                  </Button>\n                </div>\n              </div>\n              \n              <Button type=\"submit\" className=\"w-full bg-primary hover:bg-primary/90\">\n                Create Campaign\n              </Button>\n              \n              <div className=\"text-center mt-14\">\n                <Link href=\"/donate\">\n                  <span className=\"inline-block text-primary hover:text-primary/80 font-medium transition-colors cursor-pointer\">\n                    View All Campaigns <span className=\"ml-2\">→</span>\n                  </span>\n                </Link>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":10268},"client/src/components/home/HeroSection.tsx":{"content":"import { useState, useEffect, useCallback } from \"react\";\nimport { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport useEmblaCarousel from 'embla-carousel-react';\nimport { ChevronLeft, ChevronRight, Users, Video, Building2, Heart } from \"lucide-react\";\nimport worldCrossBackground from \"@assets/Untitled design_1749616500817.jpg\";\nimport blueSkyBg from \"@assets/Beautiful_blue_sky_background_7b0e6fef20.jpg\";\nimport businessNetworkImg from \"@assets/pexels-fauxels-3184325.jpg\";\nimport contentCreationImg from \"@assets/pexels-cottonbro-6883807.jpg\";\nimport charityVolunteerImg from \"@assets/pexels-julia-m-cameron-6994855.jpg\";\n\n// Define slider content type\ntype SlideContent = {\n  id: number;\n  image: string;\n  heading: string;\n  subheading: string;\n  primaryButtonText: string;\n  primaryButtonLink: string;\n  secondaryButtonText: string;\n  secondaryButtonLink: string;\n};\n\nexport default function HeroSection() {\n  const { user } = useAuth();\n  const isAuthenticated = !!user;\n  const [emblaRef, emblaApi] = useEmblaCarousel({ loop: true });\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  \n  const slides: SlideContent[] = [\n    {\n      id: 1,\n      image: worldCrossBackground,\n      heading: \"Uniting Christians Worldwide\",\n      subheading: \"Join our global community dedicated to faith, service, and fellowship across all denominations.\",\n      primaryButtonText: isAuthenticated ? \"My Account\" : \"Join the Collective\",\n      primaryButtonLink: isAuthenticated ? \"/profile\" : \"/auth\",\n      secondaryButtonText: \"Learn More\",\n      secondaryButtonLink: \"/#about\",\n    },\n    {\n      id: 2,\n      image: contentCreationImg,\n      heading: \"Create for Christ\",\n      subheading: \"Join our team of creators to receive compensation through sponsorships.\",\n      primaryButtonText: \"Apply Now\",\n      primaryButtonLink: isAuthenticated ? \"/sponsorship-application\" : \"/auth\",\n      secondaryButtonText: \"Learn More\",\n      secondaryButtonLink: \"/sponsored-creators\",\n    },\n    {\n      id: 3,\n      image: businessNetworkImg,\n      heading: \"Christian Business Network\",\n      subheading: \"Join our network of Christian Business Owners.\",\n      primaryButtonText: \"Join Now\",\n      primaryButtonLink: isAuthenticated ? \"/business\" : \"/auth\",\n      secondaryButtonText: \"Learn More\",\n      secondaryButtonLink: \"/business\",\n    },\n    {\n      id: 4,\n      image: charityVolunteerImg,\n      heading: \"Supporting Christian Ministries\",\n      subheading: \"Help us spread the good news by supporting important missions & community programs.\",\n      primaryButtonText: \"Our Missions\",\n      primaryButtonLink: \"/donate\",\n      secondaryButtonText: \"Learn More\",\n      secondaryButtonLink: \"/#mission\",\n    },\n  ];\n\n  const scrollPrev = useCallback(() => {\n    if (emblaApi) emblaApi.scrollPrev();\n  }, [emblaApi]);\n\n  const scrollNext = useCallback(() => {\n    if (emblaApi) emblaApi.scrollNext();\n  }, [emblaApi]);\n\n  const onSelect = useCallback(() => {\n    if (!emblaApi) return;\n    setSelectedIndex(emblaApi.selectedScrollSnap());\n  }, [emblaApi]);\n\n  useEffect(() => {\n    if (!emblaApi) return;\n    onSelect();\n    emblaApi.on(\"select\", onSelect);\n    emblaApi.on(\"reInit\", onSelect);\n\n    return () => {\n      emblaApi.off(\"select\", onSelect);\n      emblaApi.off(\"reInit\", onSelect);\n    };\n  }, [emblaApi, onSelect]);\n\n  return (\n    <section className=\"h-[600px] relative overflow-hidden\">\n      <div className=\"embla h-full\" ref={emblaRef}>\n        <div className=\"embla__container h-full flex\">\n          {slides.map((slide) => (\n            <div key={slide.id} className=\"embla__slide relative h-full flex-[0_0_100%]\">\n              <div \n                className=\"h-full flex items-center justify-center relative bg-cover bg-center\"\n                style={{\n                  backgroundImage: `url(${slide.image})`,\n                  backgroundSize: 'cover',\n                  backgroundPosition: 'center',\n                }}\n              >\n                <div className=\"absolute inset-0 bg-black bg-opacity-40\"></div>\n                <div className=\"container mx-auto px-4 text-center text-white relative z-10\">\n                  <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-4\">{slide.heading}</h1>\n                  <p className=\"text-lg md:text-xl max-w-3xl mx-auto mb-8\">\n                    {slide.subheading}\n                  </p>\n                  <div className=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 justify-center\">\n                    <Link href={slide.primaryButtonLink}>\n                      <button className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-black hover:bg-primary/90 h-11 px-8 font-semibold py-3 text-lg\">\n                        {slide.primaryButtonText}\n                      </button>\n                    </Link>\n                    <Link href={slide.secondaryButtonLink}>\n                      <button className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-white hover:bg-gray-100 text-black h-11 px-8 font-semibold py-3 text-lg\">\n                        {slide.secondaryButtonText}\n                      </button>\n                    </Link>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      {/* Slider Controls with Icons - Hidden on mobile */}\n      <div className=\"absolute z-20 bottom-8 left-0 right-0 justify-center gap-4 hidden md:flex\">\n        {slides.map((_, index) => {\n          // Define icons for each slide\n          const icons = [\n            <Users className=\"w-4 h-4\" />, // Community/Fellowship\n            <Video className=\"w-4 h-4\" />, // Content Creators\n            <Building2 className=\"w-4 h-4\" />, // Business Network\n            <Heart className=\"w-4 h-4\" /> // Donations/Missions\n          ];\n          \n          return (\n            <button\n              key={index}\n              className={`w-12 h-12 rounded-full transition-all duration-300 flex items-center justify-center ${\n                index === selectedIndex \n                  ? \"bg-primary text-white shadow-lg scale-110\" \n                  : \"bg-white bg-opacity-60 text-gray-700 hover:bg-opacity-80\"\n              }`}\n              onClick={() => emblaApi?.scrollTo(index)}\n              aria-label={`Go to slide ${index + 1}`}\n            >\n              {icons[index]}\n            </button>\n          );\n        })}\n      </div>\n      \n      <button\n        className=\"absolute z-20 left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-20 hover:bg-opacity-30 text-white p-2 rounded-full transition-opacity hidden md:block\"\n        onClick={scrollPrev}\n        aria-label=\"Previous slide\"\n      >\n        <ChevronLeft size={24} />\n      </button>\n      \n      <button\n        className=\"absolute z-20 right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-20 hover:bg-opacity-30 text-white p-2 rounded-full transition-opacity hidden md:block\"\n        onClick={scrollNext}\n        aria-label=\"Next slide\"\n      >\n        <ChevronRight size={24} />\n      </button>\n    </section>\n  );\n}\n","size_bytes":7663},"client/src/components/home/MissionSection.tsx":{"content":"import { HandHelping, Heart, Handshake } from \"lucide-react\";\n\nexport default function MissionSection() {\n  return (\n    <section id=\"about\" className=\"py-16 bg-black\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl md:text-4xl font-bold mb-4 text-white\">Our Mission</h2>\n          <div className=\"w-16 h-1 bg-primary mx-auto mb-6\"></div>\n          <p className=\"text-lg text-gray-300 max-w-3xl mx-auto\">\n            Christ Collective exists to unite Christians from all denominations worldwide, fostering community, charity, and business relationships grounded in shared faith.\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12\">\n          <div className=\"bg-white p-8 rounded-xl shadow-sm text-center hover:shadow-md transition-shadow\">\n            <div className=\"w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-6\">\n              <HandHelping className=\"w-8 h-8 text-white\" />\n            </div>\n            <h3 className=\"text-xl font-semibold mb-3 text-black\">Community Service</h3>\n            <p className=\"text-gray-600\">Supporting each other through challenging times and celebrating our shared faith through service.</p>\n          </div>\n\n          <div className=\"bg-white p-8 rounded-xl shadow-sm text-center hover:shadow-md transition-shadow\">\n            <div className=\"w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-6\">\n              <Heart className=\"w-8 h-8 text-white\" />\n            </div>\n            <h3 className=\"text-xl font-semibold mb-3 text-black\">Charitable Giving</h3>\n            <p className=\"text-gray-600\">Creating and supporting meaningful charitable initiatives that reflect our Christian values.</p>\n          </div>\n\n          <div className=\"bg-white p-8 rounded-xl shadow-sm text-center hover:shadow-md transition-shadow\">\n            <div className=\"w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-6\">\n              <Handshake className=\"w-8 h-8 text-white\" />\n            </div>\n            <h3 className=\"text-xl font-semibold mb-3 text-black\">Business Networking</h3>\n            <p className=\"text-gray-600\">Connecting Christian business owners to build relationships that honor our faith and values.</p>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}","size_bytes":2434},"client/src/components/home/TestimonialsSection.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Star } from \"lucide-react\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\n\ninterface Testimonial {\n  name: string;\n  role: string;\n  content: string;\n  rating: number;\n}\n\nexport default function TestimonialsSection() {\n  const testimonials: Testimonial[] = [\n    {\n      name: \"Michael Thompson\",\n      role: \"Thompson Consulting, LLC\",\n      content: \"Christ Collective has transformed my business by connecting me with like-minded entrepreneurs who share my values. The networking events and resources have been invaluable.\",\n      rating: 5\n    },\n    {\n      name: \"Sarah Johnson\",\n      role: \"Grace Community Church\",\n      content: \"The donation platform made it easy for our church to raise funds for our mission trip. The support from the community was overwhelming and we exceeded our goal within weeks.\",\n      rating: 5\n    },\n    {\n      name: \"David Rodriguez\",\n      role: \"Faithful Foundations\",\n      content: \"Being part of Christ Collective has been a blessing. I've met incredible people from different denominations and backgrounds, all united by our shared faith and commitment to service.\",\n      rating: 4.5\n    }\n  ];\n\n  const renderStars = (rating: number) => {\n    const stars = [];\n    const fullStars = Math.floor(rating);\n    const hasHalfStar = rating % 1 !== 0;\n\n    for (let i = 0; i < fullStars; i++) {\n      stars.push(<Star key={`full-${i}`} className=\"fill-primary text-primary\" size={18} />);\n    }\n\n    if (hasHalfStar) {\n      stars.push(\n        <div key=\"half\" className=\"relative\">\n          <Star className=\"text-gray-300\" size={18} />\n          <div className=\"absolute inset-0 overflow-hidden w-1/2\">\n            <Star className=\"fill-primary text-primary\" size={18} />\n          </div>\n        </div>\n      );\n    }\n\n    const remainingStars = 5 - Math.ceil(rating);\n    for (let i = 0; i < remainingStars; i++) {\n      stars.push(<Star key={`empty-${i}`} className=\"text-gray-300\" size={18} />);\n    }\n\n    return stars;\n  };\n\n  return (\n    <section className=\"py-16 bg-white\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl md:text-4xl font-bold mb-4 text-black\">What Our Community Says</h2>\n          <div className=\"w-16 h-1 bg-primary mx-auto mb-6\"></div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n          {testimonials.map((testimonial, index) => (\n            <Card key={index} className=\"bg-white p-8 rounded-xl shadow-[0_0_15px_rgba(255,215,0,0.3)] hover:shadow-[0_0_20px_rgba(255,215,0,0.4)] transition-shadow\">\n              <CardContent className=\"p-0\">\n                <div className=\"flex items-center mb-4\">\n                  <div className=\"flex text-primary\">\n                    {renderStars(testimonial.rating)}\n                  </div>\n                </div>\n                <p className=\"text-gray-600 mb-6\">{testimonial.content}</p>\n                <div className=\"flex items-center\">\n                  <Avatar className=\"h-12 w-12 mr-4\">\n                    <AvatarFallback className=\"bg-gray-200 text-gray-400\">\n                      {testimonial.name.charAt(0)}\n                    </AvatarFallback>\n                  </Avatar>\n                  <div>\n                    <h4 className=\"font-semibold text-black\">{testimonial.name}</h4>\n                    <p className=\"text-sm text-gray-500\">{testimonial.role}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}","size_bytes":3654},"client/src/components/layout/BottomNavigation.tsx":{"content":"import { Home, Compass, Users, User, Plus } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport { cn } from \"@/lib/utils\";\n\nconst navigationItems = [\n  { icon: Home, label: \"Feed\", href: \"/feed\" },\n  { icon: Compass, label: \"Explore\", href: \"/explore\" },\n  { icon: Plus, label: \"Create\", href: \"/create\" },\n  { icon: Users, label: \"Connect\", href: \"/connect\" },\n  { icon: User, label: \"Profile\", href: \"/profile\" },\n];\n\nexport default function BottomNavigation() {\n  const [location] = useLocation();\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 bg-background z-50 bottom-nav-gradient-shadow\">\n      <div className=\"flex justify-around items-center h-16\">\n        {navigationItems.map((item) => {\n          const isActive = location === item.href;\n          const Icon = item.icon;\n          \n          return (\n            <Link key={item.href} href={item.href} className=\"flex-1\">\n              <div className={cn(\n                \"flex flex-col items-center justify-center h-full px-2 py-1 transition-colors\",\n                isActive \n                  ? \"text-primary\" \n                  : \"text-muted-foreground hover:text-foreground\"\n              )}>\n                <Icon className={cn(\"h-6 w-6\", isActive && \"fill-current\")} />\n                <span className=\"text-xs mt-1 font-medium\">{item.label}</span>\n              </div>\n            </Link>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}","size_bytes":1450},"client/src/components/layout/Footer.tsx":{"content":"import { Link } from \"wouter\";\nimport { Logo } from \"@/components/Logo\";\nimport { Facebook, Twitter, Instagram, Youtube, MapPin, Phone, Mail } from \"lucide-react\";\n\nexport default function Footer() {\n  return (\n    <footer className=\"bg-black text-white pt-16 pb-8\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8 mb-12\">\n          <div>\n            <Logo dark className=\"mb-6\" />\n            <p className=\"text-gray-400 mb-4\">Uniting Christians worldwide through community, charity, and business.</p>\n            <div className=\"flex space-x-4\">\n              <a href=\"#\" className=\"text-gray-400 hover:text-primary transition-colors\">\n                <Facebook size={20} />\n              </a>\n              <a href=\"#\" className=\"text-gray-400 hover:text-primary transition-colors\">\n                <Twitter size={20} />\n              </a>\n              <a href=\"https://www.instagram.com/christcollective369/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-gray-400 hover:text-primary transition-colors\">\n                <Instagram size={20} />\n              </a>\n              <a href=\"#\" className=\"text-gray-400 hover:text-primary transition-colors\">\n                <Youtube size={20} />\n              </a>\n            </div>\n          </div>\n          \n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">Quick Links</h4>\n            <ul className=\"space-y-2\">\n              <li>\n                <Link href=\"/\">\n                  <span className=\"text-gray-400 hover:text-primary transition-colors cursor-pointer\">Home</span>\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/#about\">\n                  <span className=\"text-gray-400 hover:text-primary transition-colors cursor-pointer\">About Us</span>\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/donate\">\n                  <span className=\"text-gray-400 hover:text-primary transition-colors cursor-pointer\">Donate</span>\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/business\">\n                  <span className=\"text-gray-400 hover:text-primary transition-colors cursor-pointer\">Business Network</span>\n                </Link>\n              </li>\n            </ul>\n          </div>\n          \n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">Resources</h4>\n            <ul className=\"space-y-2\">\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-primary transition-colors\">Blog</a></li>\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-primary transition-colors\">Events</a></li>\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-primary transition-colors\">Success Stories</a></li>\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-primary transition-colors\">FAQs</a></li>\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-primary transition-colors\">Support</a></li>\n            </ul>\n          </div>\n          \n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">Contact Us</h4>\n            <ul className=\"space-y-2\">\n              <li className=\"flex items-start\">\n                <MapPin className=\"text-primary mt-1 mr-3\" size={18} />\n                <span className=\"text-gray-400\">123 Faith Street, Suite 100<br />Houston, TX 77001</span>\n              </li>\n              <li className=\"flex items-center\">\n                <Phone className=\"text-primary mr-3\" size={18} />\n                <span className=\"text-gray-400\">(123) 456-7890</span>\n              </li>\n              <li className=\"flex items-center\">\n                <Mail className=\"text-primary mr-3\" size={18} />\n                <span className=\"text-gray-400\">luis@christcollective.info</span>\n              </li>\n            </ul>\n          </div>\n        </div>\n        \n        <hr className=\"border-gray-700 mb-8\" />\n        \n        <div className=\"flex flex-col md:flex-row justify-between items-center\">\n          <p className=\"text-gray-500 text-sm mb-4 md:mb-0\">&copy; {new Date().getFullYear()} Christ Collective. All rights reserved.</p>\n          <div className=\"flex space-x-6\">\n            <a href=\"#\" className=\"text-gray-500 hover:text-primary text-sm transition-colors\">Privacy Policy</a>\n            <a href=\"#\" className=\"text-gray-500 hover:text-primary text-sm transition-colors\">Terms of Service</a>\n            <a href=\"#\" className=\"text-gray-500 hover:text-primary text-sm transition-colors\">Cookie Policy</a>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":4683},"client/src/components/layout/Header.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Logo } from \"@/components/Logo\";\nimport { Menu, X, Bell } from \"lucide-react\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useCreatorStatus } from \"@/hooks/useCreatorStatus\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { User } from \"@shared/schema\";\n\nexport default function Header() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [showNotificationAnimation, setShowNotificationAnimation] = useState(false);\n  const [path] = useLocation();\n  const { user, isLoading } = useAuth();\n  const { data: creatorStatus } = useCreatorStatus();\n  const prevNotificationCount = useRef<number>(0);\n  \n  // Check if user has a ministry profile\n  const { data: ministryProfile } = useQuery({\n    queryKey: [\"/api/user/ministry-profile\"],\n    enabled: !!user,\n  });\n\n  // Get notification count\n  const { data: unreadCount } = useQuery<{ count: number } | null>({\n    queryKey: [\"/api/notifications/unread-count\"],\n    enabled: !!user,\n  });\n\n  const notificationCount = unreadCount?.count || 0;\n\n  // Trigger animation when notification count increases\n  useEffect(() => {\n    if (notificationCount > prevNotificationCount.current && prevNotificationCount.current > 0) {\n      setShowNotificationAnimation(true);\n      const timer = setTimeout(() => setShowNotificationAnimation(false), 600);\n      return () => clearTimeout(timer);\n    }\n    prevNotificationCount.current = notificationCount;\n  }, [notificationCount]);\n  \n  // Close mobile menu when route changes\n  useEffect(() => {\n    setIsOpen(false);\n  }, [path]);\n\n  const navItems = [\n    { name: \"Home\", path: \"/\" },\n    { name: \"Donate\", path: \"/donate\" },\n    { name: \"Creators\", path: \"/creators\" },\n    { name: \"Business\", path: \"/business\" },\n    { name: \"Ministries\", path: \"/ministries\" },\n    { name: \"About\", path: \"/about\" },\n  ];\n\n  return (\n    <header className=\"bg-background sticky top-0 z-50 header-gradient-shadow\">\n      <div className=\"container mx-auto px-4 py-3 flex justify-between items-center\">\n        <Link href=\"/\">\n          <div className=\"cursor-pointer\">\n            <Logo />\n          </div>\n        </Link>\n        \n        {/* Desktop Navigation */}\n        <nav className=\"hidden md:flex items-center space-x-8\">\n          {navItems.map((item) => (\n            <Link key={item.path} href={item.path}>\n              <div className=\"text-foreground hover:text-primary transition-colors font-medium cursor-pointer\">\n                {item.name}\n              </div>\n            </Link>\n          ))}\n        </nav>\n        \n        <div className=\"flex items-center space-x-4\">\n          {isLoading ? (\n            <div className=\"h-8 w-8 rounded-full bg-muted animate-pulse\" />\n          ) : user ? (\n            <>\n              {/* Notifications Bell */}\n              <Link href=\"/notifications\">\n                <Button variant=\"ghost\" size=\"sm\" className=\"relative group bg-transparent hover:bg-transparent\">\n                  <Bell className={`h-5 w-5 transition-all duration-300 ${\n                    notificationCount > 0 \n                      ? `text-[#D4AF37] ${showNotificationAnimation ? 'bell-animate' : 'animate-pulse'} notification-glow` \n                      : 'text-gray-400 group-hover:text-[#D4AF37] group-hover:scale-110'\n                  }`} />\n                  {notificationCount > 0 && (\n                    <span className={`absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center shadow-lg font-semibold ${\n                      showNotificationAnimation ? 'notification-pop' : 'animate-bounce'\n                    }`}>\n                      {notificationCount > 9 ? '9+' : notificationCount}\n                    </span>\n                  )}\n                  {notificationCount > 0 && (\n                    <div className=\"absolute -top-1 -right-1 bg-red-500 rounded-full h-5 w-5 animate-ping opacity-25\"></div>\n                  )}\n                  {notificationCount > 0 && (\n                    <div className=\"absolute -top-1 -right-1 bg-[#D4AF37] rounded-full h-6 w-6 animate-pulse opacity-20\"></div>\n                  )}\n                </Button>\n              </Link>\n              \n              <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"ghost\" className=\"relative h-10 w-10 rounded-full\">\n                  <Avatar className=\"h-10 w-10\">\n                    <AvatarImage src={user?.profileImageUrl || undefined} alt={user?.firstName || \"User\"} />\n                    <AvatarFallback>\n                      {user?.firstName?.[0] || user?.email?.[0] || \"U\"}\n                    </AvatarFallback>\n                  </Avatar>\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuItem asChild>\n                  <Link href=\"/profile\">\n                    <div className=\"cursor-pointer w-full\">Profile</div>\n                  </Link>\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild>\n                  <Link href=\"/manage-campaigns\">\n                    <div className=\"cursor-pointer w-full\">Manage Campaigns</div>\n                  </Link>\n                </DropdownMenuItem>\n                {creatorStatus?.isCreator && (\n                  <DropdownMenuItem asChild>\n                    <Link href=\"/creator-profile\">\n                      <div className=\"cursor-pointer w-full\">Creator Profile</div>\n                    </Link>\n                  </DropdownMenuItem>\n                )}\n                {ministryProfile && (\n                  <DropdownMenuItem asChild>\n                    <Link href=\"/edit-ministry-profile\">\n                      <div className=\"cursor-pointer w-full\">Edit Ministry Profile</div>\n                    </Link>\n                  </DropdownMenuItem>\n                )}\n                {user?.isAdmin && (\n                  <DropdownMenuItem asChild>\n                    <Link href=\"/admin\">\n                      <div className=\"cursor-pointer w-full\">Admin Dashboard</div>\n                    </Link>\n                  </DropdownMenuItem>\n                )}\n                <DropdownMenuItem asChild>\n                  <a href=\"/api/logout\" className=\"cursor-pointer w-full\">Log Out</a>\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n            </>\n          ) : (\n            <>\n              <Link href=\"/auth\">\n                <div className=\"hidden md:block text-foreground hover:text-primary transition-colors font-medium cursor-pointer\">\n                  Log In\n                </div>\n              </Link>\n              <Link href=\"/auth\">\n                <div className=\"hidden md:block bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-md transition-colors cursor-pointer\">\n                  Sign Up\n                </div>\n              </Link>\n            </>\n          )}\n          \n          {/* Mobile menu button */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"md:hidden\"\n            onClick={() => setIsOpen(!isOpen)}\n          >\n            {isOpen ? (\n              <X className=\"h-6 w-6\" />\n            ) : (\n              <Menu className=\"h-6 w-6\" />\n            )}\n          </Button>\n        </div>\n      </div>\n      \n      {/* Mobile Navigation */}\n      {isOpen && (\n        <div className=\"md:hidden bg-background\">\n          <div className=\"container mx-auto px-4 py-3 flex flex-col space-y-4\">\n            {navItems.map((item) => (\n              <Link key={item.path} href={item.path}>\n                <div className=\"text-foreground hover:text-primary transition-colors font-medium py-2 cursor-pointer\">\n                  {item.name}\n                </div>\n              </Link>\n            ))}\n            {user ? (\n              <>\n                <hr className=\"border-gray-200\" />\n                <a \n                  href=\"/api/logout\" \n                  className=\"text-foreground hover:text-primary transition-colors font-medium py-2\"\n                >\n                  Log Out\n                </a>\n              </>\n            ) : (\n              <div className=\"flex space-x-4\">\n                <Link href=\"/auth\">\n                  <div className=\"text-foreground hover:text-primary transition-colors font-medium py-2 cursor-pointer\">\n                    Log In\n                  </div>\n                </Link>\n                <Link href=\"/auth\">\n                  <div className=\"bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-md transition-colors cursor-pointer\">\n                    Sign Up\n                  </div>\n                </Link>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </header>\n  );\n}\n","size_bytes":9198},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full object-cover\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1432},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/image-upload.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Upload, X, Image as ImageIcon } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface ImageUploadProps {\n  currentImage?: string;\n  onImageChange: (imageUrl: string) => void;\n  uploadEndpoint: string;\n  fieldName: string;\n  label: string;\n  className?: string;\n}\n\nexport function ImageUpload({\n  currentImage,\n  onImageChange,\n  uploadEndpoint,\n  fieldName,\n  label,\n  className = \"\"\n}: ImageUploadProps) {\n  const [isUploading, setIsUploading] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState<string>(currentImage || \"\");\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      toast({\n        title: \"Invalid file type\",\n        description: \"Please select an image file\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Validate file size (5MB limit)\n    if (file.size > 5 * 1024 * 1024) {\n      toast({\n        title: \"File too large\",\n        description: \"Please select an image smaller than 5MB\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      setIsUploading(true);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setPreviewUrl(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n\n      // Upload file\n      const formData = new FormData();\n      formData.append(fieldName, file);\n\n      const response = await fetch(uploadEndpoint, {\n        method: 'POST',\n        body: formData,\n        credentials: 'include'\n      });\n\n      if (!response.ok) {\n        throw new Error('Upload failed');\n      }\n\n      const result = await response.json();\n      onImageChange(result.imageUrl || result.logoUrl);\n      \n      toast({\n        title: \"Upload successful\",\n        description: `${label} has been updated`,\n      });\n    } catch (error) {\n      console.error('Upload error:', error);\n      toast({\n        title: \"Upload failed\",\n        description: \"Failed to upload image. Please try again.\",\n        variant: \"destructive\",\n      });\n      setPreviewUrl(currentImage || \"\");\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const removeImage = () => {\n    setPreviewUrl(\"\");\n    onImageChange(\"\");\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      <div className=\"flex items-center justify-between\">\n        <label className=\"text-sm font-medium\">{label}</label>\n        {previewUrl && (\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={removeImage}\n            className=\"text-red-500 hover:text-red-700\"\n          >\n            <X className=\"w-4 h-4 mr-1\" />\n            Remove\n          </Button>\n        )}\n      </div>\n\n      {previewUrl ? (\n        <div className=\"relative\">\n          <img\n            src={previewUrl}\n            alt=\"Preview\"\n            className=\"w-32 h-32 object-cover rounded-lg border border-gray-300\"\n          />\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => fileInputRef.current?.click()}\n            disabled={isUploading}\n            className=\"mt-2\"\n          >\n            <Upload className=\"w-4 h-4 mr-2\" />\n            {isUploading ? \"Uploading...\" : \"Change Image\"}\n          </Button>\n        </div>\n      ) : (\n        <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n          <ImageIcon className=\"w-12 h-12 mx-auto text-gray-400 mb-4\" />\n          <p className=\"text-sm text-gray-500 mb-4\">\n            Click to upload an image or drag and drop\n          </p>\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            onClick={() => fileInputRef.current?.click()}\n            disabled={isUploading}\n          >\n            <Upload className=\"w-4 h-4 mr-2\" />\n            {isUploading ? \"Uploading...\" : \"Select Image\"}\n          </Button>\n        </div>\n      )}\n\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleFileSelect}\n        className=\"hidden\"\n      />\n      \n      <p className=\"text-xs text-gray-500\">\n        Supported formats: JPG, PNG, GIF. Max size: 5MB\n      </p>\n    </div>\n  );\n}","size_bytes":4710},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }","size_bytes":755},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209}},"version":1}